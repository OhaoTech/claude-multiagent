(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jy={exports:{}},Sh={};var T$;function _Y(){if(T$)return Sh;T$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return Sh.Fragment=e,Sh.jsx=n,Sh.jsxs=n,Sh}var Q$;function SY(){return Q$||(Q$=1,Jy.exports=_Y()),Jy.exports}var g=SY(),ex={exports:{}},Ze={};var E$;function wY(){if(E$)return Ze;E$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),m=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function _(V,F,z){this.props=V,this.context=F,this.refs=S,this.updater=z||y}_.prototype.isReactComponent={},_.prototype.setState=function(V,F){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,F,"setState")},_.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=_.prototype;function k(V,F,z){this.props=V,this.context=F,this.refs=S,this.updater=z||y}var T=k.prototype=new Q;T.constructor=k,x(T,_.prototype),T.isPureReactComponent=!0;var E=Array.isArray;function C(){}var P={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function B(V,F,z){var H=z.ref;return{$$typeof:t,type:V,key:F,ref:H!==void 0?H:null,props:z}}function N(V,F){return B(V.type,F,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function $(V){var F={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(z){return F[z]})}var I=/\/+/g;function j(V,F){return typeof V=="object"&&V!==null&&V.key!=null?$(""+V.key):F.toString(36)}function D(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(F){V.status==="pending"&&(V.status="fulfilled",V.value=F)},function(F){V.status==="pending"&&(V.status="rejected",V.reason=F)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function R(V,F,z,H,K){var ee=typeof V;(ee==="undefined"||ee==="boolean")&&(V=null);var ie=!1;if(V===null)ie=!0;else switch(ee){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(V.$$typeof){case t:case e:ie=!0;break;case f:return ie=V._init,R(ie(V._payload),F,z,H,K)}}if(ie)return K=K(V),ie=H===""?"."+j(V,0):H,E(K)?(z="",ie!=null&&(z=ie.replace(I,"$&/")+"/"),R(K,F,z,"",function(_e){return _e})):K!=null&&(M(K)&&(K=N(K,z+(K.key==null||V&&V.key===K.key?"":(""+K.key).replace(I,"$&/")+"/")+ie)),F.push(K)),1;ie=0;var le=H===""?".":H+":";if(E(V))for(var ae=0;ae<V.length;ae++)H=V[ae],ee=le+j(H,ae),ie+=R(H,F,z,ee,K);else if(ae=v(V),typeof ae=="function")for(V=ae.call(V),ae=0;!(H=V.next()).done;)H=H.value,ee=le+j(H,ae++),ie+=R(H,F,z,ee,K);else if(ee==="object"){if(typeof V.then=="function")return R(D(V),F,z,H,K);throw F=String(V),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ie}function W(V,F,z){if(V==null)return V;var H=[],K=0;return R(V,H,"","",function(ee){return F.call(z,ee,K++)}),H}function U(V){if(V._status===-1){var F=V._result;F=F(),F.then(function(z){(V._status===0||V._status===-1)&&(V._status=1,V._result=z)},function(z){(V._status===0||V._status===-1)&&(V._status=2,V._result=z)}),V._status===-1&&(V._status=0,V._result=F)}if(V._status===1)return V._result.default;throw V._result}var G=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},q={map:W,forEach:function(V,F,z){W(V,function(){F.apply(this,arguments)},z)},count:function(V){var F=0;return W(V,function(){F++}),F},toArray:function(V){return W(V,function(F){return F})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ze.Activity=d,Ze.Children=q,Ze.Component=_,Ze.Fragment=n,Ze.Profiler=r,Ze.PureComponent=k,Ze.StrictMode=i,Ze.Suspense=c,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(V){return P.H.useMemoCache(V)}},Ze.cache=function(V){return function(){return V.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(V,F,z){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var H=x({},V.props),K=V.key;if(F!=null)for(ee in F.key!==void 0&&(K=""+F.key),F)!L.call(F,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&F.ref===void 0||(H[ee]=F[ee]);var ee=arguments.length-2;if(ee===1)H.children=z;else if(1<ee){for(var ie=Array(ee),le=0;le<ee;le++)ie[le]=arguments[le+2];H.children=ie}return B(V.type,K,H)},Ze.createContext=function(V){return V={$$typeof:a,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},Ze.createElement=function(V,F,z){var H,K={},ee=null;if(F!=null)for(H in F.key!==void 0&&(ee=""+F.key),F)L.call(F,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(K[H]=F[H]);var ie=arguments.length-2;if(ie===1)K.children=z;else if(1<ie){for(var le=Array(ie),ae=0;ae<ie;ae++)le[ae]=arguments[ae+2];K.children=le}if(V&&V.defaultProps)for(H in ie=V.defaultProps,ie)K[H]===void 0&&(K[H]=ie[H]);return B(V,ee,K)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(V){return{$$typeof:o,render:V}},Ze.isValidElement=M,Ze.lazy=function(V){return{$$typeof:f,_payload:{_status:-1,_result:V},_init:U}},Ze.memo=function(V,F){return{$$typeof:u,type:V,compare:F===void 0?null:F}},Ze.startTransition=function(V){var F=P.T,z={};P.T=z;try{var H=V(),K=P.S;K!==null&&K(z,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(C,G)}catch(ee){G(ee)}finally{F!==null&&z.types!==null&&(F.types=z.types),P.T=F}},Ze.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ze.use=function(V){return P.H.use(V)},Ze.useActionState=function(V,F,z){return P.H.useActionState(V,F,z)},Ze.useCallback=function(V,F){return P.H.useCallback(V,F)},Ze.useContext=function(V){return P.H.useContext(V)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(V,F){return P.H.useDeferredValue(V,F)},Ze.useEffect=function(V,F){return P.H.useEffect(V,F)},Ze.useEffectEvent=function(V){return P.H.useEffectEvent(V)},Ze.useId=function(){return P.H.useId()},Ze.useImperativeHandle=function(V,F,z){return P.H.useImperativeHandle(V,F,z)},Ze.useInsertionEffect=function(V,F){return P.H.useInsertionEffect(V,F)},Ze.useLayoutEffect=function(V,F){return P.H.useLayoutEffect(V,F)},Ze.useMemo=function(V,F){return P.H.useMemo(V,F)},Ze.useOptimistic=function(V,F){return P.H.useOptimistic(V,F)},Ze.useReducer=function(V,F,z){return P.H.useReducer(V,F,z)},Ze.useRef=function(V){return P.H.useRef(V)},Ze.useState=function(V){return P.H.useState(V)},Ze.useSyncExternalStore=function(V,F,z){return P.H.useSyncExternalStore(V,F,z)},Ze.useTransition=function(){return P.H.useTransition()},Ze.version="19.2.3",Ze}var P$;function ad(){return P$||(P$=1,ex.exports=wY()),ex.exports}var X=ad();const Vh=sd(X);var tx={exports:{}},wh={},nx={exports:{}},ix={};var A$;function kY(){return A$||(A$=1,(function(t){function e(R,W){var U=R.length;R.push(W);e:for(;0<U;){var G=U-1>>>1,q=R[G];if(0<r(q,W))R[G]=W,R[U]=q,U=G;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var W=R[0],U=R.pop();if(U!==W){R[0]=U;e:for(var G=0,q=R.length,V=q>>>1;G<V;){var F=2*(G+1)-1,z=R[F],H=F+1,K=R[H];if(0>r(z,U))H<q&&0>r(K,z)?(R[G]=K,R[H]=U,G=H):(R[G]=z,R[F]=U,G=F);else if(H<q&&0>r(K,U))R[G]=K,R[H]=U,G=H;else break e}}return W}function r(R,W){var U=R.sortIndex-W.sortIndex;return U!==0?U:R.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],f=1,d=null,m=3,v=!1,y=!1,x=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(R){for(var W=n(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=R)i(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function E(R){if(x=!1,T(R),!y)if(n(c)!==null)y=!0,C||(C=!0,$());else{var W=n(u);W!==null&&D(E,W.startTime-R)}}var C=!1,P=-1,L=5,B=-1;function N(){return S?!0:!(t.unstable_now()-B<L)}function M(){if(S=!1,C){var R=t.unstable_now();B=R;var W=!0;try{e:{y=!1,x&&(x=!1,Q(P),P=-1),v=!0;var U=m;try{t:{for(T(R),d=n(c);d!==null&&!(d.expirationTime>R&&N());){var G=d.callback;if(typeof G=="function"){d.callback=null,m=d.priorityLevel;var q=G(d.expirationTime<=R);if(R=t.unstable_now(),typeof q=="function"){d.callback=q,T(R),W=!0;break t}d===n(c)&&i(c),T(R)}else i(c);d=n(c)}if(d!==null)W=!0;else{var V=n(u);V!==null&&D(E,V.startTime-R),W=!1}}break e}finally{d=null,m=U,v=!1}W=void 0}}finally{W?$():C=!1}}}var $;if(typeof k=="function")$=function(){k(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,j=I.port2;I.port1.onmessage=M,$=function(){j.postMessage(null)}}else $=function(){_(M,0)};function D(R,W){P=_(function(){R(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var U=m;m=W;try{return R()}finally{m=U}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=m;m=R;try{return W()}finally{m=U}},t.unstable_scheduleCallback=function(R,W,U){var G=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?G+U:G):U=G,R){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=U+q,R={id:f++,callback:W,priorityLevel:R,startTime:U,expirationTime:q,sortIndex:-1},U>G?(R.sortIndex=U,e(u,R),n(c)===null&&R===n(u)&&(x?(Q(P),P=-1):x=!0,D(E,U-G))):(R.sortIndex=q,e(c,R),y||v||(y=!0,C||(C=!0,$()))),R},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(R){var W=m;return function(){var U=m;m=W;try{return R.apply(this,arguments)}finally{m=U}}}})(ix)),ix}var R$;function CY(){return R$||(R$=1,nx.exports=kY()),nx.exports}var rx={exports:{}},Hn={};var $$;function TY(){if($$)return Hn;$$=1;var t=ad();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,u,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:d==null?null:""+d,children:c,containerInfo:u,implementation:f}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hn.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,f)},Hn.flushSync=function(c){var u=a.T,f=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=u,i.p=f,i.d.f()}},Hn.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(c,u))},Hn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Hn.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,d=o(f,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?i.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:m,fetchPriority:v}):f==="script"&&i.d.X(c,{crossOrigin:d,integrity:m,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Hn.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);i.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(c)},Hn.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,d=o(f,u.crossOrigin);i.d.L(c,f,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Hn.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);i.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(c)},Hn.requestFormReset=function(c){i.d.r(c)},Hn.unstable_batchedUpdates=function(c,u){return c(u)},Hn.useFormState=function(c,u,f){return a.H.useFormState(c,u,f)},Hn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Hn.version="19.2.3",Hn}var N$;function s6(){if(N$)return rx.exports;N$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rx.exports=TY(),rx.exports}var M$;function QY(){if(M$)return wh;M$=1;var t=CY(),e=ad(),n=s6();function i(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var h=l,p=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(p=h.return),l=h.return;while(l)}return h.tag===3?p:null}function a(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function o(l){if(l.tag===31){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function c(l){if(s(l)!==l)throw Error(i(188))}function u(l){var h=l.alternate;if(!h){if(h=s(l),h===null)throw Error(i(188));return h!==l?null:l}for(var p=l,O=h;;){var b=p.return;if(b===null)break;var w=b.alternate;if(w===null){if(O=b.return,O!==null){p=O;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===p)return c(b),l;if(w===O)return c(b),h;w=w.sibling}throw Error(i(188))}if(p.return!==O.return)p=b,O=w;else{for(var A=!1,Z=b.child;Z;){if(Z===p){A=!0,p=b,O=w;break}if(Z===O){A=!0,O=b,p=w;break}Z=Z.sibling}if(!A){for(Z=w.child;Z;){if(Z===p){A=!0,p=w,O=b;break}if(Z===O){A=!0,O=w,p=b;break}Z=Z.sibling}if(!A)throw Error(i(189))}}if(p.alternate!==O)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?l:h}function f(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=f(l),h!==null)return h;l=l.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=M&&l[M]||l["@@iterator"],typeof l=="function"?l:null)}var I=Symbol.for("react.client.reference");function j(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===I?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case k:return l.displayName||"Context";case Q:return(l._context.displayName||"Context")+".Consumer";case T:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return h=l.displayName||null,h!==null?h:j(l.type)||"Memo";case L:h=l._payload,l=l._init;try{return j(l(h))}catch{}}return null}var D=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},G=[],q=-1;function V(l){return{current:l}}function F(l){0>q||(l.current=G[q],G[q]=null,q--)}function z(l,h){q++,G[q]=l.current,l.current=h}var H=V(null),K=V(null),ee=V(null),ie=V(null);function le(l,h){switch(z(ee,h),z(K,l),z(H,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?FR(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=FR(h),l=GR(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}F(H),z(H,l)}function ae(){F(H),F(K),F(ee)}function _e(l){l.memoizedState!==null&&z(ie,l);var h=H.current,p=GR(h,l.type);h!==p&&(z(K,l),z(H,p))}function ke(l){K.current===l&&(F(H),F(K)),ie.current===l&&(F(ie),yh._currentValue=U)}var Ee,ge;function $e(l){if(Ee===void 0)try{throw Error()}catch(p){var h=p.stack.trim().match(/\n( *(at )?)/);Ee=h&&h[1]||"",ge=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+l+ge}var Ae=!1;function Ye(l,h){if(!l||Ae)return"";Ae=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(h){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ce){var oe=ce}Reflect.construct(l,[],pe)}else{try{pe.call()}catch(ce){oe=ce}l.call(pe.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(pe=l())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=O.DetermineComponentFrameRoot(),A=w[0],Z=w[1];if(A&&Z){var J=A.split(`
`),se=Z.split(`
`);for(b=O=0;O<J.length&&!J[O].includes("DetermineComponentFrameRoot");)O++;for(;b<se.length&&!se[b].includes("DetermineComponentFrameRoot");)b++;if(O===J.length||b===se.length)for(O=J.length-1,b=se.length-1;1<=O&&0<=b&&J[O]!==se[b];)b--;for(;1<=O&&0<=b;O--,b--)if(J[O]!==se[b]){if(O!==1||b!==1)do if(O--,b--,0>b||J[O]!==se[b]){var he=`
`+J[O].replace(" at new "," at ");return l.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",l.displayName)),he}while(1<=O&&0<=b);break}}}finally{Ae=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?$e(p):""}function De(l,h){switch(l.tag){case 26:case 27:case 5:return $e(l.type);case 16:return $e("Lazy");case 13:return l.child!==h&&h!==null?$e("Suspense Fallback"):$e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return Ye(l.type,!1);case 11:return Ye(l.type.render,!1);case 1:return Ye(l.type,!0);case 31:return $e("Activity");default:return""}}function nn(l){try{var h="",p=null;do h+=De(l,p),p=l,l=l.return;while(l);return h}catch(O){return`
Error generating stack: `+O.message+`
`+O.stack}}var Zt=Object.prototype.hasOwnProperty,Zn=t.unstable_scheduleCallback,Vn=t.unstable_cancelCallback,kn=t.unstable_shouldYield,jt=t.unstable_requestPaint,zt=t.unstable_now,Ai=t.unstable_getCurrentPriorityLevel,ue=t.unstable_ImmediatePriority,ve=t.unstable_UserBlockingPriority,Me=t.unstable_NormalPriority,Ve=t.unstable_LowPriority,Je=t.unstable_IdlePriority,$n=t.log,hi=t.unstable_setDisableYieldValue,Et=null,Ot=null;function Wn(l){if(typeof $n=="function"&&hi(l),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Et,l)}catch{}}var vt=Math.clz32?Math.clz32:B0,Xr=Math.log,Ri=Math.LN2;function B0(l){return l>>>=0,l===0?32:31-(Xr(l)/Ri|0)|0}var Nl=256,Ml=262144,jl=4194304;function bs(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function zl(l,h,p){var O=l.pendingLanes;if(O===0)return 0;var b=0,w=l.suspendedLanes,A=l.pingedLanes;l=l.warmLanes;var Z=O&134217727;return Z!==0?(O=Z&~w,O!==0?b=bs(O):(A&=Z,A!==0?b=bs(A):p||(p=Z&~l,p!==0&&(b=bs(p))))):(Z=O&~w,Z!==0?b=bs(Z):A!==0?b=bs(A):p||(p=O&~l,p!==0&&(b=bs(p)))),b===0?0:h!==0&&h!==b&&(h&w)===0&&(w=b&-b,p=h&-h,w>=p||w===32&&(p&4194048)!==0)?h:b}function wo(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function I0(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qd(){var l=jl;return jl<<=1,(jl&62914560)===0&&(jl=4194304),l}function Pu(l){for(var h=[],p=0;31>p;p++)h.push(l);return h}function ko(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function X0(l,h,p,O,b,w){var A=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Z=l.entanglements,J=l.expirationTimes,se=l.hiddenUpdates;for(p=A&~p;0<p;){var he=31-vt(p),pe=1<<he;Z[he]=0,J[he]=-1;var oe=se[he];if(oe!==null)for(se[he]=null,he=0;he<oe.length;he++){var ce=oe[he];ce!==null&&(ce.lane&=-536870913)}p&=~pe}O!==0&&Bd(l,O,0),w!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=w&~(A&~h))}function Bd(l,h,p){l.pendingLanes|=h,l.suspendedLanes&=~h;var O=31-vt(h);l.entangledLanes|=h,l.entanglements[O]=l.entanglements[O]|1073741824|p&261930}function Id(l,h){var p=l.entangledLanes|=h;for(l=l.entanglements;p;){var O=31-vt(p),b=1<<O;b&h|l[O]&h&&(l[O]|=h),p&=~b}}function Xd(l,h){var p=h&-h;return p=(p&42)!==0?1:Au(p),(p&(l.suspendedLanes|h))!==0?0:p}function Au(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ru(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Zd(){var l=W.p;return l!==0?l:(l=window.event,l===void 0?32:x$(l.type))}function Vd(l,h){var p=W.p;try{return W.p=l,h()}finally{W.p=p}}var Zr=Math.random().toString(36).slice(2),gn="__reactFiber$"+Zr,Un="__reactProps$"+Zr,_s="__reactContainer$"+Zr,Dl="__reactEvents$"+Zr,Wd="__reactListeners$"+Zr,Z0="__reactHandles$"+Zr,Ud="__reactResources$"+Zr,Co="__reactMarker$"+Zr;function $u(l){delete l[gn],delete l[Un],delete l[Dl],delete l[Wd],delete l[Z0]}function ma(l){var h=l[gn];if(h)return h;for(var p=l.parentNode;p;){if(h=p[_s]||p[gn]){if(p=h.alternate,h.child!==null||p!==null&&p.child!==null)for(l=r$(l);l!==null;){if(p=l[gn])return p;l=r$(l)}return h}l=p,p=l.parentNode}return null}function ga(l){if(l=l[gn]||l[_s]){var h=l.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return l}return null}function Oa(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(i(33))}function va(l){var h=l[Ud];return h||(h=l[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function rn(l){l[Co]=!0}var Hd=new Set,Yd={};function Ss(l,h){ya(l,h),ya(l+"Capture",h)}function ya(l,h){for(Yd[l]=h,l=0;l<h.length;l++)Hd.add(h[l])}var V0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nu={},Fd={};function W0(l){return Zt.call(Fd,l)?!0:Zt.call(Nu,l)?!1:V0.test(l)?Fd[l]=!0:(Nu[l]=!0,!1)}function Ll(l,h,p){if(W0(h))if(p===null)l.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var O=h.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+p)}}function ql(l,h,p){if(p===null)l.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+p)}}function wr(l,h,p,O){if(O===null)l.removeAttribute(p);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(h,p,""+O)}}function fi(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Gd(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function U0(l,h,p){var O=Object.getOwnPropertyDescriptor(l.constructor.prototype,h);if(!l.hasOwnProperty(h)&&typeof O<"u"&&typeof O.get=="function"&&typeof O.set=="function"){var b=O.get,w=O.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return b.call(this)},set:function(A){p=""+A,w.call(this,A)}}),Object.defineProperty(l,h,{enumerable:O.enumerable}),{getValue:function(){return p},setValue:function(A){p=""+A},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function Bl(l){if(!l._valueTracker){var h=Gd(l)?"checked":"value";l._valueTracker=U0(l,h,""+l[h])}}function Kd(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var p=h.getValue(),O="";return l&&(O=Gd(l)?l.checked?"true":"false":l.value),l=O,l!==p?(h.setValue(l),!0):!1}function To(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var H0=/[\n"\\]/g;function di(l){return l.replace(H0,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Qo(l,h,p,O,b,w,A,Z){l.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?l.type=A:l.removeAttribute("type"),h!=null?A==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+fi(h)):l.value!==""+fi(h)&&(l.value=""+fi(h)):A!=="submit"&&A!=="reset"||l.removeAttribute("value"),h!=null?Mu(l,A,fi(h)):p!=null?Mu(l,A,fi(p)):O!=null&&l.removeAttribute("value"),b==null&&w!=null&&(l.defaultChecked=!!w),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?l.name=""+fi(Z):l.removeAttribute("name")}function Jd(l,h,p,O,b,w,A,Z){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(l.type=w),h!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||h!=null)){Bl(l);return}p=p!=null?""+fi(p):"",h=h!=null?""+fi(h):p,Z||h===l.value||(l.value=h),l.defaultValue=h}O=O??b,O=typeof O!="function"&&typeof O!="symbol"&&!!O,l.checked=Z?l.checked:!!O,l.defaultChecked=!!O,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.name=A),Bl(l)}function Mu(l,h,p){h==="number"&&To(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function ws(l,h,p,O){if(l=l.options,h){h={};for(var b=0;b<p.length;b++)h["$"+p[b]]=!0;for(p=0;p<l.length;p++)b=h.hasOwnProperty("$"+l[p].value),l[p].selected!==b&&(l[p].selected=b),b&&O&&(l[p].defaultSelected=!0)}else{for(p=""+fi(p),h=null,b=0;b<l.length;b++){if(l[b].value===p){l[b].selected=!0,O&&(l[b].defaultSelected=!0);return}h!==null||l[b].disabled||(h=l[b])}h!==null&&(h.selected=!0)}}function VE(l,h,p){if(h!=null&&(h=""+fi(h),h!==l.value&&(l.value=h),p==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=p!=null?""+fi(p):""}function WE(l,h,p,O){if(h==null){if(O!=null){if(p!=null)throw Error(i(92));if(D(O)){if(1<O.length)throw Error(i(93));O=O[0]}p=O}p==null&&(p=""),h=p}p=fi(h),l.defaultValue=p,O=l.textContent,O===p&&O!==""&&O!==null&&(l.value=O),Bl(l)}function Il(l,h){if(h){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=h;return}}l.textContent=h}var OU=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function UE(l,h,p){var O=h.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?O?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":O?l.setProperty(h,p):typeof p!="number"||p===0||OU.has(h)?h==="float"?l.cssFloat=p:l[h]=(""+p).trim():l[h]=p+"px"}function HE(l,h,p){if(h!=null&&typeof h!="object")throw Error(i(62));if(l=l.style,p!=null){for(var O in p)!p.hasOwnProperty(O)||h!=null&&h.hasOwnProperty(O)||(O.indexOf("--")===0?l.setProperty(O,""):O==="float"?l.cssFloat="":l[O]="");for(var b in h)O=h[b],h.hasOwnProperty(b)&&p[b]!==O&&UE(l,b,O)}else for(var w in h)h.hasOwnProperty(w)&&UE(l,w,h[w])}function Y0(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vU=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yU=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ep(l){return yU.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ks(){}var F0=null;function G0(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Xl=null,Zl=null;function YE(l){var h=ga(l);if(h&&(l=h.stateNode)){var p=l[Un]||null;e:switch(l=h.stateNode,h.type){case"input":if(Qo(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),h=p.name,p.type==="radio"&&h!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+di(""+h)+'"][type="radio"]'),h=0;h<p.length;h++){var O=p[h];if(O!==l&&O.form===l.form){var b=O[Un]||null;if(!b)throw Error(i(90));Qo(O,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(h=0;h<p.length;h++)O=p[h],O.form===l.form&&Kd(O)}break e;case"textarea":VE(l,p.value,p.defaultValue);break e;case"select":h=p.value,h!=null&&ws(l,!!p.multiple,h,!1)}}}var K0=!1;function FE(l,h,p){if(K0)return l(h,p);K0=!0;try{var O=l(h);return O}finally{if(K0=!1,(Xl!==null||Zl!==null)&&(Bp(),Xl&&(h=Xl,l=Zl,Zl=Xl=null,YE(h),l)))for(h=0;h<l.length;h++)YE(l[h])}}function ju(l,h){var p=l.stateNode;if(p===null)return null;var O=p[Un]||null;if(O===null)return null;p=O[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(l=l.type,O=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!O;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(i(231,h,typeof p));return p}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J0=!1;if(Cs)try{var zu={};Object.defineProperty(zu,"passive",{get:function(){J0=!0}}),window.addEventListener("test",zu,zu),window.removeEventListener("test",zu,zu)}catch{J0=!1}var xa=null,ev=null,tp=null;function GE(){if(tp)return tp;var l,h=ev,p=h.length,O,b="value"in xa?xa.value:xa.textContent,w=b.length;for(l=0;l<p&&h[l]===b[l];l++);var A=p-l;for(O=1;O<=A&&h[p-O]===b[w-O];O++);return tp=b.slice(l,1<O?1-O:void 0)}function np(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function ip(){return!0}function KE(){return!1}function pi(l){function h(p,O,b,w,A){this._reactName=p,this._targetInst=b,this.type=O,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var Z in l)l.hasOwnProperty(Z)&&(p=l[Z],this[Z]=p?p(w):w[Z]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ip:KE,this.isPropagationStopped=KE,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=ip)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=ip)},persist:function(){},isPersistent:ip}),h}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=pi(Eo),Du=d({},Eo,{view:0,detail:0}),xU=pi(Du),tv,nv,Lu,sp=d({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Lu&&(Lu&&l.type==="mousemove"?(tv=l.screenX-Lu.screenX,nv=l.screenY-Lu.screenY):nv=tv=0,Lu=l),tv)},movementY:function(l){return"movementY"in l?l.movementY:nv}}),JE=pi(sp),bU=d({},sp,{dataTransfer:0}),_U=pi(bU),SU=d({},Du,{relatedTarget:0}),iv=pi(SU),wU=d({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),kU=pi(wU),CU=d({},Eo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),TU=pi(CU),QU=d({},Eo,{data:0}),eP=pi(QU),EU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RU(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=AU[l])?!!h[l]:!1}function rv(){return RU}var $U=d({},Du,{key:function(l){if(l.key){var h=EU[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=np(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?PU[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(l){return l.type==="keypress"?np(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?np(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),NU=pi($U),MU=d({},sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tP=pi(MU),jU=d({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),zU=pi(jU),DU=d({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),LU=pi(DU),qU=d({},sp,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),BU=pi(qU),IU=d({},Eo,{newState:0,oldState:0}),XU=pi(IU),ZU=[9,13,27,32],sv=Cs&&"CompositionEvent"in window,qu=null;Cs&&"documentMode"in document&&(qu=document.documentMode);var VU=Cs&&"TextEvent"in window&&!qu,nP=Cs&&(!sv||qu&&8<qu&&11>=qu),iP=" ",rP=!1;function sP(l,h){switch(l){case"keyup":return ZU.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aP(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Vl=!1;function WU(l,h){switch(l){case"compositionend":return aP(h);case"keypress":return h.which!==32?null:(rP=!0,iP);case"textInput":return l=h.data,l===iP&&rP?null:l;default:return null}}function UU(l,h){if(Vl)return l==="compositionend"||!sv&&sP(l,h)?(l=GE(),tp=ev=xa=null,Vl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return nP&&h.locale!=="ko"?null:h.data;default:return null}}var HU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oP(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!HU[l.type]:h==="textarea"}function lP(l,h,p,O){Xl?Zl?Zl.push(O):Zl=[O]:Xl=O,h=Hp(h,"onChange"),0<h.length&&(p=new rp("onChange","change",null,p,O),l.push({event:p,listeners:h}))}var Bu=null,Iu=null;function YU(l){ZR(l,0)}function ap(l){var h=Oa(l);if(Kd(h))return l}function cP(l,h){if(l==="change")return h}var uP=!1;if(Cs){var av;if(Cs){var ov="oninput"in document;if(!ov){var hP=document.createElement("div");hP.setAttribute("oninput","return;"),ov=typeof hP.oninput=="function"}av=ov}else av=!1;uP=av&&(!document.documentMode||9<document.documentMode)}function fP(){Bu&&(Bu.detachEvent("onpropertychange",dP),Iu=Bu=null)}function dP(l){if(l.propertyName==="value"&&ap(Iu)){var h=[];lP(h,Iu,l,G0(l)),FE(YU,h)}}function FU(l,h,p){l==="focusin"?(fP(),Bu=h,Iu=p,Bu.attachEvent("onpropertychange",dP)):l==="focusout"&&fP()}function GU(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ap(Iu)}function KU(l,h){if(l==="click")return ap(h)}function JU(l,h){if(l==="input"||l==="change")return ap(h)}function eH(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var $i=typeof Object.is=="function"?Object.is:eH;function Xu(l,h){if($i(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var p=Object.keys(l),O=Object.keys(h);if(p.length!==O.length)return!1;for(O=0;O<p.length;O++){var b=p[O];if(!Zt.call(h,b)||!$i(l[b],h[b]))return!1}return!0}function pP(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function mP(l,h){var p=pP(l);l=0;for(var O;p;){if(p.nodeType===3){if(O=l+p.textContent.length,l<=h&&O>=h)return{node:p,offset:h-l};l=O}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=pP(p)}}function gP(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?gP(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function OP(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=To(l.document);h instanceof l.HTMLIFrameElement;){try{var p=typeof h.contentWindow.location.href=="string"}catch{p=!1}if(p)l=h.contentWindow;else break;h=To(l.document)}return h}function lv(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var tH=Cs&&"documentMode"in document&&11>=document.documentMode,Wl=null,cv=null,Zu=null,uv=!1;function vP(l,h,p){var O=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;uv||Wl==null||Wl!==To(O)||(O=Wl,"selectionStart"in O&&lv(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),Zu&&Xu(Zu,O)||(Zu=O,O=Hp(cv,"onSelect"),0<O.length&&(h=new rp("onSelect","select",null,h,p),l.push({event:h,listeners:O}),h.target=Wl)))}function Po(l,h){var p={};return p[l.toLowerCase()]=h.toLowerCase(),p["Webkit"+l]="webkit"+h,p["Moz"+l]="moz"+h,p}var Ul={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},hv={},yP={};Cs&&(yP=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Ao(l){if(hv[l])return hv[l];if(!Ul[l])return l;var h=Ul[l],p;for(p in h)if(h.hasOwnProperty(p)&&p in yP)return hv[l]=h[p];return l}var xP=Ao("animationend"),bP=Ao("animationiteration"),_P=Ao("animationstart"),nH=Ao("transitionrun"),iH=Ao("transitionstart"),rH=Ao("transitioncancel"),SP=Ao("transitionend"),wP=new Map,fv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fv.push("scrollEnd");function kr(l,h){wP.set(l,h),Ss(h,[l])}var op=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},tr=[],Hl=0,dv=0;function lp(){for(var l=Hl,h=dv=Hl=0;h<l;){var p=tr[h];tr[h++]=null;var O=tr[h];tr[h++]=null;var b=tr[h];tr[h++]=null;var w=tr[h];if(tr[h++]=null,O!==null&&b!==null){var A=O.pending;A===null?b.next=b:(b.next=A.next,A.next=b),O.pending=b}w!==0&&kP(p,b,w)}}function cp(l,h,p,O){tr[Hl++]=l,tr[Hl++]=h,tr[Hl++]=p,tr[Hl++]=O,dv|=O,l.lanes|=O,l=l.alternate,l!==null&&(l.lanes|=O)}function pv(l,h,p,O){return cp(l,h,p,O),up(l)}function Ro(l,h){return cp(l,null,null,h),up(l)}function kP(l,h,p){l.lanes|=p;var O=l.alternate;O!==null&&(O.lanes|=p);for(var b=!1,w=l.return;w!==null;)w.childLanes|=p,O=w.alternate,O!==null&&(O.childLanes|=p),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(b=!0)),l=w,w=w.return;return l.tag===3?(w=l.stateNode,b&&h!==null&&(b=31-vt(p),l=w.hiddenUpdates,O=l[b],O===null?l[b]=[h]:O.push(h),h.lane=p|536870912),w):null}function up(l){if(50<fh)throw fh=0,Sy=null,Error(i(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var Yl={};function sH(l,h,p,O){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(l,h,p,O){return new sH(l,h,p,O)}function mv(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ts(l,h){var p=l.alternate;return p===null?(p=Ni(l.tag,h,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=h,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,h=l.dependencies,p.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function CP(l,h){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,h=p.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function hp(l,h,p,O,b,w){var A=0;if(O=l,typeof l=="function")mv(l)&&(A=1);else if(typeof l=="string")A=uY(l,p,H.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=Ni(31,p,h,b),l.elementType=B,l.lanes=w,l;case x:return $o(p.children,b,w,h);case S:A=8,b|=24;break;case _:return l=Ni(12,p,h,b|2),l.elementType=_,l.lanes=w,l;case E:return l=Ni(13,p,h,b),l.elementType=E,l.lanes=w,l;case C:return l=Ni(19,p,h,b),l.elementType=C,l.lanes=w,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case k:A=10;break e;case Q:A=9;break e;case T:A=11;break e;case P:A=14;break e;case L:A=16,O=null;break e}A=29,p=Error(i(130,l===null?"null":typeof l,"")),O=null}return h=Ni(A,p,h,b),h.elementType=l,h.type=O,h.lanes=w,h}function $o(l,h,p,O){return l=Ni(7,l,O,h),l.lanes=p,l}function gv(l,h,p){return l=Ni(6,l,null,h),l.lanes=p,l}function TP(l){var h=Ni(18,null,null,0);return h.stateNode=l,h}function Ov(l,h,p){return h=Ni(4,l.children!==null?l.children:[],l.key,h),h.lanes=p,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var QP=new WeakMap;function nr(l,h){if(typeof l=="object"&&l!==null){var p=QP.get(l);return p!==void 0?p:(h={value:l,source:h,stack:nn(h)},QP.set(l,h),h)}return{value:l,source:h,stack:nn(h)}}var Fl=[],Gl=0,fp=null,Vu=0,ir=[],rr=0,ba=null,Vr=1,Wr="";function Qs(l,h){Fl[Gl++]=Vu,Fl[Gl++]=fp,fp=l,Vu=h}function EP(l,h,p){ir[rr++]=Vr,ir[rr++]=Wr,ir[rr++]=ba,ba=l;var O=Vr;l=Wr;var b=32-vt(O)-1;O&=~(1<<b),p+=1;var w=32-vt(h)+b;if(30<w){var A=b-b%5;w=(O&(1<<A)-1).toString(32),O>>=A,b-=A,Vr=1<<32-vt(h)+b|p<<b|O,Wr=w+l}else Vr=1<<w|p<<b|O,Wr=l}function vv(l){l.return!==null&&(Qs(l,1),EP(l,1,0))}function yv(l){for(;l===fp;)fp=Fl[--Gl],Fl[Gl]=null,Vu=Fl[--Gl],Fl[Gl]=null;for(;l===ba;)ba=ir[--rr],ir[rr]=null,Wr=ir[--rr],ir[rr]=null,Vr=ir[--rr],ir[rr]=null}function PP(l,h){ir[rr++]=Vr,ir[rr++]=Wr,ir[rr++]=ba,Vr=h.id,Wr=h.overflow,ba=l}var Nn=null,$t=null,at=!1,_a=null,sr=!1,xv=Error(i(519));function Sa(l){var h=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wu(nr(h,l)),xv}function AP(l){var h=l.stateNode,p=l.type,O=l.memoizedProps;switch(h[gn]=l,h[Un]=O,p){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(p=0;p<ph.length;p++)tt(ph[p],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":tt("invalid",h),Jd(h,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0);break;case"select":tt("invalid",h);break;case"textarea":tt("invalid",h),WE(h,O.value,O.defaultValue,O.children)}p=O.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||h.textContent===""+p||O.suppressHydrationWarning===!0||HR(h.textContent,p)?(O.popover!=null&&(tt("beforetoggle",h),tt("toggle",h)),O.onScroll!=null&&tt("scroll",h),O.onScrollEnd!=null&&tt("scrollend",h),O.onClick!=null&&(h.onclick=ks),h=!0):h=!1,h||Sa(l,!0)}function RP(l){for(Nn=l.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:Nn=Nn.return}}function Kl(l){if(l!==Nn)return!1;if(!at)return RP(l),at=!0,!1;var h=l.tag,p;if((p=h!==3&&h!==27)&&((p=h===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Dy(l.type,l.memoizedProps)),p=!p),p&&$t&&Sa(l),RP(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));$t=i$(l)}else if(h===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));$t=i$(l)}else h===27?(h=$t,za(l.type)?(l=Xy,Xy=null,$t=l):$t=h):$t=Nn?or(l.stateNode.nextSibling):null;return!0}function No(){$t=Nn=null,at=!1}function bv(){var l=_a;return l!==null&&(vi===null?vi=l:vi.push.apply(vi,l),_a=null),l}function Wu(l){_a===null?_a=[l]:_a.push(l)}var _v=V(null),Mo=null,Es=null;function wa(l,h,p){z(_v,h._currentValue),h._currentValue=p}function Ps(l){l._currentValue=_v.current,F(_v)}function Sv(l,h,p){for(;l!==null;){var O=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,O!==null&&(O.childLanes|=h)):O!==null&&(O.childLanes&h)!==h&&(O.childLanes|=h),l===p)break;l=l.return}}function wv(l,h,p,O){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var w=b.dependencies;if(w!==null){var A=b.child;w=w.firstContext;e:for(;w!==null;){var Z=w;w=b;for(var J=0;J<h.length;J++)if(Z.context===h[J]){w.lanes|=p,Z=w.alternate,Z!==null&&(Z.lanes|=p),Sv(w.return,p,l),O||(A=null);break e}w=Z.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(i(341));A.lanes|=p,w=A.alternate,w!==null&&(w.lanes|=p),Sv(A,p,l),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===l){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function Jl(l,h,p,O){l=null;for(var b=h,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var Z=b.type;$i(b.pendingProps.value,A.value)||(l!==null?l.push(Z):l=[Z])}}else if(b===ie.current){if(A=b.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(yh):l=[yh])}b=b.return}l!==null&&wv(h,l,p,O),h.flags|=262144}function dp(l){for(l=l.firstContext;l!==null;){if(!$i(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function jo(l){Mo=l,Es=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Mn(l){return $P(Mo,l)}function pp(l,h){return Mo===null&&jo(l),$P(l,h)}function $P(l,h){var p=h._currentValue;if(h={context:h,memoizedValue:p,next:null},Es===null){if(l===null)throw Error(i(308));Es=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else Es=Es.next=h;return p}var aH=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(p,O){l.push(O)}};this.abort=function(){h.aborted=!0,l.forEach(function(p){return p()})}},oH=t.unstable_scheduleCallback,lH=t.unstable_NormalPriority,sn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kv(){return{controller:new aH,data:new Map,refCount:0}}function Uu(l){l.refCount--,l.refCount===0&&oH(lH,function(){l.controller.abort()})}var Hu=null,Cv=0,ec=0,tc=null;function cH(l,h){if(Hu===null){var p=Hu=[];Cv=0,ec=Ey(),tc={status:"pending",value:void 0,then:function(O){p.push(O)}}}return Cv++,h.then(NP,NP),h}function NP(){if(--Cv===0&&Hu!==null){tc!==null&&(tc.status="fulfilled");var l=Hu;Hu=null,ec=0,tc=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function uH(l,h){var p=[],O={status:"pending",value:null,reason:null,then:function(b){p.push(b)}};return l.then(function(){O.status="fulfilled",O.value=h;for(var b=0;b<p.length;b++)(0,p[b])(h)},function(b){for(O.status="rejected",O.reason=b,b=0;b<p.length;b++)(0,p[b])(void 0)}),O}var MP=R.S;R.S=function(l,h){vR=zt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&cH(l,h),MP!==null&&MP(l,h)};var zo=V(null);function Tv(){var l=zo.current;return l!==null?l:Ct.pooledCache}function mp(l,h){h===null?z(zo,zo.current):z(zo,h.pool)}function jP(){var l=Tv();return l===null?null:{parent:sn._currentValue,pool:l}}var nc=Error(i(460)),Qv=Error(i(474)),gp=Error(i(542)),Op={then:function(){}};function zP(l){return l=l.status,l==="fulfilled"||l==="rejected"}function DP(l,h,p){switch(p=l[p],p===void 0?l.push(h):p!==h&&(h.then(ks,ks),h=p),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,qP(l),l;default:if(typeof h.status=="string")h.then(ks,ks);else{if(l=Ct,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=h,l.status="pending",l.then(function(O){if(h.status==="pending"){var b=h;b.status="fulfilled",b.value=O}},function(O){if(h.status==="pending"){var b=h;b.status="rejected",b.reason=O}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,qP(l),l}throw Lo=h,nc}}function Do(l){try{var h=l._init;return h(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Lo=p,nc):p}}var Lo=null;function LP(){if(Lo===null)throw Error(i(459));var l=Lo;return Lo=null,l}function qP(l){if(l===nc||l===gp)throw Error(i(483))}var ic=null,Yu=0;function vp(l){var h=Yu;return Yu+=1,ic===null&&(ic=[]),DP(ic,l,h)}function Fu(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function yp(l,h){throw h.$$typeof===m?Error(i(525)):(l=Object.prototype.toString.call(h),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function BP(l){function h(ne,te){if(l){var re=ne.deletions;re===null?(ne.deletions=[te],ne.flags|=16):re.push(te)}}function p(ne,te){if(!l)return null;for(;te!==null;)h(ne,te),te=te.sibling;return null}function O(ne){for(var te=new Map;ne!==null;)ne.key!==null?te.set(ne.key,ne):te.set(ne.index,ne),ne=ne.sibling;return te}function b(ne,te){return ne=Ts(ne,te),ne.index=0,ne.sibling=null,ne}function w(ne,te,re){return ne.index=re,l?(re=ne.alternate,re!==null?(re=re.index,re<te?(ne.flags|=67108866,te):re):(ne.flags|=67108866,te)):(ne.flags|=1048576,te)}function A(ne){return l&&ne.alternate===null&&(ne.flags|=67108866),ne}function Z(ne,te,re,de){return te===null||te.tag!==6?(te=gv(re,ne.mode,de),te.return=ne,te):(te=b(te,re),te.return=ne,te)}function J(ne,te,re,de){var ze=re.type;return ze===x?he(ne,te,re.props.children,de,re.key):te!==null&&(te.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===L&&Do(ze)===te.type)?(te=b(te,re.props),Fu(te,re),te.return=ne,te):(te=hp(re.type,re.key,re.props,null,ne.mode,de),Fu(te,re),te.return=ne,te)}function se(ne,te,re,de){return te===null||te.tag!==4||te.stateNode.containerInfo!==re.containerInfo||te.stateNode.implementation!==re.implementation?(te=Ov(re,ne.mode,de),te.return=ne,te):(te=b(te,re.children||[]),te.return=ne,te)}function he(ne,te,re,de,ze){return te===null||te.tag!==7?(te=$o(re,ne.mode,de,ze),te.return=ne,te):(te=b(te,re),te.return=ne,te)}function pe(ne,te,re){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=gv(""+te,ne.mode,re),te.return=ne,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case v:return re=hp(te.type,te.key,te.props,null,ne.mode,re),Fu(re,te),re.return=ne,re;case y:return te=Ov(te,ne.mode,re),te.return=ne,te;case L:return te=Do(te),pe(ne,te,re)}if(D(te)||$(te))return te=$o(te,ne.mode,re,null),te.return=ne,te;if(typeof te.then=="function")return pe(ne,vp(te),re);if(te.$$typeof===k)return pe(ne,pp(ne,te),re);yp(ne,te)}return null}function oe(ne,te,re,de){var ze=te!==null?te.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return ze!==null?null:Z(ne,te,""+re,de);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case v:return re.key===ze?J(ne,te,re,de):null;case y:return re.key===ze?se(ne,te,re,de):null;case L:return re=Do(re),oe(ne,te,re,de)}if(D(re)||$(re))return ze!==null?null:he(ne,te,re,de,null);if(typeof re.then=="function")return oe(ne,te,vp(re),de);if(re.$$typeof===k)return oe(ne,te,pp(ne,re),de);yp(ne,re)}return null}function ce(ne,te,re,de,ze){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return ne=ne.get(re)||null,Z(te,ne,""+de,ze);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case v:return ne=ne.get(de.key===null?re:de.key)||null,J(te,ne,de,ze);case y:return ne=ne.get(de.key===null?re:de.key)||null,se(te,ne,de,ze);case L:return de=Do(de),ce(ne,te,re,de,ze)}if(D(de)||$(de))return ne=ne.get(re)||null,he(te,ne,de,ze,null);if(typeof de.then=="function")return ce(ne,te,re,vp(de),ze);if(de.$$typeof===k)return ce(ne,te,re,pp(te,de),ze);yp(te,de)}return null}function Pe(ne,te,re,de){for(var ze=null,ht=null,Re=te,Ue=te=0,st=null;Re!==null&&Ue<re.length;Ue++){Re.index>Ue?(st=Re,Re=null):st=Re.sibling;var ft=oe(ne,Re,re[Ue],de);if(ft===null){Re===null&&(Re=st);break}l&&Re&&ft.alternate===null&&h(ne,Re),te=w(ft,te,Ue),ht===null?ze=ft:ht.sibling=ft,ht=ft,Re=st}if(Ue===re.length)return p(ne,Re),at&&Qs(ne,Ue),ze;if(Re===null){for(;Ue<re.length;Ue++)Re=pe(ne,re[Ue],de),Re!==null&&(te=w(Re,te,Ue),ht===null?ze=Re:ht.sibling=Re,ht=Re);return at&&Qs(ne,Ue),ze}for(Re=O(Re);Ue<re.length;Ue++)st=ce(Re,ne,Ue,re[Ue],de),st!==null&&(l&&st.alternate!==null&&Re.delete(st.key===null?Ue:st.key),te=w(st,te,Ue),ht===null?ze=st:ht.sibling=st,ht=st);return l&&Re.forEach(function(Ia){return h(ne,Ia)}),at&&Qs(ne,Ue),ze}function qe(ne,te,re,de){if(re==null)throw Error(i(151));for(var ze=null,ht=null,Re=te,Ue=te=0,st=null,ft=re.next();Re!==null&&!ft.done;Ue++,ft=re.next()){Re.index>Ue?(st=Re,Re=null):st=Re.sibling;var Ia=oe(ne,Re,ft.value,de);if(Ia===null){Re===null&&(Re=st);break}l&&Re&&Ia.alternate===null&&h(ne,Re),te=w(Ia,te,Ue),ht===null?ze=Ia:ht.sibling=Ia,ht=Ia,Re=st}if(ft.done)return p(ne,Re),at&&Qs(ne,Ue),ze;if(Re===null){for(;!ft.done;Ue++,ft=re.next())ft=pe(ne,ft.value,de),ft!==null&&(te=w(ft,te,Ue),ht===null?ze=ft:ht.sibling=ft,ht=ft);return at&&Qs(ne,Ue),ze}for(Re=O(Re);!ft.done;Ue++,ft=re.next())ft=ce(Re,ne,Ue,ft.value,de),ft!==null&&(l&&ft.alternate!==null&&Re.delete(ft.key===null?Ue:ft.key),te=w(ft,te,Ue),ht===null?ze=ft:ht.sibling=ft,ht=ft);return l&&Re.forEach(function(bY){return h(ne,bY)}),at&&Qs(ne,Ue),ze}function St(ne,te,re,de){if(typeof re=="object"&&re!==null&&re.type===x&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case v:e:{for(var ze=re.key;te!==null;){if(te.key===ze){if(ze=re.type,ze===x){if(te.tag===7){p(ne,te.sibling),de=b(te,re.props.children),de.return=ne,ne=de;break e}}else if(te.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===L&&Do(ze)===te.type){p(ne,te.sibling),de=b(te,re.props),Fu(de,re),de.return=ne,ne=de;break e}p(ne,te);break}else h(ne,te);te=te.sibling}re.type===x?(de=$o(re.props.children,ne.mode,de,re.key),de.return=ne,ne=de):(de=hp(re.type,re.key,re.props,null,ne.mode,de),Fu(de,re),de.return=ne,ne=de)}return A(ne);case y:e:{for(ze=re.key;te!==null;){if(te.key===ze)if(te.tag===4&&te.stateNode.containerInfo===re.containerInfo&&te.stateNode.implementation===re.implementation){p(ne,te.sibling),de=b(te,re.children||[]),de.return=ne,ne=de;break e}else{p(ne,te);break}else h(ne,te);te=te.sibling}de=Ov(re,ne.mode,de),de.return=ne,ne=de}return A(ne);case L:return re=Do(re),St(ne,te,re,de)}if(D(re))return Pe(ne,te,re,de);if($(re)){if(ze=$(re),typeof ze!="function")throw Error(i(150));return re=ze.call(re),qe(ne,te,re,de)}if(typeof re.then=="function")return St(ne,te,vp(re),de);if(re.$$typeof===k)return St(ne,te,pp(ne,re),de);yp(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,te!==null&&te.tag===6?(p(ne,te.sibling),de=b(te,re),de.return=ne,ne=de):(p(ne,te),de=gv(re,ne.mode,de),de.return=ne,ne=de),A(ne)):p(ne,te)}return function(ne,te,re,de){try{Yu=0;var ze=St(ne,te,re,de);return ic=null,ze}catch(Re){if(Re===nc||Re===gp)throw Re;var ht=Ni(29,Re,null,ne.mode);return ht.lanes=de,ht.return=ne,ht}}}var qo=BP(!0),IP=BP(!1),ka=!1;function Ev(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pv(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ca(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ta(l,h,p){var O=l.updateQueue;if(O===null)return null;if(O=O.shared,(dt&2)!==0){var b=O.pending;return b===null?h.next=h:(h.next=b.next,b.next=h),O.pending=h,h=up(l),kP(l,null,p),h}return cp(l,O,h,p),up(l)}function Gu(l,h,p){if(h=h.updateQueue,h!==null&&(h=h.shared,(p&4194048)!==0)){var O=h.lanes;O&=l.pendingLanes,p|=O,h.lanes=p,Id(l,p)}}function Av(l,h){var p=l.updateQueue,O=l.alternate;if(O!==null&&(O=O.updateQueue,p===O)){var b=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var A={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?b=w=A:w=w.next=A,p=p.next}while(p!==null);w===null?b=w=h:w=w.next=h}else b=w=h;p={baseState:O.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:O.shared,callbacks:O.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=h}var Rv=!1;function Ku(){if(Rv){var l=tc;if(l!==null)throw l}}function Ju(l,h,p,O){Rv=!1;var b=l.updateQueue;ka=!1;var w=b.firstBaseUpdate,A=b.lastBaseUpdate,Z=b.shared.pending;if(Z!==null){b.shared.pending=null;var J=Z,se=J.next;J.next=null,A===null?w=se:A.next=se,A=J;var he=l.alternate;he!==null&&(he=he.updateQueue,Z=he.lastBaseUpdate,Z!==A&&(Z===null?he.firstBaseUpdate=se:Z.next=se,he.lastBaseUpdate=J))}if(w!==null){var pe=b.baseState;A=0,he=se=J=null,Z=w;do{var oe=Z.lane&-536870913,ce=oe!==Z.lane;if(ce?(rt&oe)===oe:(O&oe)===oe){oe!==0&&oe===ec&&(Rv=!0),he!==null&&(he=he.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var Pe=l,qe=Z;oe=h;var St=p;switch(qe.tag){case 1:if(Pe=qe.payload,typeof Pe=="function"){pe=Pe.call(St,pe,oe);break e}pe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=qe.payload,oe=typeof Pe=="function"?Pe.call(St,pe,oe):Pe,oe==null)break e;pe=d({},pe,oe);break e;case 2:ka=!0}}oe=Z.callback,oe!==null&&(l.flags|=64,ce&&(l.flags|=8192),ce=b.callbacks,ce===null?b.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},he===null?(se=he=ce,J=pe):he=he.next=ce,A|=oe;if(Z=Z.next,Z===null){if(Z=b.shared.pending,Z===null)break;ce=Z,Z=ce.next,ce.next=null,b.lastBaseUpdate=ce,b.shared.pending=null}}while(!0);he===null&&(J=pe),b.baseState=J,b.firstBaseUpdate=se,b.lastBaseUpdate=he,w===null&&(b.shared.lanes=0),Ra|=A,l.lanes=A,l.memoizedState=pe}}function XP(l,h){if(typeof l!="function")throw Error(i(191,l));l.call(h)}function ZP(l,h){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)XP(p[l],h)}var rc=V(null),xp=V(0);function VP(l,h){l=Ls,z(xp,l),z(rc,h),Ls=l|h.baseLanes}function $v(){z(xp,Ls),z(rc,rc.current)}function Nv(){Ls=xp.current,F(rc),F(xp)}var Mi=V(null),ar=null;function Qa(l){var h=l.alternate;z(Kt,Kt.current&1),z(Mi,l),ar===null&&(h===null||rc.current!==null||h.memoizedState!==null)&&(ar=l)}function Mv(l){z(Kt,Kt.current),z(Mi,l),ar===null&&(ar=l)}function WP(l){l.tag===22?(z(Kt,Kt.current),z(Mi,l),ar===null&&(ar=l)):Ea()}function Ea(){z(Kt,Kt.current),z(Mi,Mi.current)}function ji(l){F(Mi),ar===l&&(ar=null),F(Kt)}var Kt=V(0);function bp(l){for(var h=l;h!==null;){if(h.tag===13){var p=h.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||By(p)||Iy(p)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var As=0,We=null,bt=null,an=null,_p=!1,sc=!1,Bo=!1,Sp=0,eh=0,ac=null,hH=0;function Ht(){throw Error(i(321))}function jv(l,h){if(h===null)return!1;for(var p=0;p<h.length&&p<l.length;p++)if(!$i(l[p],h[p]))return!1;return!0}function zv(l,h,p,O,b,w){return As=w,We=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,R.H=l===null||l.memoizedState===null?EA:Kv,Bo=!1,w=p(O,b),Bo=!1,sc&&(w=HP(h,p,O,b)),UP(l),w}function UP(l){R.H=ih;var h=bt!==null&&bt.next!==null;if(As=0,an=bt=We=null,_p=!1,eh=0,ac=null,h)throw Error(i(300));l===null||on||(l=l.dependencies,l!==null&&dp(l)&&(on=!0))}function HP(l,h,p,O){We=l;var b=0;do{if(sc&&(ac=null),eh=0,sc=!1,25<=b)throw Error(i(301));if(b+=1,an=bt=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}R.H=PA,w=h(p,O)}while(sc);return w}function fH(){var l=R.H,h=l.useState()[0];return h=typeof h.then=="function"?th(h):h,l=l.useState()[0],(bt!==null?bt.memoizedState:null)!==l&&(We.flags|=1024),h}function Dv(){var l=Sp!==0;return Sp=0,l}function Lv(l,h,p){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~p}function qv(l){if(_p){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}_p=!1}As=0,an=bt=We=null,sc=!1,eh=Sp=0,ac=null}function ii(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?We.memoizedState=an=l:an=an.next=l,an}function Jt(){if(bt===null){var l=We.alternate;l=l!==null?l.memoizedState:null}else l=bt.next;var h=an===null?We.memoizedState:an.next;if(h!==null)an=h,bt=l;else{if(l===null)throw We.alternate===null?Error(i(467)):Error(i(310));bt=l,l={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},an===null?We.memoizedState=an=l:an=an.next=l}return an}function wp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function th(l){var h=eh;return eh+=1,ac===null&&(ac=[]),l=DP(ac,l,h),h=We,(an===null?h.memoizedState:an.next)===null&&(h=h.alternate,R.H=h===null||h.memoizedState===null?EA:Kv),l}function kp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return th(l);if(l.$$typeof===k)return Mn(l)}throw Error(i(438,String(l)))}function Bv(l){var h=null,p=We.updateQueue;if(p!==null&&(h=p.memoCache),h==null){var O=We.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(h={data:O.data.map(function(b){return b.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),p===null&&(p=wp(),We.updateQueue=p),p.memoCache=h,p=h.data[h.index],p===void 0)for(p=h.data[h.index]=Array(l),O=0;O<l;O++)p[O]=N;return h.index++,p}function Rs(l,h){return typeof h=="function"?h(l):h}function Cp(l){var h=Jt();return Iv(h,bt,l)}function Iv(l,h,p){var O=l.queue;if(O===null)throw Error(i(311));O.lastRenderedReducer=p;var b=l.baseQueue,w=O.pending;if(w!==null){if(b!==null){var A=b.next;b.next=w.next,w.next=A}h.baseQueue=b=w,O.pending=null}if(w=l.baseState,b===null)l.memoizedState=w;else{h=b.next;var Z=A=null,J=null,se=h,he=!1;do{var pe=se.lane&-536870913;if(pe!==se.lane?(rt&pe)===pe:(As&pe)===pe){var oe=se.revertLane;if(oe===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),pe===ec&&(he=!0);else if((As&oe)===oe){se=se.next,oe===ec&&(he=!0);continue}else pe={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},J===null?(Z=J=pe,A=w):J=J.next=pe,We.lanes|=oe,Ra|=oe;pe=se.action,Bo&&p(w,pe),w=se.hasEagerState?se.eagerState:p(w,pe)}else oe={lane:pe,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},J===null?(Z=J=oe,A=w):J=J.next=oe,We.lanes|=pe,Ra|=pe;se=se.next}while(se!==null&&se!==h);if(J===null?A=w:J.next=Z,!$i(w,l.memoizedState)&&(on=!0,he&&(p=tc,p!==null)))throw p;l.memoizedState=w,l.baseState=A,l.baseQueue=J,O.lastRenderedState=w}return b===null&&(O.lanes=0),[l.memoizedState,O.dispatch]}function Xv(l){var h=Jt(),p=h.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=l;var O=p.dispatch,b=p.pending,w=h.memoizedState;if(b!==null){p.pending=null;var A=b=b.next;do w=l(w,A.action),A=A.next;while(A!==b);$i(w,h.memoizedState)||(on=!0),h.memoizedState=w,h.baseQueue===null&&(h.baseState=w),p.lastRenderedState=w}return[w,O]}function YP(l,h,p){var O=We,b=Jt(),w=at;if(w){if(p===void 0)throw Error(i(407));p=p()}else p=h();var A=!$i((bt||b).memoizedState,p);if(A&&(b.memoizedState=p,on=!0),b=b.queue,Wv(KP.bind(null,O,b,l),[l]),b.getSnapshot!==h||A||an!==null&&an.memoizedState.tag&1){if(O.flags|=2048,oc(9,{destroy:void 0},GP.bind(null,O,b,p,h),null),Ct===null)throw Error(i(349));w||(As&127)!==0||FP(O,h,p)}return p}function FP(l,h,p){l.flags|=16384,l={getSnapshot:h,value:p},h=We.updateQueue,h===null?(h=wp(),We.updateQueue=h,h.stores=[l]):(p=h.stores,p===null?h.stores=[l]:p.push(l))}function GP(l,h,p,O){h.value=p,h.getSnapshot=O,JP(h)&&eA(l)}function KP(l,h,p){return p(function(){JP(h)&&eA(l)})}function JP(l){var h=l.getSnapshot;l=l.value;try{var p=h();return!$i(l,p)}catch{return!0}}function eA(l){var h=Ro(l,2);h!==null&&yi(h,l,2)}function Zv(l){var h=ii();if(typeof l=="function"){var p=l;if(l=p(),Bo){Wn(!0);try{p()}finally{Wn(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:l},h}function tA(l,h,p,O){return l.baseState=p,Iv(l,bt,typeof O=="function"?O:Rs)}function dH(l,h,p,O,b){if(Ep(l))throw Error(i(485));if(l=h.action,l!==null){var w={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};R.T!==null?p(!0):w.isTransition=!1,O(w),p=h.pending,p===null?(w.next=h.pending=w,nA(h,w)):(w.next=p.next,h.pending=p.next=w)}}function nA(l,h){var p=h.action,O=h.payload,b=l.state;if(h.isTransition){var w=R.T,A={};R.T=A;try{var Z=p(b,O),J=R.S;J!==null&&J(A,Z),iA(l,h,Z)}catch(se){Vv(l,h,se)}finally{w!==null&&A.types!==null&&(w.types=A.types),R.T=w}}else try{w=p(b,O),iA(l,h,w)}catch(se){Vv(l,h,se)}}function iA(l,h,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(O){rA(l,h,O)},function(O){return Vv(l,h,O)}):rA(l,h,p)}function rA(l,h,p){h.status="fulfilled",h.value=p,sA(h),l.state=p,h=l.pending,h!==null&&(p=h.next,p===h?l.pending=null:(p=p.next,h.next=p,nA(l,p)))}function Vv(l,h,p){var O=l.pending;if(l.pending=null,O!==null){O=O.next;do h.status="rejected",h.reason=p,sA(h),h=h.next;while(h!==O)}l.action=null}function sA(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function aA(l,h){return h}function oA(l,h){if(at){var p=Ct.formState;if(p!==null){e:{var O=We;if(at){if($t){t:{for(var b=$t,w=sr;b.nodeType!==8;){if(!w){b=null;break t}if(b=or(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){$t=or(b.nextSibling),O=b.data==="F!";break e}}Sa(O)}O=!1}O&&(h=p[0])}}return p=ii(),p.memoizedState=p.baseState=h,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aA,lastRenderedState:h},p.queue=O,p=CA.bind(null,We,O),O.dispatch=p,O=Zv(!1),w=Gv.bind(null,We,!1,O.queue),O=ii(),b={state:h,dispatch:null,action:l,pending:null},O.queue=b,p=dH.bind(null,We,b,w,p),b.dispatch=p,O.memoizedState=l,[h,p,!1]}function lA(l){var h=Jt();return cA(h,bt,l)}function cA(l,h,p){if(h=Iv(l,h,aA)[0],l=Cp(Rs)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var O=th(h)}catch(A){throw A===nc?gp:A}else O=h;h=Jt();var b=h.queue,w=b.dispatch;return p!==h.memoizedState&&(We.flags|=2048,oc(9,{destroy:void 0},pH.bind(null,b,p),null)),[O,w,l]}function pH(l,h){l.action=h}function uA(l){var h=Jt(),p=bt;if(p!==null)return cA(h,p,l);Jt(),h=h.memoizedState,p=Jt();var O=p.queue.dispatch;return p.memoizedState=l,[h,O,!1]}function oc(l,h,p,O){return l={tag:l,create:p,deps:O,inst:h,next:null},h=We.updateQueue,h===null&&(h=wp(),We.updateQueue=h),p=h.lastEffect,p===null?h.lastEffect=l.next=l:(O=p.next,p.next=l,l.next=O,h.lastEffect=l),l}function hA(){return Jt().memoizedState}function Tp(l,h,p,O){var b=ii();We.flags|=l,b.memoizedState=oc(1|h,{destroy:void 0},p,O===void 0?null:O)}function Qp(l,h,p,O){var b=Jt();O=O===void 0?null:O;var w=b.memoizedState.inst;bt!==null&&O!==null&&jv(O,bt.memoizedState.deps)?b.memoizedState=oc(h,w,p,O):(We.flags|=l,b.memoizedState=oc(1|h,w,p,O))}function fA(l,h){Tp(8390656,8,l,h)}function Wv(l,h){Qp(2048,8,l,h)}function mH(l){We.flags|=4;var h=We.updateQueue;if(h===null)h=wp(),We.updateQueue=h,h.events=[l];else{var p=h.events;p===null?h.events=[l]:p.push(l)}}function dA(l){var h=Jt().memoizedState;return mH({ref:h,nextImpl:l}),function(){if((dt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}function pA(l,h){return Qp(4,2,l,h)}function mA(l,h){return Qp(4,4,l,h)}function gA(l,h){if(typeof h=="function"){l=l();var p=h(l);return function(){typeof p=="function"?p():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function OA(l,h,p){p=p!=null?p.concat([l]):null,Qp(4,4,gA.bind(null,h,l),p)}function Uv(){}function vA(l,h){var p=Jt();h=h===void 0?null:h;var O=p.memoizedState;return h!==null&&jv(h,O[1])?O[0]:(p.memoizedState=[l,h],l)}function yA(l,h){var p=Jt();h=h===void 0?null:h;var O=p.memoizedState;if(h!==null&&jv(h,O[1]))return O[0];if(O=l(),Bo){Wn(!0);try{l()}finally{Wn(!1)}}return p.memoizedState=[O,h],O}function Hv(l,h,p){return p===void 0||(As&1073741824)!==0&&(rt&261930)===0?l.memoizedState=h:(l.memoizedState=p,l=xR(),We.lanes|=l,Ra|=l,p)}function xA(l,h,p,O){return $i(p,h)?p:rc.current!==null?(l=Hv(l,p,O),$i(l,h)||(on=!0),l):(As&42)===0||(As&1073741824)!==0&&(rt&261930)===0?(on=!0,l.memoizedState=p):(l=xR(),We.lanes|=l,Ra|=l,h)}function bA(l,h,p,O,b){var w=W.p;W.p=w!==0&&8>w?w:8;var A=R.T,Z={};R.T=Z,Gv(l,!1,h,p);try{var J=b(),se=R.S;if(se!==null&&se(Z,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var he=uH(J,O);nh(l,h,he,Li(l))}else nh(l,h,O,Li(l))}catch(pe){nh(l,h,{then:function(){},status:"rejected",reason:pe},Li())}finally{W.p=w,A!==null&&Z.types!==null&&(A.types=Z.types),R.T=A}}function gH(){}function Yv(l,h,p,O){if(l.tag!==5)throw Error(i(476));var b=_A(l).queue;bA(l,b,h,U,p===null?gH:function(){return SA(l),p(O)})}function _A(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:U},next:null};var p={};return h.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:p},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function SA(l){var h=_A(l);h.next===null&&(h=l.alternate.memoizedState),nh(l,h.next.queue,{},Li())}function Fv(){return Mn(yh)}function wA(){return Jt().memoizedState}function kA(){return Jt().memoizedState}function OH(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var p=Li();l=Ca(p);var O=Ta(h,l,p);O!==null&&(yi(O,h,p),Gu(O,h,p)),h={cache:kv()},l.payload=h;return}h=h.return}}function vH(l,h,p){var O=Li();p={lane:O,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ep(l)?TA(h,p):(p=pv(l,h,p,O),p!==null&&(yi(p,l,O),QA(p,h,O)))}function CA(l,h,p){var O=Li();nh(l,h,p,O)}function nh(l,h,p,O){var b={lane:O,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ep(l))TA(h,b);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=h.lastRenderedReducer,w!==null))try{var A=h.lastRenderedState,Z=w(A,p);if(b.hasEagerState=!0,b.eagerState=Z,$i(Z,A))return cp(l,h,b,0),Ct===null&&lp(),!1}catch{}if(p=pv(l,h,b,O),p!==null)return yi(p,l,O),QA(p,h,O),!0}return!1}function Gv(l,h,p,O){if(O={lane:2,revertLane:Ey(),gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null},Ep(l)){if(h)throw Error(i(479))}else h=pv(l,p,O,2),h!==null&&yi(h,l,2)}function Ep(l){var h=l.alternate;return l===We||h!==null&&h===We}function TA(l,h){sc=_p=!0;var p=l.pending;p===null?h.next=h:(h.next=p.next,p.next=h),l.pending=h}function QA(l,h,p){if((p&4194048)!==0){var O=h.lanes;O&=l.pendingLanes,p|=O,h.lanes=p,Id(l,p)}}var ih={readContext:Mn,use:kp,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};ih.useEffectEvent=Ht;var EA={readContext:Mn,use:kp,useCallback:function(l,h){return ii().memoizedState=[l,h===void 0?null:h],l},useContext:Mn,useEffect:fA,useImperativeHandle:function(l,h,p){p=p!=null?p.concat([l]):null,Tp(4194308,4,gA.bind(null,h,l),p)},useLayoutEffect:function(l,h){return Tp(4194308,4,l,h)},useInsertionEffect:function(l,h){Tp(4,2,l,h)},useMemo:function(l,h){var p=ii();h=h===void 0?null:h;var O=l();if(Bo){Wn(!0);try{l()}finally{Wn(!1)}}return p.memoizedState=[O,h],O},useReducer:function(l,h,p){var O=ii();if(p!==void 0){var b=p(h);if(Bo){Wn(!0);try{p(h)}finally{Wn(!1)}}}else b=h;return O.memoizedState=O.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},O.queue=l,l=l.dispatch=vH.bind(null,We,l),[O.memoizedState,l]},useRef:function(l){var h=ii();return l={current:l},h.memoizedState=l},useState:function(l){l=Zv(l);var h=l.queue,p=CA.bind(null,We,h);return h.dispatch=p,[l.memoizedState,p]},useDebugValue:Uv,useDeferredValue:function(l,h){var p=ii();return Hv(p,l,h)},useTransition:function(){var l=Zv(!1);return l=bA.bind(null,We,l.queue,!0,!1),ii().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,p){var O=We,b=ii();if(at){if(p===void 0)throw Error(i(407));p=p()}else{if(p=h(),Ct===null)throw Error(i(349));(rt&127)!==0||FP(O,h,p)}b.memoizedState=p;var w={value:p,getSnapshot:h};return b.queue=w,fA(KP.bind(null,O,w,l),[l]),O.flags|=2048,oc(9,{destroy:void 0},GP.bind(null,O,w,p,h),null),p},useId:function(){var l=ii(),h=Ct.identifierPrefix;if(at){var p=Wr,O=Vr;p=(O&~(1<<32-vt(O)-1)).toString(32)+p,h="_"+h+"R_"+p,p=Sp++,0<p&&(h+="H"+p.toString(32)),h+="_"}else p=hH++,h="_"+h+"r_"+p.toString(32)+"_";return l.memoizedState=h},useHostTransitionStatus:Fv,useFormState:oA,useActionState:oA,useOptimistic:function(l){var h=ii();h.memoizedState=h.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=p,h=Gv.bind(null,We,!0,p),p.dispatch=h,[l,h]},useMemoCache:Bv,useCacheRefresh:function(){return ii().memoizedState=OH.bind(null,We)},useEffectEvent:function(l){var h=ii(),p={impl:l};return h.memoizedState=p,function(){if((dt&2)!==0)throw Error(i(440));return p.impl.apply(void 0,arguments)}}},Kv={readContext:Mn,use:kp,useCallback:vA,useContext:Mn,useEffect:Wv,useImperativeHandle:OA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:yA,useReducer:Cp,useRef:hA,useState:function(){return Cp(Rs)},useDebugValue:Uv,useDeferredValue:function(l,h){var p=Jt();return xA(p,bt.memoizedState,l,h)},useTransition:function(){var l=Cp(Rs)[0],h=Jt().memoizedState;return[typeof l=="boolean"?l:th(l),h]},useSyncExternalStore:YP,useId:wA,useHostTransitionStatus:Fv,useFormState:lA,useActionState:lA,useOptimistic:function(l,h){var p=Jt();return tA(p,bt,l,h)},useMemoCache:Bv,useCacheRefresh:kA};Kv.useEffectEvent=dA;var PA={readContext:Mn,use:kp,useCallback:vA,useContext:Mn,useEffect:Wv,useImperativeHandle:OA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:yA,useReducer:Xv,useRef:hA,useState:function(){return Xv(Rs)},useDebugValue:Uv,useDeferredValue:function(l,h){var p=Jt();return bt===null?Hv(p,l,h):xA(p,bt.memoizedState,l,h)},useTransition:function(){var l=Xv(Rs)[0],h=Jt().memoizedState;return[typeof l=="boolean"?l:th(l),h]},useSyncExternalStore:YP,useId:wA,useHostTransitionStatus:Fv,useFormState:uA,useActionState:uA,useOptimistic:function(l,h){var p=Jt();return bt!==null?tA(p,bt,l,h):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:Bv,useCacheRefresh:kA};PA.useEffectEvent=dA;function Jv(l,h,p,O){h=l.memoizedState,p=p(O,h),p=p==null?h:d({},h,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var ey={enqueueSetState:function(l,h,p){l=l._reactInternals;var O=Li(),b=Ca(O);b.payload=h,p!=null&&(b.callback=p),h=Ta(l,b,O),h!==null&&(yi(h,l,O),Gu(h,l,O))},enqueueReplaceState:function(l,h,p){l=l._reactInternals;var O=Li(),b=Ca(O);b.tag=1,b.payload=h,p!=null&&(b.callback=p),h=Ta(l,b,O),h!==null&&(yi(h,l,O),Gu(h,l,O))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var p=Li(),O=Ca(p);O.tag=2,h!=null&&(O.callback=h),h=Ta(l,O,p),h!==null&&(yi(h,l,p),Gu(h,l,p))}};function AA(l,h,p,O,b,w,A){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(O,w,A):h.prototype&&h.prototype.isPureReactComponent?!Xu(p,O)||!Xu(b,w):!0}function RA(l,h,p,O){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(p,O),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(p,O),h.state!==l&&ey.enqueueReplaceState(h,h.state,null)}function Io(l,h){var p=h;if("ref"in h){p={};for(var O in h)O!=="ref"&&(p[O]=h[O])}if(l=l.defaultProps){p===h&&(p=d({},p));for(var b in l)p[b]===void 0&&(p[b]=l[b])}return p}function $A(l){op(l)}function NA(l){console.error(l)}function MA(l){op(l)}function Pp(l,h){try{var p=l.onUncaughtError;p(h.value,{componentStack:h.stack})}catch(O){setTimeout(function(){throw O})}}function jA(l,h,p){try{var O=l.onCaughtError;O(p.value,{componentStack:p.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function ty(l,h,p){return p=Ca(p),p.tag=3,p.payload={element:null},p.callback=function(){Pp(l,h)},p}function zA(l){return l=Ca(l),l.tag=3,l}function DA(l,h,p,O){var b=p.type.getDerivedStateFromError;if(typeof b=="function"){var w=O.value;l.payload=function(){return b(w)},l.callback=function(){jA(h,p,O)}}var A=p.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(l.callback=function(){jA(h,p,O),typeof b!="function"&&($a===null?$a=new Set([this]):$a.add(this));var Z=O.stack;this.componentDidCatch(O.value,{componentStack:Z!==null?Z:""})})}function yH(l,h,p,O,b){if(p.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(h=p.alternate,h!==null&&Jl(h,p,b,!0),p=Mi.current,p!==null){switch(p.tag){case 31:case 13:return ar===null?Ip():p.alternate===null&&Yt===0&&(Yt=3),p.flags&=-257,p.flags|=65536,p.lanes=b,O===Op?p.flags|=16384:(h=p.updateQueue,h===null?p.updateQueue=new Set([O]):h.add(O),Cy(l,O,b)),!1;case 22:return p.flags|=65536,O===Op?p.flags|=16384:(h=p.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([O])},p.updateQueue=h):(p=h.retryQueue,p===null?h.retryQueue=new Set([O]):p.add(O)),Cy(l,O,b)),!1}throw Error(i(435,p.tag))}return Cy(l,O,b),Ip(),!1}if(at)return h=Mi.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=b,O!==xv&&(l=Error(i(422),{cause:O}),Wu(nr(l,p)))):(O!==xv&&(h=Error(i(423),{cause:O}),Wu(nr(h,p))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,O=nr(O,p),b=ty(l.stateNode,O,b),Av(l,b),Yt!==4&&(Yt=2)),!1;var w=Error(i(520),{cause:O});if(w=nr(w,p),hh===null?hh=[w]:hh.push(w),Yt!==4&&(Yt=2),h===null)return!0;O=nr(O,p),p=h;do{switch(p.tag){case 3:return p.flags|=65536,l=b&-b,p.lanes|=l,l=ty(p.stateNode,O,l),Av(p,l),!1;case 1:if(h=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&($a===null||!$a.has(w))))return p.flags|=65536,b&=-b,p.lanes|=b,b=zA(b),DA(b,l,p,O),Av(p,b),!1}p=p.return}while(p!==null);return!1}var ny=Error(i(461)),on=!1;function jn(l,h,p,O){h.child=l===null?IP(h,null,p,O):qo(h,l.child,p,O)}function LA(l,h,p,O,b){p=p.render;var w=h.ref;if("ref"in O){var A={};for(var Z in O)Z!=="ref"&&(A[Z]=O[Z])}else A=O;return jo(h),O=zv(l,h,p,A,w,b),Z=Dv(),l!==null&&!on?(Lv(l,h,b),$s(l,h,b)):(at&&Z&&vv(h),h.flags|=1,jn(l,h,O,b),h.child)}function qA(l,h,p,O,b){if(l===null){var w=p.type;return typeof w=="function"&&!mv(w)&&w.defaultProps===void 0&&p.compare===null?(h.tag=15,h.type=w,BA(l,h,w,O,b)):(l=hp(p.type,null,O,h,h.mode,b),l.ref=h.ref,l.return=h,h.child=l)}if(w=l.child,!uy(l,b)){var A=w.memoizedProps;if(p=p.compare,p=p!==null?p:Xu,p(A,O)&&l.ref===h.ref)return $s(l,h,b)}return h.flags|=1,l=Ts(w,O),l.ref=h.ref,l.return=h,h.child=l}function BA(l,h,p,O,b){if(l!==null){var w=l.memoizedProps;if(Xu(w,O)&&l.ref===h.ref)if(on=!1,h.pendingProps=O=w,uy(l,b))(l.flags&131072)!==0&&(on=!0);else return h.lanes=l.lanes,$s(l,h,b)}return iy(l,h,p,O,b)}function IA(l,h,p,O){var b=O.children,w=l!==null?l.memoizedState:null;if(l===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),O.mode==="hidden"){if((h.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,l!==null){for(O=h.child=l.child,b=0;O!==null;)b=b|O.lanes|O.childLanes,O=O.sibling;O=b&~w}else O=0,h.child=null;return XA(l,h,w,p,O)}if((p&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&mp(h,w!==null?w.cachePool:null),w!==null?VP(h,w):$v(),WP(h);else return O=h.lanes=536870912,XA(l,h,w!==null?w.baseLanes|p:p,p,O)}else w!==null?(mp(h,w.cachePool),VP(h,w),Ea(),h.memoizedState=null):(l!==null&&mp(h,null),$v(),Ea());return jn(l,h,b,p),h.child}function rh(l,h){return l!==null&&l.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function XA(l,h,p,O,b){var w=Tv();return w=w===null?null:{parent:sn._currentValue,pool:w},h.memoizedState={baseLanes:p,cachePool:w},l!==null&&mp(h,null),$v(),WP(h),l!==null&&Jl(l,h,O,!0),h.childLanes=b,null}function Ap(l,h){return h=$p({mode:h.mode,children:h.children},l.mode),h.ref=l.ref,l.child=h,h.return=l,h}function ZA(l,h,p){return qo(h,l.child,null,p),l=Ap(h,h.pendingProps),l.flags|=2,ji(h),h.memoizedState=null,l}function xH(l,h,p){var O=h.pendingProps,b=(h.flags&128)!==0;if(h.flags&=-129,l===null){if(at){if(O.mode==="hidden")return l=Ap(h,O),h.lanes=536870912,rh(null,l);if(Mv(h),(l=$t)?(l=n$(l,sr),l=l!==null&&l.data==="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:ba!==null?{id:Vr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},p=TP(l),p.return=h,h.child=p,Nn=h,$t=null)):l=null,l===null)throw Sa(h);return h.lanes=536870912,null}return Ap(h,O)}var w=l.memoizedState;if(w!==null){var A=w.dehydrated;if(Mv(h),b)if(h.flags&256)h.flags&=-257,h=ZA(l,h,p);else if(h.memoizedState!==null)h.child=l.child,h.flags|=128,h=null;else throw Error(i(558));else if(on||Jl(l,h,p,!1),b=(p&l.childLanes)!==0,on||b){if(O=Ct,O!==null&&(A=Xd(O,p),A!==0&&A!==w.retryLane))throw w.retryLane=A,Ro(l,A),yi(O,l,A),ny;Ip(),h=ZA(l,h,p)}else l=w.treeContext,$t=or(A.nextSibling),Nn=h,at=!0,_a=null,sr=!1,l!==null&&PP(h,l),h=Ap(h,O),h.flags|=4096;return h}return l=Ts(l.child,{mode:O.mode,children:O.children}),l.ref=h.ref,h.child=l,l.return=h,l}function Rp(l,h){var p=h.ref;if(p===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(l===null||l.ref!==p)&&(h.flags|=4194816)}}function iy(l,h,p,O,b){return jo(h),p=zv(l,h,p,O,void 0,b),O=Dv(),l!==null&&!on?(Lv(l,h,b),$s(l,h,b)):(at&&O&&vv(h),h.flags|=1,jn(l,h,p,b),h.child)}function VA(l,h,p,O,b,w){return jo(h),h.updateQueue=null,p=HP(h,O,p,b),UP(l),O=Dv(),l!==null&&!on?(Lv(l,h,w),$s(l,h,w)):(at&&O&&vv(h),h.flags|=1,jn(l,h,p,w),h.child)}function WA(l,h,p,O,b){if(jo(h),h.stateNode===null){var w=Yl,A=p.contextType;typeof A=="object"&&A!==null&&(w=Mn(A)),w=new p(O,w),h.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=ey,h.stateNode=w,w._reactInternals=h,w=h.stateNode,w.props=O,w.state=h.memoizedState,w.refs={},Ev(h),A=p.contextType,w.context=typeof A=="object"&&A!==null?Mn(A):Yl,w.state=h.memoizedState,A=p.getDerivedStateFromProps,typeof A=="function"&&(Jv(h,p,A,O),w.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&ey.enqueueReplaceState(w,w.state,null),Ju(h,O,w,b),Ku(),w.state=h.memoizedState),typeof w.componentDidMount=="function"&&(h.flags|=4194308),O=!0}else if(l===null){w=h.stateNode;var Z=h.memoizedProps,J=Io(p,Z);w.props=J;var se=w.context,he=p.contextType;A=Yl,typeof he=="object"&&he!==null&&(A=Mn(he));var pe=p.getDerivedStateFromProps;he=typeof pe=="function"||typeof w.getSnapshotBeforeUpdate=="function",Z=h.pendingProps!==Z,he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Z||se!==A)&&RA(h,w,O,A),ka=!1;var oe=h.memoizedState;w.state=oe,Ju(h,O,w,b),Ku(),se=h.memoizedState,Z||oe!==se||ka?(typeof pe=="function"&&(Jv(h,p,pe,O),se=h.memoizedState),(J=ka||AA(h,p,J,O,oe,se,A))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(h.flags|=4194308)):(typeof w.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=O,h.memoizedState=se),w.props=O,w.state=se,w.context=A,O=J):(typeof w.componentDidMount=="function"&&(h.flags|=4194308),O=!1)}else{w=h.stateNode,Pv(l,h),A=h.memoizedProps,he=Io(p,A),w.props=he,pe=h.pendingProps,oe=w.context,se=p.contextType,J=Yl,typeof se=="object"&&se!==null&&(J=Mn(se)),Z=p.getDerivedStateFromProps,(se=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==pe||oe!==J)&&RA(h,w,O,J),ka=!1,oe=h.memoizedState,w.state=oe,Ju(h,O,w,b),Ku();var ce=h.memoizedState;A!==pe||oe!==ce||ka||l!==null&&l.dependencies!==null&&dp(l.dependencies)?(typeof Z=="function"&&(Jv(h,p,Z,O),ce=h.memoizedState),(he=ka||AA(h,p,he,O,oe,ce,J)||l!==null&&l.dependencies!==null&&dp(l.dependencies))?(se||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(O,ce,J),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(O,ce,J)),typeof w.componentDidUpdate=="function"&&(h.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===l.memoizedProps&&oe===l.memoizedState||(h.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&oe===l.memoizedState||(h.flags|=1024),h.memoizedProps=O,h.memoizedState=ce),w.props=O,w.state=ce,w.context=J,O=he):(typeof w.componentDidUpdate!="function"||A===l.memoizedProps&&oe===l.memoizedState||(h.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&oe===l.memoizedState||(h.flags|=1024),O=!1)}return w=O,Rp(l,h),O=(h.flags&128)!==0,w||O?(w=h.stateNode,p=O&&typeof p.getDerivedStateFromError!="function"?null:w.render(),h.flags|=1,l!==null&&O?(h.child=qo(h,l.child,null,b),h.child=qo(h,null,p,b)):jn(l,h,p,b),h.memoizedState=w.state,l=h.child):l=$s(l,h,b),l}function UA(l,h,p,O){return No(),h.flags|=256,jn(l,h,p,O),h.child}var ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sy(l){return{baseLanes:l,cachePool:jP()}}function ay(l,h,p){return l=l!==null?l.childLanes&~p:0,h&&(l|=Di),l}function HA(l,h,p){var O=h.pendingProps,b=!1,w=(h.flags&128)!==0,A;if((A=w)||(A=l!==null&&l.memoizedState===null?!1:(Kt.current&2)!==0),A&&(b=!0,h.flags&=-129),A=(h.flags&32)!==0,h.flags&=-33,l===null){if(at){if(b?Qa(h):Ea(),(l=$t)?(l=n$(l,sr),l=l!==null&&l.data!=="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:ba!==null?{id:Vr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},p=TP(l),p.return=h,h.child=p,Nn=h,$t=null)):l=null,l===null)throw Sa(h);return Iy(l)?h.lanes=32:h.lanes=536870912,null}var Z=O.children;return O=O.fallback,b?(Ea(),b=h.mode,Z=$p({mode:"hidden",children:Z},b),O=$o(O,b,p,null),Z.return=h,O.return=h,Z.sibling=O,h.child=Z,O=h.child,O.memoizedState=sy(p),O.childLanes=ay(l,A,p),h.memoizedState=ry,rh(null,O)):(Qa(h),oy(h,Z))}var J=l.memoizedState;if(J!==null&&(Z=J.dehydrated,Z!==null)){if(w)h.flags&256?(Qa(h),h.flags&=-257,h=ly(l,h,p)):h.memoizedState!==null?(Ea(),h.child=l.child,h.flags|=128,h=null):(Ea(),Z=O.fallback,b=h.mode,O=$p({mode:"visible",children:O.children},b),Z=$o(Z,b,p,null),Z.flags|=2,O.return=h,Z.return=h,O.sibling=Z,h.child=O,qo(h,l.child,null,p),O=h.child,O.memoizedState=sy(p),O.childLanes=ay(l,A,p),h.memoizedState=ry,h=rh(null,O));else if(Qa(h),Iy(Z)){if(A=Z.nextSibling&&Z.nextSibling.dataset,A)var se=A.dgst;A=se,O=Error(i(419)),O.stack="",O.digest=A,Wu({value:O,source:null,stack:null}),h=ly(l,h,p)}else if(on||Jl(l,h,p,!1),A=(p&l.childLanes)!==0,on||A){if(A=Ct,A!==null&&(O=Xd(A,p),O!==0&&O!==J.retryLane))throw J.retryLane=O,Ro(l,O),yi(A,l,O),ny;By(Z)||Ip(),h=ly(l,h,p)}else By(Z)?(h.flags|=192,h.child=l.child,h=null):(l=J.treeContext,$t=or(Z.nextSibling),Nn=h,at=!0,_a=null,sr=!1,l!==null&&PP(h,l),h=oy(h,O.children),h.flags|=4096);return h}return b?(Ea(),Z=O.fallback,b=h.mode,J=l.child,se=J.sibling,O=Ts(J,{mode:"hidden",children:O.children}),O.subtreeFlags=J.subtreeFlags&65011712,se!==null?Z=Ts(se,Z):(Z=$o(Z,b,p,null),Z.flags|=2),Z.return=h,O.return=h,O.sibling=Z,h.child=O,rh(null,O),O=h.child,Z=l.child.memoizedState,Z===null?Z=sy(p):(b=Z.cachePool,b!==null?(J=sn._currentValue,b=b.parent!==J?{parent:J,pool:J}:b):b=jP(),Z={baseLanes:Z.baseLanes|p,cachePool:b}),O.memoizedState=Z,O.childLanes=ay(l,A,p),h.memoizedState=ry,rh(l.child,O)):(Qa(h),p=l.child,l=p.sibling,p=Ts(p,{mode:"visible",children:O.children}),p.return=h,p.sibling=null,l!==null&&(A=h.deletions,A===null?(h.deletions=[l],h.flags|=16):A.push(l)),h.child=p,h.memoizedState=null,p)}function oy(l,h){return h=$p({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function $p(l,h){return l=Ni(22,l,null,h),l.lanes=0,l}function ly(l,h,p){return qo(h,l.child,null,p),l=oy(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function YA(l,h,p){l.lanes|=h;var O=l.alternate;O!==null&&(O.lanes|=h),Sv(l.return,h,p)}function cy(l,h,p,O,b,w){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:O,tail:p,tailMode:b,treeForkCount:w}:(A.isBackwards=h,A.rendering=null,A.renderingStartTime=0,A.last=O,A.tail=p,A.tailMode=b,A.treeForkCount=w)}function FA(l,h,p){var O=h.pendingProps,b=O.revealOrder,w=O.tail;O=O.children;var A=Kt.current,Z=(A&2)!==0;if(Z?(A=A&1|2,h.flags|=128):A&=1,z(Kt,A),jn(l,h,O,p),O=at?Vu:0,!Z&&l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&YA(l,p,h);else if(l.tag===19)YA(l,p,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(p=h.child,b=null;p!==null;)l=p.alternate,l!==null&&bp(l)===null&&(b=p),p=p.sibling;p=b,p===null?(b=h.child,h.child=null):(b=p.sibling,p.sibling=null),cy(h,!1,b,p,w,O);break;case"backwards":case"unstable_legacy-backwards":for(p=null,b=h.child,h.child=null;b!==null;){if(l=b.alternate,l!==null&&bp(l)===null){h.child=b;break}l=b.sibling,b.sibling=p,p=b,b=l}cy(h,!0,p,null,w,O);break;case"together":cy(h,!1,null,null,void 0,O);break;default:h.memoizedState=null}return h.child}function $s(l,h,p){if(l!==null&&(h.dependencies=l.dependencies),Ra|=h.lanes,(p&h.childLanes)===0)if(l!==null){if(Jl(l,h,p,!1),(p&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(i(153));if(h.child!==null){for(l=h.child,p=Ts(l,l.pendingProps),h.child=p,p.return=h;l.sibling!==null;)l=l.sibling,p=p.sibling=Ts(l,l.pendingProps),p.return=h;p.sibling=null}return h.child}function uy(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&dp(l)))}function bH(l,h,p){switch(h.tag){case 3:le(h,h.stateNode.containerInfo),wa(h,sn,l.memoizedState.cache),No();break;case 27:case 5:_e(h);break;case 4:le(h,h.stateNode.containerInfo);break;case 10:wa(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,Mv(h),null;break;case 13:var O=h.memoizedState;if(O!==null)return O.dehydrated!==null?(Qa(h),h.flags|=128,null):(p&h.child.childLanes)!==0?HA(l,h,p):(Qa(h),l=$s(l,h,p),l!==null?l.sibling:null);Qa(h);break;case 19:var b=(l.flags&128)!==0;if(O=(p&h.childLanes)!==0,O||(Jl(l,h,p,!1),O=(p&h.childLanes)!==0),b){if(O)return FA(l,h,p);h.flags|=128}if(b=h.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),z(Kt,Kt.current),O)break;return null;case 22:return h.lanes=0,IA(l,h,p,h.pendingProps);case 24:wa(h,sn,l.memoizedState.cache)}return $s(l,h,p)}function GA(l,h,p){if(l!==null)if(l.memoizedProps!==h.pendingProps)on=!0;else{if(!uy(l,p)&&(h.flags&128)===0)return on=!1,bH(l,h,p);on=(l.flags&131072)!==0}else on=!1,at&&(h.flags&1048576)!==0&&EP(h,Vu,h.index);switch(h.lanes=0,h.tag){case 16:e:{var O=h.pendingProps;if(l=Do(h.elementType),h.type=l,typeof l=="function")mv(l)?(O=Io(l,O),h.tag=1,h=WA(null,h,l,O,p)):(h.tag=0,h=iy(null,h,l,O,p));else{if(l!=null){var b=l.$$typeof;if(b===T){h.tag=11,h=LA(null,h,l,O,p);break e}else if(b===P){h.tag=14,h=qA(null,h,l,O,p);break e}}throw h=j(l)||l,Error(i(306,h,""))}}return h;case 0:return iy(l,h,h.type,h.pendingProps,p);case 1:return O=h.type,b=Io(O,h.pendingProps),WA(l,h,O,b,p);case 3:e:{if(le(h,h.stateNode.containerInfo),l===null)throw Error(i(387));O=h.pendingProps;var w=h.memoizedState;b=w.element,Pv(l,h),Ju(h,O,null,p);var A=h.memoizedState;if(O=A.cache,wa(h,sn,O),O!==w.cache&&wv(h,[sn],p,!0),Ku(),O=A.element,w.isDehydrated)if(w={element:O,isDehydrated:!1,cache:A.cache},h.updateQueue.baseState=w,h.memoizedState=w,h.flags&256){h=UA(l,h,O,p);break e}else if(O!==b){b=nr(Error(i(424)),h),Wu(b),h=UA(l,h,O,p);break e}else for(l=h.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,$t=or(l.firstChild),Nn=h,at=!0,_a=null,sr=!0,p=IP(h,null,O,p),h.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(No(),O===b){h=$s(l,h,p);break e}jn(l,h,O,p)}h=h.child}return h;case 26:return Rp(l,h),l===null?(p=l$(h.type,null,h.pendingProps,null))?h.memoizedState=p:at||(p=h.type,l=h.pendingProps,O=Yp(ee.current).createElement(p),O[gn]=h,O[Un]=l,zn(O,p,l),rn(O),h.stateNode=O):h.memoizedState=l$(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return _e(h),l===null&&at&&(O=h.stateNode=s$(h.type,h.pendingProps,ee.current),Nn=h,sr=!0,b=$t,za(h.type)?(Xy=b,$t=or(O.firstChild)):$t=b),jn(l,h,h.pendingProps.children,p),Rp(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&at&&((b=O=$t)&&(O=GH(O,h.type,h.pendingProps,sr),O!==null?(h.stateNode=O,Nn=h,$t=or(O.firstChild),sr=!1,b=!0):b=!1),b||Sa(h)),_e(h),b=h.type,w=h.pendingProps,A=l!==null?l.memoizedProps:null,O=w.children,Dy(b,w)?O=null:A!==null&&Dy(b,A)&&(h.flags|=32),h.memoizedState!==null&&(b=zv(l,h,fH,null,null,p),yh._currentValue=b),Rp(l,h),jn(l,h,O,p),h.child;case 6:return l===null&&at&&((l=p=$t)&&(p=KH(p,h.pendingProps,sr),p!==null?(h.stateNode=p,Nn=h,$t=null,l=!0):l=!1),l||Sa(h)),null;case 13:return HA(l,h,p);case 4:return le(h,h.stateNode.containerInfo),O=h.pendingProps,l===null?h.child=qo(h,null,O,p):jn(l,h,O,p),h.child;case 11:return LA(l,h,h.type,h.pendingProps,p);case 7:return jn(l,h,h.pendingProps,p),h.child;case 8:return jn(l,h,h.pendingProps.children,p),h.child;case 12:return jn(l,h,h.pendingProps.children,p),h.child;case 10:return O=h.pendingProps,wa(h,h.type,O.value),jn(l,h,O.children,p),h.child;case 9:return b=h.type._context,O=h.pendingProps.children,jo(h),b=Mn(b),O=O(b),h.flags|=1,jn(l,h,O,p),h.child;case 14:return qA(l,h,h.type,h.pendingProps,p);case 15:return BA(l,h,h.type,h.pendingProps,p);case 19:return FA(l,h,p);case 31:return xH(l,h,p);case 22:return IA(l,h,p,h.pendingProps);case 24:return jo(h),O=Mn(sn),l===null?(b=Tv(),b===null&&(b=Ct,w=kv(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=p),b=w),h.memoizedState={parent:O,cache:b},Ev(h),wa(h,sn,b)):((l.lanes&p)!==0&&(Pv(l,h),Ju(h,null,null,p),Ku()),b=l.memoizedState,w=h.memoizedState,b.parent!==O?(b={parent:O,cache:O},h.memoizedState=b,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=b),wa(h,sn,O)):(O=w.cache,wa(h,sn,O),O!==b.cache&&wv(h,[sn],p,!0))),jn(l,h,h.pendingProps.children,p),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function Ns(l){l.flags|=4}function hy(l,h,p,O,b){if((h=(l.mode&32)!==0)&&(h=!1),h){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(wR())l.flags|=8192;else throw Lo=Op,Qv}else l.flags&=-16777217}function KA(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!d$(h))if(wR())l.flags|=8192;else throw Lo=Op,Qv}function Np(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?qd():536870912,l.lanes|=h,hc|=h)}function sh(l,h){if(!at)switch(l.tailMode){case"hidden":h=l.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var O=null;p!==null;)p.alternate!==null&&(O=p),p=p.sibling;O===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:O.sibling=null}}function Nt(l){var h=l.alternate!==null&&l.alternate.child===l.child,p=0,O=0;if(h)for(var b=l.child;b!==null;)p|=b.lanes|b.childLanes,O|=b.subtreeFlags&65011712,O|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)p|=b.lanes|b.childLanes,O|=b.subtreeFlags,O|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=O,l.childLanes=p,h}function _H(l,h,p){var O=h.pendingProps;switch(yv(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(h),null;case 1:return Nt(h),null;case 3:return p=h.stateNode,O=null,l!==null&&(O=l.memoizedState.cache),h.memoizedState.cache!==O&&(h.flags|=2048),Ps(sn),ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Kl(h)?Ns(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,bv())),Nt(h),null;case 26:var b=h.type,w=h.memoizedState;return l===null?(Ns(h),w!==null?(Nt(h),KA(h,w)):(Nt(h),hy(h,b,null,O,p))):w?w!==l.memoizedState?(Ns(h),Nt(h),KA(h,w)):(Nt(h),h.flags&=-16777217):(l=l.memoizedProps,l!==O&&Ns(h),Nt(h),hy(h,b,l,O,p)),null;case 27:if(ke(h),p=ee.current,b=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==O&&Ns(h);else{if(!O){if(h.stateNode===null)throw Error(i(166));return Nt(h),null}l=H.current,Kl(h)?AP(h):(l=s$(b,O,p),h.stateNode=l,Ns(h))}return Nt(h),null;case 5:if(ke(h),b=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==O&&Ns(h);else{if(!O){if(h.stateNode===null)throw Error(i(166));return Nt(h),null}if(w=H.current,Kl(h))AP(h);else{var A=Yp(ee.current);switch(w){case 1:w=A.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=A.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=A.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof O.is=="string"?A.createElement("select",{is:O.is}):A.createElement("select"),O.multiple?w.multiple=!0:O.size&&(w.size=O.size);break;default:w=typeof O.is=="string"?A.createElement(b,{is:O.is}):A.createElement(b)}}w[gn]=h,w[Un]=O;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)w.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=w;e:switch(zn(w,b,O),b){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}O&&Ns(h)}}return Nt(h),hy(h,h.type,l===null?null:l.memoizedProps,h.pendingProps,p),null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==O&&Ns(h);else{if(typeof O!="string"&&h.stateNode===null)throw Error(i(166));if(l=ee.current,Kl(h)){if(l=h.stateNode,p=h.memoizedProps,O=null,b=Nn,b!==null)switch(b.tag){case 27:case 5:O=b.memoizedProps}l[gn]=h,l=!!(l.nodeValue===p||O!==null&&O.suppressHydrationWarning===!0||HR(l.nodeValue,p)),l||Sa(h,!0)}else l=Yp(l).createTextNode(O),l[gn]=h,h.stateNode=l}return Nt(h),null;case 31:if(p=h.memoizedState,l===null||l.memoizedState!==null){if(O=Kl(h),p!==null){if(l===null){if(!O)throw Error(i(318));if(l=h.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(557));l[gn]=h}else No(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Nt(h),l=!1}else p=bv(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return h.flags&256?(ji(h),h):(ji(h),null);if((h.flags&128)!==0)throw Error(i(558))}return Nt(h),null;case 13:if(O=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=Kl(h),O!==null&&O.dehydrated!==null){if(l===null){if(!b)throw Error(i(318));if(b=h.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[gn]=h}else No(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Nt(h),b=!1}else b=bv(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return h.flags&256?(ji(h),h):(ji(h),null)}return ji(h),(h.flags&128)!==0?(h.lanes=p,h):(p=O!==null,l=l!==null&&l.memoizedState!==null,p&&(O=h.child,b=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(b=O.alternate.memoizedState.cachePool.pool),w=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(w=O.memoizedState.cachePool.pool),w!==b&&(O.flags|=2048)),p!==l&&p&&(h.child.flags|=8192),Np(h,h.updateQueue),Nt(h),null);case 4:return ae(),l===null&&$y(h.stateNode.containerInfo),Nt(h),null;case 10:return Ps(h.type),Nt(h),null;case 19:if(F(Kt),O=h.memoizedState,O===null)return Nt(h),null;if(b=(h.flags&128)!==0,w=O.rendering,w===null)if(b)sh(O,!1);else{if(Yt!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(w=bp(l),w!==null){for(h.flags|=128,sh(O,!1),l=w.updateQueue,h.updateQueue=l,Np(h,l),h.subtreeFlags=0,l=p,p=h.child;p!==null;)CP(p,l),p=p.sibling;return z(Kt,Kt.current&1|2),at&&Qs(h,O.treeForkCount),h.child}l=l.sibling}O.tail!==null&&zt()>Lp&&(h.flags|=128,b=!0,sh(O,!1),h.lanes=4194304)}else{if(!b)if(l=bp(w),l!==null){if(h.flags|=128,b=!0,l=l.updateQueue,h.updateQueue=l,Np(h,l),sh(O,!0),O.tail===null&&O.tailMode==="hidden"&&!w.alternate&&!at)return Nt(h),null}else 2*zt()-O.renderingStartTime>Lp&&p!==536870912&&(h.flags|=128,b=!0,sh(O,!1),h.lanes=4194304);O.isBackwards?(w.sibling=h.child,h.child=w):(l=O.last,l!==null?l.sibling=w:h.child=w,O.last=w)}return O.tail!==null?(l=O.tail,O.rendering=l,O.tail=l.sibling,O.renderingStartTime=zt(),l.sibling=null,p=Kt.current,z(Kt,b?p&1|2:p&1),at&&Qs(h,O.treeForkCount),l):(Nt(h),null);case 22:case 23:return ji(h),Nv(),O=h.memoizedState!==null,l!==null?l.memoizedState!==null!==O&&(h.flags|=8192):O&&(h.flags|=8192),O?(p&536870912)!==0&&(h.flags&128)===0&&(Nt(h),h.subtreeFlags&6&&(h.flags|=8192)):Nt(h),p=h.updateQueue,p!==null&&Np(h,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),O=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(O=h.memoizedState.cachePool.pool),O!==p&&(h.flags|=2048),l!==null&&F(zo),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),h.memoizedState.cache!==p&&(h.flags|=2048),Ps(sn),Nt(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function SH(l,h){switch(yv(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return Ps(sn),ae(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return ke(h),null;case 31:if(h.memoizedState!==null){if(ji(h),h.alternate===null)throw Error(i(340));No()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 13:if(ji(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(i(340));No()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return F(Kt),null;case 4:return ae(),null;case 10:return Ps(h.type),null;case 22:case 23:return ji(h),Nv(),l!==null&&F(zo),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return Ps(sn),null;case 25:return null;default:return null}}function JA(l,h){switch(yv(h),h.tag){case 3:Ps(sn),ae();break;case 26:case 27:case 5:ke(h);break;case 4:ae();break;case 31:h.memoizedState!==null&&ji(h);break;case 13:ji(h);break;case 19:F(Kt);break;case 10:Ps(h.type);break;case 22:case 23:ji(h),Nv(),l!==null&&F(zo);break;case 24:Ps(sn)}}function ah(l,h){try{var p=h.updateQueue,O=p!==null?p.lastEffect:null;if(O!==null){var b=O.next;p=b;do{if((p.tag&l)===l){O=void 0;var w=p.create,A=p.inst;O=w(),A.destroy=O}p=p.next}while(p!==b)}}catch(Z){xt(h,h.return,Z)}}function Pa(l,h,p){try{var O=h.updateQueue,b=O!==null?O.lastEffect:null;if(b!==null){var w=b.next;O=w;do{if((O.tag&l)===l){var A=O.inst,Z=A.destroy;if(Z!==void 0){A.destroy=void 0,b=h;var J=p,se=Z;try{se()}catch(he){xt(b,J,he)}}}O=O.next}while(O!==w)}}catch(he){xt(h,h.return,he)}}function eR(l){var h=l.updateQueue;if(h!==null){var p=l.stateNode;try{ZP(h,p)}catch(O){xt(l,l.return,O)}}}function tR(l,h,p){p.props=Io(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(O){xt(l,h,O)}}function oh(l,h){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var O=l.stateNode;break;case 30:O=l.stateNode;break;default:O=l.stateNode}typeof p=="function"?l.refCleanup=p(O):p.current=O}}catch(b){xt(l,h,b)}}function Ur(l,h){var p=l.ref,O=l.refCleanup;if(p!==null)if(typeof O=="function")try{O()}catch(b){xt(l,h,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(b){xt(l,h,b)}else p.current=null}function nR(l){var h=l.type,p=l.memoizedProps,O=l.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":p.autoFocus&&O.focus();break e;case"img":p.src?O.src=p.src:p.srcSet&&(O.srcset=p.srcSet)}}catch(b){xt(l,l.return,b)}}function fy(l,h,p){try{var O=l.stateNode;VH(O,l.type,p,h),O[Un]=h}catch(b){xt(l,l.return,b)}}function iR(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&za(l.type)||l.tag===4}function dy(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||iR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&za(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function py(l,h,p){var O=l.tag;if(O===5||O===6)l=l.stateNode,h?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,h):(h=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,h.appendChild(l),p=p._reactRootContainer,p!=null||h.onclick!==null||(h.onclick=ks));else if(O!==4&&(O===27&&za(l.type)&&(p=l.stateNode,h=null),l=l.child,l!==null))for(py(l,h,p),l=l.sibling;l!==null;)py(l,h,p),l=l.sibling}function Mp(l,h,p){var O=l.tag;if(O===5||O===6)l=l.stateNode,h?p.insertBefore(l,h):p.appendChild(l);else if(O!==4&&(O===27&&za(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Mp(l,h,p),l=l.sibling;l!==null;)Mp(l,h,p),l=l.sibling}function rR(l){var h=l.stateNode,p=l.memoizedProps;try{for(var O=l.type,b=h.attributes;b.length;)h.removeAttributeNode(b[0]);zn(h,O,p),h[gn]=l,h[Un]=p}catch(w){xt(l,l.return,w)}}var Ms=!1,ln=!1,my=!1,sR=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function wH(l,h){if(l=l.containerInfo,jy=nm,l=OP(l),lv(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var O=p.getSelection&&p.getSelection();if(O&&O.rangeCount!==0){p=O.anchorNode;var b=O.anchorOffset,w=O.focusNode;O=O.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var A=0,Z=-1,J=-1,se=0,he=0,pe=l,oe=null;t:for(;;){for(var ce;pe!==p||b!==0&&pe.nodeType!==3||(Z=A+b),pe!==w||O!==0&&pe.nodeType!==3||(J=A+O),pe.nodeType===3&&(A+=pe.nodeValue.length),(ce=pe.firstChild)!==null;)oe=pe,pe=ce;for(;;){if(pe===l)break t;if(oe===p&&++se===b&&(Z=A),oe===w&&++he===O&&(J=A),(ce=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=ce}p=Z===-1||J===-1?null:{start:Z,end:J}}else p=null}p=p||{start:0,end:0}}else p=null;for(zy={focusedElem:l,selectionRange:p},nm=!1,Cn=h;Cn!==null;)if(h=Cn,l=h.child,(h.subtreeFlags&1028)!==0&&l!==null)l.return=h,Cn=l;else for(;Cn!==null;){switch(h=Cn,w=h.alternate,l=h.flags,h.tag){case 0:if((l&4)!==0&&(l=h.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)b=l[p],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&w!==null){l=void 0,p=h,b=w.memoizedProps,w=w.memoizedState,O=p.stateNode;try{var Pe=Io(p.type,b);l=O.getSnapshotBeforeUpdate(Pe,w),O.__reactInternalSnapshotBeforeUpdate=l}catch(qe){xt(p,p.return,qe)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,p=l.nodeType,p===9)qy(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":qy(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=h.sibling,l!==null){l.return=h.return,Cn=l;break}Cn=h.return}}function aR(l,h,p){var O=p.flags;switch(p.tag){case 0:case 11:case 15:zs(l,p),O&4&&ah(5,p);break;case 1:if(zs(l,p),O&4)if(l=p.stateNode,h===null)try{l.componentDidMount()}catch(A){xt(p,p.return,A)}else{var b=Io(p.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(b,h,l.__reactInternalSnapshotBeforeUpdate)}catch(A){xt(p,p.return,A)}}O&64&&eR(p),O&512&&oh(p,p.return);break;case 3:if(zs(l,p),O&64&&(l=p.updateQueue,l!==null)){if(h=null,p.child!==null)switch(p.child.tag){case 27:case 5:h=p.child.stateNode;break;case 1:h=p.child.stateNode}try{ZP(l,h)}catch(A){xt(p,p.return,A)}}break;case 27:h===null&&O&4&&rR(p);case 26:case 5:zs(l,p),h===null&&O&4&&nR(p),O&512&&oh(p,p.return);break;case 12:zs(l,p);break;case 31:zs(l,p),O&4&&cR(l,p);break;case 13:zs(l,p),O&4&&uR(l,p),O&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=$H.bind(null,p),JH(l,p))));break;case 22:if(O=p.memoizedState!==null||Ms,!O){h=h!==null&&h.memoizedState!==null||ln,b=Ms;var w=ln;Ms=O,(ln=h)&&!w?Ds(l,p,(p.subtreeFlags&8772)!==0):zs(l,p),Ms=b,ln=w}break;case 30:break;default:zs(l,p)}}function oR(l){var h=l.alternate;h!==null&&(l.alternate=null,oR(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&$u(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Dt=null,mi=!1;function js(l,h,p){for(p=p.child;p!==null;)lR(l,h,p),p=p.sibling}function lR(l,h,p){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Et,p)}catch{}switch(p.tag){case 26:ln||Ur(p,h),js(l,h,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ln||Ur(p,h);var O=Dt,b=mi;za(p.type)&&(Dt=p.stateNode,mi=!1),js(l,h,p),gh(p.stateNode),Dt=O,mi=b;break;case 5:ln||Ur(p,h);case 6:if(O=Dt,b=mi,Dt=null,js(l,h,p),Dt=O,mi=b,Dt!==null)if(mi)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(p.stateNode)}catch(w){xt(p,h,w)}else try{Dt.removeChild(p.stateNode)}catch(w){xt(p,h,w)}break;case 18:Dt!==null&&(mi?(l=Dt,e$(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),yc(l)):e$(Dt,p.stateNode));break;case 4:O=Dt,b=mi,Dt=p.stateNode.containerInfo,mi=!0,js(l,h,p),Dt=O,mi=b;break;case 0:case 11:case 14:case 15:Pa(2,p,h),ln||Pa(4,p,h),js(l,h,p);break;case 1:ln||(Ur(p,h),O=p.stateNode,typeof O.componentWillUnmount=="function"&&tR(p,h,O)),js(l,h,p);break;case 21:js(l,h,p);break;case 22:ln=(O=ln)||p.memoizedState!==null,js(l,h,p),ln=O;break;default:js(l,h,p)}}function cR(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{yc(l)}catch(p){xt(h,h.return,p)}}}function uR(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{yc(l)}catch(p){xt(h,h.return,p)}}function kH(l){switch(l.tag){case 31:case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new sR),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new sR),h;default:throw Error(i(435,l.tag))}}function jp(l,h){var p=kH(l);h.forEach(function(O){if(!p.has(O)){p.add(O);var b=NH.bind(null,l,O);O.then(b,b)}})}function gi(l,h){var p=h.deletions;if(p!==null)for(var O=0;O<p.length;O++){var b=p[O],w=l,A=h,Z=A;e:for(;Z!==null;){switch(Z.tag){case 27:if(za(Z.type)){Dt=Z.stateNode,mi=!1;break e}break;case 5:Dt=Z.stateNode,mi=!1;break e;case 3:case 4:Dt=Z.stateNode.containerInfo,mi=!0;break e}Z=Z.return}if(Dt===null)throw Error(i(160));lR(w,A,b),Dt=null,mi=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)hR(h,l),h=h.sibling}var Cr=null;function hR(l,h){var p=l.alternate,O=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:gi(h,l),Oi(l),O&4&&(Pa(3,l,l.return),ah(3,l),Pa(5,l,l.return));break;case 1:gi(h,l),Oi(l),O&512&&(ln||p===null||Ur(p,p.return)),O&64&&Ms&&(l=l.updateQueue,l!==null&&(O=l.callbacks,O!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?O:p.concat(O))));break;case 26:var b=Cr;if(gi(h,l),Oi(l),O&512&&(ln||p===null||Ur(p,p.return)),O&4){var w=p!==null?p.memoizedState:null;if(O=l.memoizedState,p===null)if(O===null)if(l.stateNode===null){e:{O=l.type,p=l.memoizedProps,b=b.ownerDocument||b;t:switch(O){case"title":w=b.getElementsByTagName("title")[0],(!w||w[Co]||w[gn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(O),b.head.insertBefore(w,b.querySelector("head > title"))),zn(w,O,p),w[gn]=l,rn(w),O=w;break e;case"link":var A=h$("link","href",b).get(O+(p.href||""));if(A){for(var Z=0;Z<A.length;Z++)if(w=A[Z],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){A.splice(Z,1);break t}}w=b.createElement(O),zn(w,O,p),b.head.appendChild(w);break;case"meta":if(A=h$("meta","content",b).get(O+(p.content||""))){for(Z=0;Z<A.length;Z++)if(w=A[Z],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){A.splice(Z,1);break t}}w=b.createElement(O),zn(w,O,p),b.head.appendChild(w);break;default:throw Error(i(468,O))}w[gn]=l,rn(w),O=w}l.stateNode=O}else f$(b,l.type,l.stateNode);else l.stateNode=u$(b,O,l.memoizedProps);else w!==O?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,O===null?f$(b,l.type,l.stateNode):u$(b,O,l.memoizedProps)):O===null&&l.stateNode!==null&&fy(l,l.memoizedProps,p.memoizedProps)}break;case 27:gi(h,l),Oi(l),O&512&&(ln||p===null||Ur(p,p.return)),p!==null&&O&4&&fy(l,l.memoizedProps,p.memoizedProps);break;case 5:if(gi(h,l),Oi(l),O&512&&(ln||p===null||Ur(p,p.return)),l.flags&32){b=l.stateNode;try{Il(b,"")}catch(Pe){xt(l,l.return,Pe)}}O&4&&l.stateNode!=null&&(b=l.memoizedProps,fy(l,b,p!==null?p.memoizedProps:b)),O&1024&&(my=!0);break;case 6:if(gi(h,l),Oi(l),O&4){if(l.stateNode===null)throw Error(i(162));O=l.memoizedProps,p=l.stateNode;try{p.nodeValue=O}catch(Pe){xt(l,l.return,Pe)}}break;case 3:if(Kp=null,b=Cr,Cr=Fp(h.containerInfo),gi(h,l),Cr=b,Oi(l),O&4&&p!==null&&p.memoizedState.isDehydrated)try{yc(h.containerInfo)}catch(Pe){xt(l,l.return,Pe)}my&&(my=!1,fR(l));break;case 4:O=Cr,Cr=Fp(l.stateNode.containerInfo),gi(h,l),Oi(l),Cr=O;break;case 12:gi(h,l),Oi(l);break;case 31:gi(h,l),Oi(l),O&4&&(O=l.updateQueue,O!==null&&(l.updateQueue=null,jp(l,O)));break;case 13:gi(h,l),Oi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Dp=zt()),O&4&&(O=l.updateQueue,O!==null&&(l.updateQueue=null,jp(l,O)));break;case 22:b=l.memoizedState!==null;var J=p!==null&&p.memoizedState!==null,se=Ms,he=ln;if(Ms=se||b,ln=he||J,gi(h,l),ln=he,Ms=se,Oi(l),O&8192)e:for(h=l.stateNode,h._visibility=b?h._visibility&-2:h._visibility|1,b&&(p===null||J||Ms||ln||Xo(l)),p=null,h=l;;){if(h.tag===5||h.tag===26){if(p===null){J=p=h;try{if(w=J.stateNode,b)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{Z=J.stateNode;var pe=J.memoizedProps.style,oe=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;Z.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Pe){xt(J,J.return,Pe)}}}else if(h.tag===6){if(p===null){J=h;try{J.stateNode.nodeValue=b?"":J.memoizedProps}catch(Pe){xt(J,J.return,Pe)}}}else if(h.tag===18){if(p===null){J=h;try{var ce=J.stateNode;b?t$(ce,!0):t$(J.stateNode,!1)}catch(Pe){xt(J,J.return,Pe)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}O&4&&(O=l.updateQueue,O!==null&&(p=O.retryQueue,p!==null&&(O.retryQueue=null,jp(l,p))));break;case 19:gi(h,l),Oi(l),O&4&&(O=l.updateQueue,O!==null&&(l.updateQueue=null,jp(l,O)));break;case 30:break;case 21:break;default:gi(h,l),Oi(l)}}function Oi(l){var h=l.flags;if(h&2){try{for(var p,O=l.return;O!==null;){if(iR(O)){p=O;break}O=O.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var b=p.stateNode,w=dy(l);Mp(l,w,b);break;case 5:var A=p.stateNode;p.flags&32&&(Il(A,""),p.flags&=-33);var Z=dy(l);Mp(l,Z,A);break;case 3:case 4:var J=p.stateNode.containerInfo,se=dy(l);py(l,se,J);break;default:throw Error(i(161))}}catch(he){xt(l,l.return,he)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function fR(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;fR(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function zs(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)aR(l,h.alternate,h),h=h.sibling}function Xo(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:Pa(4,h,h.return),Xo(h);break;case 1:Ur(h,h.return);var p=h.stateNode;typeof p.componentWillUnmount=="function"&&tR(h,h.return,p),Xo(h);break;case 27:gh(h.stateNode);case 26:case 5:Ur(h,h.return),Xo(h);break;case 22:h.memoizedState===null&&Xo(h);break;case 30:Xo(h);break;default:Xo(h)}l=l.sibling}}function Ds(l,h,p){for(p=p&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var O=h.alternate,b=l,w=h,A=w.flags;switch(w.tag){case 0:case 11:case 15:Ds(b,w,p),ah(4,w);break;case 1:if(Ds(b,w,p),O=w,b=O.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(se){xt(O,O.return,se)}if(O=w,b=O.updateQueue,b!==null){var Z=O.stateNode;try{var J=b.shared.hiddenCallbacks;if(J!==null)for(b.shared.hiddenCallbacks=null,b=0;b<J.length;b++)XP(J[b],Z)}catch(se){xt(O,O.return,se)}}p&&A&64&&eR(w),oh(w,w.return);break;case 27:rR(w);case 26:case 5:Ds(b,w,p),p&&O===null&&A&4&&nR(w),oh(w,w.return);break;case 12:Ds(b,w,p);break;case 31:Ds(b,w,p),p&&A&4&&cR(b,w);break;case 13:Ds(b,w,p),p&&A&4&&uR(b,w);break;case 22:w.memoizedState===null&&Ds(b,w,p),oh(w,w.return);break;case 30:break;default:Ds(b,w,p)}h=h.sibling}}function gy(l,h){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Uu(p))}function Oy(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&Uu(l))}function Tr(l,h,p,O){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)dR(l,h,p,O),h=h.sibling}function dR(l,h,p,O){var b=h.flags;switch(h.tag){case 0:case 11:case 15:Tr(l,h,p,O),b&2048&&ah(9,h);break;case 1:Tr(l,h,p,O);break;case 3:Tr(l,h,p,O),b&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&Uu(l)));break;case 12:if(b&2048){Tr(l,h,p,O),l=h.stateNode;try{var w=h.memoizedProps,A=w.id,Z=w.onPostCommit;typeof Z=="function"&&Z(A,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(J){xt(h,h.return,J)}}else Tr(l,h,p,O);break;case 31:Tr(l,h,p,O);break;case 13:Tr(l,h,p,O);break;case 23:break;case 22:w=h.stateNode,A=h.alternate,h.memoizedState!==null?w._visibility&2?Tr(l,h,p,O):lh(l,h):w._visibility&2?Tr(l,h,p,O):(w._visibility|=2,lc(l,h,p,O,(h.subtreeFlags&10256)!==0||!1)),b&2048&&gy(A,h);break;case 24:Tr(l,h,p,O),b&2048&&Oy(h.alternate,h);break;default:Tr(l,h,p,O)}}function lc(l,h,p,O,b){for(b=b&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var w=l,A=h,Z=p,J=O,se=A.flags;switch(A.tag){case 0:case 11:case 15:lc(w,A,Z,J,b),ah(8,A);break;case 23:break;case 22:var he=A.stateNode;A.memoizedState!==null?he._visibility&2?lc(w,A,Z,J,b):lh(w,A):(he._visibility|=2,lc(w,A,Z,J,b)),b&&se&2048&&gy(A.alternate,A);break;case 24:lc(w,A,Z,J,b),b&&se&2048&&Oy(A.alternate,A);break;default:lc(w,A,Z,J,b)}h=h.sibling}}function lh(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var p=l,O=h,b=O.flags;switch(O.tag){case 22:lh(p,O),b&2048&&gy(O.alternate,O);break;case 24:lh(p,O),b&2048&&Oy(O.alternate,O);break;default:lh(p,O)}h=h.sibling}}var ch=8192;function cc(l,h,p){if(l.subtreeFlags&ch)for(l=l.child;l!==null;)pR(l,h,p),l=l.sibling}function pR(l,h,p){switch(l.tag){case 26:cc(l,h,p),l.flags&ch&&l.memoizedState!==null&&hY(p,Cr,l.memoizedState,l.memoizedProps);break;case 5:cc(l,h,p);break;case 3:case 4:var O=Cr;Cr=Fp(l.stateNode.containerInfo),cc(l,h,p),Cr=O;break;case 22:l.memoizedState===null&&(O=l.alternate,O!==null&&O.memoizedState!==null?(O=ch,ch=16777216,cc(l,h,p),ch=O):cc(l,h,p));break;default:cc(l,h,p)}}function mR(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function uh(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var p=0;p<h.length;p++){var O=h[p];Cn=O,OR(O,l)}mR(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)gR(l),l=l.sibling}function gR(l){switch(l.tag){case 0:case 11:case 15:uh(l),l.flags&2048&&Pa(9,l,l.return);break;case 3:uh(l);break;case 12:uh(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,zp(l)):uh(l);break;default:uh(l)}}function zp(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var p=0;p<h.length;p++){var O=h[p];Cn=O,OR(O,l)}mR(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:Pa(8,h,h.return),zp(h);break;case 22:p=h.stateNode,p._visibility&2&&(p._visibility&=-3,zp(h));break;default:zp(h)}l=l.sibling}}function OR(l,h){for(;Cn!==null;){var p=Cn;switch(p.tag){case 0:case 11:case 15:Pa(8,p,h);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var O=p.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Uu(p.memoizedState.cache)}if(O=p.child,O!==null)O.return=p,Cn=O;else e:for(p=l;Cn!==null;){O=Cn;var b=O.sibling,w=O.return;if(oR(O),O===p){Cn=null;break e}if(b!==null){b.return=w,Cn=b;break e}Cn=w}}}var CH={getCacheForType:function(l){var h=Mn(sn),p=h.data.get(l);return p===void 0&&(p=l(),h.data.set(l,p)),p},cacheSignal:function(){return Mn(sn).controller.signal}},TH=typeof WeakMap=="function"?WeakMap:Map,dt=0,Ct=null,et=null,rt=0,yt=0,zi=null,Aa=!1,uc=!1,vy=!1,Ls=0,Yt=0,Ra=0,Zo=0,yy=0,Di=0,hc=0,hh=null,vi=null,xy=!1,Dp=0,vR=0,Lp=1/0,qp=null,$a=null,On=0,Na=null,fc=null,qs=0,by=0,_y=null,yR=null,fh=0,Sy=null;function Li(){return(dt&2)!==0&&rt!==0?rt&-rt:R.T!==null?Ey():Zd()}function xR(){if(Di===0)if((rt&536870912)===0||at){var l=Ml;Ml<<=1,(Ml&3932160)===0&&(Ml=262144),Di=l}else Di=536870912;return l=Mi.current,l!==null&&(l.flags|=32),Di}function yi(l,h,p){(l===Ct&&(yt===2||yt===9)||l.cancelPendingCommit!==null)&&(dc(l,0),Ma(l,rt,Di,!1)),ko(l,p),((dt&2)===0||l!==Ct)&&(l===Ct&&((dt&2)===0&&(Zo|=p),Yt===4&&Ma(l,rt,Di,!1)),Hr(l))}function bR(l,h,p){if((dt&6)!==0)throw Error(i(327));var O=!p&&(h&127)===0&&(h&l.expiredLanes)===0||wo(l,h),b=O?PH(l,h):ky(l,h,!0),w=O;do{if(b===0){uc&&!O&&Ma(l,h,0,!1);break}else{if(p=l.current.alternate,w&&!QH(p)){b=ky(l,h,!1),w=!1;continue}if(b===2){if(w=h,l.errorRecoveryDisabledLanes&w)var A=0;else A=l.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){h=A;e:{var Z=l;b=hh;var J=Z.current.memoizedState.isDehydrated;if(J&&(dc(Z,A).flags|=256),A=ky(Z,A,!1),A!==2){if(vy&&!J){Z.errorRecoveryDisabledLanes|=w,Zo|=w,b=4;break e}w=vi,vi=b,w!==null&&(vi===null?vi=w:vi.push.apply(vi,w))}b=A}if(w=!1,b!==2)continue}}if(b===1){dc(l,0),Ma(l,h,0,!0);break}e:{switch(O=l,w=b,w){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:Ma(O,h,Di,!Aa);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(b=Dp+300-zt(),10<b)){if(Ma(O,h,Di,!Aa),zl(O,0,!0)!==0)break e;qs=h,O.timeoutHandle=KR(_R.bind(null,O,p,vi,qp,xy,h,Di,Zo,hc,Aa,w,"Throttled",-0,0),b);break e}_R(O,p,vi,qp,xy,h,Di,Zo,hc,Aa,w,null,-0,0)}}break}while(!0);Hr(l)}function _R(l,h,p,O,b,w,A,Z,J,se,he,pe,oe,ce){if(l.timeoutHandle=-1,pe=h.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},pR(h,w,pe);var Pe=(w&62914560)===w?Dp-zt():(w&4194048)===w?vR-zt():0;if(Pe=fY(pe,Pe),Pe!==null){qs=w,l.cancelPendingCommit=Pe(PR.bind(null,l,h,w,p,O,b,A,Z,J,he,pe,null,oe,ce)),Ma(l,w,A,!se);return}}PR(l,h,w,p,O,b,A,Z,J)}function QH(l){for(var h=l;;){var p=h.tag;if((p===0||p===11||p===15)&&h.flags&16384&&(p=h.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var O=0;O<p.length;O++){var b=p[O],w=b.getSnapshot;b=b.value;try{if(!$i(w(),b))return!1}catch{return!1}}if(p=h.child,h.subtreeFlags&16384&&p!==null)p.return=h,h=p;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ma(l,h,p,O){h&=~yy,h&=~Zo,l.suspendedLanes|=h,l.pingedLanes&=~h,O&&(l.warmLanes|=h),O=l.expirationTimes;for(var b=h;0<b;){var w=31-vt(b),A=1<<w;O[w]=-1,b&=~A}p!==0&&Bd(l,p,h)}function Bp(){return(dt&6)===0?(dh(0),!1):!0}function wy(){if(et!==null){if(yt===0)var l=et.return;else l=et,Es=Mo=null,qv(l),ic=null,Yu=0,l=et;for(;l!==null;)JA(l.alternate,l),l=l.return;et=null}}function dc(l,h){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,HH(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),qs=0,wy(),Ct=l,et=p=Ts(l.current,null),rt=h,yt=0,zi=null,Aa=!1,uc=wo(l,h),vy=!1,hc=Di=yy=Zo=Ra=Yt=0,vi=hh=null,xy=!1,(h&8)!==0&&(h|=h&32);var O=l.entangledLanes;if(O!==0)for(l=l.entanglements,O&=h;0<O;){var b=31-vt(O),w=1<<b;h|=l[b],O&=~w}return Ls=h,lp(),p}function SR(l,h){We=null,R.H=ih,h===nc||h===gp?(h=LP(),yt=3):h===Qv?(h=LP(),yt=4):yt=h===ny?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,zi=h,et===null&&(Yt=1,Pp(l,nr(h,l.current)))}function wR(){var l=Mi.current;return l===null?!0:(rt&4194048)===rt?ar===null:(rt&62914560)===rt||(rt&536870912)!==0?l===ar:!1}function kR(){var l=R.H;return R.H=ih,l===null?ih:l}function CR(){var l=R.A;return R.A=CH,l}function Ip(){Yt=4,Aa||(rt&4194048)!==rt&&Mi.current!==null||(uc=!0),(Ra&134217727)===0&&(Zo&134217727)===0||Ct===null||Ma(Ct,rt,Di,!1)}function ky(l,h,p){var O=dt;dt|=2;var b=kR(),w=CR();(Ct!==l||rt!==h)&&(qp=null,dc(l,h)),h=!1;var A=Yt;e:do try{if(yt!==0&&et!==null){var Z=et,J=zi;switch(yt){case 8:wy(),A=6;break e;case 3:case 2:case 9:case 6:Mi.current===null&&(h=!0);var se=yt;if(yt=0,zi=null,pc(l,Z,J,se),p&&uc){A=0;break e}break;default:se=yt,yt=0,zi=null,pc(l,Z,J,se)}}EH(),A=Yt;break}catch(he){SR(l,he)}while(!0);return h&&l.shellSuspendCounter++,Es=Mo=null,dt=O,R.H=b,R.A=w,et===null&&(Ct=null,rt=0,lp()),A}function EH(){for(;et!==null;)TR(et)}function PH(l,h){var p=dt;dt|=2;var O=kR(),b=CR();Ct!==l||rt!==h?(qp=null,Lp=zt()+500,dc(l,h)):uc=wo(l,h);e:do try{if(yt!==0&&et!==null){h=et;var w=zi;t:switch(yt){case 1:yt=0,zi=null,pc(l,h,w,1);break;case 2:case 9:if(zP(w)){yt=0,zi=null,QR(h);break}h=function(){yt!==2&&yt!==9||Ct!==l||(yt=7),Hr(l)},w.then(h,h);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:zP(w)?(yt=0,zi=null,QR(h)):(yt=0,zi=null,pc(l,h,w,7));break;case 5:var A=null;switch(et.tag){case 26:A=et.memoizedState;case 5:case 27:var Z=et;if(A?d$(A):Z.stateNode.complete){yt=0,zi=null;var J=Z.sibling;if(J!==null)et=J;else{var se=Z.return;se!==null?(et=se,Xp(se)):et=null}break t}}yt=0,zi=null,pc(l,h,w,5);break;case 6:yt=0,zi=null,pc(l,h,w,6);break;case 8:wy(),Yt=6;break e;default:throw Error(i(462))}}AH();break}catch(he){SR(l,he)}while(!0);return Es=Mo=null,R.H=O,R.A=b,dt=p,et!==null?0:(Ct=null,rt=0,lp(),Yt)}function AH(){for(;et!==null&&!kn();)TR(et)}function TR(l){var h=GA(l.alternate,l,Ls);l.memoizedProps=l.pendingProps,h===null?Xp(l):et=h}function QR(l){var h=l,p=h.alternate;switch(h.tag){case 15:case 0:h=VA(p,h,h.pendingProps,h.type,void 0,rt);break;case 11:h=VA(p,h,h.pendingProps,h.type.render,h.ref,rt);break;case 5:qv(h);default:JA(p,h),h=et=CP(h,Ls),h=GA(p,h,Ls)}l.memoizedProps=l.pendingProps,h===null?Xp(l):et=h}function pc(l,h,p,O){Es=Mo=null,qv(h),ic=null,Yu=0;var b=h.return;try{if(yH(l,b,h,p,rt)){Yt=1,Pp(l,nr(p,l.current)),et=null;return}}catch(w){if(b!==null)throw et=b,w;Yt=1,Pp(l,nr(p,l.current)),et=null;return}h.flags&32768?(at||O===1?l=!0:uc||(rt&536870912)!==0?l=!1:(Aa=l=!0,(O===2||O===9||O===3||O===6)&&(O=Mi.current,O!==null&&O.tag===13&&(O.flags|=16384))),ER(h,l)):Xp(h)}function Xp(l){var h=l;do{if((h.flags&32768)!==0){ER(h,Aa);return}l=h.return;var p=_H(h.alternate,h,Ls);if(p!==null){et=p;return}if(h=h.sibling,h!==null){et=h;return}et=h=l}while(h!==null);Yt===0&&(Yt=5)}function ER(l,h){do{var p=SH(l.alternate,l);if(p!==null){p.flags&=32767,et=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!h&&(l=l.sibling,l!==null)){et=l;return}et=l=p}while(l!==null);Yt=6,et=null}function PR(l,h,p,O,b,w,A,Z,J){l.cancelPendingCommit=null;do Zp();while(On!==0);if((dt&6)!==0)throw Error(i(327));if(h!==null){if(h===l.current)throw Error(i(177));if(w=h.lanes|h.childLanes,w|=dv,X0(l,p,w,A,Z,J),l===Ct&&(et=Ct=null,rt=0),fc=h,Na=l,qs=p,by=w,_y=b,yR=O,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,MH(Me,function(){return MR(),null})):(l.callbackNode=null,l.callbackPriority=0),O=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||O){O=R.T,R.T=null,b=W.p,W.p=2,A=dt,dt|=4;try{wH(l,h,p)}finally{dt=A,W.p=b,R.T=O}}On=1,AR(),RR(),$R()}}function AR(){if(On===1){On=0;var l=Na,h=fc,p=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||p){p=R.T,R.T=null;var O=W.p;W.p=2;var b=dt;dt|=4;try{hR(h,l);var w=zy,A=OP(l.containerInfo),Z=w.focusedElem,J=w.selectionRange;if(A!==Z&&Z&&Z.ownerDocument&&gP(Z.ownerDocument.documentElement,Z)){if(J!==null&&lv(Z)){var se=J.start,he=J.end;if(he===void 0&&(he=se),"selectionStart"in Z)Z.selectionStart=se,Z.selectionEnd=Math.min(he,Z.value.length);else{var pe=Z.ownerDocument||document,oe=pe&&pe.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),Pe=Z.textContent.length,qe=Math.min(J.start,Pe),St=J.end===void 0?qe:Math.min(J.end,Pe);!ce.extend&&qe>St&&(A=St,St=qe,qe=A);var ne=mP(Z,qe),te=mP(Z,St);if(ne&&te&&(ce.rangeCount!==1||ce.anchorNode!==ne.node||ce.anchorOffset!==ne.offset||ce.focusNode!==te.node||ce.focusOffset!==te.offset)){var re=pe.createRange();re.setStart(ne.node,ne.offset),ce.removeAllRanges(),qe>St?(ce.addRange(re),ce.extend(te.node,te.offset)):(re.setEnd(te.node,te.offset),ce.addRange(re))}}}}for(pe=[],ce=Z;ce=ce.parentNode;)ce.nodeType===1&&pe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<pe.length;Z++){var de=pe[Z];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}nm=!!jy,zy=jy=null}finally{dt=b,W.p=O,R.T=p}}l.current=h,On=2}}function RR(){if(On===2){On=0;var l=Na,h=fc,p=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||p){p=R.T,R.T=null;var O=W.p;W.p=2;var b=dt;dt|=4;try{aR(l,h.alternate,h)}finally{dt=b,W.p=O,R.T=p}}On=3}}function $R(){if(On===4||On===3){On=0,jt();var l=Na,h=fc,p=qs,O=yR;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?On=5:(On=0,fc=Na=null,NR(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&($a=null),Ru(p),h=h.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Et,h,void 0,(h.current.flags&128)===128)}catch{}if(O!==null){h=R.T,b=W.p,W.p=2,R.T=null;try{for(var w=l.onRecoverableError,A=0;A<O.length;A++){var Z=O[A];w(Z.value,{componentStack:Z.stack})}}finally{R.T=h,W.p=b}}(qs&3)!==0&&Zp(),Hr(l),b=l.pendingLanes,(p&261930)!==0&&(b&42)!==0?l===Sy?fh++:(fh=0,Sy=l):fh=0,dh(0)}}function NR(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,Uu(h)))}function Zp(){return AR(),RR(),$R(),MR()}function MR(){if(On!==5)return!1;var l=Na,h=by;by=0;var p=Ru(qs),O=R.T,b=W.p;try{W.p=32>p?32:p,R.T=null,p=_y,_y=null;var w=Na,A=qs;if(On=0,fc=Na=null,qs=0,(dt&6)!==0)throw Error(i(331));var Z=dt;if(dt|=4,gR(w.current),dR(w,w.current,A,p),dt=Z,dh(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Et,w)}catch{}return!0}finally{W.p=b,R.T=O,NR(l,h)}}function jR(l,h,p){h=nr(p,h),h=ty(l.stateNode,h,2),l=Ta(l,h,2),l!==null&&(ko(l,2),Hr(l))}function xt(l,h,p){if(l.tag===3)jR(l,l,p);else for(;h!==null;){if(h.tag===3){jR(h,l,p);break}else if(h.tag===1){var O=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&($a===null||!$a.has(O))){l=nr(p,l),p=zA(2),O=Ta(h,p,2),O!==null&&(DA(p,O,h,l),ko(O,2),Hr(O));break}}h=h.return}}function Cy(l,h,p){var O=l.pingCache;if(O===null){O=l.pingCache=new TH;var b=new Set;O.set(h,b)}else b=O.get(h),b===void 0&&(b=new Set,O.set(h,b));b.has(p)||(vy=!0,b.add(p),l=RH.bind(null,l,h,p),h.then(l,l))}function RH(l,h,p){var O=l.pingCache;O!==null&&O.delete(h),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Ct===l&&(rt&p)===p&&(Yt===4||Yt===3&&(rt&62914560)===rt&&300>zt()-Dp?(dt&2)===0&&dc(l,0):yy|=p,hc===rt&&(hc=0)),Hr(l)}function zR(l,h){h===0&&(h=qd()),l=Ro(l,h),l!==null&&(ko(l,h),Hr(l))}function $H(l){var h=l.memoizedState,p=0;h!==null&&(p=h.retryLane),zR(l,p)}function NH(l,h){var p=0;switch(l.tag){case 31:case 13:var O=l.stateNode,b=l.memoizedState;b!==null&&(p=b.retryLane);break;case 19:O=l.stateNode;break;case 22:O=l.stateNode._retryCache;break;default:throw Error(i(314))}O!==null&&O.delete(h),zR(l,p)}function MH(l,h){return Zn(l,h)}var Vp=null,mc=null,Ty=!1,Wp=!1,Qy=!1,ja=0;function Hr(l){l!==mc&&l.next===null&&(mc===null?Vp=mc=l:mc=mc.next=l),Wp=!0,Ty||(Ty=!0,zH())}function dh(l,h){if(!Qy&&Wp){Qy=!0;do for(var p=!1,O=Vp;O!==null;){if(l!==0){var b=O.pendingLanes;if(b===0)var w=0;else{var A=O.suspendedLanes,Z=O.pingedLanes;w=(1<<31-vt(42|l)+1)-1,w&=b&~(A&~Z),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,BR(O,w))}else w=rt,w=zl(O,O===Ct?w:0,O.cancelPendingCommit!==null||O.timeoutHandle!==-1),(w&3)===0||wo(O,w)||(p=!0,BR(O,w));O=O.next}while(p);Qy=!1}}function jH(){DR()}function DR(){Wp=Ty=!1;var l=0;ja!==0&&UH()&&(l=ja);for(var h=zt(),p=null,O=Vp;O!==null;){var b=O.next,w=LR(O,h);w===0?(O.next=null,p===null?Vp=b:p.next=b,b===null&&(mc=p)):(p=O,(l!==0||(w&3)!==0)&&(Wp=!0)),O=b}On!==0&&On!==5||dh(l),ja!==0&&(ja=0)}function LR(l,h){for(var p=l.suspendedLanes,O=l.pingedLanes,b=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var A=31-vt(w),Z=1<<A,J=b[A];J===-1?((Z&p)===0||(Z&O)!==0)&&(b[A]=I0(Z,h)):J<=h&&(l.expiredLanes|=Z),w&=~Z}if(h=Ct,p=rt,p=zl(l,l===h?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),O=l.callbackNode,p===0||l===h&&(yt===2||yt===9)||l.cancelPendingCommit!==null)return O!==null&&O!==null&&Vn(O),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||wo(l,p)){if(h=p&-p,h===l.callbackPriority)return h;switch(O!==null&&Vn(O),Ru(p)){case 2:case 8:p=ve;break;case 32:p=Me;break;case 268435456:p=Je;break;default:p=Me}return O=qR.bind(null,l),p=Zn(p,O),l.callbackPriority=h,l.callbackNode=p,h}return O!==null&&O!==null&&Vn(O),l.callbackPriority=2,l.callbackNode=null,2}function qR(l,h){if(On!==0&&On!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Zp()&&l.callbackNode!==p)return null;var O=rt;return O=zl(l,l===Ct?O:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),O===0?null:(bR(l,O,h),LR(l,zt()),l.callbackNode!=null&&l.callbackNode===p?qR.bind(null,l):null)}function BR(l,h){if(Zp())return null;bR(l,h,!0)}function zH(){YH(function(){(dt&6)!==0?Zn(ue,jH):DR()})}function Ey(){if(ja===0){var l=ec;l===0&&(l=Nl,Nl<<=1,(Nl&261888)===0&&(Nl=256)),ja=l}return ja}function IR(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ep(""+l)}function XR(l,h){var p=h.ownerDocument.createElement("input");return p.name=h.name,p.value=h.value,l.id&&p.setAttribute("form",l.id),h.parentNode.insertBefore(p,h),l=new FormData(l),p.parentNode.removeChild(p),l}function DH(l,h,p,O,b){if(h==="submit"&&p&&p.stateNode===b){var w=IR((b[Un]||null).action),A=O.submitter;A&&(h=(h=A[Un]||null)?IR(h.formAction):A.getAttribute("formAction"),h!==null&&(w=h,A=null));var Z=new rp("action","action",null,O,b);l.push({event:Z,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(ja!==0){var J=A?XR(b,A):new FormData(b);Yv(p,{pending:!0,data:J,method:b.method,action:w},null,J)}}else typeof w=="function"&&(Z.preventDefault(),J=A?XR(b,A):new FormData(b),Yv(p,{pending:!0,data:J,method:b.method,action:w},w,J))},currentTarget:b}]})}}for(var Py=0;Py<fv.length;Py++){var Ay=fv[Py],LH=Ay.toLowerCase(),qH=Ay[0].toUpperCase()+Ay.slice(1);kr(LH,"on"+qH)}kr(xP,"onAnimationEnd"),kr(bP,"onAnimationIteration"),kr(_P,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(nH,"onTransitionRun"),kr(iH,"onTransitionStart"),kr(rH,"onTransitionCancel"),kr(SP,"onTransitionEnd"),ya("onMouseEnter",["mouseout","mouseover"]),ya("onMouseLeave",["mouseout","mouseover"]),ya("onPointerEnter",["pointerout","pointerover"]),ya("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ph));function ZR(l,h){h=(h&4)!==0;for(var p=0;p<l.length;p++){var O=l[p],b=O.event;O=O.listeners;e:{var w=void 0;if(h)for(var A=O.length-1;0<=A;A--){var Z=O[A],J=Z.instance,se=Z.currentTarget;if(Z=Z.listener,J!==w&&b.isPropagationStopped())break e;w=Z,b.currentTarget=se;try{w(b)}catch(he){op(he)}b.currentTarget=null,w=J}else for(A=0;A<O.length;A++){if(Z=O[A],J=Z.instance,se=Z.currentTarget,Z=Z.listener,J!==w&&b.isPropagationStopped())break e;w=Z,b.currentTarget=se;try{w(b)}catch(he){op(he)}b.currentTarget=null,w=J}}}}function tt(l,h){var p=h[Dl];p===void 0&&(p=h[Dl]=new Set);var O=l+"__bubble";p.has(O)||(VR(h,l,2,!1),p.add(O))}function Ry(l,h,p){var O=0;h&&(O|=4),VR(p,l,O,h)}var Up="_reactListening"+Math.random().toString(36).slice(2);function $y(l){if(!l[Up]){l[Up]=!0,Hd.forEach(function(p){p!=="selectionchange"&&(BH.has(p)||Ry(p,!1,l),Ry(p,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[Up]||(h[Up]=!0,Ry("selectionchange",!1,h))}}function VR(l,h,p,O){switch(x$(h)){case 2:var b=mY;break;case 8:b=gY;break;default:b=Hy}p=b.bind(null,h,p,l),b=void 0,!J0||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(b=!0),O?b!==void 0?l.addEventListener(h,p,{capture:!0,passive:b}):l.addEventListener(h,p,!0):b!==void 0?l.addEventListener(h,p,{passive:b}):l.addEventListener(h,p,!1)}function Ny(l,h,p,O,b){var w=O;if((h&1)===0&&(h&2)===0&&O!==null)e:for(;;){if(O===null)return;var A=O.tag;if(A===3||A===4){var Z=O.stateNode.containerInfo;if(Z===b)break;if(A===4)for(A=O.return;A!==null;){var J=A.tag;if((J===3||J===4)&&A.stateNode.containerInfo===b)return;A=A.return}for(;Z!==null;){if(A=ma(Z),A===null)return;if(J=A.tag,J===5||J===6||J===26||J===27){O=w=A;continue e}Z=Z.parentNode}}O=O.return}FE(function(){var se=w,he=G0(p),pe=[];e:{var oe=wP.get(l);if(oe!==void 0){var ce=rp,Pe=l;switch(l){case"keypress":if(np(p)===0)break e;case"keydown":case"keyup":ce=NU;break;case"focusin":Pe="focus",ce=iv;break;case"focusout":Pe="blur",ce=iv;break;case"beforeblur":case"afterblur":ce=iv;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=JE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=_U;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=zU;break;case xP:case bP:case _P:ce=kU;break;case SP:ce=LU;break;case"scroll":case"scrollend":ce=xU;break;case"wheel":ce=BU;break;case"copy":case"cut":case"paste":ce=TU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=tP;break;case"toggle":case"beforetoggle":ce=XU}var qe=(h&4)!==0,St=!qe&&(l==="scroll"||l==="scrollend"),ne=qe?oe!==null?oe+"Capture":null:oe;qe=[];for(var te=se,re;te!==null;){var de=te;if(re=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||re===null||ne===null||(de=ju(te,ne),de!=null&&qe.push(mh(te,de,re))),St)break;te=te.return}0<qe.length&&(oe=new ce(oe,Pe,null,p,he),pe.push({event:oe,listeners:qe}))}}if((h&7)===0){e:{if(oe=l==="mouseover"||l==="pointerover",ce=l==="mouseout"||l==="pointerout",oe&&p!==F0&&(Pe=p.relatedTarget||p.fromElement)&&(ma(Pe)||Pe[_s]))break e;if((ce||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(Pe=p.relatedTarget||p.toElement,ce=se,Pe=Pe?ma(Pe):null,Pe!==null&&(St=s(Pe),qe=Pe.tag,Pe!==St||qe!==5&&qe!==27&&qe!==6)&&(Pe=null)):(ce=null,Pe=se),ce!==Pe)){if(qe=JE,de="onMouseLeave",ne="onMouseEnter",te="mouse",(l==="pointerout"||l==="pointerover")&&(qe=tP,de="onPointerLeave",ne="onPointerEnter",te="pointer"),St=ce==null?oe:Oa(ce),re=Pe==null?oe:Oa(Pe),oe=new qe(de,te+"leave",ce,p,he),oe.target=St,oe.relatedTarget=re,de=null,ma(he)===se&&(qe=new qe(ne,te+"enter",Pe,p,he),qe.target=re,qe.relatedTarget=St,de=qe),St=de,ce&&Pe)t:{for(qe=IH,ne=ce,te=Pe,re=0,de=ne;de;de=qe(de))re++;de=0;for(var ze=te;ze;ze=qe(ze))de++;for(;0<re-de;)ne=qe(ne),re--;for(;0<de-re;)te=qe(te),de--;for(;re--;){if(ne===te||te!==null&&ne===te.alternate){qe=ne;break t}ne=qe(ne),te=qe(te)}qe=null}else qe=null;ce!==null&&WR(pe,oe,ce,qe,!1),Pe!==null&&St!==null&&WR(pe,St,Pe,qe,!0)}}e:{if(oe=se?Oa(se):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var ht=cP;else if(oP(oe))if(uP)ht=JU;else{ht=GU;var Re=FU}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?se&&Y0(se.elementType)&&(ht=cP):ht=KU;if(ht&&(ht=ht(l,se))){lP(pe,ht,p,he);break e}Re&&Re(l,oe,se),l==="focusout"&&se&&oe.type==="number"&&se.memoizedProps.value!=null&&Mu(oe,"number",oe.value)}switch(Re=se?Oa(se):window,l){case"focusin":(oP(Re)||Re.contentEditable==="true")&&(Wl=Re,cv=se,Zu=null);break;case"focusout":Zu=cv=Wl=null;break;case"mousedown":uv=!0;break;case"contextmenu":case"mouseup":case"dragend":uv=!1,vP(pe,p,he);break;case"selectionchange":if(tH)break;case"keydown":case"keyup":vP(pe,p,he)}var Ue;if(sv)e:{switch(l){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Vl?sP(l,p)&&(st="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(st="onCompositionStart");st&&(nP&&p.locale!=="ko"&&(Vl||st!=="onCompositionStart"?st==="onCompositionEnd"&&Vl&&(Ue=GE()):(xa=he,ev="value"in xa?xa.value:xa.textContent,Vl=!0)),Re=Hp(se,st),0<Re.length&&(st=new eP(st,l,null,p,he),pe.push({event:st,listeners:Re}),Ue?st.data=Ue:(Ue=aP(p),Ue!==null&&(st.data=Ue)))),(Ue=VU?WU(l,p):UU(l,p))&&(st=Hp(se,"onBeforeInput"),0<st.length&&(Re=new eP("onBeforeInput","beforeinput",null,p,he),pe.push({event:Re,listeners:st}),Re.data=Ue)),DH(pe,l,se,p,he)}ZR(pe,h)})}function mh(l,h,p){return{instance:l,listener:h,currentTarget:p}}function Hp(l,h){for(var p=h+"Capture",O=[];l!==null;){var b=l,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=ju(l,p),b!=null&&O.unshift(mh(l,b,w)),b=ju(l,h),b!=null&&O.push(mh(l,b,w))),l.tag===3)return O;l=l.return}return[]}function IH(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function WR(l,h,p,O,b){for(var w=h._reactName,A=[];p!==null&&p!==O;){var Z=p,J=Z.alternate,se=Z.stateNode;if(Z=Z.tag,J!==null&&J===O)break;Z!==5&&Z!==26&&Z!==27||se===null||(J=se,b?(se=ju(p,w),se!=null&&A.unshift(mh(p,se,J))):b||(se=ju(p,w),se!=null&&A.push(mh(p,se,J)))),p=p.return}A.length!==0&&l.push({event:h,listeners:A})}var XH=/\r\n?/g,ZH=/\u0000|\uFFFD/g;function UR(l){return(typeof l=="string"?l:""+l).replace(XH,`
`).replace(ZH,"")}function HR(l,h){return h=UR(h),UR(l)===h}function _t(l,h,p,O,b,w){switch(p){case"children":typeof O=="string"?h==="body"||h==="textarea"&&O===""||Il(l,O):(typeof O=="number"||typeof O=="bigint")&&h!=="body"&&Il(l,""+O);break;case"className":ql(l,"class",O);break;case"tabIndex":ql(l,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":ql(l,p,O);break;case"style":HE(l,O,w);break;case"data":if(h!=="object"){ql(l,"data",O);break}case"src":case"href":if(O===""&&(h!=="a"||p!=="href")){l.removeAttribute(p);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){l.removeAttribute(p);break}O=ep(""+O),l.setAttribute(p,O);break;case"action":case"formAction":if(typeof O=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(h!=="input"&&_t(l,h,"name",b.name,b,null),_t(l,h,"formEncType",b.formEncType,b,null),_t(l,h,"formMethod",b.formMethod,b,null),_t(l,h,"formTarget",b.formTarget,b,null)):(_t(l,h,"encType",b.encType,b,null),_t(l,h,"method",b.method,b,null),_t(l,h,"target",b.target,b,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){l.removeAttribute(p);break}O=ep(""+O),l.setAttribute(p,O);break;case"onClick":O!=null&&(l.onclick=ks);break;case"onScroll":O!=null&&tt("scroll",l);break;case"onScrollEnd":O!=null&&tt("scrollend",l);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(i(61));if(p=O.__html,p!=null){if(b.children!=null)throw Error(i(60));l.innerHTML=p}}break;case"multiple":l.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":l.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){l.removeAttribute("xlink:href");break}p=ep(""+O),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?l.setAttribute(p,""+O):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":O===!0?l.setAttribute(p,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?l.setAttribute(p,O):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?l.setAttribute(p,O):l.removeAttribute(p);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?l.removeAttribute(p):l.setAttribute(p,O);break;case"popover":tt("beforetoggle",l),tt("toggle",l),Ll(l,"popover",O);break;case"xlinkActuate":wr(l,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":wr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":wr(l,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":wr(l,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":wr(l,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":wr(l,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":wr(l,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":wr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":wr(l,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":Ll(l,"is",O);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=vU.get(p)||p,Ll(l,p,O))}}function My(l,h,p,O,b,w){switch(p){case"style":HE(l,O,w);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(i(61));if(p=O.__html,p!=null){if(b.children!=null)throw Error(i(60));l.innerHTML=p}}break;case"children":typeof O=="string"?Il(l,O):(typeof O=="number"||typeof O=="bigint")&&Il(l,""+O);break;case"onScroll":O!=null&&tt("scroll",l);break;case"onScrollEnd":O!=null&&tt("scrollend",l);break;case"onClick":O!=null&&(l.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yd.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(b=p.endsWith("Capture"),h=p.slice(2,b?p.length-7:void 0),w=l[Un]||null,w=w!=null?w[p]:null,typeof w=="function"&&l.removeEventListener(h,w,b),typeof O=="function")){typeof w!="function"&&w!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(h,O,b);break e}p in l?l[p]=O:O===!0?l.setAttribute(p,""):Ll(l,p,O)}}}function zn(l,h,p){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",l),tt("load",l);var O=!1,b=!1,w;for(w in p)if(p.hasOwnProperty(w)){var A=p[w];if(A!=null)switch(w){case"src":O=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:_t(l,h,w,A,p,null)}}b&&_t(l,h,"srcSet",p.srcSet,p,null),O&&_t(l,h,"src",p.src,p,null);return;case"input":tt("invalid",l);var Z=w=A=b=null,J=null,se=null;for(O in p)if(p.hasOwnProperty(O)){var he=p[O];if(he!=null)switch(O){case"name":b=he;break;case"type":A=he;break;case"checked":J=he;break;case"defaultChecked":se=he;break;case"value":w=he;break;case"defaultValue":Z=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,h));break;default:_t(l,h,O,he,p,null)}}Jd(l,w,Z,J,se,A,b,!1);return;case"select":tt("invalid",l),O=A=w=null;for(b in p)if(p.hasOwnProperty(b)&&(Z=p[b],Z!=null))switch(b){case"value":w=Z;break;case"defaultValue":A=Z;break;case"multiple":O=Z;default:_t(l,h,b,Z,p,null)}h=w,p=A,l.multiple=!!O,h!=null?ws(l,!!O,h,!1):p!=null&&ws(l,!!O,p,!0);return;case"textarea":tt("invalid",l),w=b=O=null;for(A in p)if(p.hasOwnProperty(A)&&(Z=p[A],Z!=null))switch(A){case"value":O=Z;break;case"defaultValue":b=Z;break;case"children":w=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(91));break;default:_t(l,h,A,Z,p,null)}WE(l,O,b,w);return;case"option":for(J in p)p.hasOwnProperty(J)&&(O=p[J],O!=null)&&(J==="selected"?l.selected=O&&typeof O!="function"&&typeof O!="symbol":_t(l,h,J,O,p,null));return;case"dialog":tt("beforetoggle",l),tt("toggle",l),tt("cancel",l),tt("close",l);break;case"iframe":case"object":tt("load",l);break;case"video":case"audio":for(O=0;O<ph.length;O++)tt(ph[O],l);break;case"image":tt("error",l),tt("load",l);break;case"details":tt("toggle",l);break;case"embed":case"source":case"link":tt("error",l),tt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in p)if(p.hasOwnProperty(se)&&(O=p[se],O!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:_t(l,h,se,O,p,null)}return;default:if(Y0(h)){for(he in p)p.hasOwnProperty(he)&&(O=p[he],O!==void 0&&My(l,h,he,O,p,void 0));return}}for(Z in p)p.hasOwnProperty(Z)&&(O=p[Z],O!=null&&_t(l,h,Z,O,p,null))}function VH(l,h,p,O){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,A=null,Z=null,J=null,se=null,he=null;for(ce in p){var pe=p[ce];if(p.hasOwnProperty(ce)&&pe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":J=pe;default:O.hasOwnProperty(ce)||_t(l,h,ce,null,O,pe)}}for(var oe in O){var ce=O[oe];if(pe=p[oe],O.hasOwnProperty(oe)&&(ce!=null||pe!=null))switch(oe){case"type":w=ce;break;case"name":b=ce;break;case"checked":se=ce;break;case"defaultChecked":he=ce;break;case"value":A=ce;break;case"defaultValue":Z=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,h));break;default:ce!==pe&&_t(l,h,oe,ce,O,pe)}}Qo(l,A,Z,J,se,he,w,b);return;case"select":ce=A=Z=oe=null;for(w in p)if(J=p[w],p.hasOwnProperty(w)&&J!=null)switch(w){case"value":break;case"multiple":ce=J;default:O.hasOwnProperty(w)||_t(l,h,w,null,O,J)}for(b in O)if(w=O[b],J=p[b],O.hasOwnProperty(b)&&(w!=null||J!=null))switch(b){case"value":oe=w;break;case"defaultValue":Z=w;break;case"multiple":A=w;default:w!==J&&_t(l,h,b,w,O,J)}h=Z,p=A,O=ce,oe!=null?ws(l,!!p,oe,!1):!!O!=!!p&&(h!=null?ws(l,!!p,h,!0):ws(l,!!p,p?[]:"",!1));return;case"textarea":ce=oe=null;for(Z in p)if(b=p[Z],p.hasOwnProperty(Z)&&b!=null&&!O.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:_t(l,h,Z,null,O,b)}for(A in O)if(b=O[A],w=p[A],O.hasOwnProperty(A)&&(b!=null||w!=null))switch(A){case"value":oe=b;break;case"defaultValue":ce=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==w&&_t(l,h,A,b,O,w)}VE(l,oe,ce);return;case"option":for(var Pe in p)oe=p[Pe],p.hasOwnProperty(Pe)&&oe!=null&&!O.hasOwnProperty(Pe)&&(Pe==="selected"?l.selected=!1:_t(l,h,Pe,null,O,oe));for(J in O)oe=O[J],ce=p[J],O.hasOwnProperty(J)&&oe!==ce&&(oe!=null||ce!=null)&&(J==="selected"?l.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":_t(l,h,J,oe,O,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in p)oe=p[qe],p.hasOwnProperty(qe)&&oe!=null&&!O.hasOwnProperty(qe)&&_t(l,h,qe,null,O,oe);for(se in O)if(oe=O[se],ce=p[se],O.hasOwnProperty(se)&&oe!==ce&&(oe!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,h));break;default:_t(l,h,se,oe,O,ce)}return;default:if(Y0(h)){for(var St in p)oe=p[St],p.hasOwnProperty(St)&&oe!==void 0&&!O.hasOwnProperty(St)&&My(l,h,St,void 0,O,oe);for(he in O)oe=O[he],ce=p[he],!O.hasOwnProperty(he)||oe===ce||oe===void 0&&ce===void 0||My(l,h,he,oe,O,ce);return}}for(var ne in p)oe=p[ne],p.hasOwnProperty(ne)&&oe!=null&&!O.hasOwnProperty(ne)&&_t(l,h,ne,null,O,oe);for(pe in O)oe=O[pe],ce=p[pe],!O.hasOwnProperty(pe)||oe===ce||oe==null&&ce==null||_t(l,h,pe,oe,O,ce)}function YR(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WH(){if(typeof performance.getEntriesByType=="function"){for(var l=0,h=0,p=performance.getEntriesByType("resource"),O=0;O<p.length;O++){var b=p[O],w=b.transferSize,A=b.initiatorType,Z=b.duration;if(w&&Z&&YR(A)){for(A=0,Z=b.responseEnd,O+=1;O<p.length;O++){var J=p[O],se=J.startTime;if(se>Z)break;var he=J.transferSize,pe=J.initiatorType;he&&YR(pe)&&(J=J.responseEnd,A+=he*(J<Z?1:(Z-se)/(J-se)))}if(--O,h+=8*(w+A)/(b.duration/1e3),l++,10<l)break}}if(0<l)return h/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var jy=null,zy=null;function Yp(l){return l.nodeType===9?l:l.ownerDocument}function FR(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GR(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function Dy(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Ly=null;function UH(){var l=window.event;return l&&l.type==="popstate"?l===Ly?!1:(Ly=l,!0):(Ly=null,!1)}var KR=typeof setTimeout=="function"?setTimeout:void 0,HH=typeof clearTimeout=="function"?clearTimeout:void 0,JR=typeof Promise=="function"?Promise:void 0,YH=typeof queueMicrotask=="function"?queueMicrotask:typeof JR<"u"?function(l){return JR.resolve(null).then(l).catch(FH)}:KR;function FH(l){setTimeout(function(){throw l})}function za(l){return l==="head"}function e$(l,h){var p=h,O=0;do{var b=p.nextSibling;if(l.removeChild(p),b&&b.nodeType===8)if(p=b.data,p==="/$"||p==="/&"){if(O===0){l.removeChild(b),yc(h);return}O--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")O++;else if(p==="html")gh(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,gh(p);for(var w=p.firstChild;w;){var A=w.nextSibling,Z=w.nodeName;w[Co]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||p.removeChild(w),w=A}}else p==="body"&&gh(l.ownerDocument.body);p=b}while(p);yc(h)}function t$(l,h){var p=l;l=0;do{var O=p.nextSibling;if(p.nodeType===1?h?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(h?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),O&&O.nodeType===8)if(p=O.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=O}while(p)}function qy(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var p=h;switch(h=h.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":qy(p),$u(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function GH(l,h,p,O){for(;l.nodeType===1;){var b=p;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!O&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(O){if(!l[Co])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(w=l.getAttribute("rel"),w==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(w!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(w=l.getAttribute("src"),(w!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===w)return l}else return l;if(l=or(l.nextSibling),l===null)break}return null}function KH(l,h,p){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=or(l.nextSibling),l===null))return null;return l}function n$(l,h){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=or(l.nextSibling),l===null))return null;return l}function By(l){return l.data==="$?"||l.data==="$~"}function Iy(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function JH(l,h){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=h;else if(l.data!=="$?"||p.readyState!=="loading")h();else{var O=function(){h(),p.removeEventListener("DOMContentLoaded",O)};p.addEventListener("DOMContentLoaded",O),l._reactRetry=O}}function or(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return l}var Xy=null;function i$(l){l=l.nextSibling;for(var h=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(h===0)return or(l.nextSibling);h--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||h++}l=l.nextSibling}return null}function r$(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(h===0)return l;h--}else p!=="/$"&&p!=="/&"||h++}l=l.previousSibling}return null}function s$(l,h,p){switch(h=Yp(p),l){case"html":if(l=h.documentElement,!l)throw Error(i(452));return l;case"head":if(l=h.head,!l)throw Error(i(453));return l;case"body":if(l=h.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function gh(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);$u(l)}var lr=new Map,a$=new Set;function Fp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Bs=W.d;W.d={f:eY,r:tY,D:nY,C:iY,L:rY,m:sY,X:oY,S:aY,M:lY};function eY(){var l=Bs.f(),h=Bp();return l||h}function tY(l){var h=ga(l);h!==null&&h.tag===5&&h.type==="form"?SA(h):Bs.r(l)}var gc=typeof document>"u"?null:document;function o$(l,h,p){var O=gc;if(O&&typeof h=="string"&&h){var b=di(h);b='link[rel="'+l+'"][href="'+b+'"]',typeof p=="string"&&(b+='[crossorigin="'+p+'"]'),a$.has(b)||(a$.add(b),l={rel:l,crossOrigin:p,href:h},O.querySelector(b)===null&&(h=O.createElement("link"),zn(h,"link",l),rn(h),O.head.appendChild(h)))}}function nY(l){Bs.D(l),o$("dns-prefetch",l,null)}function iY(l,h){Bs.C(l,h),o$("preconnect",l,h)}function rY(l,h,p){Bs.L(l,h,p);var O=gc;if(O&&l&&h){var b='link[rel="preload"][as="'+di(h)+'"]';h==="image"&&p&&p.imageSrcSet?(b+='[imagesrcset="'+di(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(b+='[imagesizes="'+di(p.imageSizes)+'"]')):b+='[href="'+di(l)+'"]';var w=b;switch(h){case"style":w=Oc(l);break;case"script":w=vc(l)}lr.has(w)||(l=d({rel:"preload",href:h==="image"&&p&&p.imageSrcSet?void 0:l,as:h},p),lr.set(w,l),O.querySelector(b)!==null||h==="style"&&O.querySelector(Oh(w))||h==="script"&&O.querySelector(vh(w))||(h=O.createElement("link"),zn(h,"link",l),rn(h),O.head.appendChild(h)))}}function sY(l,h){Bs.m(l,h);var p=gc;if(p&&l){var O=h&&typeof h.as=="string"?h.as:"script",b='link[rel="modulepreload"][as="'+di(O)+'"][href="'+di(l)+'"]',w=b;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=vc(l)}if(!lr.has(w)&&(l=d({rel:"modulepreload",href:l},h),lr.set(w,l),p.querySelector(b)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(vh(w)))return}O=p.createElement("link"),zn(O,"link",l),rn(O),p.head.appendChild(O)}}}function aY(l,h,p){Bs.S(l,h,p);var O=gc;if(O&&l){var b=va(O).hoistableStyles,w=Oc(l);h=h||"default";var A=b.get(w);if(!A){var Z={loading:0,preload:null};if(A=O.querySelector(Oh(w)))Z.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":h},p),(p=lr.get(w))&&Zy(l,p);var J=A=O.createElement("link");rn(J),zn(J,"link",l),J._p=new Promise(function(se,he){J.onload=se,J.onerror=he}),J.addEventListener("load",function(){Z.loading|=1}),J.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,Gp(A,h,O)}A={type:"stylesheet",instance:A,count:1,state:Z},b.set(w,A)}}}function oY(l,h){Bs.X(l,h);var p=gc;if(p&&l){var O=va(p).hoistableScripts,b=vc(l),w=O.get(b);w||(w=p.querySelector(vh(b)),w||(l=d({src:l,async:!0},h),(h=lr.get(b))&&Vy(l,h),w=p.createElement("script"),rn(w),zn(w,"link",l),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},O.set(b,w))}}function lY(l,h){Bs.M(l,h);var p=gc;if(p&&l){var O=va(p).hoistableScripts,b=vc(l),w=O.get(b);w||(w=p.querySelector(vh(b)),w||(l=d({src:l,async:!0,type:"module"},h),(h=lr.get(b))&&Vy(l,h),w=p.createElement("script"),rn(w),zn(w,"link",l),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},O.set(b,w))}}function l$(l,h,p,O){var b=(b=ee.current)?Fp(b):null;if(!b)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(h=Oc(p.href),p=va(b).hoistableStyles,O=p.get(h),O||(O={type:"style",instance:null,count:0,state:null},p.set(h,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Oc(p.href);var w=va(b).hoistableStyles,A=w.get(l);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(l,A),(w=b.querySelector(Oh(l)))&&!w._p&&(A.instance=w,A.state.loading=5),lr.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},lr.set(l,p),w||cY(b,l,p,A.state))),h&&O===null)throw Error(i(528,""));return A}if(h&&O!==null)throw Error(i(529,""));return null;case"script":return h=p.async,p=p.src,typeof p=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=vc(p),p=va(b).hoistableScripts,O=p.get(h),O||(O={type:"script",instance:null,count:0,state:null},p.set(h,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function Oc(l){return'href="'+di(l)+'"'}function Oh(l){return'link[rel="stylesheet"]['+l+"]"}function c$(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function cY(l,h,p,O){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?O.loading=1:(h=l.createElement("link"),O.preload=h,h.addEventListener("load",function(){return O.loading|=1}),h.addEventListener("error",function(){return O.loading|=2}),zn(h,"link",p),rn(h),l.head.appendChild(h))}function vc(l){return'[src="'+di(l)+'"]'}function vh(l){return"script[async]"+l}function u$(l,h,p){if(h.count++,h.instance===null)switch(h.type){case"style":var O=l.querySelector('style[data-href~="'+di(p.href)+'"]');if(O)return h.instance=O,rn(O),O;var b=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return O=(l.ownerDocument||l).createElement("style"),rn(O),zn(O,"style",b),Gp(O,p.precedence,l),h.instance=O;case"stylesheet":b=Oc(p.href);var w=l.querySelector(Oh(b));if(w)return h.state.loading|=4,h.instance=w,rn(w),w;O=c$(p),(b=lr.get(b))&&Zy(O,b),w=(l.ownerDocument||l).createElement("link"),rn(w);var A=w;return A._p=new Promise(function(Z,J){A.onload=Z,A.onerror=J}),zn(w,"link",O),h.state.loading|=4,Gp(w,p.precedence,l),h.instance=w;case"script":return w=vc(p.src),(b=l.querySelector(vh(w)))?(h.instance=b,rn(b),b):(O=p,(b=lr.get(w))&&(O=d({},p),Vy(O,b)),l=l.ownerDocument||l,b=l.createElement("script"),rn(b),zn(b,"link",O),l.head.appendChild(b),h.instance=b);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(O=h.instance,h.state.loading|=4,Gp(O,p.precedence,l));return h.instance}function Gp(l,h,p){for(var O=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=O.length?O[O.length-1]:null,w=b,A=0;A<O.length;A++){var Z=O[A];if(Z.dataset.precedence===h)w=Z;else if(w!==b)break}w?w.parentNode.insertBefore(l,w.nextSibling):(h=p.nodeType===9?p.head:p,h.insertBefore(l,h.firstChild))}function Zy(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function Vy(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var Kp=null;function h$(l,h,p){if(Kp===null){var O=new Map,b=Kp=new Map;b.set(p,O)}else b=Kp,O=b.get(p),O||(O=new Map,b.set(p,O));if(O.has(l))return O;for(O.set(l,null),p=p.getElementsByTagName(l),b=0;b<p.length;b++){var w=p[b];if(!(w[Co]||w[gn]||l==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(h)||"";A=l+A;var Z=O.get(A);Z?Z.push(w):O.set(A,[w])}}return O}function f$(l,h,p){l=l.ownerDocument||l,l.head.insertBefore(p,h==="title"?l.querySelector("head > title"):null)}function uY(l,h,p){if(p===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(l=h.disabled,typeof h.precedence=="string"&&l==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function d$(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function hY(l,h,p,O){if(p.type==="stylesheet"&&(typeof O.media!="string"||matchMedia(O.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var b=Oc(O.href),w=h.querySelector(Oh(b));if(w){h=w._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(l.count++,l=Jp.bind(l),h.then(l,l)),p.state.loading|=4,p.instance=w,rn(w);return}w=h.ownerDocument||h,O=c$(O),(b=lr.get(b))&&Zy(O,b),w=w.createElement("link"),rn(w);var A=w;A._p=new Promise(function(Z,J){A.onload=Z,A.onerror=J}),zn(w,"link",O),p.instance=w}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,h),(h=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Jp.bind(l),h.addEventListener("load",p),h.addEventListener("error",p))}}var Wy=0;function fY(l,h){return l.stylesheets&&l.count===0&&tm(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var O=setTimeout(function(){if(l.stylesheets&&tm(l,l.stylesheets),l.unsuspend){var w=l.unsuspend;l.unsuspend=null,w()}},6e4+h);0<l.imgBytes&&Wy===0&&(Wy=62500*WH());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&tm(l,l.stylesheets),l.unsuspend)){var w=l.unsuspend;l.unsuspend=null,w()}},(l.imgBytes>Wy?50:800)+h);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(O),clearTimeout(b)}}:null}function Jp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var em=null;function tm(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,em=new Map,h.forEach(dY,l),em=null,Jp.call(l))}function dY(l,h){if(!(h.state.loading&4)){var p=em.get(l);if(p)var O=p.get(null);else{p=new Map,em.set(l,p);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var A=b[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(p.set(A.dataset.precedence,A),O=A)}O&&p.set(null,O)}b=h.instance,A=b.getAttribute("data-precedence"),w=p.get(A)||O,w===O&&p.set(null,b),p.set(A,b),this.count++,O=Jp.bind(this),b.addEventListener("load",O),b.addEventListener("error",O),w?w.parentNode.insertBefore(b,w.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),h.state.loading|=4}}var yh={$$typeof:k,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function pY(l,h,p,O,b,w,A,Z,J){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pu(0),this.hiddenUpdates=Pu(null),this.identifierPrefix=O,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function p$(l,h,p,O,b,w,A,Z,J,se,he,pe){return l=new pY(l,h,p,A,J,se,he,pe,Z),h=1,w===!0&&(h|=24),w=Ni(3,null,null,h),l.current=w,w.stateNode=l,h=kv(),h.refCount++,l.pooledCache=h,h.refCount++,w.memoizedState={element:O,isDehydrated:p,cache:h},Ev(w),l}function m$(l){return l?(l=Yl,l):Yl}function g$(l,h,p,O,b,w){b=m$(b),O.context===null?O.context=b:O.pendingContext=b,O=Ca(h),O.payload={element:p},w=w===void 0?null:w,w!==null&&(O.callback=w),p=Ta(l,O,h),p!==null&&(yi(p,l,h),Gu(p,l,h))}function O$(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<h?p:h}}function Uy(l,h){O$(l,h),(l=l.alternate)&&O$(l,h)}function v$(l){if(l.tag===13||l.tag===31){var h=Ro(l,67108864);h!==null&&yi(h,l,67108864),Uy(l,67108864)}}function y$(l){if(l.tag===13||l.tag===31){var h=Li();h=Au(h);var p=Ro(l,h);p!==null&&yi(p,l,h),Uy(l,h)}}var nm=!0;function mY(l,h,p,O){var b=R.T;R.T=null;var w=W.p;try{W.p=2,Hy(l,h,p,O)}finally{W.p=w,R.T=b}}function gY(l,h,p,O){var b=R.T;R.T=null;var w=W.p;try{W.p=8,Hy(l,h,p,O)}finally{W.p=w,R.T=b}}function Hy(l,h,p,O){if(nm){var b=Yy(O);if(b===null)Ny(l,h,O,im,p),b$(l,O);else if(vY(b,l,h,p,O))O.stopPropagation();else if(b$(l,O),h&4&&-1<OY.indexOf(l)){for(;b!==null;){var w=ga(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=bs(w.pendingLanes);if(A!==0){var Z=w;for(Z.pendingLanes|=2,Z.entangledLanes|=2;A;){var J=1<<31-vt(A);Z.entanglements[1]|=J,A&=~J}Hr(w),(dt&6)===0&&(Lp=zt()+500,dh(0))}}break;case 31:case 13:Z=Ro(w,2),Z!==null&&yi(Z,w,2),Bp(),Uy(w,2)}if(w=Yy(O),w===null&&Ny(l,h,O,im,p),w===b)break;b=w}b!==null&&O.stopPropagation()}else Ny(l,h,O,null,p)}}function Yy(l){return l=G0(l),Fy(l)}var im=null;function Fy(l){if(im=null,l=ma(l),l!==null){var h=s(l);if(h===null)l=null;else{var p=h.tag;if(p===13){if(l=a(h),l!==null)return l;l=null}else if(p===31){if(l=o(h),l!==null)return l;l=null}else if(p===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return im=l,null}function x$(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ai()){case ue:return 2;case ve:return 8;case Me:case Ve:return 32;case Je:return 268435456;default:return 32}default:return 32}}var Gy=!1,Da=null,La=null,qa=null,xh=new Map,bh=new Map,Ba=[],OY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b$(l,h){switch(l){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":xh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":bh.delete(h.pointerId)}}function _h(l,h,p,O,b,w){return l===null||l.nativeEvent!==w?(l={blockedOn:h,domEventName:p,eventSystemFlags:O,nativeEvent:w,targetContainers:[b]},h!==null&&(h=ga(h),h!==null&&v$(h)),l):(l.eventSystemFlags|=O,h=l.targetContainers,b!==null&&h.indexOf(b)===-1&&h.push(b),l)}function vY(l,h,p,O,b){switch(h){case"focusin":return Da=_h(Da,l,h,p,O,b),!0;case"dragenter":return La=_h(La,l,h,p,O,b),!0;case"mouseover":return qa=_h(qa,l,h,p,O,b),!0;case"pointerover":var w=b.pointerId;return xh.set(w,_h(xh.get(w)||null,l,h,p,O,b)),!0;case"gotpointercapture":return w=b.pointerId,bh.set(w,_h(bh.get(w)||null,l,h,p,O,b)),!0}return!1}function _$(l){var h=ma(l.target);if(h!==null){var p=s(h);if(p!==null){if(h=p.tag,h===13){if(h=a(p),h!==null){l.blockedOn=h,Vd(l.priority,function(){y$(p)});return}}else if(h===31){if(h=o(p),h!==null){l.blockedOn=h,Vd(l.priority,function(){y$(p)});return}}else if(h===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function rm(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var p=Yy(l.nativeEvent);if(p===null){p=l.nativeEvent;var O=new p.constructor(p.type,p);F0=O,p.target.dispatchEvent(O),F0=null}else return h=ga(p),h!==null&&v$(h),l.blockedOn=p,!1;h.shift()}return!0}function S$(l,h,p){rm(l)&&p.delete(h)}function yY(){Gy=!1,Da!==null&&rm(Da)&&(Da=null),La!==null&&rm(La)&&(La=null),qa!==null&&rm(qa)&&(qa=null),xh.forEach(S$),bh.forEach(S$)}function sm(l,h){l.blockedOn===h&&(l.blockedOn=null,Gy||(Gy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yY)))}var am=null;function w$(l){am!==l&&(am=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){am===l&&(am=null);for(var h=0;h<l.length;h+=3){var p=l[h],O=l[h+1],b=l[h+2];if(typeof O!="function"){if(Fy(O||p)===null)continue;break}var w=ga(p);w!==null&&(l.splice(h,3),h-=3,Yv(w,{pending:!0,data:b,method:p.method,action:O},O,b))}}))}function yc(l){function h(J){return sm(J,l)}Da!==null&&sm(Da,l),La!==null&&sm(La,l),qa!==null&&sm(qa,l),xh.forEach(h),bh.forEach(h);for(var p=0;p<Ba.length;p++){var O=Ba[p];O.blockedOn===l&&(O.blockedOn=null)}for(;0<Ba.length&&(p=Ba[0],p.blockedOn===null);)_$(p),p.blockedOn===null&&Ba.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(O=0;O<p.length;O+=3){var b=p[O],w=p[O+1],A=b[Un]||null;if(typeof w=="function")A||w$(p);else if(A){var Z=null;if(w&&w.hasAttribute("formAction")){if(b=w,A=w[Un]||null)Z=A.formAction;else if(Fy(b)!==null)continue}else Z=A.action;typeof Z=="function"?p[O+1]=Z:(p.splice(O,3),O-=3),w$(p)}}}function k$(){function l(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(A){return b=A})},focusReset:"manual",scroll:"manual"})}function h(){b!==null&&(b(),b=null),O||setTimeout(p,20)}function p(){if(!O&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var O=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(p,100),function(){O=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),b!==null&&(b(),b=null)}}}function Ky(l){this._internalRoot=l}om.prototype.render=Ky.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(i(409));var p=h.current,O=Li();g$(p,O,l,h,null,null)},om.prototype.unmount=Ky.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;g$(l.current,2,null,l,null,null),Bp(),h[_s]=null}};function om(l){this._internalRoot=l}om.prototype.unstable_scheduleHydration=function(l){if(l){var h=Zd();l={blockedOn:null,target:l,priority:h};for(var p=0;p<Ba.length&&h!==0&&h<Ba[p].priority;p++);Ba.splice(p,0,l),p===0&&_$(l)}};var C$=e.version;if(C$!=="19.2.3")throw Error(i(527,C$,"19.2.3"));W.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=u(h),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var xY={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{Et=lm.inject(xY),Ot=lm}catch{}}return wh.createRoot=function(l,h){if(!r(l))throw Error(i(299));var p=!1,O="",b=$A,w=NA,A=MA;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(O=h.identifierPrefix),h.onUncaughtError!==void 0&&(b=h.onUncaughtError),h.onCaughtError!==void 0&&(w=h.onCaughtError),h.onRecoverableError!==void 0&&(A=h.onRecoverableError)),h=p$(l,1,!1,null,null,p,O,null,b,w,A,k$),l[_s]=h.current,$y(l),new Ky(h)},wh.hydrateRoot=function(l,h,p){if(!r(l))throw Error(i(299));var O=!1,b="",w=$A,A=NA,Z=MA,J=null;return p!=null&&(p.unstable_strictMode===!0&&(O=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(A=p.onCaughtError),p.onRecoverableError!==void 0&&(Z=p.onRecoverableError),p.formState!==void 0&&(J=p.formState)),h=p$(l,1,!0,h,p??null,O,b,J,w,A,Z,k$),h.context=m$(null),p=h.current,O=Li(),O=Au(O),b=Ca(O),b.callback=null,Ta(p,b,O),p=O,h.current.lanes=p,ko(h,p),Hr(h),l[_s]=h.current,$y(l),new om(h)},wh.version="19.2.3",wh}var j$;function EY(){if(j$)return tx.exports;j$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tx.exports=QY(),tx.exports}var PY=EY();const AY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),z$=t=>{const e=RY(t);return e.charAt(0).toUpperCase()+e.slice(1)},a6=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),$Y=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var NY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MY=X.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},c)=>X.createElement("svg",{ref:c,...NY,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:a6("lucide",r),...!s&&!$Y(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,f])=>X.createElement(u,f)),...Array.isArray(s)?s:[s]]));const Oe=(t,e)=>{const n=X.forwardRef(({className:i,...r},s)=>X.createElement(MY,{ref:s,iconNode:e,className:a6(`lucide-${AY(z$(t))}`,`lucide-${t}`,i),...r}));return n.displayName=z$(t),n};const jY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],zY=Oe("activity",jY);const DY=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],o6=Oe("arrow-down",DY);const LY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],l6=Oe("arrow-left",LY);const qY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],BY=Oe("arrow-right",qY);const IY=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],c6=Oe("arrow-up",IY);const XY=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ZY=Oe("bot",XY);const VY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],u6=Oe("chart-column",VY);const WY=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],UY=Oe("chart-no-axes-column",WY);const HY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_f=Oe("check",HY);const YY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gu=Oe("chevron-down",YY);const FY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cl=Oe("chevron-right",FY);const GY=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KY=Oe("chevron-up",GY);const JY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],od=Oe("circle-alert",JY);const eF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],tF=Oe("circle-arrow-up",eF);const nF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sf=Oe("circle-check-big",nF);const iF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],c2=Oe("circle-check",iF);const rF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],sF=Oe("circle-question-mark",rF);const aF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$g=Oe("circle-x",aF);const oF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],h6=Oe("circle",oF);const lF=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],f6=Oe("clipboard",lF);const cF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ms=Oe("clock",cF);const uF=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],hF=Oe("code-xml",uF);const fF=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],dF=Oe("code",fF);const pF=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],d6=Oe("copy",pF);const mF=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],gF=Oe("cpu",mF);const OF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ng=Oe("crown",OF);const vF=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ld=Oe("dollar-sign",vF);const yF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],D$=Oe("download",yF);const xF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],bF=Oe("external-link",xF);const _F=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],SF=Oe("eye-off",_F);const wF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kT=Oe("eye",wF);const kF=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],p6=Oe("file-pen",kF);const CF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],TF=Oe("file-plus",CF);const QF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],CT=Oe("file-text",QF);const EF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],PF=Oe("file-x",EF);const AF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],TT=Oe("file",AF);const RF=[["path",{d:"M15 2h-4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"14sh0y"}],["path",{d:"M16.706 2.706A2.4 2.4 0 0 0 15 2v5a1 1 0 0 0 1 1h5a2.4 2.4 0 0 0-.706-1.706z",key:"1970lx"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],L$=Oe("files",RF);const $F=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],Ng=Oe("folder-git",$F);const NF=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],MF=Oe("folder-input",NF);const jF=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],hl=Oe("folder-open",jF);const zF=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],DO=Oe("folder-plus",zF);const DF=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],LF=Oe("folder-tree",DF);const qF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],QT=Oe("folder",qF);const BF=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],m6=Oe("git-branch",BF);const IF=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],XF=Oe("grip-vertical",IF);const ZF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],VF=Oe("history",ZF);const WF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],UF=Oe("house",WF);const HF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],YF=Oe("image",HF);const FF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ET=Oe("info",FF);const GF=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],KF=Oe("layout-grid",GF);const JF=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],eG=Oe("link-2",JF);const tG=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],g6=Oe("link",tG);const nG=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],iG=Oe("list-todo",nG);const rG=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],sG=Oe("list",rG);const aG=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],PT=Oe("loader-circle",aG);const oG=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],lG=Oe("maximize-2",oG);const cG=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],fl=Oe("message-square",cG);const uG=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],O6=Oe("minimize-2",uG);const hG=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],fG=Oe("monitor",hG);const dG=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],pG=Oe("network",dG);const mG=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ig=Oe("package",mG);const gG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],OG=Oe("panel-left-close",gG);const vG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],yG=Oe("panel-left-open",vG);const xG=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Mg=Oe("pause",xG);const bG=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_G=Oe("pen-line",bG);const SG=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],LO=Oe("pencil",SG);const wG=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],oo=Oe("play",wG);const kG=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vo=Oe("plus",kG);const CG=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ti=Oe("refresh-cw",CG);const TG=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],v6=Oe("rocket",TG);const QG=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],y6=Oe("rotate-ccw",QG);const EG=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],PG=Oe("search",EG);const AG=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],x6=Oe("send",AG);const RG=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$G=Oe("settings",RG);const NG=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],MG=Oe("shield",NG);const jG=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],zG=Oe("sliders-horizontal",jG);const DG=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],b6=Oe("square-check-big",DG);const LG=[["path",{d:"M5 8V5c0-1 1-2 2-2h10c1 0 2 1 2 2v3",key:"1pi83i"}],["path",{d:"M19 16v3c0 1-1 2-2 2H7c-1 0-2-1-2-2v-3",key:"ido5k7"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],qG=Oe("square-split-vertical",LG);const BG=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],IG=Oe("square-terminal",BG);const XG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jg=Oe("square",XG);const ZG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_6=Oe("target",ZG);const VG=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],AT=Oe("terminal",VG);const WG=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ji=Oe("trash-2",WG);const UG=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],q$=Oe("trash",UG);const HG=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],u2=Oe("trending-down",HG);const YG=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],RT=Oe("trending-up",YG);const FG=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],h2=Oe("triangle-alert",FG);const GG=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KG=Oe("user-plus",GG);const JG=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$T=Oe("user",JG);const eK=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tK=Oe("users",eK);const nK=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],iK=Oe("wrench",nK);const rK=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],li=Oe("x",rK);const sK=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Hc=Oe("zap",sK),B$=t=>{let e;const n=new Set,i=(u,f)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const m=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(v=>v(e,m))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(i,r,o);return o},aK=(t=>t?B$(t):B$),oK=t=>t;function lK(t,e=oK){const n=Vh.useSyncExternalStore(t.subscribe,Vh.useCallback(()=>e(t.getState()),[t,e]),Vh.useCallback(()=>e(t.getInitialState()),[t,e]));return Vh.useDebugValue(n),n}const I$=t=>{const e=aK(t),n=i=>lK(e,i);return Object.assign(n,e),n},cd=(t=>t?I$(t):I$),Ei=cd((t,e)=>({projects:[],activeProject:null,agents:[],settings:null,projectSettings:null,loading:!1,error:null,fetchProjects:async()=>{t({loading:!0,error:null});try{const i=await(await fetch("/api/projects")).json();t({projects:i,loading:!1})}catch{t({error:"Failed to fetch projects",loading:!1})}},fetchActiveProject:async()=>{try{const n=await fetch("/api/projects/active");if(n.ok){const i=await n.json();t({activeProject:i}),e().fetchAgents(i.id)}}catch{}},selectProject:async n=>{t({loading:!0});try{const r=await(await fetch(`/api/projects/${n}/select`,{method:"POST"})).json();t({activeProject:r,loading:!1}),e().fetchAgents(r.id),localStorage.removeItem("cc-chat-session"),localStorage.setItem("cc-chat-agent","leader")}catch{t({error:"Failed to select project",loading:!1})}},createProject:async(n,i,r="",s=!1)=>{const a=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,root_path:i,description:r,init_git:s})});if(!a.ok){const c=await a.json();throw new Error(c.detail||"Failed to create project")}const o=await a.json();return t(c=>({projects:[...c.projects,o],activeProject:o})),e().fetchAgents(o.id),localStorage.removeItem("cc-chat-session"),localStorage.setItem("cc-chat-agent","leader"),o},deleteProject:async n=>{await fetch(`/api/projects/${n}`,{method:"DELETE"}),t(i=>({projects:i.projects.filter(r=>r.id!==n),activeProject:i.activeProject?.id===n?null:i.activeProject}))},fetchAgents:async n=>{try{const r=await(await fetch(`/api/projects/${n}/agents`)).json();t({agents:r})}catch{t({agents:[]})}},createAgent:async(n,i,r)=>{const s=await fetch(`/api/projects/${n}/agents`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,domain:r})});if(!s.ok){const o=await s.json();throw new Error(o.detail||"Failed to create agent")}const a=await s.json();return t(o=>({agents:[...o.agents,a]})),a},deleteAgent:async(n,i,r=!0)=>{const s=await fetch(`/api/projects/${n}/agents/${i}?remove_worktree=${r}`,{method:"DELETE"});if(!s.ok){const a=await s.json();throw new Error(a.detail||"Failed to delete agent")}t(a=>({agents:a.agents.filter(o=>o.id!==i)}))},setLeader:async(n,i)=>{const r=await fetch(`/api/projects/${n}/agents/${i}/set-leader`,{method:"POST"});if(!r.ok){const a=await r.json();throw new Error(a.detail||"Failed to set leader")}const s=await r.json();return t(a=>({agents:a.agents.map(o=>({...o,is_leader:o.id===i}))})),s},updateAgent:async(n,i,r)=>{const s=await fetch(`/api/projects/${n}/agents/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const o=await s.json();throw new Error(o.detail||"Failed to update agent")}const a=await s.json();return t(o=>({agents:o.agents.map(c=>c.id===i?{...c,...r}:c)})),a},syncWorktrees:async n=>{const i=await fetch(`/api/projects/${n}/sync-worktrees`,{method:"POST"});if(!i.ok){const s=await i.json();throw new Error(s.detail||"Failed to sync worktrees")}const r=await i.json();return e().fetchAgents(n),{created:r.created.length,skipped:r.skipped.length}},fetchSettings:async()=>{try{const i=await(await fetch("/api/settings")).json();t({settings:i})}catch{}},updateSettings:async n=>{const r=await(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();t({settings:r})}})),cK=50;let Qr=null,Vo=null;const Ou=cd((t,e)=>({connected:!1,agentStates:{},activityFeed:[],currentRunningAgent:null,teamState:null,connect:()=>{if(Qr&&Qr.readyState===WebSocket.OPEN)return;const n=window.location.protocol==="https:"?"wss:":"ws:";Qr=new WebSocket(`${n}//${window.location.host}/ws`),Qr.onopen=()=>{t({connected:!0}),Vo&&(clearTimeout(Vo),Vo=null)},Qr.onclose=()=>{t({connected:!1}),Qr=null,Vo=window.setTimeout(()=>{e().connect()},3e3)},Qr.onerror=()=>{t({connected:!1})},Qr.onmessage=i=>{try{const r=JSON.parse(i.data);uK(r,t,e)}catch{}}},disconnect:()=>{Vo&&(clearTimeout(Vo),Vo=null),Qr&&(Qr.close(),Qr=null),t({connected:!1})},addActivity:n=>{const i={...n,id:Math.random().toString(36).substring(2,9)};t(r=>({activityFeed:[i,...r.activityFeed].slice(0,cK)}))},updateAgentState:(n,i)=>{t(r=>({agentStates:{...r.agentStates,[n]:{...r.agentStates[n],agent:n,...i}}})),i.state==="running"?t({currentRunningAgent:n}):e().currentRunningAgent===n&&i.state==="idle"&&t({currentRunningAgent:null})},fetchTeamState:async n=>{try{const i=await fetch(`/api/projects/${n}/team-state`);if(i.ok){const r=await i.json();t({teamState:r})}}catch(i){console.error("Failed to fetch team state:",i)}},setTeamState:n=>{t({teamState:n})},removeTeamAgent:async(n,i)=>{const r=await fetch(`/api/projects/${n}/team-state/agents/${i}`,{method:"DELETE"});if(!r.ok){const s=await r.json();throw new Error(s.detail||"Failed to remove agent from team state")}t(s=>{if(!s.teamState?.agents)return s;const a={...s.teamState.agents};return delete a[i],{teamState:{...s.teamState,agents:a}}})}}));function uK(t,e,n){const{addActivity:i,updateAgentState:r}=n();switch(t.type){case"connected":if(t.current_states){const s={};for(const[a,o]of Object.entries(t.current_states))s[a]={agent:a,state:o.state||"idle",run_count:o.run_count||0,current_task:o.current_task,is_leader:o.is_leader};e(()=>({agentStates:s}))}break;case"state":{const s=t.data||t,a=s.current||s.last;if(!a)break;const o=s.status==="running"?"running":"idle";r(a,{state:o,run_count:s.run_count||0,current_task:s.current_task,elapsed:s.elapsed}),i({type:"state",agent:a,content:`State: ${o}${s.current_task?` - ${s.current_task}`:""}`,timestamp:Date.now()})}break;case"result":{const s=t.data||t,a=s.agent;if(!a)break;i({type:"result",agent:a,content:s.summary||s.content||"Task completed",timestamp:Date.now()})}break;case"output":{const s=t.data||t,a=s.agent;if(!a)break;i({type:"output",agent:a,content:s.result||s.content||"",timestamp:Date.now()})}break;case"error":i({type:"error",agent:t.agent||"system",content:t.message||"Unknown error",timestamp:Date.now()});break;case"team_state":t.state&&e(()=>({teamState:t.state}));break;case"session_update":t.data?.session_id&&window.dispatchEvent(new CustomEvent("session-file-updated",{detail:{sessionId:t.data.session_id}}));break}}function X$({onSettingsClick:t,onSkillsClick:e,onBackClick:n,activeTab:i,onTabChange:r,isMobile:s=!1}){const{activeProject:a,agents:o}=Ei(),{connected:c}=Ou();return g.jsxs("header",{className:"h-12 bg-[var(--bg-tertiary)] border-b border-[var(--border)] flex items-center px-3 justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[g.jsx("button",{onClick:n,className:"flex items-center gap-1.5 px-2 py-1.5 rounded hover:bg-[var(--bg-secondary)] transition-colors text-[var(--text-secondary)] hover:text-white",title:"Back to projects",children:g.jsx(l6,{size:16})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`font-semibold ${s?"text-xs truncate max-w-[100px]":"text-sm"}`,children:a?.name||"No Project"}),!s&&o.length>0&&g.jsxs("span",{className:"text-xs text-[var(--text-secondary)] px-2 py-0.5 bg-[var(--bg-secondary)] rounded",children:[o.length," agent",o.length!==1?"s":""]})]}),!s&&g.jsx("div",{className:"h-5 w-px bg-[var(--border)]"}),g.jsxs("div",{className:"flex items-center bg-[var(--bg-secondary)] rounded-md p-0.5",children:[g.jsxs("button",{onClick:()=>r("monitor"),className:`flex items-center gap-1 px-2 md:px-3 py-1.5 rounded text-xs md:text-sm font-medium transition-colors ${i==="monitor"?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white"}`,children:[g.jsx(fG,{size:14}),!s&&"Monitor"]}),g.jsxs("button",{onClick:()=>r("editor"),className:`flex items-center gap-1 px-2 md:px-3 py-1.5 rounded text-xs md:text-sm font-medium transition-colors ${i==="editor"?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white"}`,children:[g.jsx(hF,{size:14}),!s&&"Editor"]})]})]}),g.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[g.jsxs("div",{className:"flex items-center gap-1.5 text-xs",title:c?"Connected":"Disconnected",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500":"bg-red-500"}`}),!s&&g.jsx("span",{className:"text-[var(--text-secondary)]",children:c?"Connected":"Disconnected"})]}),g.jsx("button",{onClick:e,className:"p-1.5 rounded hover:bg-[var(--bg-secondary)] transition-colors",title:"Skills",children:g.jsx(ig,{size:16})}),g.jsx("button",{onClick:t,className:"p-1.5 rounded hover:bg-[var(--bg-secondary)] transition-colors",title:"Settings",children:g.jsx($G,{size:16})})]})]})}function hK(t){const e=t.split(".").pop()?.toLowerCase()||"";return{js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",json:"json",html:"html",css:"css",scss:"css",md:"markdown",yaml:"yaml",yml:"yaml",sql:"sql",sh:"shell",bash:"shell"}[e]||"text"}const qO=cd((t,e)=>({fileTree:[],openTabs:[],activeTab:null,loading:!1,error:null,currentTreePath:null,clipboard:null,fetchFileTree:async n=>{t({loading:!0,currentTreePath:n});try{const r=await(await fetch(`/api/files/tree?path=${encodeURIComponent(n)}`)).json();t({fileTree:r.children||[],loading:!1})}catch{t({error:"Failed to load file tree",loading:!1})}},refreshTree:async()=>{const n=e().currentTreePath;if(n)try{const r=await(await fetch(`/api/files/tree?path=${encodeURIComponent(n)}`)).json();t({fileTree:r.children||[]})}catch{t({error:"Failed to refresh file tree"})}},openFile:async n=>{if(e().openTabs.find(r=>r.path===n)){t({activeTab:n});return}try{const r=await fetch(`/api/files/content?path=${encodeURIComponent(n)}`);if(!r.ok){const c=await r.text();console.error("Failed to fetch file:",c),t({error:`Failed to open file: ${n}`});return}const s=await r.json();if(s.content===void 0){console.error("No content in response:",s),t({error:`No content for file: ${n}`});return}const a=n.split("/").pop()||n,o={path:n,name:a,content:s.content,isDirty:!1,language:hK(a)};t(c=>({openTabs:[...c.openTabs,o],activeTab:n}))}catch(r){console.error("Error opening file:",r),t({error:`Failed to open file: ${n}`})}},closeTab:n=>{t(i=>{const r=i.openTabs.filter(a=>a.path!==n);let s=i.activeTab;return s===n&&(s=r.length>0?r[r.length-1].path:null),{openTabs:r,activeTab:s}})},closeOtherTabs:n=>{t(i=>({openTabs:i.openTabs.filter(r=>r.path===n),activeTab:n}))},closeAllTabs:()=>{t({openTabs:[],activeTab:null})},closeSavedTabs:()=>{t(n=>{const i=n.openTabs.filter(s=>s.isDirty);let r=n.activeTab;return r&&!i.find(s=>s.path===r)&&(r=i.length>0?i[i.length-1].path:null),{openTabs:i,activeTab:r}})},closeTabsToRight:n=>{t(i=>{const r=i.openTabs.findIndex(o=>o.path===n);if(r===-1)return i;const s=i.openTabs.slice(0,r+1);let a=i.activeTab;return a&&!s.find(o=>o.path===a)&&(a=n),{openTabs:s,activeTab:a}})},setActiveTab:n=>{t({activeTab:n})},updateContent:(n,i)=>{t(r=>({openTabs:r.openTabs.map(s=>s.path===n?{...s,content:i,isDirty:!0}:s)}))},saveFile:async n=>{const i=e().openTabs.find(r=>r.path===n);if(i)try{await fetch("/api/files/content",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:n,content:i.content})}),t(r=>({openTabs:r.openTabs.map(s=>s.path===n?{...s,isDirty:!1}:s)}))}catch{t({error:`Failed to save file: ${n}`})}},createFile:async(n,i,r)=>{const s=n?`${n}/${i}`:i;try{const a=await fetch("/api/files/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s,is_dir:r,content:""})});if(!a.ok){const o=await a.text();return t({error:`Failed to create: ${o}`}),!1}return await e().refreshTree(),!0}catch{return t({error:`Failed to create ${r?"folder":"file"}`}),!1}},deleteFile:async n=>{try{const i=await fetch(`/api/files?path=${encodeURIComponent(n)}`,{method:"DELETE"});if(!i.ok){const o=await i.text();return t({error:`Failed to delete: ${o}`}),!1}const{openTabs:r,activeTab:s}=e(),a=r.filter(o=>o.path===n||o.path.startsWith(n+"/"));if(a.length>0){const o=r.filter(u=>!a.includes(u));let c=s;a.some(u=>u.path===s)&&(c=o.length>0?o[o.length-1].path:null),t({openTabs:o,activeTab:c})}return await e().refreshTree(),!0}catch{return t({error:"Failed to delete"}),!1}},renameFile:async(n,i)=>{const r=n.substring(0,n.lastIndexOf("/")),s=r?`${r}/${i}`:i;try{const a=await fetch("/api/files/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({old_path:n,new_path:s})});if(!a.ok){const o=await a.text();return t({error:`Failed to rename: ${o}`}),!1}return t(o=>({openTabs:o.openTabs.map(c=>{if(c.path===n)return{...c,path:s,name:i};if(c.path.startsWith(n+"/")){const u=s+c.path.substring(n.length);return{...c,path:u}}return c}),activeTab:o.activeTab===n?s:o.activeTab?.startsWith(n+"/")?s+o.activeTab.substring(n.length):o.activeTab})),await e().refreshTree(),!0}catch{return t({error:"Failed to rename"}),!1}},copyToClipboard:(n,i,r)=>{t({clipboard:{path:n,name:i,isDir:r}})},pasteFile:async n=>{const{clipboard:i}=e();if(!i)return!1;try{const r=await fetch(`/api/files/content?path=${encodeURIComponent(i.path)}`);if(!r.ok)return t({error:"Failed to read source file"}),!1;const s=await r.json();let a=i.name;const o=n?`${n}/${a}`:a;if(!(await fetch("/api/files/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:o,is_dir:i.isDir,content:s.content||""})})).ok){const u=`${i.name.replace(/(\.[^.]+)$/,"")}_copy${i.name.match(/(\.[^.]+)$/)?.[1]||""}`,f=n?`${n}/${u}`:u;if(!(await fetch("/api/files/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:f,is_dir:i.isDir,content:s.content||""})})).ok)return t({error:"Failed to paste file"}),!1}return await e().refreshTree(),!0}catch{return t({error:"Failed to paste file"}),!1}}}));function fK({x:t,y:e,items:n,onAction:i,onClose:r}){const s=X.useRef(null);return X.useEffect(()=>{const a=c=>{s.current&&!s.current.contains(c.target)&&r()},o=c=>{c.key==="Escape"&&r()};return document.addEventListener("mousedown",a),document.addEventListener("keydown",o),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",o)}},[r]),X.useEffect(()=>{if(s.current){const a=s.current.getBoundingClientRect(),o=window.innerWidth,c=window.innerHeight;a.right>o&&(s.current.style.left=`${t-a.width}px`),a.bottom>c&&(s.current.style.top=`${e-a.height}px`)}},[t,e]),g.jsx("div",{ref:s,className:"fixed z-50 min-w-[160px] bg-[var(--bg-secondary)] border border-[var(--border)] rounded-md shadow-lg py-1",style:{left:t,top:e},children:n.map((a,o)=>g.jsxs("button",{className:`
            w-full flex items-center gap-2 px-3 py-1.5 text-sm text-left
            ${a.danger?"text-red-400 hover:bg-red-900/30":"hover:bg-[var(--bg-tertiary)]"}
          `,onClick:()=>{i(a.action),r()},children:[a.icon,a.label]},o))})}const dK=[{label:"Open",icon:g.jsx(CT,{size:14}),action:"open"},{label:"Copy",icon:g.jsx(d6,{size:14}),action:"copy"},{label:"Copy Path",icon:g.jsx(g6,{size:14}),action:"copy-path"},{label:"Rename",icon:g.jsx(LO,{size:14}),action:"rename"},{label:"Delete",icon:g.jsx(Ji,{size:14}),action:"delete",danger:!0}],pK=[{label:"New File",icon:g.jsx(TT,{size:14}),action:"new-file"},{label:"New Folder",icon:g.jsx(DO,{size:14}),action:"new-folder"},{label:"Copy Path",icon:g.jsx(g6,{size:14}),action:"copy-path"},{label:"Paste",icon:g.jsx(f6,{size:14}),action:"paste"},{label:"Rename",icon:g.jsx(LO,{size:14}),action:"rename"},{label:"Delete",icon:g.jsx(Ji,{size:14}),action:"delete",danger:!0}],mK=[{label:"New File",icon:g.jsx(TT,{size:14}),action:"new-file"},{label:"New Folder",icon:g.jsx(DO,{size:14}),action:"new-folder"},{label:"Paste",icon:g.jsx(f6,{size:14}),action:"paste"}];function sx({title:t,placeholder:e,initialValue:n="",onConfirm:i,onCancel:r}){const[s,a]=X.useState(n),o=X.useRef(null);X.useEffect(()=>{o.current?.focus(),o.current?.select()},[]),X.useEffect(()=>{const u=f=>{f.key==="Escape"&&r()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[r]);const c=u=>{u.preventDefault(),s.trim()&&i(s.trim())};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-xl w-80",children:[g.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:g.jsx("h3",{className:"text-sm font-medium",children:t})}),g.jsxs("form",{onSubmit:c,className:"p-4",children:[g.jsx("input",{ref:o,type:"text",value:s,onChange:u=>a(u.target.value),placeholder:e,className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm focus:outline-none focus:border-[var(--accent)]"}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{type:"button",onClick:r,className:"px-3 py-1.5 text-sm rounded hover:bg-[var(--bg-tertiary)]",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:!s.trim(),className:"px-3 py-1.5 text-sm bg-[var(--accent)] rounded hover:opacity-90 disabled:opacity-50",children:"OK"})]})]})]})})}function gK({title:t,message:e,confirmLabel:n="Delete",danger:i=!0,onConfirm:r,onCancel:s}){return X.useEffect(()=>{const a=o=>{o.key==="Escape"&&s()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[s]),g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-xl w-80",children:[g.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:g.jsx("h3",{className:"text-sm font-medium",children:t})}),g.jsxs("div",{className:"p-4",children:[g.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:e}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{onClick:s,className:"px-3 py-1.5 text-sm rounded hover:bg-[var(--bg-tertiary)]",children:"Cancel"}),g.jsx("button",{onClick:r,className:`px-3 py-1.5 text-sm rounded ${i?"bg-red-600 hover:bg-red-700 text-white":"bg-[var(--accent)] hover:opacity-90"}`,children:n})]})]})]})})}function S6({node:t,depth:e=0,onContextMenu:n,expandedPaths:i,onToggleExpand:r,onFileOpen:s}){const{openFile:a}=qO(),o=i.has(t.path),c=()=>{t.is_dir?r(t.path):(a(t.path),s?.())},u=d=>{d.preventDefault(),d.stopPropagation(),n(d,t)},f={M:"text-yellow-400",A:"text-green-400",D:"text-red-400",U:"text-orange-400","?":"text-gray-400"};return g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-2 cursor-pointer hover:bg-[var(--bg-tertiary)] rounded text-sm",style:{paddingLeft:`${e*12+8}px`},onClick:c,onContextMenu:u,children:[t.is_dir?g.jsxs(g.Fragment,{children:[o?g.jsx(gu,{size:14}):g.jsx(Cl,{size:14}),o?g.jsx(hl,{size:14,className:"text-yellow-500"}):g.jsx(QT,{size:14,className:"text-yellow-500"})]}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"w-3.5"}),g.jsx(TT,{size:14,className:"text-[var(--text-secondary)]"})]}),g.jsx("span",{className:`ml-1 truncate ${t.git_status?f[t.git_status]:""}`,children:t.name}),t.git_status&&g.jsx("span",{className:`ml-auto text-xs ${f[t.git_status]}`,children:t.git_status})]}),t.is_dir&&o&&t.children&&g.jsx("div",{children:t.children.map(d=>g.jsx(S6,{node:d,depth:e+1,onContextMenu:n,expandedPaths:i,onToggleExpand:r,onFileOpen:s},d.path))})]})}function Z$({width:t,onFileOpen:e}){const{fileTree:n,loading:i,openFile:r,createFile:s,deleteFile:a,renameFile:o,currentTreePath:c,copyToClipboard:u,pasteFile:f,clipboard:d,refreshTree:m}=qO(),[v,y]=X.useState(!1),[x,S]=X.useState(new Set),[_,Q]=X.useState({visible:!1,x:0,y:0,node:null}),[k,T]=X.useState({type:null,targetPath:"",targetName:""}),E=D=>{S(R=>{const W=new Set(R);return W.has(D)?W.delete(D):W.add(D),W})},C=(D,R)=>{Q({visible:!0,x:D.clientX,y:D.clientY,node:R})},P=D=>{D.preventDefault(),D.target===D.currentTarget&&Q({visible:!0,x:D.clientX,y:D.clientY,node:null})},L=()=>{Q({visible:!1,x:0,y:0,node:null})},B=async D=>{const R=_.node,W=R?.is_dir?R.path:R?R.path.substring(0,R.path.lastIndexOf("/")):c||"";switch(D){case"open":R&&!R.is_dir&&(r(R.path),e?.());break;case"copy":R&&u(R.path,R.name,R.is_dir);break;case"copy-path":R&&navigator.clipboard.writeText(R.path);break;case"paste":d&&(await f(W),W&&S(U=>new Set(U).add(W)));break;case"new-file":T({type:"new-file",targetPath:W,targetName:""});break;case"new-folder":T({type:"new-folder",targetPath:W,targetName:""});break;case"rename":R&&T({type:"rename",targetPath:R.path,targetName:R.name});break;case"delete":R&&T({type:"delete",targetPath:R.path,targetName:R.name});break}},N=async D=>{switch(k.type){case"new-file":D&&(await s(k.targetPath,D,!1),k.targetPath&&S(R=>new Set(R).add(k.targetPath)));break;case"new-folder":D&&(await s(k.targetPath,D,!0),k.targetPath&&S(R=>new Set(R).add(k.targetPath)));break;case"rename":D&&D!==k.targetName&&await o(k.targetPath,D);break;case"delete":await a(k.targetPath);break}T({type:null,targetPath:"",targetName:""})},M=()=>{T({type:null,targetPath:"",targetName:""})},$=()=>_.node?_.node.is_dir?pK:dK:mK,I=D=>{D.preventDefault()},j=async()=>{y(!0);try{await m()}finally{y(!1)}};return g.jsxs("aside",{className:"bg-[var(--bg-secondary)] border-r border-[var(--border)] flex flex-col overflow-hidden",style:{width:typeof t=="number"?`${t}px`:t},onContextMenu:I,children:[g.jsxs("div",{className:"h-8 flex items-center justify-between px-3 border-b border-[var(--border)]",children:[g.jsx("span",{className:"text-xs font-semibold uppercase text-[var(--text-secondary)]",children:"Explorer"}),g.jsx("button",{onClick:j,disabled:v||i,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors disabled:opacity-50",title:"Refresh file tree",children:g.jsx(Ti,{size:14,className:`text-[var(--text-secondary)] ${v?"animate-spin":""}`})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto py-1",onContextMenu:P,children:i?g.jsx("div",{className:"p-3 text-sm text-[var(--text-secondary)]",children:"Loading..."}):n.length===0?g.jsx("div",{className:"p-3 text-sm text-[var(--text-secondary)]",children:"No project selected"}):n.map(D=>g.jsx(S6,{node:D,onContextMenu:C,expandedPaths:x,onToggleExpand:E,onFileOpen:e},D.path))}),_.visible&&g.jsx(fK,{x:_.x,y:_.y,items:$(),onAction:B,onClose:L}),k.type==="new-file"&&g.jsx(sx,{title:"New File",placeholder:"filename.ext",onConfirm:N,onCancel:M}),k.type==="new-folder"&&g.jsx(sx,{title:"New Folder",placeholder:"folder name",onConfirm:N,onCancel:M}),k.type==="rename"&&g.jsx(sx,{title:"Rename",placeholder:"new name",initialValue:k.targetName,onConfirm:N,onCancel:M}),k.type==="delete"&&g.jsx(gK,{title:"Delete",message:`Are you sure you want to delete "${k.targetName}"?`,onConfirm:()=>N(),onCancel:M})]})}let f2=[],w6=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?w6:f2).push(n=n+t[e])})();function OK(t){if(t<768)return!1;for(let e=0,n=f2.length;;){let i=e+n>>1;if(t<f2[i])n=i;else if(t>=w6[i])e=i+1;else return!0;if(e==n)return!1}}function V$(t){return t>=127462&&t<=127487}const W$=8205;function vK(t,e,n=!0,i=!0){return(n?k6:yK)(t,e,i)}function k6(t,e,n){if(e==t.length)return e;e&&C6(t.charCodeAt(e))&&T6(t.charCodeAt(e-1))&&e--;let i=ax(t,e);for(e+=U$(i);e<t.length;){let r=ax(t,e);if(i==W$||r==W$||n&&OK(r))e+=U$(r),i=r;else if(V$(r)){let s=0,a=e-2;for(;a>=0&&V$(ax(t,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function yK(t,e,n){for(;e>0;){let i=k6(t,e-2,n);if(i<e)return i;e--}return 0}function ax(t,e){let n=t.charCodeAt(e);if(!T6(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return C6(i)?(n-55296<<10)+(i-56320)+65536:n}function C6(t){return t>=56320&&t<57344}function T6(t){return t>=55296&&t<56320}function U$(t){return t<65536?1:2}let mt=class Q6{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Yc(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),rs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Yc(this,e,n);let i=[];return this.decompose(e,n,i,0),rs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new lf(this),s=new lf(e);for(let a=n,o=n;;){if(r.next(a),s.next(a),a=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(o+=r.value.length,r.done||o>=i)return!0}}iter(e=1){return new lf(this,e)}iterRange(e,n=this.length){return new E6(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new P6(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Q6.empty:e.length<=32?new tn(e):rs.from(tn.split(e,[]))}};class tn extends mt{constructor(e,n=xK(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let a=this.text[s],o=r+a.length;if((n?i:o)>=e)return new bK(r,o,i,a);r=o+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new tn(H$(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let a=i.pop(),o=rg(s.text,a.text.slice(),0,s.length);if(o.length<=32)i.push(new tn(o,a.length+s.length));else{let c=o.length>>1;i.push(new tn(o.slice(0,c)),new tn(o.slice(c)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof tn))return super.replace(e,n,i);[e,n]=Yc(this,e,n);let r=rg(this.text,rg(i.text,H$(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new tn(r,s):rs.from(tn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=Yc(this,e,n);let r="";for(let s=0,a=0;s<=n&&a<this.text.length;a++){let o=this.text[a],c=s+o.length;s>e&&a&&(r+=i),e<c&&n>s&&(r+=o.slice(Math.max(0,e-s),n-s)),s=c+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new tn(i,r)),i=[],r=-1);return r>-1&&n.push(new tn(i,r)),n}}class rs extends mt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let a=this.children[s],o=r+a.length,c=i+a.lines-1;if((n?c:o)>=e)return a.lineInner(e,n,i,r);r=o+1,i=c+1}}decompose(e,n,i,r){for(let s=0,a=0;a<=n&&s<this.children.length;s++){let o=this.children[s],c=a+o.length;if(e<=c&&n>=a){let u=r&((a<=e?1:0)|(c>=n?2:0));a>=e&&c<=n&&!u?i.push(o):o.decompose(e-a,n-a,i,u)}a=c+1}}replace(e,n,i){if([e,n]=Yc(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let a=this.children[r],o=s+a.length;if(e>=s&&n<=o){let c=a.replace(e-s,n-s,i),u=this.lines-a.lines+c.lines;if(c.lines<u>>4&&c.lines>u>>6){let f=this.children.slice();return f[r]=c,new rs(f,this.length-(n-e)+i.length)}return super.replace(s,o,c)}s=o+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Yc(this,e,n);let r="";for(let s=0,a=0;s<this.children.length&&a<=n;s++){let o=this.children[s],c=a+o.length;a>e&&s&&(r+=i),e<c&&n>a&&(r+=o.sliceString(e-a,n-a,i)),a=c+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof rs))return 0;let i=0,[r,s,a,o]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==a||s==o)return i;let c=this.children[r],u=e.children[s];if(c!=u)return i+c.scanIdentical(u,n);i+=c.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let v of e)i+=v.lines;if(i<32){let v=[];for(let y of e)y.flatten(v);return new tn(v,n)}let r=Math.max(32,i>>5),s=r<<1,a=r>>1,o=[],c=0,u=-1,f=[];function d(v){let y;if(v.lines>s&&v instanceof rs)for(let x of v.children)d(x);else v.lines>a&&(c>a||!c)?(m(),o.push(v)):v instanceof tn&&c&&(y=f[f.length-1])instanceof tn&&v.lines+y.lines<=32?(c+=v.lines,u+=v.length+1,f[f.length-1]=new tn(y.text.concat(v.text),y.length+1+v.length)):(c+v.lines>r&&m(),c+=v.lines,u+=v.length+1,f.push(v))}function m(){c!=0&&(o.push(f.length==1?f[0]:rs.from(f,u)),u=-1,c=f.length=0)}for(let v of e)d(v);return m(),o.length==1?o[0]:new rs(o,n)}}mt.empty=new tn([""],0);function xK(t){let e=-1;for(let n of t)e+=n.length+1;return e}function rg(t,e,n=0,i=1e9){for(let r=0,s=0,a=!0;s<t.length&&r<=i;s++){let o=t[s],c=r+o.length;c>=n&&(c>i&&(o=o.slice(0,i-r)),r<n&&(o=o.slice(n-r)),a?(e[e.length-1]+=o,a=!1):e.push(o)),r=c+1}return e}function H$(t,e,n){return rg(t,[""],e,n)}class lf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof tn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],a=s>>1,o=r instanceof tn?r.text.length:r.children.length;if(a==(n>0?o:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof tn){let c=r.text[a+(n<0?-1:0)];if(this.offsets[i]+=n,c.length>Math.max(0,e))return this.value=e==0?c:n>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[a+(n<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(n>0?1:(c instanceof tn?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class E6{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new lf(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class P6{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(mt.prototype[Symbol.iterator]=function(){return this.iter()},lf.prototype[Symbol.iterator]=E6.prototype[Symbol.iterator]=P6.prototype[Symbol.iterator]=function(){return this});let bK=class{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}};function Yc(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function bn(t,e,n=!0,i=!0){return vK(t,e,n,i)}function _K(t){return t>=56320&&t<57344}function SK(t){return t>=55296&&t<56320}function _i(t,e){let n=t.charCodeAt(e);if(!SK(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return _K(i)?(n-55296<<10)+(i-56320)+65536:n}function NT(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ss(t){return t<65536?1:2}const d2=/\r\n?|\n/;var Gn=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(Gn||(Gn={}));class hs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],a=this.sections[n++];a<0?(e(i,r,s),r+=s):r+=a,i+=s}}iterChangedRanges(e,n=!1){p2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new hs(e)}composeDesc(e){return this.empty?e:e.empty?this:A6(this,e)}mapDesc(e,n=!1){return e.empty?this:m2(this,e,n)}mapPos(e,n=-1,i=Gn.Simple){let r=0,s=0;for(let a=0;a<this.sections.length;){let o=this.sections[a++],c=this.sections[a++],u=r+o;if(c<0){if(u>e)return s+(e-r);s+=o}else{if(i!=Gn.Simple&&u>=e&&(i==Gn.TrackDel&&r<e&&u>e||i==Gn.TrackBefore&&r<e||i==Gn.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!o)return e==r||n<0?s:s+c;s+=c}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],a=this.sections[i++],o=r+s;if(a>=0&&r<=n&&o>=e)return r<e&&o>n?"cover":!0;r=o}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new hs(e)}static create(e){return new hs(e)}}class xn extends hs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return p2(this,(n,i,r,s,a)=>e=e.replace(r,r+(i-n),a),!1),e}mapDesc(e,n=!1){return m2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let a=n[r],o=n[r+1];if(o>=0){n[r]=o,n[r+1]=a;let c=r>>1;for(;i.length<c;)i.push(mt.empty);i.push(a?e.slice(s,s+a):mt.empty)}s+=a}return new xn(n,i)}compose(e){return this.empty?e:e.empty?this:A6(this,e,!0)}map(e,n=!1){return e.empty?this:m2(this,e,n,!0)}iterChanges(e,n=!1){p2(this,e,n)}get desc(){return hs.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new wf(this);e:for(let a=0,o=0;;){let c=a==e.length?1e9:e[a++];for(;o<c||o==c&&s.len==0;){if(s.done)break e;let f=Math.min(s.len,c-o);Fn(r,f,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Fn(n,f,d),d>0&&to(i,n,s.text),s.forward(f),o+=f}let u=e[a++];for(;o<u;){if(s.done)break e;let f=Math.min(s.len,u-o);Fn(n,f,-1),Fn(r,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),o+=f}}return{changes:new xn(n,i),filtered:hs.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],a=0,o=null;function c(f=!1){if(!f&&!r.length)return;a<n&&Fn(r,n-a,-1);let d=new xn(r,s);o=o?o.compose(d.map(o)):d,r=[],s=[],a=0}function u(f){if(Array.isArray(f))for(let d of f)u(d);else if(f instanceof xn){if(f.length!=n)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${n})`);c(),o=o?o.compose(f.map(o)):f}else{let{from:d,to:m=d,insert:v}=f;if(d>m||d<0||m>n)throw new RangeError(`Invalid change range ${d} to ${m} (in doc of length ${n})`);let y=v?typeof v=="string"?mt.of(v.split(i||d2)):v:mt.empty,x=y.length;if(d==m&&x==0)return;d<a&&c(),d>a&&Fn(r,d-a,-1),Fn(r,m-d,x),to(s,r,y),a=m}}return u(e),c(!o),o}static empty(e){return new xn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,o)=>o&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(mt.empty);i[r]=mt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new xn(n,i)}static createSet(e,n){return new xn(e,n)}}function Fn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function to(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(mt.empty);t.push(n)}}function p2(t,e,n){let i=t.inserted;for(let r=0,s=0,a=0;a<t.sections.length;){let o=t.sections[a++],c=t.sections[a++];if(c<0)r+=o,s+=o;else{let u=r,f=s,d=mt.empty;for(;u+=o,f+=c,c&&i&&(d=d.append(i[a-2>>1])),!(n||a==t.sections.length||t.sections[a+1]<0);)o=t.sections[a++],c=t.sections[a++];e(r,u,s,f,d),r=u,s=f}}}function m2(t,e,n,i=!1){let r=[],s=i?[]:null,a=new wf(t),o=new wf(e);for(let c=-1;;){if(a.done&&o.len||o.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&o.ins==-1){let u=Math.min(a.len,o.len);Fn(r,u,-1),a.forward(u),o.forward(u)}else if(o.ins>=0&&(a.ins<0||c==a.i||a.off==0&&(o.len<a.len||o.len==a.len&&!n))){let u=o.len;for(Fn(r,o.ins,-1);u;){let f=Math.min(a.len,u);a.ins>=0&&c<a.i&&a.len<=f&&(Fn(r,0,a.ins),s&&to(s,r,a.text),c=a.i),a.forward(f),u-=f}o.next()}else if(a.ins>=0){let u=0,f=a.len;for(;f;)if(o.ins==-1){let d=Math.min(f,o.len);u+=d,f-=d,o.forward(d)}else if(o.ins==0&&o.len<f)f-=o.len,o.next();else break;Fn(r,u,c<a.i?a.ins:0),s&&c<a.i&&to(s,r,a.text),c=a.i,a.forward(a.len-f)}else{if(a.done&&o.done)return s?xn.createSet(r,s):hs.create(r);throw new Error("Mismatched change set lengths")}}}function A6(t,e,n=!1){let i=[],r=n?[]:null,s=new wf(t),a=new wf(e);for(let o=!1;;){if(s.done&&a.done)return r?xn.createSet(i,r):hs.create(i);if(s.ins==0)Fn(i,s.len,0,o),s.next();else if(a.len==0&&!a.done)Fn(i,0,a.ins,o),r&&to(r,i,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(s.len2,a.len),u=i.length;if(s.ins==-1){let f=a.ins==-1?-1:a.off?0:a.ins;Fn(i,c,f,o),r&&f&&to(r,i,a.text)}else a.ins==-1?(Fn(i,s.off?0:s.len,c,o),r&&to(r,i,s.textBit(c))):(Fn(i,s.off?0:s.len,a.off?0:a.ins,o),r&&!a.off&&to(r,i,a.text));o=(s.ins>c||a.ins>=0&&a.len>c)&&(o||i.length>u),s.forward2(c),a.forward(c)}}}}class wf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?mt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?mt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class tl{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new tl(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return fe.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return fe.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,n,i){return new tl(e,n,i)}}class fe{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:fe.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,n=!0){return fe.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,fe.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(n=>tl.fromJSON(n)),e.main)}static single(e,n=e){return new fe([fe.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return fe.normalized(e.slice(),n);i=s.to}return new fe(e,n)}static cursor(e,n=0,i,r){return tl.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?tl.create(n,e,48|s):tl.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],a=e[r-1];if(s.empty?s.from<=a.to:s.from<a.to){let o=a.from,c=Math.max(s.to,a.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?fe.range(c,o):fe.range(o,c))}}return new fe(e,n)}}function R6(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let MT=0;class Qe{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=MT++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Qe(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:jT),!!e.static,e.enables)}of(e){return new sg([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new sg(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new sg(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function jT(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class sg{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=MT++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,a=e[s]>>1,o=this.type==2,c=!1,u=!1,f=[];for(let d of this.dependencies)d=="doc"?c=!0:d=="selection"?u=!0:(((n=e[d.id])!==null&&n!==void 0?n:1)&1)==0&&f.push(e[d.id]);return{create(d){return d.values[a]=i(d),1},update(d,m){if(c&&m.docChanged||u&&(m.docChanged||m.selection)||g2(d,f)){let v=i(d);if(o?!Y$(v,d.values[a],r):!r(v,d.values[a]))return d.values[a]=v,1}return 0},reconfigure:(d,m)=>{let v,y=m.config.address[s];if(y!=null){let x=Dg(m,y);if(this.dependencies.every(S=>S instanceof Qe?m.facet(S)===d.facet(S):S instanceof ei?m.field(S,!1)==d.field(S,!1):!0)||(o?Y$(v=i(d),x,r):r(v=i(d),x)))return d.values[a]=x,0}else v=i(d);return d.values[a]=v,1}}}}function Y$(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function g2(t,e){let n=!1;for(let i of e)cf(t,i)&1&&(n=!0);return n}function wK(t,e,n){let i=n.map(c=>t[c.id]),r=n.map(c=>c.type),s=i.filter(c=>!(c&1)),a=t[e.id]>>1;function o(c){let u=[];for(let f=0;f<i.length;f++){let d=Dg(c,i[f]);if(r[f]==2)for(let m of d)u.push(m);else u.push(d)}return e.combine(u)}return{create(c){for(let u of i)cf(c,u);return c.values[a]=o(c),1},update(c,u){if(!g2(c,s))return 0;let f=o(c);return e.compare(f,c.values[a])?0:(c.values[a]=f,1)},reconfigure(c,u){let f=g2(c,i),d=u.config.facets[e.id],m=u.facet(e);if(d&&!f&&jT(n,d))return c.values[a]=m,0;let v=o(c);return e.compare(v,m)?(c.values[a]=m,0):(c.values[a]=v,1)}}}const um=Qe.define({static:!0});class ei{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new ei(MT++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(um).find(i=>i.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],a=this.updateF(s,r);return this.compareF(s,a)?0:(i.values[n]=a,1)},reconfigure:(i,r)=>{let s=i.facet(um),a=r.facet(um),o;return(o=s.find(c=>c.field==this))&&o!=a.find(c=>c.field==this)?(i.values[n]=o.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,um.of({field:this,create:e})]}get extension(){return this}}const Jo={lowest:4,low:3,default:2,high:1,highest:0};function kh(t){return e=>new $6(e,t)}const sa={highest:kh(Jo.highest),high:kh(Jo.high),default:kh(Jo.default),low:kh(Jo.low),lowest:kh(Jo.lowest)};class $6{constructor(e,n){this.inner=e,this.prec=n}}class BO{of(e){return new O2(this,e)}reconfigure(e){return BO.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class O2{constructor(e,n){this.compartment=e,this.inner=n}}class zg{constructor(e,n,i,r,s,a){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),a=new Map;for(let m of kK(e,n,a))m instanceof ei?r.push(m):(s[m.facet.id]||(s[m.facet.id]=[])).push(m);let o=Object.create(null),c=[],u=[];for(let m of r)o[m.id]=u.length<<1,u.push(v=>m.slot(v));let f=i?.config.facets;for(let m in s){let v=s[m],y=v[0].facet,x=f&&f[m]||[];if(v.every(S=>S.type==0))if(o[y.id]=c.length<<1|1,jT(x,v))c.push(i.facet(y));else{let S=y.combine(v.map(_=>_.value));c.push(i&&y.compare(S,i.facet(y))?i.facet(y):S)}else{for(let S of v)S.type==0?(o[S.id]=c.length<<1|1,c.push(S.value)):(o[S.id]=u.length<<1,u.push(_=>S.dynamicSlot(_)));o[y.id]=u.length<<1,u.push(S=>wK(S,y,v))}}let d=u.map(m=>m(o));return new zg(e,a,d,o,c,s)}}function kK(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(a,o){let c=r.get(a);if(c!=null){if(c<=o)return;let u=i[c].indexOf(a);u>-1&&i[c].splice(u,1),a instanceof O2&&n.delete(a.compartment)}if(r.set(a,o),Array.isArray(a))for(let u of a)s(u,o);else if(a instanceof O2){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;n.set(a.compartment,u),s(u,o)}else if(a instanceof $6)s(a.inner,a.prec);else if(a instanceof ei)i[o].push(a),a.provides&&s(a.provides,o);else if(a instanceof sg)i[o].push(a),a.facet.extensions&&s(a.facet.extensions,Jo.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,o)}}return s(t,Jo.default),i.reduce((a,o)=>a.concat(o))}function cf(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Dg(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const N6=Qe.define(),v2=Qe.define({combine:t=>t.some(e=>e),static:!0}),M6=Qe.define({combine:t=>t.length?t[0]:void 0,static:!0}),j6=Qe.define(),z6=Qe.define(),D6=Qe.define(),L6=Qe.define({combine:t=>t.length?t[0]:!1});class aa{constructor(e,n){this.type=e,this.value=n}static define(){return new CK}}class CK{of(e){return new aa(this,e)}}class TK{constructor(e){this.map=e}of(e){return new Ke(this,e)}}class Ke{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ke(this.type,n)}is(e){return this.type==e}static define(e={}){return new TK(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ke.reconfigure=Ke.define();Ke.appendConfig=Ke.define();class fn{constructor(e,n,i,r,s,a){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,i&&R6(i,n.newLength),s.some(o=>o.type==fn.time)||(this.annotations=s.concat(fn.time.of(Date.now())))}static create(e,n,i,r,s,a){return new fn(e,n,i,r,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(fn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}fn.time=aa.define();fn.userEvent=aa.define();fn.addToHistory=aa.define();fn.remote=aa.define();function QK(t,e){let n=[];for(let i=0,r=0;;){let s,a;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],a=t[i++];else if(r<e.length)s=e[r++],a=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function q6(t,e,n){var i;let r,s,a;return n?(r=e.changes,s=xn.empty(e.changes.length),a=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ke.mapEffects(t.effects,r).concat(Ke.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function y2(t,e,n){let i=e.selection,r=jc(e.annotations);return e.userEvent&&(r=r.concat(fn.userEvent.of(e.userEvent))),{changes:e.changes instanceof xn?e.changes:xn.of(e.changes||[],n,t.facet(M6)),selection:i&&(i instanceof fe?i:fe.single(i.anchor,i.head)),effects:jc(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function B6(t,e,n){let i=y2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let a=!!e[s].sequential;i=q6(i,y2(t,e[s],a?i.changes.newLength:t.doc.length),a)}let r=fn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return PK(n?EK(r):r)}function EK(t){let e=t.startState,n=!0;for(let r of e.facet(j6)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:QK(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=xn.empty(e.doc.length);else{let a=t.changes.filter(n);r=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}t=fn.create(e,r,t.selection&&t.selection.map(s),Ke.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(z6);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof fn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof fn?t=s[0]:t=B6(e,jc(s),!1)}return t}function PK(t){let e=t.startState,n=e.facet(D6),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=q6(i,y2(e,s,t.changes.newLength),!0))}return i==t?t:fn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const AK=[];function jc(t){return t==null?AK:Array.isArray(t)?t:[t]}var Lt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(Lt||(Lt={}));const RK=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let x2;try{x2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $K(t){if(x2)return x2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||RK.test(n)))return!0}return!1}function NK(t){return e=>{if(!/\S/.test(e))return Lt.Space;if($K(e))return Lt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Lt.Word;return Lt.Other}}class lt{constructor(e,n,i,r,s,a){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)cf(this,o<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return cf(this,i),Dg(this,i)}update(...e){return B6(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let o of e.effects)o.is(BO.reconfigure)?(n&&(r=new Map,n.compartments.forEach((c,u)=>r.set(u,c)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(Ke.reconfigure)?(n=null,i=o.value):o.is(Ke.appendConfig)&&(n=null,i=jc(i).concat(o.value));let s;n?s=e.startState.values.slice():(n=zg.resolve(i,r,this),s=new lt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(c,u)=>u.reconfigure(c,this),null).values);let a=e.startState.facet(v2)?e.newSelection:e.newSelection.asSingle();new lt(n,e.newDoc,a,s,(o,c)=>c.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:fe.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],a=jc(i.effects);for(let o=1;o<n.ranges.length;o++){let c=e(n.ranges[o]),u=this.changes(c.changes),f=u.map(r);for(let m=0;m<o;m++)s[m]=s[m].map(f);let d=r.mapDesc(u,!0);s.push(c.range.map(d)),r=r.compose(f),a=Ke.mapEffects(a,f).concat(Ke.mapEffects(jc(c.effects),d))}return{changes:r,selection:fe.create(s,n.mainIndex),effects:a}}changes(e=[]){return e instanceof xn?e:xn.of(e,this.doc.length,this.facet(lt.lineSeparator))}toText(e){return mt.of(e.split(this.facet(lt.lineSeparator)||d2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(cf(this,n),Dg(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof ei&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let a=i[s],o=e[s];r.push(a.init(c=>a.spec.fromJSON(o,c)))}}return lt.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=zg.resolve(e.extensions||[],new Map),i=e.doc instanceof mt?e.doc:mt.of((e.doc||"").split(n.staticFacet(lt.lineSeparator)||d2)),r=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return R6(r,i.length),n.staticFacet(v2)||(r=r.asSingle()),new lt(n,i,r,n.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(lt.tabSize)}get lineBreak(){return this.facet(lt.lineSeparator)||`
`}get readOnly(){return this.facet(L6)}phrase(e,...n){for(let i of this.facet(lt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(N6))for(let a of s(this,n,i))Object.prototype.hasOwnProperty.call(a,e)&&r.push(a[e]);return r}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return NK(n.length?n[0]:"")}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-i,o=e-i;for(;a>0;){let c=bn(n,a,!1);if(s(n.slice(c,a))!=Lt.Word)break;a=c}for(;o<r;){let c=bn(n,o);if(s(n.slice(o,c))!=Lt.Word)break;o=c}return a==o?null:fe.range(a+i,o+i)}}lt.allowMultipleSelections=v2;lt.tabSize=Qe.define({combine:t=>t.length?t[0]:4});lt.lineSeparator=M6;lt.readOnly=L6;lt.phrases=Qe.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});lt.languageData=N6;lt.changeFilter=j6;lt.transactionFilter=z6;lt.transactionExtender=D6;BO.reconfigure=Ke.define();function oa(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let a=r[s],o=i[s];if(o===void 0)i[s]=a;else if(!(o===a||a===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](o,a);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class lo{eq(e){return this==e}range(e,n=e){return b2.create(e,n,this)}}lo.prototype.startSide=lo.prototype.endSide=0;lo.prototype.point=!1;lo.prototype.mapMode=Gn.TrackDel;function zT(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let b2=class I6{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new I6(e,n,i)}};function _2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class DT{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let a=r,o=s.length;;){if(a==o)return a;let c=a+o>>1,u=s[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-n;if(c==a)return u>=0?a:o;u>=0?o=c:a=c+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),a=this.findIndex(i,1e9,!1,s);s<a;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],a=-1,o=-1;for(let c=0;c<this.value.length;c++){let u=this.value[c],f=this.from[c]+e,d=this.to[c]+e,m,v;if(f==d){let y=n.mapPos(f,u.startSide,u.mapMode);if(y==null||(m=v=y,u.startSide!=u.endSide&&(v=n.mapPos(f,u.endSide),v<m)))continue}else if(m=n.mapPos(f,u.startSide),v=n.mapPos(d,u.endSide),m>v||m==v&&u.startSide>0&&u.endSide<=0)continue;(v-m||u.endSide-u.startSide)<0||(a<0&&(a=m),u.point&&(o=Math.max(o,v-m)),i.push(u),r.push(m-a),s.push(v-a))}return{mapped:i.length?new DT(r,s,i,o):null,pos:a}}}class nt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new nt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(i&&(n=n.slice().sort(_2)),this.isEmpty)return n.length?nt.of(n):this;let o=new X6(this,null,-1).goto(0),c=0,u=[],f=new co;for(;o.value||c<n.length;)if(c<n.length&&(o.from-n[c].from||o.startSide-n[c].value.startSide)>=0){let d=n[c++];f.addInner(d.from,d.to,d.value)||u.push(d)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(c==n.length||this.chunkEnd(o.chunkIndex)<n[c].from)&&(!a||r>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&f.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!a||r>o.to||s<o.from||a(o.from,o.to,o.value))&&(f.addInner(o.from,o.to,o.value)||u.push(b2.create(o.from,o.to,o.value))),o.next());return f.finishInner(this.nextLayer.isEmpty&&!u.length?nt.empty:this.nextLayer.update({add:u,filter:a,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let a=0;a<this.chunk.length;a++){let o=this.chunkPos[a],c=this.chunk[a],u=e.touchesRange(o,o+c.length);if(u===!1)r=Math.max(r,c.maxPoint),n.push(c),i.push(e.mapPos(o));else if(u===!0){let{mapped:f,pos:d}=c.map(o,e);f&&(r=Math.max(r,f.maxPoint),n.push(f),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new nt(i,n,s||nt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],a=this.chunk[r];if(n>=s&&e<=s+a.length&&a.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return kf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return kf.from(e).goto(n)}static compare(e,n,i,r,s=-1){let a=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),o=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),c=F$(a,o,i),u=new Ch(a,c,s),f=new Ch(o,c,s);i.iterGaps((d,m,v)=>G$(u,d,f,m,v,r)),i.empty&&i.length==0&&G$(u,0,f,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(f=>!f.isEmpty&&n.indexOf(f)<0),a=n.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let o=F$(s,a),c=new Ch(s,o,0).goto(i),u=new Ch(a,o,0).goto(i);for(;;){if(c.to!=u.to||!S2(c.active,u.active)||c.point&&(!u.point||!zT(c.point,u.point)))return!1;if(c.to>r)return!0;c.next(),u.next()}}static spans(e,n,i,r,s=-1){let a=new Ch(e,null,s).goto(n),o=n,c=a.openStart;for(;;){let u=Math.min(a.to,i);if(a.point){let f=a.activeForPoint(a.to),d=a.pointFrom<n?f.length+1:a.point.startSide<0?f.length:Math.min(f.length,c);r.point(o,u,a.point,f,d,a.pointRank),c=Math.min(a.openEnd(u),f.length)}else u>o&&(r.span(o,u,a.active,c),c=a.openEnd(u));if(a.to>i)return c+(a.point&&a.to>i?1:0);o=a.to,a.next()}}static of(e,n=!1){let i=new co;for(let r of e instanceof b2?[e]:n?MK(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return nt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=nt.empty;r=r.nextLayer)n=new nt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}nt.empty=new nt([],[],null,-1);function MK(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(_2(e,i)>0)return t.slice().sort(_2);e=i}return t}nt.empty.nextLayer=nt.empty;class co{finishChunk(e){this.chunks.push(new DT(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new co)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(nt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=nt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function F$(t,e,n){let i=new Map;for(let s of t)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&i.set(s.chunk[a],s.chunkPos[a]);let r=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let o=i.get(s.chunk[a]);o!=null&&(n?n.mapPos(o):o)==s.chunkPos[a]&&!n?.touchesRange(o,o+s.chunk[a].length)&&r.add(s.chunk[a])}return r}class X6{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class kf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&r.push(new X6(a,n,i,s));return r.length==1?r[0]:new kf(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)ox(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)ox(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ox(this.heap,0)}}}function ox(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Ch{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=kf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){hm(this.active,e),hm(this.activeTo,e),hm(this.activeRank,e),this.minActive=K$(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;fm(this.active,n,i),fm(this.activeTo,n,r),fm(this.activeRank,n,s),e&&fm(e,n,this.cursor.from),this.minActive=K$(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&hm(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function G$(t,e,n,i,r,s){t.goto(e),n.goto(i);let a=i+r,o=i,c=i-e,u=!!s.boundChange;for(let f=!1;;){let d=t.to+c-n.to,m=d||t.endSide-n.endSide,v=m<0?t.to+c:n.to,y=Math.min(v,a);if(t.point||n.point?(t.point&&n.point&&zT(t.point,n.point)&&S2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(o,y,t.point,n.point),f=!1):(f&&s.boundChange(o),y>o&&!S2(t.active,n.active)&&s.compareRange(o,y,t.active,n.active),u&&y<a&&(d||t.openEnd(v)!=n.openEnd(v))&&(f=!0)),v>a)break;o=v,m<=0&&t.next(),m>=0&&n.next()}}function S2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!zT(t[n],e[n]))return!1;return!0}function hm(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function fm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function K$(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function jr(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=bn(t,r));return i}function w2(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=bn(t,r)}return i===!0?-1:t.length}const k2="",J$=typeof Symbol>"u"?"__"+k2:Symbol.for(k2),C2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),e5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class uo{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,o,c,u){let f=[],d=/^@(\w+)\b/.exec(a[0]),m=d&&d[1]=="keyframes";if(d&&o==null)return c.push(a[0]+";");for(let v in o){let y=o[v];if(/&/.test(v))s(v.split(/,\s*/).map(x=>a.map(S=>x.replace(/&/,S))).reduce((x,S)=>x.concat(S)),y,c);else if(y&&typeof y=="object"){if(!d)throw new RangeError("The value of a property ("+v+") should be a primitive value.");s(r(v),y,f,m)}else y!=null&&f.push(v.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+y+";")}(f.length||m)&&c.push((i&&!d&&!u?a.map(i):a).join(", ")+" {"+f.join(" ")+"}")}for(let a in e)s(r(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=e5[J$]||1;return e5[J$]=e+1,k2+e.toString(36)}static mount(e,n,i){let r=e[C2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new jK(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let t5=new Map;class jK{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=t5.get(i);if(s)return e[C2]=s;this.sheet=new r.CSSStyleSheet,t5.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[C2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let a=0;a<e.length;a++){let o=e[a],c=this.modules.indexOf(o);if(c<s&&c>-1&&(this.modules.splice(c,1),s--,c=-1),c==-1){if(this.modules.splice(s++,0,o),i)for(let u=0;u<o.rules.length;u++)i.insertRule(o.rules[u],r++)}else{for(;s<c;)r+=this.modules[s++].rules.length;r+=o.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let o=n.head||n;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ho={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},zK=typeof navigator<"u"&&/Mac/.test(navigator.platform),DK=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qn=0;qn<10;qn++)ho[48+qn]=ho[96+qn]=String(qn);for(var qn=1;qn<=24;qn++)ho[qn+111]="F"+qn;for(var qn=65;qn<=90;qn++)ho[qn]=String.fromCharCode(qn+32),Cf[qn]=String.fromCharCode(qn);for(var lx in ho)Cf.hasOwnProperty(lx)||(Cf[lx]=ho[lx]);function LK(t){var e=zK&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||DK&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Cf:ho)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Dn(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)Z6(t,arguments[e]);return t}function Z6(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Z6(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let si=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},T2=typeof document<"u"?document:{documentElement:{style:{}}};const Q2=/Edge\/(\d+)/.exec(si.userAgent),V6=/MSIE \d/.test(si.userAgent),E2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(si.userAgent),IO=!!(V6||E2||Q2),n5=!IO&&/gecko\/(\d+)/i.test(si.userAgent),cx=!IO&&/Chrome\/(\d+)/.exec(si.userAgent),qK="webkitFontSmoothing"in T2.documentElement.style,P2=!IO&&/Apple Computer/.test(si.vendor),i5=P2&&(/Mobile\/\w+/.test(si.userAgent)||si.maxTouchPoints>2);var Te={mac:i5||/Mac/.test(si.platform),windows:/Win/.test(si.platform),linux:/Linux|X11/.test(si.platform),ie:IO,ie_version:V6?T2.documentMode||6:E2?+E2[1]:Q2?+Q2[1]:0,gecko:n5,gecko_version:n5?+(/Firefox\/(\d+)/.exec(si.userAgent)||[0,0])[1]:0,chrome:!!cx,chrome_version:cx?+cx[1]:0,ios:i5,android:/Android\b/.test(si.userAgent),webkit_version:qK?+(/\bAppleWebKit\/(\d+)/.exec(si.userAgent)||[0,0])[1]:0,safari:P2,safari_version:P2?+(/\bVersion\/(\d+(\.\d+)?)/.exec(si.userAgent)||[0,0])[1]:0,tabSize:T2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function LT(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Lg=Object.create(null);function qT(t,e,n){if(t==e)return!0;t||(t=Lg),e||(e=Lg);let i=Object.keys(t),r=Object.keys(e);if(i.length-0!=r.length-0)return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function BK(t,e){for(let n=t.attributes.length-1;n>=0;n--){let i=t.attributes[n].name;e[i]==null&&t.removeAttribute(i)}for(let n in e){let i=e[n];n=="style"?t.style.cssText=i:t.getAttribute(n)!=i&&t.setAttribute(n,i)}}function r5(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function IK(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class la{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var In=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(In||(In={}));class Be extends lo{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ud(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new dl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:a}=W6(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(a?n?2e8:1:-6e8)+1}return new dl(e,i,r,n,e.widget||null,!0)}static line(e){return new hd(e)}static set(e,n=!1){return nt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Be.none=nt.empty;class ud extends Be{constructor(e){let{start:n,end:i}=W6(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?LT(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Lg}eq(e){return this==e||e instanceof ud&&this.tagName==e.tagName&&qT(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}ud.prototype.point=!1;class hd extends Be{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof hd&&this.spec.class==e.spec.class&&qT(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}hd.prototype.mapMode=Gn.TrackBefore;hd.prototype.point=!0;class dl extends Be{constructor(e,n,i,r,s,a){super(n,i,s,e),this.block=r,this.isReplace=a,this.mapMode=r?n<=0?Gn.TrackBefore:Gn.TrackAfter:Gn.TrackDel}get type(){return this.startSide!=this.endSide?In.WidgetRange:this.startSide<=0?In.WidgetBefore:In.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof dl&&XK(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}dl.prototype.point=!0;function W6(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function XK(t,e){return t==e||!!(t&&e&&t.compare(e))}function zc(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Tf extends lo{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof Tf&&this.tagName==e.tagName&&qT(this.attributes,e.attributes)}static create(e){return new Tf(e.tagName,e.attributes||Lg)}static set(e,n=!1){return nt.of(e,n)}}Tf.prototype.startSide=Tf.prototype.endSide=-1;function Qf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function A2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function ag(t,e){if(!e.anchorNode)return!1;try{return A2(t,e.anchorNode)}catch{return!1}}function og(t){return t.nodeType==3?Ef(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function uf(t,e,n,i){return n?s5(t,e,n,i,-1)||s5(t,e,n,i,1):!1}function fo(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function qg(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function s5(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:na(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=fo(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?na(t):0}else return!1}}function na(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Bg(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function ZK(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function U6(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function VK(t,e,n,i,r,s,a,o){let c=t.ownerDocument,u=c.defaultView||window;for(let f=t,d=!1;f&&!d;)if(f.nodeType==1){let m,v=f==c.body,y=1,x=1;if(v)m=ZK(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(d=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let Q=f.getBoundingClientRect();({scaleX:y,scaleY:x}=U6(f,Q)),m={left:Q.left,right:Q.left+f.clientWidth*y,top:Q.top,bottom:Q.top+f.clientHeight*x}}let S=0,_=0;if(r=="nearest")e.top<m.top?(_=e.top-(m.top+a),n>0&&e.bottom>m.bottom+_&&(_=e.bottom-m.bottom+a)):e.bottom>m.bottom&&(_=e.bottom-m.bottom+a,n<0&&e.top-_<m.top&&(_=e.top-(m.top+a)));else{let Q=e.bottom-e.top,k=m.bottom-m.top;_=(r=="center"&&Q<=k?e.top+Q/2-k/2:r=="start"||r=="center"&&n<0?e.top-a:e.bottom-k+a)-m.top}if(i=="nearest"?e.left<m.left?(S=e.left-(m.left+s),n>0&&e.right>m.right+S&&(S=e.right-m.right+s)):e.right>m.right&&(S=e.right-m.right+s,n<0&&e.left<m.left+S&&(S=e.left-(m.left+s))):S=(i=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:i=="start"==o?e.left-s:e.right-(m.right-m.left)+s)-m.left,S||_)if(v)u.scrollBy(S,_);else{let Q=0,k=0;if(_){let T=f.scrollTop;f.scrollTop+=_/x,k=(f.scrollTop-T)*x}if(S){let T=f.scrollLeft;f.scrollLeft+=S/y,Q=(f.scrollLeft-T)*y}e={left:e.left-Q,top:e.top-k,right:e.right-Q,bottom:e.bottom-k},Q&&Math.abs(Q-S)<1&&(i="nearest"),k&&Math.abs(k-_)<1&&(r="nearest")}if(v)break;(e.top<m.top||e.bottom>m.bottom||e.left<m.left||e.right>m.right)&&(e={left:Math.max(e.left,m.left),right:Math.min(e.right,m.right),top:Math.max(e.top,m.top),bottom:Math.min(e.bottom,m.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function WK(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class UK{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?na(n):0),i,Math.min(e.focusOffset,i?na(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Yo=null;Te.safari&&Te.safari_version>=26&&(Yo=!1);function H6(t){if(t.setActive)return t.setActive();if(Yo)return t.focus(Yo);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Yo==null?{get preventScroll(){return Yo={preventScroll:!0},!0}}:void 0),!Yo){Yo=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let a5;function Ef(t,e,n=e){let i=a5||(a5=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Dc(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let a=new KeyboardEvent("keyup",r);return a.synthetic=!0,t.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function HK(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function YK(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,na(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=na(n))}else{if(n==t)return!0;i=fo(n),n=n.parentNode}}function Y6(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function F6(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=na(n)}else if(n.parentNode&&!qg(n))i=fo(n),n=n.parentNode;else return null}}function G6(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!qg(n))i=fo(n)+1,n=n.parentNode;else return null}}class Rr{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Rr(e.parentNode,fo(e),n)}static after(e,n){return new Rr(e.parentNode,fo(e)+1,n)}}var Rt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(Rt||(Rt={}));const pl=Rt.LTR,BT=Rt.RTL;function K6(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const FK=K6("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),GK=K6("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),R2=Object.create(null),Yr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);R2[e]=n,R2[n]=-e}function J6(t){return t<=247?FK[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?GK[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const KK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ks{get dir(){return this.level%2?BT:pl}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.from<=n&&o.to>=n){if(o.level==i)return a;(s<0||(r!=0?r<0?o.from<n:o.to>n:e[s].level>o.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function eI(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!eI(i.inner,r.inner))return!1}return!0}const Tt=[];function JK(t,e,n,i,r){for(let s=0;s<=i.length;s++){let a=s?i[s-1].to:e,o=s<i.length?i[s].from:n,c=s?256:r;for(let u=a,f=c,d=c;u<o;u++){let m=J6(t.charCodeAt(u));m==512?m=f:m==8&&d==4&&(m=16),Tt[u]=m==4?2:m,m&7&&(d=m),f=m}for(let u=a,f=c,d=c;u<o;u++){let m=Tt[u];if(m==128)u<o-1&&f==Tt[u+1]&&f&24?m=Tt[u]=f:Tt[u]=256;else if(m==64){let v=u+1;for(;v<o&&Tt[v]==64;)v++;let y=u&&f==8||v<n&&Tt[v]==8?d==1?1:8:256;for(let x=u;x<v;x++)Tt[x]=y;u=v-1}else m==8&&d==1&&(Tt[u]=1);f=m,m&7&&(d=m)}}}function eJ(t,e,n,i,r){let s=r==1?2:1;for(let a=0,o=0,c=0;a<=i.length;a++){let u=a?i[a-1].to:e,f=a<i.length?i[a].from:n;for(let d=u,m,v,y;d<f;d++)if(v=R2[m=t.charCodeAt(d)])if(v<0){for(let x=o-3;x>=0;x-=3)if(Yr[x+1]==-v){let S=Yr[x+2],_=S&2?r:S&4?S&1?s:r:0;_&&(Tt[d]=Tt[Yr[x]]=_),o=x;break}}else{if(Yr.length==189)break;Yr[o++]=d,Yr[o++]=m,Yr[o++]=c}else if((y=Tt[d])==2||y==1){let x=y==r;c=x?0:1;for(let S=o-3;S>=0;S-=3){let _=Yr[S+2];if(_&2)break;if(x)Yr[S+2]|=2;else{if(_&4)break;Yr[S+2]|=4}}}}}function tJ(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let a=r?n[r-1].to:t,o=r<n.length?n[r].from:e;for(let c=a;c<o;){let u=Tt[c];if(u==256){let f=c+1;for(;;)if(f==o){if(r==n.length)break;f=n[r++].to,o=r<n.length?n[r].from:e}else if(Tt[f]==256)f++;else break;let d=s==1,m=(f<e?Tt[f]:i)==1,v=d==m?d?1:2:i;for(let y=f,x=r,S=x?n[x-1].to:t;y>c;)y==S&&(y=n[--x].from,S=x?n[x-1].to:t),Tt[--y]=v;c=f}else s=u,c++}}}function $2(t,e,n,i,r,s,a){let o=i%2?2:1;if(i%2==r%2)for(let c=e,u=0;c<n;){let f=!0,d=!1;if(u==s.length||c<s[u].from){let x=Tt[c];x!=o&&(f=!1,d=x==16)}let m=!f&&o==1?[]:null,v=f?i:i+1,y=c;e:for(;;)if(u<s.length&&y==s[u].from){if(d)break e;let x=s[u];if(!f)for(let S=x.to,_=u+1;;){if(S==n)break e;if(_<s.length&&s[_].from==S)S=s[_++].to;else{if(Tt[S]==o)break e;break}}if(u++,m)m.push(x);else{x.from>c&&a.push(new Ks(c,x.from,v));let S=x.direction==pl!=!(v%2);N2(t,S?i+1:i,r,x.inner,x.from,x.to,a),c=x.to}y=x.to}else{if(y==n||(f?Tt[y]!=o:Tt[y]==o))break;y++}m?$2(t,c,y,i+1,r,m,a):c<y&&a.push(new Ks(c,y,v)),c=y}else for(let c=n,u=s.length;c>e;){let f=!0,d=!1;if(!u||c>s[u-1].to){let x=Tt[c-1];x!=o&&(f=!1,d=x==16)}let m=!f&&o==1?[]:null,v=f?i:i+1,y=c;e:for(;;)if(u&&y==s[u-1].to){if(d)break e;let x=s[--u];if(!f)for(let S=x.from,_=u;;){if(S==e)break e;if(_&&s[_-1].to==S)S=s[--_].from;else{if(Tt[S-1]==o)break e;break}}if(m)m.push(x);else{x.to<c&&a.push(new Ks(x.to,c,v));let S=x.direction==pl!=!(v%2);N2(t,S?i+1:i,r,x.inner,x.from,x.to,a),c=x.from}y=x.from}else{if(y==e||(f?Tt[y-1]!=o:Tt[y-1]==o))break;y--}m?$2(t,y,c,i+1,r,m,a):y<c&&a.push(new Ks(y,c,v)),c=y}}function N2(t,e,n,i,r,s,a){let o=e%2?2:1;JK(t,r,s,i,o),eJ(t,r,s,i,o),tJ(r,s,i,o),$2(t,r,s,e,n,i,a)}function nJ(t,e,n){if(!t)return[new Ks(0,0,e==BT?1:0)];if(e==pl&&!n.length&&!KK.test(t))return tI(t.length);if(n.length)for(;t.length>Tt.length;)Tt[Tt.length]=256;let i=[],r=e==pl?0:1;return N2(t,r,r,n,0,t.length,i),i}function tI(t){return[new Ks(0,t,0)]}let nI="";function iJ(t,e,n,i,r){var s;let a=i.head-t.from,o=Ks.find(e,a,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),c=e[o],u=c.side(r,n);if(a==u){let m=o+=r?1:-1;if(m<0||m>=e.length)return null;c=e[o=m],a=c.side(!r,n),u=c.side(r,n)}let f=bn(t.text,a,c.forward(r,n));(f<c.from||f>c.to)&&(f=u),nI=t.text.slice(Math.min(a,f),Math.max(a,f));let d=o==(r?e.length-1:0)?null:e[o+(r?1:-1)];return d&&f==u&&d.level+(r?0:1)<c.level?fe.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):fe.cursor(f+t.from,c.forward(r,n)?-1:1,c.level)}function rJ(t,e,n){for(let i=e;i<n;i++){let r=J6(t.charCodeAt(i));if(r==1)return pl;if(r==2||r==4)return BT}return pl}const iI=Qe.define(),rI=Qe.define(),sI=Qe.define(),aI=Qe.define(),M2=Qe.define(),oI=Qe.define(),lI=Qe.define(),IT=Qe.define(),XT=Qe.define(),cI=Qe.define({combine:t=>t.some(e=>e)}),uI=Qe.define({combine:t=>t.some(e=>e)}),hI=Qe.define();class Lc{constructor(e,n="nearest",i="nearest",r=5,s=5,a=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new Lc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Lc(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const dm=Ke.define({map:(t,e)=>t.map(e)}),fI=Ke.define();function Gi(t,e,n){let i=t.facet(aI);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Gs=Qe.define({combine:t=>t.length?t[0]:!0});let sJ=0;const Pc=Qe.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class _n{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Pc.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Pc.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:a}=n||{};return new _n(sJ++,e,i,r,o=>{let c=[];return a&&c.push(XO.of(u=>{let f=u.plugin(o);return f?a(f):Be.none})),s&&c.push(s(o)),c})}static fromClass(e,n){return _n.define((i,r)=>new e(i,r),n)}}class ux{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Gi(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Gi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Gi(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const dI=Qe.define(),ZT=Qe.define(),XO=Qe.define(),pI=Qe.define(),VT=Qe.define(),fd=Qe.define(),mI=Qe.define();function o5(t,e){let n=t.state.facet(mI);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return nt.spans(i,e.from,e.to,{point(){},span(s,a,o,c){let u=s-e.from,f=a-e.from,d=r;for(let m=o.length-1;m>=0;m--,c--){let v=o[m].spec.bidiIsolate,y;if(v==null&&(v=rJ(e.text,u,f)),c>0&&d.length&&(y=d[d.length-1]).to==u&&y.direction==v)y.to=f,d=y.inner;else{let x={from:u,to:f,direction:v,inner:[]};d.push(x),d=x.inner}}}}),r}const gI=Qe.define();function WT(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(gI)){let a=s(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(r=Math.max(r,a.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Wh=Qe.define();class dr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new dr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,a=0;;){let o=r<e.length?e[r].fromB:1e9,c=s<n.length?n[s]:1e9,u=Math.min(o,c);if(u==1e9)break;let f=u+a,d=u,m=f;for(;;)if(s<n.length&&n[s]<=d){let v=n[s+1];s+=2,d=Math.max(d,v);for(let y=r;y<e.length&&e[y].fromB<=d;y++)a=e[y].toA-e[y].toB;m=Math.max(m,v+a)}else if(r<e.length&&e[r].fromB<=d){let v=e[r++];d=Math.max(d,v.toB),m=Math.max(m,v.toA),a=v.toA-v.toB}else break;i.push(new dr(f,m,u,d))}return i}}class Ig{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=xn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,a,o,c)=>r.push(new dr(s,a,o,c))),this.changedRanges=r}static create(e,n,i){return new Ig(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const aJ=[];class dn{constructor(e,n,i=0){this.dom=e,this.length=n,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return aJ}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&BK(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let i=n;for(let r of this.children){if(r==e)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let i=fo(this.dom),r=this.length?e>0:n>0;return new Rr(this.parent.dom,i+(r?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof VO)return e;return null}static get(e){return e.cmTile}}class ZO extends dn{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,i=null,r,s=e?.node==n?e:null,a=0;for(let o of this.children){if(o.sync(e),a+=o.length+o.breakAfter,r=i?i.nextSibling:n.firstChild,s&&r!=o.dom&&(s.written=!0),o.dom.parentNode==n)for(;r&&r!=o.dom;)r=l5(r);else n.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:n.firstChild,s&&r&&(s.written=!0);r;)r=l5(r);this.length=a}}function l5(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class VO extends ZO{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=dn.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],i=this,r=0,s=0;;)if(r==i.children.length){if(!n.length)return;i=i.parent,i.breakAfter&&s++,r=n.pop()}else{let a=i.children[r++];if(a instanceof io)n.push(r),i=a,r=0;else{let o=s+a.length,c=e(a,s);if(c!==void 0)return c;s=o+a.breakAfter}}}resolveBlock(e,n){let i,r=-1,s,a=-1;if(this.blockTiles((o,c)=>{let u=c+o.length;if(e>=c&&e<=u){if(o.isWidget()&&n>=-1&&n<=1){if(o.flags&32)return!0;o.flags&16&&(i=void 0)}(c<e||e==u&&(n<-1?o.length:o.covers(1)))&&(!i||!o.isWidget()&&i.isWidget())&&(i=o,r=e-c),(u>e||e==c&&(n>1?o.length:o.covers(-1)))&&(!s||!o.isWidget()&&s.isWidget())&&(s=o,a=e-c)}}),!i&&!s)throw new Error("No tile at position "+e);return i&&n<0||!s?{tile:i,offset:r}:{tile:s,offset:a}}}class io extends ZO{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let i=new io(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class Fc extends ZO{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,i){let r=new Fc(n||document.createElement("div"),e);return(!n||!i)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,n,i){let r=null,s=-1,a=null,o=-1;function c(f,d){for(let m=0,v=0;m<f.children.length&&v<=d;m++){let y=f.children[m],x=v+y.length;x>=d&&(y.isComposite()?c(y,d-v):(!a||a.isHidden&&(n>0||i&&lJ(a,y)))&&(x>d||y.flags&32)?(a=y,o=d-v):(v<d||y.flags&16&&!y.isHidden)&&(r=y,s=d-v)),v=x}}c(this,e);let u=(n<0?r:a)||r||a;return u?{tile:u,offset:u==r?s:o}:null}coordsIn(e,n){let i=this.resolveInline(e,n,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),n):oJ(this)}domIn(e,n){let i=this.resolveInline(e,n);if(i){let{tile:r,offset:s}=i;if(this.dom.contains(r.dom))return r.isText()?new Rr(r.dom,Math.min(r.dom.nodeValue.length,s)):r.domPosFor(s,r.flags&16?1:r.flags&32?-1:n);let a=i.tile.parent,o=!1;for(let c of a.children){if(o)return new Rr(c.dom,0);c==i.tile&&(o=!0)}}return new Rr(this.dom,0)}}function oJ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=og(e);return n[n.length-1]||null}function lJ(t,e){let n=t.coordsIn(0,1),i=e.coordsIn(0,1);return n&&i&&i.top<n.bottom}class wi extends ZO{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let i=new wi(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class nl extends dn{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let i=this.dom.nodeValue.length;e>i&&(e=i);let r=e,s=e,a=0;e==0&&n<0||e==i&&n>=0?Te.chrome||Te.gecko||(e?(r--,a=1):s<i&&(s++,a=-1)):n<0?r--:s<i&&s++;let o=Ef(this.dom,r,s).getClientRects();if(!o.length)return null;let c=o[(a?a<0:n>=0)?0:o.length-1];return Te.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(o,u=>u.width)||c),a?Bg(c,a<0):c||null}static of(e,n){let i=new nl(n||document.createTextNode(e),e);return n||(i.flags|=2),i}}class ml extends dn{constructor(e,n,i,r){super(e,n,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,i){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;if(i)return Bg(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let s=this.dom.getClientRects(),a=null;if(!s.length)return null;let o=this.flags&16?!0:this.flags&32?!1:e>0;for(let c=o?s.length-1:0;a=s[c],!(e>0?c==0:c==s.length-1||a.top<a.bottom);c+=o?-1:1);return Bg(a,!o)}}get overrideDOMText(){if(!this.length)return mt.empty;let{root:e}=this;if(!e)return mt.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,i,r,s){return s||(s=e.toDOM(n),e.editable||(s.contentEditable="false")),new ml(s,i,e,r)}}class Xg extends dn{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return mt.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class cJ{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,i){let{tile:r,index:s,beforeBreak:a,parents:o}=this;for(;e||n>0;)if(r.isComposite())if(a){if(!e)break;i&&i.break(),e--,a=!1}else if(s==r.children.length){if(!e&&!o.length)break;i&&i.leave(r),a=!!r.breakAfter,{tile:r,index:s}=o.pop(),s++}else{let c=r.children[s],u=c.breakAfter;(n>0?c.length<=e:c.length<e)&&(!i||i.skip(c,0,c.length)!==!1||!c.isComposite)?(a=!!u,s++,e-=c.length):(o.push({tile:r,index:s}),r=c,s=0,i&&c.isComposite()&&i.enter(c))}else if(s==r.length)a=!!r.breakAfter,{tile:r,index:s}=o.pop(),s++;else if(e){let c=Math.min(e,r.length-s);i&&i.skip(r,s,s+c),e-=c,s+=c}else break;return this.tile=r,this.index=s,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class uJ{constructor(e,n,i,r){this.from=e,this.to=n,this.wrapper=i,this.rank=r}}class hJ{constructor(e,n,i){this.cache=e,this.root=n,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,i,r){var s;this.flushBuffer();let a=this.ensureMarks(n,i),o=a.lastChild;if(o&&o.isText()&&!(o.flags&8)){this.cache.reused.set(o,2);let c=a.children[a.children.length-1]=new nl(o.dom,o.text+e);c.parent=a}else a.append(r||nl.of(e,(s=this.cache.find(nl))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let i=this.curLine;i.dom!=n.line.dom&&(i.setDOM(this.cache.reused.has(n.line)?hx(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let r=i;for(let o=n.marks.length-1;o>=0;o--){let c=n.marks[o],u=r.lastChild;if(u instanceof wi&&u.mark.eq(c.mark))u.dom!=c.dom&&u.setDOM(hx(c.dom)),r=u;else{if(this.cache.reused.get(c)){let d=dn.get(c.dom);d&&d.setDOM(hx(c.dom))}let f=wi.of(c.mark,c.dom);r.append(f),r=f}this.cache.reused.set(c,2)}let s=dn.get(e.text);s&&this.cache.reused.set(s,2);let a=new nl(e.text,e.text.nodeValue);a.flags|=8,r.append(a)}addInlineWidget(e,n,i){let r=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);r||this.flushBuffer();let s=this.ensureMarks(n,i);!r&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,i){this.flushBuffer(),this.ensureMarks(n,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var i;e||(e=OI);let r=Fc.start(e,n||((i=this.cache.find(Fc))===null||i===void 0?void 0:i.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var i;let r=this.curLine;for(let s=e.length-1;s>=0;s--){let a=e[s],o;if(n>0&&(o=r.lastChild)&&o instanceof wi&&o.mark.eq(a))r=o,n--;else{let c=wi.of(a,(i=this.cache.find(wi,u=>u.mark.eq(a)))===null||i===void 0?void 0:i.dom);r.append(c),r=c,n=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!c5(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Te.ios&&c5(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(fx,0,32)||new ml(fx.toDOM(),0,fx,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new uJ(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-n.rank||this.wrappers[i-1].to-n.to)<0;)i--;this.wrappers.splice(i,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let i of this.wrappers){let r=n.lastChild;if(i.from<this.pos&&r instanceof io&&r.wrapper.eq(i.wrapper))n=r;else{let s=io.of(i.wrapper,(e=this.cache.find(io,a=>a.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);n.append(s),n=s}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),i=this.cache.find(Xg,void 0,1);return i&&(i.flags=n),i||new Xg(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class fJ{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:r,lineBreak:s,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=r;let o=this.textOff=Math.min(e,r.length);return s?null:r.slice(0,o)}let n=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,n);return this.textOff=n,i}}const Zg=[ml,Fc,nl,wi,Xg,io,VO];for(let t=0;t<Zg.length;t++)Zg[t].bucket=t;class dJ{constructor(e){this.view=e,this.buckets=Zg.map(()=>[]),this.index=Zg.map(()=>0),this.reused=new Map}add(e){e.demo&&console.log("Add widget to cache");let n=e.constructor.bucket,i=this.buckets[n];i.length<6?i.push(e):i[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,i=2){let r=e.bucket,s=this.buckets[r],a=this.index[r];for(let o=s.length-1;o>=0;o--){let c=(o+a)%s.length,u=s[c];if((!n||n(u))&&!this.reused.has(u))return s.splice(c,1),c<a&&this.index[r]--,this.reused.set(u,i),u}return null}findWidget(e,n,i){let r=this.buckets[0];if(e.demo&&console.log("looking for widget",e,"in cache",r.slice()),r.length)for(let s=0,a=0;;s++){if(s==r.length){if(a)return null;a=1,s=0}let o=r[s];if(!this.reused.has(o)&&(a==0?o.widget.compare(e):o.widget.constructor==e.constructor&&e.updateDOM(o.dom,this.view)))return r.splice(s,1),s<this.index[0]&&this.index[0]--,o.length==n&&(o.flags&497)==i?(this.reused.set(o,1),o):(this.reused.set(o,2),new ml(o.dom,n,e,o.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class pJ{constructor(e,n,i,r,s){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new dJ(e),this.text=new fJ(e.state.doc),this.builder=new hJ(this.cache,new VO(e,e.contentDOM),nt.iter(i)),this.cache.reused.set(n,2),this.old=new cJ(n),this.reuseWalker={skip:(a,o,c)=>{if(this.cache.add(a),a.isComposite())return!1},enter:a=>this.cache.add(a),leave:()=>{},break:()=>{}}}run(e,n){let i=n&&this.getCompositionContext(n.text);for(let r=0,s=0,a=0;;){let o=a<e.length?e[a++]:null,c=o?o.fromA:this.old.root.length;if(c>r){let u=c-r;this.preserve(u,!a,!o),r=c,s+=u}if(!o)break;n&&o.fromA<=n.range.fromA&&o.toA>=n.range.toA?(this.forward(o.fromA,n.range.fromA),this.emit(s,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,i),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,o.toA),this.emit(n.range.toB,o.toB)):(this.forward(o.fromA,o.toA),this.emit(s,o.toB)),s=o.toB,r=o.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,i){let r=OJ(this.old),s=this.openMarks;this.old.advance(e,i?1:-1,{skip:(a,o,c)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(c-o);else{let u=c>0||o<a.length?ml.of(a.widget,this.view,c-o,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);u.flags&256?(u.flags&=-2,this.builder.addBlockWidget(u)):(this.builder.ensureLine(null),this.builder.addInlineWidget(u,r,s),s=r.length)}else if(a.isText())this.builder.ensureLine(null),!o&&c==a.length?this.builder.addText(a.text,r,s,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(o,c),r,s)),s=r.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof Xg)this.cache.add(a);else if(a instanceof wi)this.builder.ensureLine(null),this.builder.addMark(a,r,s),this.cache.reused.set(a,1),s=r.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof wi&&r.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?r.length&&(r.length=s=0):a instanceof wi&&(r.shift(),s=Math.min(s,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let i=null,r=this.builder,s=0,a=nt.spans(this.decorations,e,n,{point:(o,c,u,f,d,m)=>{if(u instanceof dl){if(this.disallowBlockEffectsFor[m]){if(u.block)throw new RangeError("Block decorations may not be specified via plugins");if(c>this.view.state.doc.lineAt(o).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=f.length,d>f.length)r.continueWidget(c-o);else{let v=u.widget||(u.block?Gc.block:Gc.inline),y=mJ(u),x=this.cache.findWidget(v,c-o,y)||ml.of(v,this.view,c-o,y);u.block?(u.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(x)):(r.ensureLine(i),r.addInlineWidget(x,f,d))}i=null}else i=gJ(i,u);c>o&&this.text.skip(c-o)},span:(o,c,u,f)=>{for(let d=o;d<c;){let m=this.text.next(Math.min(512,c-d));m==null?(r.addLineStartIfNotCovered(i),r.addBreak(),d++):(r.ensureLine(i),r.addText(m,u,f),d+=m.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=a>s,this.openMarks=a}forward(e,n){n-e<=10?this.old.advance(n-e,1,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,1,this.reuseWalker))}getCompositionContext(e){let n=[],i=null;for(let r=e.parentNode;;r=r.parentNode){let s=dn.get(r);if(r==this.view.contentDOM)break;s instanceof wi?n.push(s):s?.isLine()?i=s:r.nodeName=="DIV"&&!i&&r!=this.view.contentDOM?i=new Fc(r,OI):n.push(wi.of(new ud({tagName:r.nodeName.toLowerCase(),attributes:IK(r)}),r))}return{line:i,marks:n}}}function c5(t,e){let n=i=>{for(let r of i.children)if((e?r.isText():r.length)||n(r))return!0;return!1};return n(t)}function mJ(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const OI={class:"cm-line"};function gJ(t,e){let n=e.spec.attributes,i=e.spec.class;return!n&&!i||(t||(t={class:"cm-line"}),n&&LT(n,t),i&&(t.class+=" "+i)),t}function OJ(t){let e=[];for(let n=t.parents.length;n>1;n--){let i=n==t.parents.length?t.tile:t.parents[n].tile;i instanceof wi&&e.push(i.mark)}return e}function hx(t){let e=dn.get(t);return e&&e.setDOM(t.cloneNode()),t}class Gc extends la{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Gc.inline=new Gc("span");Gc.block=new Gc("div");const fx=new class extends la{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class u5{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Be.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new VO(e,e.contentDOM),this.updateInner([new dr(0,0,0,e.state.doc.length)],null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:f,toA:d})=>d<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!CJ(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?yJ(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:f,to:d}=this.hasComposition;i=new dr(f,d,e.changes.mapPos(f,-1),e.changes.mapPos(d,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Te.ie||Te.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.blockWrappers;this.updateDeco();let c=_J(a,this.decorations,e.changes);c.length&&(i=dr.extendWithRanges(i,c));let u=wJ(o,this.blockWrappers,e.changes);return u.length&&(i=dr.extendWithRanges(i,u)),s&&!i.some(f=>f.fromA<=s.range.fromA&&f.toA>=s.range.toA)&&(i=s.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(n||e.length){let a=this.tile,o=new pJ(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=o.run(e,n),j2(a,o.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Te.chrome||Te.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||i.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof dx&&r.push(s.dom);i.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(fI)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,r=this.view.root.activeElement,s=r==i,a=!s&&!(this.view.state.facet(Gs)||i.tabIndex>-1)&&ag(i,this.view.observer.selectionRange)&&!(r&&i.contains(r));if(!(s||n||a))return;let o=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,u,f;if(c.empty?f=u=this.inlineDOMNearPos(c.anchor,c.assoc||1):(f=this.inlineDOMNearPos(c.head,c.head==c.from?1:-1),u=this.inlineDOMNearPos(c.anchor,c.anchor==c.from?1:-1)),Te.gecko&&c.empty&&!this.hasComposition&&vJ(u)){let m=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(m,u.node.childNodes[u.offset]||null)),u=f=new Rr(m,0),o=!0}let d=this.view.observer.selectionRange;(o||!d.focusNode||(!uf(u.node,u.offset,d.anchorNode,d.anchorOffset)||!uf(f.node,f.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,c))&&(this.view.observer.ignore(()=>{Te.android&&Te.chrome&&i.contains(d.focusNode)&&kJ(d.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let m=Qf(this.view.root);if(m)if(c.empty){if(Te.gecko){let v=xJ(u.node,u.offset);if(v&&v!=3){let y=(v==1?F6:G6)(u.node,u.offset);y&&(u=new Rr(y.node,y.offset))}}m.collapse(u.node,u.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(u.node,u.offset);try{m.extend(f.node,f.offset)}catch{}}else{let v=document.createRange();c.anchor>c.head&&([u,f]=[f,u]),v.setEnd(f.node,f.offset),v.setStart(u.node,u.offset),m.removeAllRanges(),m.addRange(v)}a&&this.view.root.activeElement==i&&(i.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(u,f)),this.impreciseAnchor=u.precise?null:new Rr(d.anchorNode,d.anchorOffset),this.impreciseHead=f.precise?null:new Rr(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&uf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Qf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let a=this.lineAt(n.head,n.assoc);if(!a)return;let o=a.posAtStart;if(n.head==o||n.head==o+a.length)return;let c=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!c||!u||c.bottom>u.top)return;let f=this.domAtPos(n.head+n.assoc,n.assoc);i.collapse(f.node,f.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}posFromDOM(e,n){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let s;if(e==i.dom)s=i.dom.childNodes[n];else{let a=na(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==i.dom)break;a==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?a=-1:a=1),e=o}a<0?s=e:s=e.nextSibling}if(s==i.dom.firstChild)return r;for(;s&&!dn.get(s);)s=s.nextSibling;if(!s)return r+i.length;for(let a=0,o=r;;a++){let c=i.children[a];if(c.dom==s)return o;o+=c.length+c.breakAfter}}else return i.isText()?e==i.dom?r+n:r+(n?i.length:0):r}domAtPos(e,n){let{tile:i,offset:r}=this.tile.resolveBlock(e,n);return i.isWidget()?i.domPosFor(e,n):i.domIn(r,n)}inlineDOMNearPos(e,n){let i,r=-1,s=!1,a,o=-1,c=!1;return this.tile.blockTiles((u,f)=>{if(u.isWidget()){if(u.flags&32&&f>=e)return!0;u.flags&16&&(s=!0)}else{let d=f+u.length;if(f<=e&&(i=u,r=e-f,s=d<e),d>=e&&!a&&(a=u,o=e-f,c=f>e),f>e&&a)return!0}}),!i&&!a?this.domAtPos(e,n):(s&&a?i=null:c&&i&&(a=null),i&&n<0||!a?i.domIn(r,n):a.domIn(o,n))}coordsAt(e,n){let{tile:i,offset:r}=this.tile.resolveBlock(e,n);return i.isWidget()?i.widget instanceof dx?null:i.coordsInWidget(r,n,!0):i.coordsIn(r,n)}lineAt(e,n){let{tile:i}=this.tile.resolveBlock(e,n);return i.isLine()?i:null}coordsForChar(e){let{tile:n,offset:i}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function r(s,a){if(s.isComposite())for(let o of s.children){if(o.length>=a){let c=r(o,a);if(c)return c}if(a-=o.length,a<0)break}else if(s.isText()&&a<s.length){let o=bn(s.text,a);if(o==a)return null;let c=Ef(s.dom,a,o).getClientRects();for(let u=0;u<c.length;u++){let f=c[u];if(u==c.length-1||f.top<f.bottom&&f.left<f.right)return f}}return null}return r(n,i)}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,c=this.view.textDirection==Rt.LTR,u=0,f=(d,m,v)=>{for(let y=0;y<d.children.length&&!(m>r);y++){let x=d.children[y],S=m+x.length,_=x.dom.getBoundingClientRect(),{height:Q}=_;if(v&&!y&&(u+=_.top-v.top),x instanceof io)S>i&&f(x,m,_);else if(m>=i&&(u>0&&n.push(-u),n.push(Q+u),u=0,a)){let k=x.dom.lastChild,T=k?og(k):[];if(T.length){let E=T[T.length-1],C=c?E.right-_.left:_.right-E.left;C>o&&(o=C,this.minWidth=s,this.minWidthFrom=m,this.minWidthTo=S)}}v&&y==d.children.length-1&&(u+=v.bottom-_.bottom),m=S+x.breakAfter}};return f(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?Rt.RTL:Rt.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let o=0,c;for(let u of a.children){if(!u.isText()||/[^ -~]/.test(u.text))return;let f=og(u.dom);if(f.length!=1)return;o+=f[0].width,c=f[0].height}if(o)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:o/a.length,textHeight:c}}});if(e)return e;let n=document.createElement("div"),i,r,s;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let a=og(n.firstChild)[0];i=n.getBoundingClientRect().height,r=a&&a.width?a.width/27:7,s=a&&a.height?a.height:i,n.remove()}),{lineHeight:i,charWidth:r,textHeight:s}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],a=s?s.from-1:this.view.state.doc.length;if(a>i){let o=(n.lineBlockAt(a).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Be.replace({widget:new dx(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!s)break;i=s.to+1}return Be.set(e)}updateDeco(){let e=1,n=this.view.state.facet(XO).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(VT).map((s,a)=>{let o=typeof s=="function";return o&&(i=!0),o?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(nt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(pI).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(hI))try{if(u(this.view,e.range,e))return!0}catch(f){Gi(this.view.state,f,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=WT(this.view),a={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:o,offsetHeight:c}=this.view.scrollDOM;VK(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==Rt.LTR)}lineHasWidget(e){let n=i=>i.isWidget()||i.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){j2(this.tile)}}function j2(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let i of t.children)j2(i,e)}}function vJ(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function vI(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=F6(n.focusNode,n.focusOffset),r=G6(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let o=dn.get(r.node);if(!o||o.isText()&&o.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let c=dn.get(i.node);!c||c.isText()&&c.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function yJ(t,e,n){let i=vI(t,n);if(!i)return null;let{node:r,from:s,to:a}=i,o=r.nodeValue;if(/[\n\r]/.test(o)||t.state.doc.sliceString(i.from,i.to)!=o)return null;let c=e.invertedDesc;return{range:new dr(c.mapPos(s),c.mapPos(a),s,a),text:r}}function xJ(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let bJ=class{constructor(){this.changes=[]}compareRange(e,n){zc(e,n,this.changes)}comparePoint(e,n){zc(e,n,this.changes)}boundChange(e){zc(e,e,this.changes)}};function _J(t,e,n){let i=new bJ;return nt.compare(t,e,n,i),i.changes}class SJ{constructor(){this.changes=[]}compareRange(e,n){zc(e,n,this.changes)}comparePoint(){}boundChange(e){zc(e,e,this.changes)}}function wJ(t,e,n){let i=new SJ;return nt.compare(t,e,n,i),i.changes}function kJ(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function CJ(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}class dx extends la{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function TJ(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return fe.cursor(e);s==0?n=1:s==r.length&&(n=-1);let a=s,o=s;n<0?a=bn(r.text,s,!1):o=bn(r.text,s);let c=i(r.text.slice(a,o));for(;a>0;){let u=bn(r.text,a,!1);if(i(r.text.slice(u,a))!=c)break;a=u}for(;o<r.length;){let u=bn(r.text,o);if(i(r.text.slice(o,u))!=c)break;o=u}return fe.range(a+r.from,o+r.from)}function QJ(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let o=t.viewState.heightOracle.textHeight,c=Math.floor((r-n.top-(t.defaultLineHeight-o)*.5)/o);s+=c*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(n.from,n.to);return n.from+w2(a,s,t.state.tabSize)}function z2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==In.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function EJ(t,e,n,i){let r=z2(t,e.head,e.assoc||-1),s=!i||r.type!=In.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=t.dom.getBoundingClientRect(),o=t.textDirectionAt(r.from),c=t.posAtCoords({x:n==(o==Rt.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(c!=null)return fe.cursor(c,n?-1:1)}return fe.cursor(n?r.to:r.from,n?-1:1)}function h5(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),a=t.textDirectionAt(r.from);for(let o=e,c=null;;){let u=iJ(r,s,a,o,n),f=nI;if(!u){if(r.number==(n?t.state.doc.lines:1))return o;f=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(c){if(!c(f))return o}else{if(!i)return u;c=i(f)}o=u}}function PJ(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let a=i(s);return r==Lt.Space&&(r=a),r==a}}function AJ(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return fe.cursor(r,e.assoc);let a=e.goalColumn,o,c=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),f=t.documentTop;if(u)a==null&&(a=u.left-c.left),o=s<0?u.top:u.bottom;else{let v=t.viewState.lineBlockAt(r);a==null&&(a=Math.min(c.right-c.left,t.defaultCharacterWidth*(r-v.from))),o=(s<0?v.top:v.bottom)+f}let d=c.left+a,m=i??t.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let y=o+(m+v)*s,x=D2(t,{x:d,y},!1,s);return fe.cursor(x.pos,x.assoc,void 0,a)}}function hf(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,a,o)=>{if(e>s&&e<a){let c=i||n||(e-s<a-e?-1:1);e=c<0?s:a,i=c}});if(!i)return e}}function yI(t,e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let a=hf(t,r.from,0);a!=r.from&&(s=fe.cursor(a,-1))}else{let a=hf(t,r.from,-1),o=hf(t,r.to,1);(a!=r.from||o!=r.to)&&(s=fe.range(r.from==r.anchor?a:o,r.from==r.head?a:o))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?fe.create(n,e.mainIndex):e}function px(t,e,n){let i=hf(t.state.facet(fd).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:fe.cursor(i,i<n.from?1:-1)}class as{constructor(e,n){this.pos=e,this.assoc=n}}function D2(t,e,n,i){let r=t.contentDOM.getBoundingClientRect(),s=r.top+t.viewState.paddingTop,{x:a,y:o}=e,c=o-s,u;for(;;){if(c<0)return new as(0,1);if(c>t.viewState.docHeight)return new as(t.state.doc.length,-1);if(u=t.elementAtHeight(c),i==null)break;if(u.type==In.Text){let m=t.docView.coordsAt(i<0?u.from:u.to,i);if(m&&(i<0?m.top<=c+s:m.bottom>=c+s))break}let d=t.viewState.heightOracle.textHeight/2;c=i>0?u.bottom+d:u.top-d}if(t.viewport.from>=u.to||t.viewport.to<=u.from){if(n)return null;if(u.type==In.Text){let d=QJ(t,r,u,a,o);return new as(d,d==u.from?1:-1)}}if(u.type!=In.Text)return c<(u.top+u.bottom)/2?new as(u.from,1):new as(u.to,-1);let f=t.docView.lineAt(u.from,2);return(!f||f.length!=u.length)&&(f=t.docView.lineAt(u.from,-2)),xI(t,f,u.from,a,o)}function xI(t,e,n,i,r){let s=-1,a=null,o=1e9,c=1e9,u=r,f=r,d=(m,v)=>{for(let y=0;y<m.length;y++){let x=m[y];if(x.top==x.bottom)continue;let S=x.left>i?x.left-i:x.right<i?i-x.right:0,_=x.top>r?x.top-r:x.bottom<r?r-x.bottom:0;x.top<=f&&x.bottom>=u&&(u=Math.min(x.top,u),f=Math.max(x.bottom,f),_=0),(s<0||(_-c||S-o)<0)&&(s>=0&&c&&o<S&&a.top<=f-2&&a.bottom>=u+2?c=0:(s=v,o=S,c=_,a=x))}};if(e.isText()){for(let v=0;v<e.length;){let y=bn(e.text,v);if(d(Ef(e.dom,v,y).getClientRects(),v),!o&&!c)break;v=y}return i>(a.left+a.right)/2==(f5(t,s+n)==Rt.LTR)?new as(n+bn(e.text,s),-1):new as(n+s,1)}else{if(!e.length)return new as(n,1);for(let x=0;x<e.children.length;x++){let S=e.children[x];if(S.flags&48)continue;let _=(S.dom.nodeType==1?S.dom:Ef(S.dom,0,S.length)).getClientRects();if(d(_,x),!o&&!c)break}let m=e.children[s],v=e.posBefore(m,n);return m.isComposite()||m.isText()?xI(t,m,v,Math.max(a.left,Math.min(a.right,i)),r):i>(a.left+a.right)/2==(f5(t,s+n)==Rt.LTR)?new as(v+m.length,-1):new as(v,1)}}function f5(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[Ks.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const Uh="";class RJ{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(lt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Uh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let a=dn.get(r),o=r.nextSibling;if(o==n){a?.breakAfter&&!o&&i!=this.view.contentDOM&&this.lineBreak();break}let c=dn.get(o);(a&&c?a.breakAfter:(a?a.breakAfter:qg(r))||qg(o)&&(r.nodeName!="BR"||a?.isWidget())&&this.text.length>s)&&!NJ(o,n)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,o;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(o=r.exec(n))&&(s=o.index,a=o[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);i=s+a}}readNode(e){let n=dn.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+($J(e,i.node,i.offset)?n:0))}}function $J(t,e,n){for(;;){if(!e||n<na(e))return!1;if(e==t)return!0;n=fo(e)+1,e=e.parentNode}}function NJ(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let i=dn.get(t);if(!i?.isWidget())return!1;i&&(n||(n=[])).push(i)}if(n)for(let i of n){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class d5{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class MJ{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=bI(e.docView.tile,n,i,0))){let o=s||a?[]:zJ(e),c=new RJ(o,e);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=DJ(o,this.bounds.from)}else{let o=e.observer.selectionRange,c=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!A2(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=a&&a.node==o.anchorNode&&a.offset==o.anchorOffset||!A2(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),f=e.viewport;if((Te.ios||Te.chrome)&&e.state.selection.main.empty&&c!=u&&(f.from>0||f.to<e.state.doc.length)){let d=Math.min(c,u),m=Math.max(c,u),v=f.from-d,y=f.to-m;(v==0||v==1||d==0)&&(y==0||y==-1||m==e.state.doc.length)&&(c=0,u=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(fe.range(u,c)):this.newSel=fe.single(u,c)}}}function bI(t,e,n,i){if(t.isComposite()){let r=-1,s=-1,a=-1,o=-1;for(let c=0,u=i,f=i;c<t.children.length;c++){let d=t.children[c],m=u+d.length;if(u<e&&m>n)return bI(d,e,n,u);if(m>=e&&r==-1&&(r=c,s=u),u>n&&d.dom.parentNode==t.dom){a=c,o=f;break}f=m,u=m+d.breakAfter}return{from:s,to:o<0?i+t.length:o,startDOM:(r?t.children[r-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:a<t.children.length&&a>=0?t.children[a].dom:null}}else return t.isText()?{from:i,to:i+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function _I(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:o}=e.bounds,c=r.from,u=null;(s===8||Te.android&&e.text.length<o-a)&&(c=r.to,u="end");let f=SI(t.state.doc.sliceString(a,o,Uh),e.text,c-a,u);f&&(Te.chrome&&s==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Uh+Uh&&f.toB--,n={from:a+f.from,to:a+f.toA,insert:mt.of(e.text.slice(f.from,f.toB).split(Uh))})}else i&&(!t.hasFocus&&t.state.facet(Gs)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Te.mac||Te.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=fe.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:mt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:t.state.doc.lineAt(r.from).to<r.to&&t.docView.lineHasWidget(r.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:r.from,to:r.to,insert:t.state.toText(t.inputState.insertingText)}:Te.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=fe.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:mt.of([" "])}),n)return UT(t,n,i,s);if(i&&!i.main.eq(r)){let a=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),o=t.inputState.lastSelectionOrigin,o=="select.pointer"&&(i=yI(t.state.facet(fd).map(c=>c(t)),i))),t.dispatch({selection:i,scrollIntoView:a,userEvent:o}),!0}else return!1}function UT(t,e,n,i=-1){if(Te.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Te.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Dc(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Dc(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Dc(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,o=()=>a||(a=jJ(t,e,n));return t.state.facet(oI).some(c=>c(t,e.from,e.to,s,o))||t.dispatch(o()),!0}function jJ(t,e,n){let i,r=t.state,s=r.selection.main,a=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let c=e.from<s.from?-1:1,u=c<0?s.from:s.to,f=hf(r.facet(fd).map(d=>d(t)),u,c);e.from==f&&(a=f)}if(a>-1)i={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let c=s.from<e.from?r.sliceDoc(s.from,e.from):"",u=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(c+e.insert.sliceString(0,void 0,t.state.lineBreak)+u))}else{let c=r.changes(e),u=n&&n.main.to<=c.newLength?n.main:void 0;if(r.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let f=t.state.sliceDoc(e.from,e.to),d,m=n&&vI(t,n.main.head);if(m){let y=e.insert.length-(e.to-e.from);d={from:m.from,to:m.to-y}}else d=t.state.doc.lineAt(s.head);let v=s.to-e.to;i=r.changeByRange(y=>{if(y.from==s.from&&y.to==s.to)return{changes:c,range:u||y.map(c)};let x=y.to-v,S=x-f.length;if(t.state.sliceDoc(S,x)!=f||x>=d.from&&S<=d.to)return{range:y};let _=r.changes({from:S,to:x,insert:e.insert}),Q=y.to-s.to;return{changes:_,range:u?fe.range(Math.max(0,u.anchor+Q),Math.max(0,u.head+Q)):y.map(_)}})}else i={changes:c,selection:u&&r.selection.replaceRange(u)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function SI(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let a=t.length,o=e.length;for(;a>0&&o>0&&t.charCodeAt(a-1)==e.charCodeAt(o-1);)a--,o--;if(i=="end"){let c=Math.max(0,s-Math.min(a,o));n-=a+c-s}if(a<s&&t.length<e.length){let c=n<=s&&n>=a?s-n:0;s-=c,o=s+(o-a),a=s}else if(o<s){let c=n<=s&&n>=o?s-n:0;s-=c,a=s+(a-o),o=s}return{from:s,toA:a,toB:o}}function zJ(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new d5(n,i)),(r!=n||s!=i)&&e.push(new d5(r,s))),e}function DJ(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?fe.single(n+e,i+e):null}class LJ{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Te.safari&&e.contentDOM.addEventListener("input",()=>null),Te.gecko&&eee(e.contentDOM.ownerDocument)}handleEvent(e){!UJ(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=qJ(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let a=!n[s].handlers.length,o=i[s];o&&a!=!o.handlers.length&&(r.removeEventListener(s,this.handleEvent),o=null),o||r.addEventListener(s,this.handleEvent,{passive:a})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&kI.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Te.android&&Te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=wI.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||BJ.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Dc(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Te.safari&&!Te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function p5(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){Gi(n.state,r)}}}function qJ(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,a=r&&r.plugin.domEventObservers;if(s)for(let o in s){let c=s[o];c&&n(o).handlers.push(p5(i.value,c))}if(a)for(let o in a){let c=a[o];c&&n(o).observers.push(p5(i.value,c))}}for(let i in zr)n(i).handlers.push(zr[i]);for(let i in yr)n(i).observers.push(yr[i]);return e}const wI=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],BJ="dthko",kI=[16,17,18,20,91,92,224,225],pm=6;function mm(t){return Math.max(0,t)*.7+8}function IJ(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class XJ{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=WK(e.contentDOM),this.atoms=e.state.facet(fd).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(lt.allowMultipleSelections)&&ZJ(e,n),this.dragging=WJ(e,n)&&QI(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&IJ(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,a=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let c=WT(this.view);e.clientX-c.left<=r+pm?n=-mm(r-e.clientX):e.clientX+c.right>=a-pm&&(n=mm(e.clientX-a)),e.clientY-c.top<=s+pm?i=-mm(s-e.clientY):e.clientY+c.bottom>=o-pm&&(i=mm(e.clientY-o)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,i=yI(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ZJ(t,e){let n=t.state.facet(iI);return n.length?n[0](e):Te.mac?e.metaKey:e.ctrlKey}function VJ(t,e){let n=t.state.facet(rI);return n.length?n[0](e):Te.mac?!e.altKey:!e.ctrlKey}function WJ(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Qf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let a=r[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function UJ(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=dn.get(n))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const zr=Object.create(null),yr=Object.create(null),CI=Te.ie&&Te.ie_version<15||Te.ios&&Te.webkit_version<604;function HJ(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),TI(t,n.value)},50)}function WO(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function TI(t,e){e=WO(t.state,IT,e);let{state:n}=t,i,r=1,s=n.toText(e),a=s.lines==n.selection.ranges.length;if(L2!=null&&n.selection.ranges.every(c=>c.empty)&&L2==s.toString()){let c=-1;i=n.changeByRange(u=>{let f=n.doc.lineAt(u.from);if(f.from==c)return{range:u};c=f.from;let d=n.toText((a?s.line(r++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:d},range:fe.cursor(u.from+d.length)}})}else a?i=n.changeByRange(c=>{let u=s.line(r++);return{changes:{from:c.from,to:c.to,insert:u.text},range:fe.cursor(c.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}yr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};zr.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);yr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};yr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};zr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(sI))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=FJ(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new XJ(t,e,n,i)),i&&t.observer.ignore(()=>{H6(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function m5(t,e,n,i){if(i==1)return fe.cursor(e,n);if(i==2)return TJ(t.state,e,n);{let r=t.docView.lineAt(e,n),s=t.state.doc.lineAt(r?r.posAtEnd:e),a=r?r.posAtStart:s.from,o=r?r.posAtEnd:s.to;return o<t.state.doc.length&&o==s.to&&o++,fe.range(a,o)}}const YJ=Te.ie&&Te.ie_version<=11;let g5=null,O5=0,v5=0;function QI(t){if(!YJ)return t.detail;let e=g5,n=v5;return g5=t,v5=Date.now(),O5=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(O5+1)%3:1}function FJ(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=QI(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,a,o){let c=t.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),u,f=m5(t,c.pos,c.assoc,i);if(n.pos!=c.pos&&!a){let d=m5(t,n.pos,n.assoc,i),m=Math.min(d.from,f.from),v=Math.max(d.to,f.to);f=m<f.from?fe.range(m,v):fe.range(v,m)}return a?r.replaceRange(r.main.extend(f.from,f.to)):o&&i==1&&r.ranges.length>1&&(u=GJ(r,c.pos))?u:o?r.addRange(f):fe.create([f])}}}function GJ(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return fe.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}zr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.tile.nearest(e.target);if(r&&r.isWidget()){let s=r.posAtStart,a=s+r.length;(s>=n.to||a<=n.from)&&(n=fe.range(s,a))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",WO(t.state,XT,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};zr.dragend=t=>(t.inputState.draggedContent=null,!1);function y5(t,e,n,i){if(n=WO(t.state,IT,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,a=i&&s&&VJ(t,e)?{from:s.from,to:s.to}:null,o={from:r,insert:n},c=t.state.changes(a?[a,o]:o);t.focus(),t.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"}),t.inputState.draggedContent=null}zr.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&y5(t,e,i.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(i[a]=o.result),s()},o.readAsText(n[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return y5(t,e,i,!0),!0}return!1};zr.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=CI?null:e.clipboardData;return n?(TI(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(HJ(t),!1)};function KJ(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function JJ(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let a=t.doc.lineAt(s);a.number>r&&(e.push(a.text),n.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),r=a.number}i=!0}return{text:WO(t,XT,e.join(t.lineBreak)),ranges:n,linewise:i}}let L2=null;zr.copy=zr.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=JJ(t.state);if(!n&&!r)return!1;L2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=CI?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(KJ(t,n),!1)};const EI=aa.define();function PI(t,e){let n=[];for(let i of t.facet(lI)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:EI.of(!0)}):null}function AI(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=PI(t.state,e);n?t.dispatch(n):t.update([])}},10)}yr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),AI(t)};yr.blur=t=>{t.observer.clearSelectionRange(),AI(t)};yr.compositionstart=yr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};yr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Te.chrome&&Te.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};yr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};zr.beforeinput=(t,e)=>{var n,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),a=e.getTargetRanges();if(s&&a.length){let o=a[0],c=t.posAtDOM(o.startContainer,o.startOffset),u=t.posAtDOM(o.endContainer,o.endOffset);return UT(t,{from:c,to:u,insert:t.state.toText(s)},null),!0}}let r;if(Te.chrome&&Te.android&&(r=wI.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Te.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Te.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>yr.compositionend(t,e),20),!1};const x5=new Set;function eee(t){x5.has(t)||(x5.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const b5=["pre-wrap","normal","pre-line","break-spaces"];let Kc=!1;function _5(){Kc=!1}class tee{constructor(e){this.lineWrapping=e,this.doc=mt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return b5.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,a){let o=b5.indexOf(e)>-1,c=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,c){this.heightSamples={};for(let u=0;u<a.length;u++){let f=a[u];f<0?u++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class nee{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Pr{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?In.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof dl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Pr(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var At=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(At||(At={}));const lg=.001;class oi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>lg&&(Kc=!0),this.height=e)}replace(e,n,i){return oi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,a=i.doc;for(let o=r.length-1;o>=0;o--){let{fromA:c,toA:u,fromB:f,toB:d}=r[o],m=s.lineAt(c,At.ByPosNoHeight,i.setDoc(n),0,0),v=m.to>=u?m:s.lineAt(u,At.ByPosNoHeight,i,0,0);for(d+=v.to-u,u=v.to;o>0&&m.from<=r[o-1].toA;)c=r[o-1].fromA,f=r[o-1].fromB,o--,c<m.from&&(m=s.lineAt(c,At.ByPosNoHeight,i,0,0));f+=m.from-c,c=m.from;let y=HT.build(i.setDoc(a),e,f,d);s=Vg(s,s.replace(c,u,y))}return s.updateHeight(i,0)}static empty(){return new Ui(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let o=e[n-1];o.break?e.splice(--n,1,o.left,null,o.right):e.splice(--n,1,o.left,o.right),i+=1+o.break,r-=o.size}else if(s>r*2){let o=e[i];o.break?e.splice(i,1,o.left,null,o.right):e.splice(i,1,o.left,o.right),i+=2+o.break,s-=o.size}else break;else if(r<s){let o=e[n++];o&&(r+=o.size)}else{let o=e[--i];o&&(s+=o.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,i++),new ree(oi.of(e.slice(0,n)),a,oi.of(e.slice(i)))}}function Vg(t,e){return t==e?t:(t.constructor!=e.constructor&&(Kc=!0),e)}oi.prototype.size=1;const iee=Be.replace({});class RI extends oi{constructor(e,n,i){super(e,n),this.deco=i,this.spaceAbove=0}mainBlock(e,n){return new Pr(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,i,r){return this.spaceAbove&&e<i+this.spaceAbove?new Pr(r,0,i,this.spaceAbove,iee):this.mainBlock(i,r)}lineAt(e,n,i,r,s){let a=this.mainBlock(r,s);return this.spaceAbove?this.blockAt(0,i,r,s).join(a):a}forEachLine(e,n,i,r,s,a){e<=s+this.length&&n>=s&&a(this.lineAt(0,At.ByPos,i,r,s))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ui extends RI{constructor(e,n,i){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,n){return new Pr(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Ui||r instanceof Ln&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ln?r=new Ui(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):oi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ln extends oi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,a,o=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*s);a=c/s,this.length>s+1&&(o=(this.height-c)/(this.length-s-1))}else a=this.height/s;return{firstLine:i,lastLine:r,perLine:a,perChar:o}}blockAt(e,n,i,r){let{firstLine:s,lastLine:a,perLine:o,perChar:c}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),f=n.doc.lineAt(u),d=o+f.length*c,m=Math.max(i,e-d/2);return new Pr(f.from,f.length,m,d,0)}else{let u=Math.max(0,Math.min(a-s,Math.floor((e-i)/o))),{from:f,length:d}=n.doc.line(s+u);return new Pr(f,d,i+o*u,o,0)}}lineAt(e,n,i,r,s){if(n==At.ByHeight)return this.blockAt(e,i,r,s);if(n==At.ByPosNoHeight){let{from:v,to:y}=i.doc.lineAt(e);return new Pr(v,y-v,0,0,0)}let{firstLine:a,perLine:o,perChar:c}=this.heightMetrics(i,s),u=i.doc.lineAt(e),f=o+u.length*c,d=u.number-a,m=r+o*d+c*(u.from-s-d);return new Pr(u.from,u.length,Math.max(r,Math.min(m,r+this.height-f)),f,0)}forEachLine(e,n,i,r,s,a){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:o,perLine:c,perChar:u}=this.heightMetrics(i,s);for(let f=e,d=r;f<=n;){let m=i.doc.lineAt(f);if(f==e){let y=m.number-o;d+=c*y+u*(e-s-y)}let v=c+u*m.length;a(new Pr(m.from,m.length,d,v,0)),d+=v,f=m.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Ln?i[i.length-1]=new Ln(s.length+r):i.push(null,new Ln(r-1))}if(e>0){let s=i[0];s instanceof Ln?i[0]=new Ln(e+s.length):i.unshift(new Ln(e-1),null)}return oi.of(i)}decomposeLeft(e,n){n.push(new Ln(e-1),null)}decomposeRight(e,n){n.push(null,new Ln(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let a=[],o=Math.max(n,r.from),c=-1;for(r.from>n&&a.push(new Ln(r.from-n-1).updateHeight(e,n));o<=s&&r.more;){let f=e.doc.lineAt(o).length;a.length&&a.push(null);let d=r.heights[r.index++],m=0;d<0&&(m=-d,d=r.heights[r.index++]),c==-1?c=d:Math.abs(d-c)>=lg&&(c=-2);let v=new Ui(f,d,m);v.outdated=!1,a.push(v),o+=f+1}o<=s&&a.push(null,new Ln(s-o).updateHeight(e,o));let u=oi.of(a);return(c<0||Math.abs(u.height-this.height)>=lg||Math.abs(c-this.heightMetrics(e,n).perLine)>=lg)&&(Kc=!0),Vg(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class ree extends oi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let a=r+this.left.height,o=s+this.left.length+this.break,c=n==At.ByHeight?e<a:e<o,u=c?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,a,o);if(this.break||(c?u.to<o:u.from>o))return u;let f=n==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return c?u.join(this.right.lineAt(o,f,i,a,o)):this.left.lineAt(o,f,i,r,s).join(u)}forEachLine(e,n,i,r,s,a){let o=r+this.left.height,c=s+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,n,i,r,s,a),n>=c&&this.right.forEachLine(e,n,i,o,c,a);else{let u=this.lineAt(c,At.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,a),u.to>=e&&u.from<=n&&a(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,o,c,a)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let o of i)s.push(o);if(e>0&&S5(s,a-1),n<this.length){let o=s.length;this.decomposeRight(n,s),S5(s,o)}return oi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?oi.of(this.break?[e,null,n]:[e,n]):(this.left=Vg(this.left,e),this.right=Vg(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:a}=this,o=n+s.length+this.break,c=null;return r&&r.from<=n+s.length&&r.more?c=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=o+a.length&&r.more?c=a=a.updateHeight(e,o,i,r):a.updateHeight(e,o,i),c?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function S5(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Ln&&(i=t[e+1])instanceof Ln&&t.splice(e-1,3,new Ln(n.length+1+i.length))}const see=5;class HT{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Ui?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ui(i-this.pos,-1,0)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let a=n-e;i.block?this.addBlock(new RI(a,r,i)):(a||s||r>=see)&&this.addLineDeco(r,s,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ui(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let i=new Ln(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ui)return e;let n=new Ui(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Ui)&&!this.isCovered?this.nodes.push(new Ui(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Ui&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new HT(i,e);return nt.spans(n,i,r,s,0),s.finish(i)}}function aee(t,e,n){let i=new oee;return nt.compare(t,e,n,i,0),i.changes}class oee{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&zc(e,n,this.changes,5)}}function lee(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),a=Math.min(r.innerWidth,n.right),o=Math.max(0,n.top),c=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let f=u,d=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&d.overflow!="visible"){let m=f.getBoundingClientRect();s=Math.max(s,m.left),a=Math.min(a,m.right),o=Math.max(o,m.top),c=Math.min(u==t.parentNode?r.innerHeight:c,m.bottom)}u=d.position=="absolute"||d.position=="fixed"?f.offsetParent:f.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,a)-n.left,top:o-(n.top+e),bottom:Math.max(o,c)-(n.top+e)}}function cee(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function uee(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class mx{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Be.replace({widget:new hee(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class hee extends la{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class w5{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=k5,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Rt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(ZT).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new tee(n),this.stateDeco=C5(e),this.heightMap=oi.empty().applyChanges(this.stateDeco,mt.empty,this.heightOracle.setDoc(e.doc),[new dr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Be.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:a})=>r>=s&&r<=a)){let{from:s,to:a}=this.lineBlockAt(r);e.push(new gm(s,a))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?k5:new YT(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Hh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=C5(this.state);let r=e.changedRanges,s=dr.extendWithRanges(r,aee(i,this.stateDeco,e?e.changes:xn.empty(this.state.doc.length))),a=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);_5(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=a||Kc)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let c=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<c.from||n.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,n));let u=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(uI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Rt.RTL:Rt.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),o=n.getBoundingClientRect(),c=a||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,f=0;if(o.width&&o.height){let{scaleX:T,scaleY:E}=U6(n,o);(T>.005&&Math.abs(this.scaleX-T)>.005||E>.005&&Math.abs(this.scaleY-E)>.005)&&(this.scaleX=T,this.scaleY=E,u|=16,a=c=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,m=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=m)&&(this.paddingTop=d,this.paddingBottom=m,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=Y6(e.scrollDOM);let y=(this.printing?uee:lee)(n,this.paddingTop),x=y.top-this.pixelViewport.top,S=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(c=!0)),!this.inView&&!this.scrollTarget&&!cee(e.dom))return 0;let Q=o.width;if((this.contentDOMWidth!=Q||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),c){let T=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(T)&&(a=!0),a||r.lineWrapping&&Math.abs(Q-this.contentDOMWidth)>r.charWidth){let{lineHeight:E,charWidth:C,textHeight:P}=e.docView.measureTextSize();a=E>0&&r.refresh(s,E,C,P,Math.max(5,Q/C),T),a&&(e.docView.minWidth=0,u|=16)}x>0&&S>0?f=Math.max(x,S):x<0&&S<0&&(f=Math.min(x,S)),_5();for(let E of this.viewports){let C=E.from==this.viewport.from?T:e.docView.measureVisibleLineHeights(E);this.heightMap=(a?oi.empty().applyChanges(this.stateDeco,mt.empty,this.heightOracle,[new dr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new nee(E.from,C))}Kc&&(u|=2)}let k=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),u|=this.updateForViewport()),(u&2||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:o}=this,c=new gm(r.lineAt(a-i*1e3,At.ByHeight,s,0,0).from,r.lineAt(o+(1-i)*1e3,At.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<c.from||u>c.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,At.ByPos,s,0,0),m;n.y=="center"?m=(d.top+d.bottom)/2-f/2:n.y=="start"||n.y=="nearest"&&u<c.from?m=d.top:m=d.bottom-f,c=new gm(r.lineAt(m-1e3/2,At.ByHeight,s,0,0).from,r.lineAt(m+f+1e3/2,At.ByHeight,s,0,0).to)}}return c}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new gm(this.heightMap.lineAt(i,At.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,At.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,At.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:o}=this;return(e==0||r<=a-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=o+Math.max(10,Math.min(i,250)))&&r>a-2*1e3&&s<o+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new mx(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,a=r<<1;if(this.defaultTextDirection!=Rt.LTR&&!i)return[];let o=[],c=(f,d,m,v)=>{if(d-f<s)return;let y=this.state.selection.main,x=[y.from];y.empty||x.push(y.to);for(let _ of x)if(_>f&&_<d){c(f,_-10,m,v),c(_+10,d,m,v);return}let S=dee(e,_=>_.from>=m.from&&_.to<=m.to&&Math.abs(_.from-f)<s&&Math.abs(_.to-d)<s&&!x.some(Q=>_.from<Q&&_.to>Q));if(!S){if(d<m.to&&n&&i&&n.visibleRanges.some(k=>k.from<=d&&k.to>=d)){let k=n.moveToLineBoundary(fe.cursor(d),!1,!0).head;k>f&&(d=k)}let _=this.gapSize(m,f,d,v),Q=i||_<2e6?_:2e6;S=new mx(f,d,_,Q)}o.push(S)},u=f=>{if(f.length<a||f.type!=In.Text)return;let d=fee(f.from,f.to,this.stateDeco);if(d.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,v,y;if(i){let x=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,_;if(m!=null){let Q=vm(d,m),k=((this.visibleBottom-this.visibleTop)/2+x)/f.height;S=Q-k,_=Q+k}else S=(this.visibleTop-f.top-x)/f.height,_=(this.visibleBottom-f.top+x)/f.height;v=Om(d,S),y=Om(d,_)}else{let x=d.total*this.heightOracle.charWidth,S=r*this.heightOracle.charWidth,_=0;if(x>2e6)for(let C of e)C.from>=f.from&&C.from<f.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=C.size-C.displaySize);let Q=this.pixelViewport.left+_,k=this.pixelViewport.right+_,T,E;if(m!=null){let C=vm(d,m),P=((k-Q)/2+S)/x;T=C-P,E=C+P}else T=(Q-S)/x,E=(k+S)/x;v=Om(d,T),y=Om(d,E)}v>f.from&&c(f.from,v,f,d),y<f.to&&c(y,f.to,f,d)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(u):u(f);return o}gapSize(e,n,i,r){let s=vm(r,i)-vm(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){mx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Be.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];nt.spans(n,this.viewport.from,this.viewport.to,{span(s,a){i.push({from:s,to:a})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let a=this.visibleRanges[s],o=i[s];(a.from!=o.from||a.to!=o.to)&&(r|=4,e&&e.mapPos(a.from,-1)==o.from&&e.mapPos(a.to,1)==o.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Hh(this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Hh(this.heightMap.lineAt(this.scaler.fromDOM(e),At.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Hh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let gm=class{constructor(e,n){this.from=e,this.to=n}};function fee(t,e,n){let i=[],r=t,s=0;return nt.spans(n,t,e,{span(){},point(a,o){a>r&&(i.push({from:r,to:a}),s+=a-r),r=o}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Om({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:a}=e[r],o=a-s;if(i<=o)return s+i;i-=o}}function vm(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function dee(t,e){for(let n of t)if(e(n))return n}const k5={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function C5(t){let e=t.facet(XO).filter(i=>typeof i!="function"),n=t.facet(VT).filter(i=>typeof i!="function");return n.length&&e.push(nt.join(n)),e}class YT{constructor(e,n,i){let r=0,s=0,a=0;this.viewports=i.map(({from:o,to:c})=>{let u=n.lineAt(o,At.ByPos,e,0,0).top,f=n.lineAt(c,At.ByPos,e,0,0).bottom;return r+=f-u,{from:o,to:c,top:u,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let o of this.viewports)o.domTop=a+(o.top-s)*this.scale,a=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof YT?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Hh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Pr(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Hh(r,e)):t._content)}const ym=Qe.define({combine:t=>t.join(" ")}),q2=Qe.define({combine:t=>t.indexOf(!0)>-1}),B2=uo.newName(),$I=uo.newName(),NI=uo.newName(),MI={"&light":"."+$I,"&dark":"."+NI};function I2(t,e,n){return new uo(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const pee=I2("."+B2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},MI),mee={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gx=Te.ie&&Te.ie_version<=11;class gee{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new UK,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Te.ie&&Te.ie_version<=11||Te.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Te.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Te.chrome&&Te.chrome_version<126)&&(this.editContext=new vee(e),e.state.facet(Gs)&&(e.contentDOM.editContext=this.editContext.editContext)),gx&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Gs)?i.root.activeElement!=this.dom:!ag(this.dom,r))return;let s=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Te.ie&&Te.ie_version<=11||Te.android&&Te.chrome)&&!i.state.selection.main.empty&&r.focusNode&&uf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Qf(e.root);if(!n)return!1;let i=Te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Oee(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=ag(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&YK(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mee),gx&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gx&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Dc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(r=!0),n==-1?{from:n,to:i}=a:(n=Math.min(a.from,n),i=Math.max(a.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&ag(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new MJ(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=_I(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let i=T5(n,e.previousSibling||e.target.previousSibling,-1),r=T5(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Gs)!=e.state.facet(Gs)&&(e.view.contentDOM.editContext=e.state.facet(Gs)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function T5(t,e,n){for(;e;){let i=dn.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function Q5(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor,1);return uf(a.node,a.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function Oee(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return Q5(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?Q5(t,n):null}class vee{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:a}=r,o=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:o,drifted:!1});let u=c-o>i.text.length;o==this.from&&s<this.from?o=s:c==this.to&&s>this.to&&(c=s);let f=SI(e.state.sliceDoc(o,c),i.text,(u?r.from:r.to)-o,u?"end":null);if(!f){let m=fe.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));m.main.eq(r)||e.dispatch({selection:m,userEvent:"select"});return}let d={from:f.from+o,to:f.toA+o,insert:mt.of(i.text.slice(f.from,f.toB).split(`
`))};if((Te.mac||Te.android)&&d.from==a-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:o,to:c,insert:mt.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let m=this.to-this.from+(d.to-d.from+d.insert.length);UT(e,d,fe.single(this.toEditorPos(i.selectionStart,m),this.toEditorPos(i.selectionEnd,m)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(n.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let a=this.toEditorPos(i.rangeStart),o=this.toEditorPos(i.rangeEnd);a<o;a++){let c=e.coordsForChar(a);s=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let a=s.underlineStyle,o=s.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(o)){let c=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(c<u){let f=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;r.push(Be.mark({attributes:{style:f}}).range(c,u))}}}e.dispatch({effects:fI.of(Be.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Qf(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,a,o,c,u)=>{if(i)return;let f=u.length-(a-s);if(r&&a>=r.to)if(r.from==s&&r.to==a&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=f,this.to+=f;return}else r=null,this.revertPending(e.state);if(s+=n,a+=n,a<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),u.toString()),this.to+=f}n+=f}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class we{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||HK(e.parent)||document,this.viewState=new w5(e.state||lt.create(e)),e.scrollTo&&e.scrollTo.is(dm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Pc).map(r=>new ux(r));for(let r of this.plugins)r.update(this);this.observer=new gee(this),this.inputState=new LJ(this),this.inputState.ensureHandlers(this.plugins),this.docView=new u5(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof fn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let m of e){if(m.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=m.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,o=0,c=null;e.some(m=>m.annotation(EI))?(this.inputState.notifiedFocused=a,o=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=PI(s,a),c||(o=1));let u=this.observer.delayedAndroidKey,f=null;if(u?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(lt.phrases)!=this.state.facet(lt.phrases))return this.setState(s);r=Ig.create(this,s,e),r.flags|=o;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(d&&(d=d.map(m.changes)),m.scrollIntoView){let{main:v}=m.state.selection;d=new Lc(v.empty?v:fe.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of m.effects)v.is(dm)&&(d=v.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=Wg.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Wh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(ym)!=r.state.facet(ym)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let m of this.state.facet(M2))try{m(r)}catch(v){Gi(this.state,v,"update listener")}(c||f)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),f&&!_I(this,f)&&u.force&&Dc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new w5(e),this.plugins=e.facet(Pc).map(i=>new ux(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new u5(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Pc),i=e.state.facet(Pc);if(n!=i){let r=[];for(let s of i){let a=n.indexOf(s);if(a<0)r.push(new ux(s));else{let o=this.plugins[a];o.mustUpdate=e,r.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){Gi(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(a<0)if(Y6(i))s=-1,a=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(r);s=v.from,a=v.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];c&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(v=>{try{return v.read(this)}catch(y){return Gi(this.state,y),E5}}),d=Ig.create(this,this.state,[]),m=!1;d.flags|=c,n?n.flags|=c:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),m=this.docView.update(d),m&&this.docViewUpdate());for(let v=0;v<u.length;v++)if(f[v]!=E5)try{let y=u[v];y.write&&y.write(f[v],this)}catch(y){Gi(this.state,y)}if(m&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let y=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(y>1||y<-1){r=r+y,i.scrollTop=r/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let o of this.state.facet(M2))o(n)}get themeClasses(){return B2+" "+(this.state.facet(q2)?NI:$I)+" "+this.state.facet(ym)}updateAttrs(){let e=P5(this,dI,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Gs)?"true":"false",class:"cm-content",style:`${Te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),P5(this,ZT,n);let i=this.observer.ignore(()=>{let r=r5(this.contentDOM,this.contentAttrs,n),s=r5(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(we.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Wh);let e=this.state.facet(we.cspNonce);uo.mount(this.root,this.styleModules.concat(pee).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return px(this,e,h5(this,e,n,i))}moveByGroup(e,n){return px(this,e,h5(this,e,n,i=>PJ(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return fe.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return EJ(this,e,n,i)}moveVertically(e,n,i){return px(this,e,AJ(this,e,n,i))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let i=D2(this,e,n);return i&&i.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),D2(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),a=s[Ks.find(s,e-r.from,-1,n)];return Bg(i,a.dir==Rt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(cI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>yee)return tI(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||eI(s.isolates,i=o5(this,e))))return s.order;i||(i=o5(this,e));let r=nJ(e.text,n,i);return this.bidiCache.push(new Wg(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{H6(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return dm.of(new Lc(typeof e=="number"?fe.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return dm.of(new Lc(fe.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return _n.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return _n.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=uo.newName(),r=[ym.of(i),Wh.of(I2(`.${i}`,e))];return n&&n.dark&&r.push(q2.of(!0)),r}static baseTheme(e){return sa.lowest(Wh.of(I2("."+B2,e,MI)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&dn.get(i)||dn.get(e);return((n=r?.root)===null||n===void 0?void 0:n.view)||null}}we.styleModule=Wh;we.inputHandler=oI;we.clipboardInputFilter=IT;we.clipboardOutputFilter=XT;we.scrollHandler=hI;we.focusChangeEffect=lI;we.perLineTextDirection=cI;we.exceptionSink=aI;we.updateListener=M2;we.editable=Gs;we.mouseSelectionStyle=sI;we.dragMovesSelection=rI;we.clickAddsSelectionRange=iI;we.decorations=XO;we.blockWrappers=pI;we.outerDecorations=VT;we.atomicRanges=fd;we.bidiIsolatedRanges=mI;we.scrollMargins=gI;we.darkTheme=q2;we.cspNonce=Qe.define({combine:t=>t.length?t[0]:""});we.contentAttributes=ZT;we.editorAttributes=dI;we.lineWrapping=we.contentAttributes.of({class:"cm-lineWrapping"});we.announce=Ke.define();const yee=4096,E5={};class Wg{constructor(e,n,i,r,s,a){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=a}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Rt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==r&&!n.touchesRange(a.from,a.to)&&i.push(new Wg(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function P5(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],a=typeof s=="function"?s(t):s;a&&LT(a,n)}return n}const xee=Te.mac?"mac":Te.windows?"win":Te.linux?"linux":"key";function bee(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,a,o;for(let c=0;c<n.length-1;++c){const u=n[c];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),o&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function xm(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const _ee=sa.default(we.domEventHandlers({keydown(t,e){return zI(jI(e.state),t,e,"editor")}})),Jc=Qe.define({enables:_ee}),A5=new WeakMap;function jI(t){let e=t.facet(Jc),n=A5.get(e);return n||A5.set(e,n=kee(e.reduce((i,r)=>i.concat(r),[]))),n}function See(t,e,n){return zI(jI(t.state),e,t,n)}let Ja=null;const wee=4e3;function kee(t,e=xee){let n=Object.create(null),i=Object.create(null),r=(a,o)=>{let c=i[a];if(c==null)i[a]=o;else if(c!=o)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,o,c,u,f)=>{var d,m;let v=n[a]||(n[a]=Object.create(null)),y=o.split(/ (?!$)/).map(_=>bee(_,e));for(let _=1;_<y.length;_++){let Q=y.slice(0,_).join(" ");r(Q,!0),v[Q]||(v[Q]={preventDefault:!0,stopPropagation:!1,run:[k=>{let T=Ja={view:k,prefix:Q,scope:a};return setTimeout(()=>{Ja==T&&(Ja=null)},wee),!0}]})}let x=y.join(" ");r(x,!1);let S=v[x]||(v[x]={preventDefault:!1,stopPropagation:!1,run:((m=(d=v._any)===null||d===void 0?void 0:d.run)===null||m===void 0?void 0:m.slice())||[]});c&&S.run.push(c),u&&(S.preventDefault=!0),f&&(S.stopPropagation=!0)};for(let a of t){let o=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of o){let f=n[u]||(n[u]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=a;for(let m in f)f[m].run.push(v=>d(v,X2))}let c=a[e]||a.key;if(c)for(let u of o)s(u,c,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(u,"Shift-"+c,a.shift,a.preventDefault,a.stopPropagation)}return n}let X2=null;function zI(t,e,n,i){X2=e;let r=LK(e),s=_i(r,0),a=ss(s)==r.length&&r!=" ",o="",c=!1,u=!1,f=!1;Ja&&Ja.view==n&&Ja.scope==i&&(o=Ja.prefix+" ",kI.indexOf(e.keyCode)<0&&(u=!0,Ja=null));let d=new Set,m=S=>{if(S){for(let _ of S.run)if(!d.has(_)&&(d.add(_),_(n)))return S.stopPropagation&&(f=!0),!0;S.preventDefault&&(S.stopPropagation&&(f=!0),u=!0)}return!1},v=t[i],y,x;return v&&(m(v[o+xm(r,e,!a)])?c=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Te.windows&&e.ctrlKey&&e.altKey)&&!(Te.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(y=ho[e.keyCode])&&y!=r?(m(v[o+xm(y,e,!0)])||e.shiftKey&&(x=Cf[e.keyCode])!=r&&x!=y&&m(v[o+xm(x,e,!1)]))&&(c=!0):a&&e.shiftKey&&m(v[o+xm(r,e,!0)])&&(c=!0),!c&&m(v._any)&&(c=!0)),u&&(c=!0),c&&f&&e.stopPropagation(),X2=null,c}class dd{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=DI(e);return[new dd(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Cee(e,n,i)}}function DI(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Rt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function R5(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),a=(r.top+r.bottom)/2,o=t.posAtCoords({x:s.left+1,y:a}),c=t.posAtCoords({x:s.right-1,y:a});return o==null||c==null?i:{from:Math.max(i.from,Math.min(o,c)),to:Math.min(i.to,Math.max(o,c))}}function Cee(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Rt.LTR,a=t.contentDOM,o=a.getBoundingClientRect(),c=DI(t),u=a.querySelector(".cm-line"),f=u&&window.getComputedStyle(u),d=o.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),m=o.right-(f?parseInt(f.paddingRight):0),v=z2(t,i,1),y=z2(t,r,-1),x=v.type==In.Text?v:null,S=y.type==In.Text?y:null;if(x&&(t.lineWrapping||v.widgetLineBreaks)&&(x=R5(t,i,1,x)),S&&(t.lineWrapping||y.widgetLineBreaks)&&(S=R5(t,r,-1,S)),x&&S&&x.from==S.from&&x.to==S.to)return Q(k(n.from,n.to,x));{let E=x?k(n.from,null,x):T(v,!1),C=S?k(null,n.to,S):T(y,!0),P=[];return(x||v).to<(S||y).from-(x&&S?1:0)||v.widgetLineBreaks>1&&E.bottom+t.defaultLineHeight/2<C.top?P.push(_(d,E.bottom,m,C.top)):E.bottom<C.top&&t.elementAtHeight((E.bottom+C.top)/2).type==In.Text&&(E.bottom=C.top=(E.bottom+C.top)/2),Q(E).concat(P).concat(Q(C))}function _(E,C,P,L){return new dd(e,E-c.left,C-c.top,P-E,L-C)}function Q({top:E,bottom:C,horizontal:P}){let L=[];for(let B=0;B<P.length;B+=2)L.push(_(P[B],E,P[B+1],C));return L}function k(E,C,P){let L=1e9,B=-1e9,N=[];function M(j,D,R,W,U){let G=t.coordsAtPos(j,j==P.to?-2:2),q=t.coordsAtPos(R,R==P.from?2:-2);!G||!q||(L=Math.min(G.top,q.top,L),B=Math.max(G.bottom,q.bottom,B),U==Rt.LTR?N.push(s&&D?d:G.left,s&&W?m:q.right):N.push(!s&&W?d:q.left,!s&&D?m:G.right))}let $=E??P.from,I=C??P.to;for(let j of t.visibleRanges)if(j.to>$&&j.from<I)for(let D=Math.max(j.from,$),R=Math.min(j.to,I);;){let W=t.state.doc.lineAt(D);for(let U of t.bidiSpans(W)){let G=U.from+W.from,q=U.to+W.from;if(G>=R)break;q>D&&M(Math.max(G,D),E==null&&G<=$,Math.min(q,R),C==null&&q>=I,U.dir)}if(D=W.to+1,D>=R)break}return N.length==0&&M($,E==null,I,C==null,t.textDirection),{top:L,bottom:B,horizontal:N}}function T(E,C){let P=o.top+(C?E.top:E.bottom);return{top:P,bottom:P,horizontal:[]}}}function Tee(t,e){return t.constructor==e.constructor&&t.eq(e)}class Qee{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(cg)!=e.state.facet(cg)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(cg);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Tee(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e,Te.safari&&Te.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const cg=Qe.define();function LI(t){return[_n.define(e=>new Qee(e,t)),cg.of(t)]}const Pf=Qe.define({combine(t){return oa(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Eee(t={}){return[Pf.of(t),Pee,Aee,Ree,uI.of(!0)]}function qI(t){return t.startState.facet(Pf)!=t.state.facet(Pf)}const Pee=LI({above:!0,markers(t){let{state:e}=t,n=e.facet(Pf),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=r.empty?r:fe.cursor(r.head,r.head>r.anchor?-1:1);for(let c of dd.forRange(t,a,o))i.push(c)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=qI(t);return n&&$5(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){$5(e.state,t)},class:"cm-cursorLayer"});function $5(t,e){e.style.animationDuration=t.facet(Pf).cursorBlinkRate+"ms"}const Aee=LI({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:dd.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||qI(t)},class:"cm-selectionLayer"}),Ree=sa.highest(we.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),BI=Ke.define({map(t,e){return t==null?null:e.mapPos(t)}}),Yh=ei.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(BI)?i.value:n,t)}}),$ee=_n.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Yh);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Yh)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Yh),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Yh)!=t&&this.view.dispatch({effects:BI.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Nee(){return[Yh,$ee]}function N5(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),a=n,o;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)r(a+o.index,o)}function Mee(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class jee{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(o,c,u,f)=>r(f,u,u+o[0].length,o,c);else if(typeof i=="function")this.addMatch=(o,c,u,f)=>{let d=i(o,c,u);d&&f(u,u+o[0].length,d)};else if(i)this.addMatch=(o,c,u,f)=>f(u,u+o[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let n=new co,i=n.add.bind(n);for(let{from:r,to:s}of Mee(e,this.maxLength))N5(e.state.doc,this.regexp,r,s,(a,o)=>this.addMatch(o,e,a,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,a,o,c)=>{c>=e.view.viewport.from&&o<=e.view.viewport.to&&(i=Math.min(o,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let a=Math.max(s.from,i),o=Math.min(s.to,r);if(o>=a){let c=e.state.doc.lineAt(a),u=c.to<o?e.state.doc.lineAt(o):c,f=Math.max(s.from,c.from),d=Math.min(s.to,u.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){f=a;break}for(;o<u.to;o++)if(this.boundary.test(u.text[o-u.from])){d=o;break}}let m=[],v,y=(x,S,_)=>m.push(_.range(x,S));if(c==u)for(this.regexp.lastIndex=f-c.from;(v=this.regexp.exec(c.text))&&v.index<d-c.from;)this.addMatch(v,e,v.index+c.from,y);else N5(e.state.doc,this.regexp,f,d,(x,S)=>this.addMatch(S,e,x,y));n=n.update({filterFrom:f,filterTo:d,filter:(x,S)=>x<f||S>d,add:m})}}return n}}const Z2=/x/.unicode!=null?"gu":"g",zee=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Z2),Dee={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ox=null;function Lee(){var t;if(Ox==null&&typeof document<"u"&&document.body){let e=document.body.style;Ox=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Ox||!1}const ug=Qe.define({combine(t){let e=oa(t,{render:null,specialChars:zee,addSpecialChars:null});return(e.replaceTabs=!Lee())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Z2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Z2)),e}});function qee(t={}){return[ug.of(t),Bee()]}let M5=null;function Bee(){return M5||(M5=_n.fromClass(class{constructor(t){this.view=t,this.decorations=Be.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(ug)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new jee({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=_i(e[0],0);if(s==9){let a=r.lineAt(i),o=n.state.tabSize,c=jr(a.text,o,i-a.from);return Be.replace({widget:new Vee((o-c%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Be.replace({widget:new Zee(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(ug);t.startState.facet(ug)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Iee="";function Xee(t){return t>=32?Iee:t==10?"":String.fromCharCode(9216+t)}class Zee extends la{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Xee(this.code),i=e.state.phrase("Control character")+" "+(Dee[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Vee extends la{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Wee(){return Hee}const Uee=Be.line({class:"cm-activeLine"}),Hee=_n.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Uee.range(r.from)),e=r.from)}return Be.set(n)}},{decorations:t=>t.decorations}),V2=2e3;function Yee(t,e,n){let i=Math.min(e.line,n.line),r=Math.max(e.line,n.line),s=[];if(e.off>V2||n.off>V2||e.col<0||n.col<0){let a=Math.min(e.off,n.off),o=Math.max(e.off,n.off);for(let c=i;c<=r;c++){let u=t.doc.line(c);u.length<=o&&s.push(fe.range(u.from+a,u.to+o))}}else{let a=Math.min(e.col,n.col),o=Math.max(e.col,n.col);for(let c=i;c<=r;c++){let u=t.doc.line(c),f=w2(u.text,a,t.tabSize,!0);if(f<0)s.push(fe.cursor(u.to));else{let d=w2(u.text,o,t.tabSize);s.push(fe.range(u.from+f,u.from+d))}}}return s}function Fee(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function j5(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),r=n-i.from,s=r>V2?-1:r==i.length?Fee(t,e.clientX):jr(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:s,off:r}}function Gee(t,e){let n=j5(t,e),i=t.state.selection;return n?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(n.line).from),a=r.state.doc.lineAt(s);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},i=i.map(r.changes)}},get(r,s,a){let o=j5(t,r);if(!o)return i;let c=Yee(t.state,n,o);return c.length?a?fe.create(c.concat(i.ranges)):fe.create(c):i}}:null}function Kee(t){let e=(n=>n.altKey&&n.button==0);return we.mouseSelectionStyle.of((n,i)=>e(i)?Gee(n,i):null)}const Jee={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},ete={style:"cursor: crosshair"};function tte(t={}){let[e,n]=Jee[t.key||"Alt"],i=_n.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||n(r))},keyup(r){(r.keyCode==e||!n(r))&&this.set(!1)},mousemove(r){this.set(n(r))}}});return[i,we.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?ete:null})]}const bm="-10000px";class nte{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=i(a,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let a=[],o=n?[]:null;for(let c=0;c<s.length;c++){let u=s[c],f=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let m=this.tooltips[d];m&&m.create==u.create&&(f=d)}if(f<0)a[c]=this.createTooltipView(u,c?a[c-1]:null),o&&(o[c]=!!u.above);else{let d=a[c]=this.tooltipViews[f];o&&(o[c]=n[f]),d.update&&d.update(e)}}}for(let c of this.tooltipViews)a.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return n&&(o.forEach((c,u)=>n[u]=c),n.length=o.length),this.input=r,this.tooltips=s,this.tooltipViews=a,!0}}function ite(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const vx=Qe.define({combine:t=>{var e,n,i;return{position:Te.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||ite}}}),z5=new WeakMap,II=_n.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(vx);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new nte(t,XI,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(vx);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=bm,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Te.safari){let a=s.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}else n=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=WT(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(vx).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,a=[];for(let o=0;o<this.manager.tooltips.length;o++){let c=this.manager.tooltips[o],u=this.manager.tooltipViews[o],{dom:f}=u,d=t.pos[o],m=t.size[o];if(!d||c.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){f.style.top=bm;continue}let v=c.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,y=v?7:0,x=m.right-m.left,S=(e=z5.get(u))!==null&&e!==void 0?e:m.bottom-m.top,_=u.offset||ste,Q=this.view.textDirection==Rt.LTR,k=m.width>i.right-i.left?Q?i.left:i.right-m.width:Q?Math.max(i.left,Math.min(d.left-(v?14:0)+_.x,i.right-x)):Math.min(Math.max(i.left,d.left-x+(v?14:0)-_.x),i.right-x),T=this.above[o];!c.strictSide&&(T?d.top-S-y-_.y<i.top:d.bottom+S+y+_.y>i.bottom)&&T==i.bottom-d.bottom>d.top-i.top&&(T=this.above[o]=!T);let E=(T?d.top-i.top:i.bottom-d.bottom)-y;if(E<S&&u.resize!==!1){if(E<this.view.defaultLineHeight){f.style.top=bm;continue}z5.set(u,S),f.style.height=(S=E)/s+"px"}else f.style.height&&(f.style.height="");let C=T?d.top-S-y-_.y:d.bottom+y+_.y,P=k+x;if(u.overlap!==!0)for(let L of a)L.left<P&&L.right>k&&L.top<C+S&&L.bottom>C&&(C=T?L.top-S-2-y:L.bottom+y+2);if(this.position=="absolute"?(f.style.top=(C-t.parent.top)/s+"px",D5(f,(k-t.parent.left)/r)):(f.style.top=C/s+"px",D5(f,k/r)),v){let L=d.left+(Q?_.x:-_.x)-(k+14-7);v.style.left=L/r+"px"}u.overlap!==!0&&a.push({left:k,top:C,right:P,bottom:C+S}),f.classList.toggle("cm-tooltip-above",T),f.classList.toggle("cm-tooltip-below",!T),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=bm}},{eventObservers:{scroll(){this.maybeMeasure()}}});function D5(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const rte=we.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ste={x:0,y:0},XI=Qe.define({enables:[II,rte]});function ZI(t,e){let n=t.plugin(II);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const L5=Qe.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Ug(t,e){let n=t.plugin(VI),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const VI=_n.fromClass(class{constructor(t){this.input=t.state.facet(Hg),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(L5);this.top=new _m(t,!0,e.topContainer),this.bottom=new _m(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(L5);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new _m(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new _m(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Hg);if(n!=this.input){let i=n.filter(c=>c),r=[],s=[],a=[],o=[];for(let c of i){let u=this.specs.indexOf(c),f;u<0?(f=c(t.view),o.push(f)):(f=this.panels[u],f.update&&f.update(t)),r.push(f),(f.top?s:a).push(f)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(a);for(let c of o)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>we.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class _m{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=q5(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=q5(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function q5(t){let e=t.nextSibling;return t.remove(),e}const Hg=Qe.define({enables:VI});class ia extends lo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ia.prototype.elementClass="";ia.prototype.toDOM=void 0;ia.prototype.mapMode=Gn.TrackBefore;ia.prototype.startSide=ia.prototype.endSide=-1;ia.prototype.point=!0;const hg=Qe.define(),ate=Qe.define(),ote={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>nt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ff=Qe.define();function lte(t){return[WI(),ff.of({...ote,...t})]}const B5=Qe.define({combine:t=>t.some(e=>e)});function WI(t){return[cte]}const cte=_n.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ff).map(e=>new X5(t,e)),this.fixed=!t.state.facet(B5);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(B5)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=nt.iter(this.view.state.facet(hg),this.view.viewport.from),i=[],r=this.gutters.map(s=>new ute(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let a=!0;for(let o of s.type)if(o.type==In.Text&&a){W2(n,i,o.from);for(let c of r)c.line(this.view,o,i);a=!1}else if(o.widget)for(let c of r)c.widget(this.view,o)}else if(s.type==In.Text){W2(n,i,s.from);for(let a of r)a.line(this.view,s,i)}else if(s.widget)for(let a of r)a.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ff),n=t.state.facet(ff),i=t.docChanged||t.heightChanged||t.viewportChanged||!nt.eq(t.startState.facet(hg),t.state.facet(hg),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let a=e.indexOf(s);a<0?r.push(new X5(this.view,s)):(this.gutters[a].update(t),r.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>we.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Rt.LTR?{left:i,right:r}:{right:i,left:r}})});function I5(t){return Array.isArray(t)?t:[t]}function W2(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class ute{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=nt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,a=n.height/e.scaleY;if(this.i==r.elements.length){let o=new UI(e,a,s,i);r.elements.push(o),r.dom.appendChild(o.dom)}else r.elements[this.i].update(e,a,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];W2(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let a=this.gutter;r.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(ate)){let a=s(e,n.widget,n);a&&(r||(r=[])).push(a)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class X5{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let c=s.getBoundingClientRect();a=(c.top+c.bottom)/2}else a=r.clientY;let o=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[i](e,o,r)&&r.preventDefault()});this.markers=I5(n.markers(e)),n.initialSpacer&&(this.spacer=new UI(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=I5(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!nt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class UI{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),hte(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,a=0;;){let o=a,c=s<n.length?n[s++]:null,u=!1;if(c){let f=c.elementClass;f&&(i+=" "+f);for(let d=a;d<this.markers.length;d++)if(this.markers[d].compare(c)){o=d,u=!0;break}}else o=this.markers.length;for(;a<o;){let f=this.markers[a++];if(f.toDOM){f.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!c)break;c.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),u&&a++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function hte(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const fte=Qe.define(),dte=Qe.define(),Ac=Qe.define({combine(t){return oa(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],a=n[r];i[r]=s?(o,c,u)=>s(o,c,u)||a(o,c,u):a}return i}})}});class yx extends ia{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function xx(t,e){return t.state.facet(Ac).formatNumber(e,t.state)}const pte=ff.compute([Ac],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(fte)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new yx(xx(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(dte)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Ac)!=e.state.facet(Ac),initialSpacer(e){return new yx(xx(e,Z5(e.state.doc.lines)))},updateSpacer(e,n){let i=xx(n.view,Z5(n.view.state.doc.lines));return i==e.number?e:new yx(i)},domEventHandlers:t.facet(Ac).domEventHandlers,side:"before"}));function mte(t={}){return[Ac.of(t),WI(),pte]}function Z5(t){let e=9;for(;e<t;)e=e*10+9;return e}const gte=new class extends ia{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ote=hg.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(gte.range(r)))}return nt.of(e)});function vte(){return Ote}const HI=1024;let yte=0;class pr{constructor(e,n){this.from=e,this.to=n}}class Xe{constructor(e={}){this.id=yte++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Sn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Xe.closedBy=new Xe({deserialize:t=>t.split(" ")});Xe.openedBy=new Xe({deserialize:t=>t.split(" ")});Xe.group=new Xe({deserialize:t=>t.split(" ")});Xe.isolate=new Xe({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Xe.contextHash=new Xe({perNode:!0});Xe.lookAhead=new Xe({perNode:!0});Xe.mounted=new Xe({perNode:!0});class qc{constructor(e,n,i,r=!1){this.tree=e,this.overlay=n,this.parser=i,this.bracketed=r}static get(e){return e&&e.props&&e.props[Xe.mounted.id]}}const xte=Object.create(null);class Sn{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):xte,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Sn(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Xe.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Xe.group),s=-1;s<(r?r.length:0);s++){let a=n[s<0?i.name:r[s]];if(a)return a}}}}Sn.none=new Sn("",Object.create(null),0,8);class pd{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let a=s(i);if(a){r||(r=Object.assign({},i.props));let o=a[1],c=a[0];c.combine&&c.id in r&&(o=c.combine(r[c.id],o)),r[c.id]=o}}n.push(r?new Sn(i.name,r,i.id,i.flags):i)}return new pd(n)}}const Sm=new WeakMap,V5=new WeakMap;var pt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(pt||(pt={}));class gt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let e=qc.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Yg(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Sm.get(this)||this.topNode,s=new Yg(r);return s.moveTo(e,n),Sm.set(this,s._tree),s}get topNode(){return new Jn(this,0,0,null)}resolve(e,n=0){let i=Af(Sm.get(this)||this.topNode,e,n,!1);return Sm.set(this,i),i}resolveInner(e,n=0){let i=Af(V5.get(this)||this.topNode,e,n,!0);return V5.set(this,i),i}resolveStack(e,n=0){return Ste(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,a=e.mode||0,o=(a&pt.IncludeAnonymous)>0;for(let c=this.cursor(a|pt.IncludeAnonymous);;){let u=!1;if(c.from<=s&&c.to>=r&&(!o&&c.type.isAnonymous||n(c)!==!1)){if(c.firstChild())continue;u=!0}for(;u&&i&&(o||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:KT(Sn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new gt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new gt(Sn.none,n,i,r)))}static build(e){return wte(e)}}gt.empty=new gt(Sn.none,[],[],0);class FT{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FT(this.buffer,this.index)}}class po{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Sn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,n,i,r,s){let{buffer:a}=this,o=-1;for(let c=e;c!=n&&!(YI(s,r,a[c+1],a[c+2])&&(o=c,i>0));c=a[c+3]);return o}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),a=0;for(let o=e,c=0;o<n;){s[c++]=r[o++],s[c++]=r[o++]-i;let u=s[c++]=r[o++]-i;s[c++]=r[o++]-e,a=Math.max(a,u)}return new po(s,a,this.set)}}function YI(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Af(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let a=!i&&t instanceof Jn&&t.index<0?null:t.parent;if(!a)return t;t=a}let s=i?0:pt.IgnoreOverlays;if(i)for(let a=t,o=a.parent;o;a=o,o=a.parent)a instanceof Jn&&a.index<0&&((r=o.enter(e,n,s))===null||r===void 0?void 0:r.from)!=a.from&&(t=o);for(;;){let a=t.enter(e,n,s);if(!a)return t;t=a}}class FI{cursor(e=0){return new Yg(this,e)}getChild(e,n=null,i=null){let r=W5(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return W5(this,e,n,i)}resolve(e,n=0){return Af(this,e,n,!1)}resolveInner(e,n=0){return Af(this,e,n,!0)}matchContext(e){return U2(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Jn extends FI{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){var a;for(let o=this;;){for(let{children:c,positions:u}=o._tree,f=n>0?c.length:-1;e!=f;e+=n){let d=c[e],m=u[e]+o.from;if(!(!(s&pt.EnterBracketed&&d instanceof gt&&((a=qc.get(d))===null||a===void 0?void 0:a.overlay)===null&&(m>=i||m+d.length<=i))&&!YI(r,i,m,m+d.length))){if(d instanceof po){if(s&pt.ExcludeBuffers)continue;let v=d.findChild(0,d.buffer.length,n,i-m,r);if(v>-1)return new os(new bte(o,d,e,m),null,v)}else if(s&pt.IncludeAnonymous||!d.type.isAnonymous||GT(d)){let v;if(!(s&pt.IgnoreMounts)&&(v=qc.get(d))&&!v.overlay)return new Jn(v.tree,m,e,o);let y=new Jn(d,m,e,o);return s&pt.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(n<0?d.children.length-1:0,n,i,r,s)}}}if(s&pt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,i=0){let r;if(!(i&pt.IgnoreOverlays)&&(r=qc.get(this._tree))&&r.overlay){let s=e-this.from,a=i&pt.EnterBracketed&&r.bracketed;for(let{from:o,to:c}of r.overlay)if((n>0||a?o<=s:o<s)&&(n<0||a?c>=s:c>s))return new Jn(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function W5(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let a=!1;!a;)if(a=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function U2(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class bte{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class os extends FI{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new os(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,i=0){if(i&pt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new os(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new os(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new os(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let a=i.buffer[this.index+1];e.push(i.slice(r,s,a)),n.push(0)}return new gt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function GI(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let a=t[s];(a.from>n.from||a.to<n.to)&&(n=a,e=s)}let i=n instanceof Jn&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new _te(r,n)}class _te{constructor(e,n){this.heads=e,this.node=n}get next(){return GI(this.heads)}}function Ste(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Jn?i:i.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(r||(r=[i])).push(a.resolve(e,n)),s=a}else{let a=qc.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let o=new Jn(a.tree,a.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Af(o,e,n,!1))}}return r?GI(r):i}class Yg{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~pt.EnterBracketed,e instanceof Jn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Jn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&pt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,a=e<0?-1:i._tree.children.length;s!=a;s+=e){let o=i._tree.children[s];if(this.mode&pt.IncludeAnonymous||o instanceof po||!o.type.isAnonymous||GT(o))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;n=a,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new os(this.buffer,n,this.stack[r]);return this.bufferNode=new os(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return U2(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return U2(this._tree,e,r);let a=i[n.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}function GT(t){return t.children.some(e=>e instanceof po||!e.type.isAnonymous||GT(e))}function wte(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=HI,reused:s=[],minRepeatType:a=i.types.length}=t,o=Array.isArray(n)?new FT(n,n.length):n,c=i.types,u=0,f=0;function d(E,C,P,L,B,N){let{id:M,start:$,end:I,size:j}=o,D=f,R=u;if(j<0)if(o.next(),j==-1){let V=s[M];P.push(V),L.push($-E);return}else if(j==-3){u=M;return}else if(j==-4){f=M;return}else throw new RangeError(`Unrecognized record size: ${j}`);let W=c[M],U,G,q=$-E;if(I-$<=r&&(G=S(o.pos-C,B))){let V=new Uint16Array(G.size-G.skip),F=o.pos-G.size,z=V.length;for(;o.pos>F;)z=_(G.start,V,z);U=new po(V,I-G.start,i),q=G.start-E}else{let V=o.pos-j;o.next();let F=[],z=[],H=M>=a?M:-1,K=0,ee=I;for(;o.pos>V;)H>=0&&o.id==H&&o.size>=0?(o.end<=ee-r&&(y(F,z,$,K,o.end,ee,H,D,R),K=F.length,ee=o.end),o.next()):N>2500?m($,V,F,z):d($,V,F,z,H,N+1);if(H>=0&&K>0&&K<F.length&&y(F,z,$,K,$,ee,H,D,R),F.reverse(),z.reverse(),H>-1&&K>0){let ie=v(W,R);U=KT(W,F,z,0,F.length,0,I-$,ie,ie)}else U=x(W,F,z,I-$,D-I,R)}P.push(U),L.push(q)}function m(E,C,P,L){let B=[],N=0,M=-1;for(;o.pos>C;){let{id:$,start:I,end:j,size:D}=o;if(D>4)o.next();else{if(M>-1&&I<M)break;M<0&&(M=j-r),B.push($,I,j),N++,o.next()}}if(N){let $=new Uint16Array(N*4),I=B[B.length-2];for(let j=B.length-3,D=0;j>=0;j-=3)$[D++]=B[j],$[D++]=B[j+1]-I,$[D++]=B[j+2]-I,$[D++]=D;P.push(new po($,B[2]-I,i)),L.push(I-E)}}function v(E,C){return(P,L,B)=>{let N=0,M=P.length-1,$,I;if(M>=0&&($=P[M])instanceof gt){if(!M&&$.type==E&&$.length==B)return $;(I=$.prop(Xe.lookAhead))&&(N=L[M]+$.length+I)}return x(E,P,L,B,N,C)}}function y(E,C,P,L,B,N,M,$,I){let j=[],D=[];for(;E.length>L;)j.push(E.pop()),D.push(C.pop()+P-B);E.push(x(i.types[M],j,D,N-B,$-N,I)),C.push(B-P)}function x(E,C,P,L,B,N,M){if(N){let $=[Xe.contextHash,N];M=M?[$].concat(M):[$]}if(B>25){let $=[Xe.lookAhead,B];M=M?[$].concat(M):[$]}return new gt(E,C,P,L,M)}function S(E,C){let P=o.fork(),L=0,B=0,N=0,M=P.end-r,$={size:0,start:0,skip:0};e:for(let I=P.pos-E;P.pos>I;){let j=P.size;if(P.id==C&&j>=0){$.size=L,$.start=B,$.skip=N,N+=4,L+=4,P.next();continue}let D=P.pos-j;if(j<0||D<I||P.start<M)break;let R=P.id>=a?4:0,W=P.start;for(P.next();P.pos>D;){if(P.size<0)if(P.size==-3||P.size==-4)R+=4;else break e;else P.id>=a&&(R+=4);P.next()}B=W,L+=j,N+=R}return(C<0||L==E)&&($.size=L,$.start=B,$.skip=N),$.size>4?$:void 0}function _(E,C,P){let{id:L,start:B,end:N,size:M}=o;if(o.next(),M>=0&&L<a){let $=P;if(M>4){let I=o.pos-(M-4);for(;o.pos>I;)P=_(E,C,P)}C[--P]=$,C[--P]=N-E,C[--P]=B-E,C[--P]=L}else M==-3?u=L:M==-4&&(f=L);return P}let Q=[],k=[];for(;o.pos>0;)d(t.start||0,t.bufferStart||0,Q,k,-1,0);let T=(e=t.length)!==null&&e!==void 0?e:Q.length?k[0]+Q[0].length:0;return new gt(c[t.topID],Q.reverse(),k.reverse(),T)}const U5=new WeakMap;function fg(t,e){if(!t.isAnonymous||e instanceof po||e.type!=t)return 1;let n=U5.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof gt)){n=1;break}n+=fg(t,i)}U5.set(e,n)}return n}function KT(t,e,n,i,r,s,a,o,c){let u=0;for(let y=i;y<r;y++)u+=fg(t,e[y]);let f=Math.ceil(u*1.5/8),d=[],m=[];function v(y,x,S,_,Q){for(let k=S;k<_;){let T=k,E=x[k],C=fg(t,y[k]);for(k++;k<_;k++){let P=fg(t,y[k]);if(C+P>=f)break;C+=P}if(k==T+1){if(C>f){let P=y[T];v(P.children,P.positions,0,P.children.length,x[T]+Q);continue}d.push(y[T])}else{let P=x[k-1]+y[k-1].length-E;d.push(KT(t,y,x,T,k,E,P,null,c))}m.push(E+Q-s)}}return v(e,n,i,r,0),(o||c)(d,m,a)}class JT{constructor(){this.map=new WeakMap}setBuffer(e,n,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(n,i)}getBuffer(e,n){let i=this.map.get(e);return i&&i.get(n)}set(e,n){e instanceof os?this.setBuffer(e.context.buffer,e.index,n):e instanceof Jn&&this.map.set(e.tree,n)}get(e){return e instanceof os?this.getBuffer(e.context.buffer,e.index):e instanceof Jn?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ta{constructor(e,n,i,r,s=!1,a=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new ta(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,a=e.length?e[0]:null;for(let o=0,c=0,u=0;;o++){let f=o<n.length?n[o]:null,d=f?f.fromA:1e9;if(d-c>=i)for(;a&&a.from<d;){let m=a;if(c>=m.from||d<=m.to||u){let v=Math.max(m.from,c)-u,y=Math.min(m.to,d)-u;m=v>=y?null:new ta(v,y,m.tree,m.offset+u,o>0,!!f)}if(m&&r.push(m),a.to>d)break;a=s<e.length?e[s++]:null}if(!f)break;c=f.toA,u=f.toA-f.toB}return r}}class eQ{startParse(e,n,i){return typeof e=="string"&&(e=new kte(e)),i=i?i.length?i.map(r=>new pr(r.from,r.to)):[new pr(0,0)]:[new pr(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class kte{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function KI(t){return(e,n,i,r)=>new Tte(e,t,n,i,r)}class H5{constructor(e,n,i,r,s,a){this.parser=e,this.parse=n,this.overlay=i,this.bracketed=r,this.target=s,this.from=a}}function Y5(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class Cte{constructor(e,n,i,r,s,a,o,c){this.parser=e,this.predicate=n,this.mounts=i,this.index=r,this.start=s,this.bracketed=a,this.target=o,this.prev=c,this.depth=0,this.ranges=[]}}const H2=new Xe({perNode:!0});class Tte{constructor(e,n,i,r,s){this.nest=n,this.input=i,this.fragments=r,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let r of this.inner)r.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new gt(i.type,i.children,i.positions,i.length,i.propValues.concat([[H2,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[Xe.mounted.id]=new qc(n,e.overlay,e.parser,e.bracketed),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new Pte(this.fragments),n=null,i=null,r=new Yg(new Jn(this.baseTree,this.ranges[0].from,0,null),pt.IncludeAnonymous|pt.IgnoreMounts);e:for(let s,a;;){let o=!0,c;if(this.stoppedAt!=null&&r.from>=this.stoppedAt)o=!1;else if(e.hasNode(r)){if(n){let u=n.mounts.find(f=>f.frag.from<=r.from&&f.frag.to>=r.to&&f.mount.overlay);if(u)for(let f of u.mount.overlay){let d=f.from+u.pos,m=f.to+u.pos;d>=r.from&&m<=r.to&&!n.ranges.some(v=>v.from<m&&v.to>d)&&n.ranges.push({from:d,to:m})}}o=!1}else if(i&&(a=Qte(i.ranges,r.from,r.to)))o=a!=2;else if(!r.type.isAnonymous&&(s=this.nest(r,this.input))&&(r.from<r.to||!s.overlay)){r.tree||(Ete(r),n&&n.depth++,i&&i.depth++);let u=e.findMounts(r.from,s.parser);if(typeof s.overlay=="function")n=new Cte(s.parser,s.overlay,u,this.inner.length,r.from,!!s.bracketed,r.tree,n);else{let f=K5(this.ranges,s.overlay||(r.from<r.to?[new pr(r.from,r.to)]:[]));f.length&&Y5(f),(f.length||!s.overlay)&&this.inner.push(new H5(s.parser,f.length?s.parser.startParse(this.input,J5(u,f),f):s.parser.startParse(""),s.overlay?s.overlay.map(d=>new pr(d.from-r.from,d.to-r.from)):null,!!s.bracketed,r.tree,f.length?f[0].from:r.from)),s.overlay?f.length&&(i={ranges:f,depth:0,prev:i}):o=!1}}else if(n&&(c=n.predicate(r))&&(c===!0&&(c=new pr(r.from,r.to)),c.from<c.to)){let u=n.ranges.length-1;u>=0&&n.ranges[u].to==c.from?n.ranges[u]={from:n.ranges[u].from,to:c.to}:n.ranges.push(c)}if(o&&r.firstChild())n&&n.depth++,i&&i.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(n&&!--n.depth){let u=K5(this.ranges,n.ranges);u.length&&(Y5(u),this.inner.splice(n.index,0,new H5(n.parser,n.parser.startParse(this.input,J5(n.mounts,u),u),n.ranges.map(f=>new pr(f.from-n.start,f.to-n.start)),n.bracketed,n.target,u[0].from))),n=n.prev}i&&!--i.depth&&(i=i.prev)}}}}function Qte(t,e,n){for(let i of t){if(i.from>=n)break;if(i.to>e)return i.from<=e&&i.to>=n?2:1}return 0}function F5(t,e,n,i,r,s){if(e<n){let a=t.buffer[e+1];i.push(t.slice(e,n,a)),r.push(a-s)}}function Ete(t){let{node:e}=t,n=[],i=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let r=t.tree,s=r.children.indexOf(i),a=r.children[s],o=a.buffer,c=[s];function u(f,d,m,v,y,x){let S=n[x],_=[],Q=[];F5(a,f,S,_,Q,v);let k=o[S+1],T=o[S+2];c.push(_.length);let E=x?u(S+4,o[S+3],a.set.types[o[S]],k,T-k,x-1):e.toTree();return _.push(E),Q.push(k-v),F5(a,o[S+3],d,_,Q,v),new gt(m,_,Q,y)}r.children[s]=u(0,o.length,Sn.none,0,a.length,n.length-1);for(let f of c){let d=t.tree.children[f],m=t.tree.positions[f];t.yield(new Jn(d,m+t.from,f,t._tree))}}class G5{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(pt.IncludeAnonymous|pt.IgnoreMounts)}moveTo(e){let{cursor:n}=this,i=e-this.offset;for(;!this.done&&n.from<i;)n.to>=e&&n.enter(i,1,pt.IgnoreOverlays|pt.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof gt)n=n.children[0];else break}return!1}}let Pte=class{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(n=i.tree.prop(H2))!==null&&n!==void 0?n:i.to,this.inner=new G5(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(H2))!==null&&e!==void 0?e:n.to,this.inner=new G5(n.tree,-n.offset)}}findMounts(e,n){var i;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let a=(i=s.tree)===null||i===void 0?void 0:i.prop(Xe.mounted);if(a&&a.parser==n)for(let o=this.fragI;o<this.fragments.length;o++){let c=this.fragments[o];if(c.from>=s.to)break;c.tree==this.curFrag.tree&&r.push({frag:c,pos:s.from-c.offset,mount:a})}}}return r}};function K5(t,e){let n=null,i=e;for(let r=1,s=0;r<t.length;r++){let a=t[r-1].to,o=t[r].from;for(;s<i.length;s++){let c=i[s];if(c.from>=o)break;c.to<=a||(n||(i=n=e.slice()),c.from<a?(n[s]=new pr(c.from,a),c.to>o&&n.splice(s+1,0,new pr(o,c.to))):c.to>o?n[s--]=new pr(o,c.to):n.splice(s--,1))}}return i}function Ate(t,e,n,i){let r=0,s=0,a=!1,o=!1,c=-1e9,u=[];for(;;){let f=r==t.length?1e9:a?t[r].to:t[r].from,d=s==e.length?1e9:o?e[s].to:e[s].from;if(a!=o){let m=Math.max(c,n),v=Math.min(f,d,i);m<v&&u.push(new pr(m,v))}if(c=Math.min(f,d),c==1e9)break;f==c&&(a?(a=!1,r++):a=!0),d==c&&(o?(o=!1,s++):o=!0)}return u}function J5(t,e){let n=[];for(let{pos:i,mount:r,frag:s}of t){let a=i+(r.overlay?r.overlay[0].from:0),o=a+r.tree.length,c=Math.max(s.from,a),u=Math.min(s.to,o);if(r.overlay){let f=r.overlay.map(m=>new pr(m.from+i,m.to+i)),d=Ate(e,f,c,u);for(let m=0,v=c;;m++){let y=m==d.length,x=y?u:d[m].from;if(x>v&&n.push(new ta(v,x,r.tree,-a,s.from>=v||s.openStart,s.to<=x||s.openEnd)),y)break;v=d[m].to}}else n.push(new ta(c,u,r.tree,-a,s.from>=a||s.openStart,s.to<=o||s.openEnd))}return n}let Rte=0;class Yi{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Rte++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Yi&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let r=new Yi(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Fg(e);return i=>i.modified.indexOf(n)>-1?i:Fg.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let $te=0;class Fg{constructor(e){this.name=e,this.instances=[],this.id=$te++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(o=>o.base==e&&Nte(n,o.modified));if(i)return i;let r=[],s=new Yi(e.name,r,e,n);for(let o of n)o.instances.push(s);let a=Mte(n);for(let o of e.set)if(!o.modified.length)for(let c of a)r.push(Fg.get(o,c));return s}}function Nte(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Mte(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function yo(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],a=2,o=r;for(let d=0;;){if(o=="..."&&d>0&&d+3==r.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!m)throw new RangeError("Invalid path: "+r);if(s.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),d+=m[0].length,d==r.length)break;let v=r[d++];if(d==r.length&&v=="!"){a=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);o=r.slice(d)}let c=s.length-1,u=s[c];if(!u)throw new RangeError("Invalid path: "+r);let f=new Rf(i,a,c>0?s.slice(0,c):null);e[u]=f.sort(e[u])}}return JI.add(e)}const JI=new Xe({combine(t,e){let n,i,r;for(;t||e;){if(!t||e&&t.depth>=e.depth?(r=e,e=e.next):(r=t,t=t.next),n&&n.mode==r.mode&&!r.context&&!n.context)continue;let s=new Rf(r.tags,r.mode,r.context);n?n.next=s:i=s,n=s}return i}});class Rf{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rf.empty=new Rf([],2,null);function eX(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let a of s.tag)n[a.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let a=r;for(let o of s)for(let c of o.set){let u=n[c.id];if(u){a=a?a+" "+u:u;break}}return a},scope:i}}function jte(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function zte(t,e,n,i=0,r=t.length){let s=new Dte(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Dte{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:a,from:o,to:c}=e;if(o>=i||c<=n)return;a.isTop&&(s=this.highlighters.filter(v=>!v.scope||v.scope(a)));let u=r,f=Lte(e)||Rf.empty,d=jte(s,f.tags);if(d&&(u&&(u+=" "),u+=d,f.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,o),u),f.opaque)return;let m=e.tree&&e.tree.prop(Xe.mounted);if(m&&m.overlay){let v=e.node.enter(m.overlay[0].from+o,1),y=this.highlighters.filter(S=>!S.scope||S.scope(m.tree.type)),x=e.firstChild();for(let S=0,_=o;;S++){let Q=S<m.overlay.length?m.overlay[S]:null,k=Q?Q.from+o:c,T=Math.max(n,_),E=Math.min(i,k);if(T<E&&x)for(;e.from<E&&(this.highlightRange(e,T,E,r,s),this.startSpan(Math.min(E,e.to),u),!(e.to>=k||!e.nextSibling())););if(!Q||k>i)break;_=Q.to+o,_>n&&(this.highlightRange(v.cursor(),Math.max(n,Q.from+o),Math.min(i,_),"",y),this.startSpan(Math.min(i,_),u))}x&&e.parent()}else if(e.firstChild()){m&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function Lte(t){let e=t.type.prop(JI);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Se=Yi.define,wm=Se(),Fa=Se(),eN=Se(Fa),tN=Se(Fa),Ga=Se(),km=Se(Ga),bx=Se(Ga),es=Se(),Wo=Se(es),Fr=Se(),Gr=Se(),Y2=Se(),Th=Se(Y2),Cm=Se(),Y={comment:wm,lineComment:Se(wm),blockComment:Se(wm),docComment:Se(wm),name:Fa,variableName:Se(Fa),typeName:eN,tagName:Se(eN),propertyName:tN,attributeName:Se(tN),className:Se(Fa),labelName:Se(Fa),namespace:Se(Fa),macroName:Se(Fa),literal:Ga,string:km,docString:Se(km),character:Se(km),attributeValue:Se(km),number:bx,integer:Se(bx),float:Se(bx),bool:Se(Ga),regexp:Se(Ga),escape:Se(Ga),color:Se(Ga),url:Se(Ga),keyword:Fr,self:Se(Fr),null:Se(Fr),atom:Se(Fr),unit:Se(Fr),modifier:Se(Fr),operatorKeyword:Se(Fr),controlKeyword:Se(Fr),definitionKeyword:Se(Fr),moduleKeyword:Se(Fr),operator:Gr,derefOperator:Se(Gr),arithmeticOperator:Se(Gr),logicOperator:Se(Gr),bitwiseOperator:Se(Gr),compareOperator:Se(Gr),updateOperator:Se(Gr),definitionOperator:Se(Gr),typeOperator:Se(Gr),controlOperator:Se(Gr),punctuation:Y2,separator:Se(Y2),bracket:Th,angleBracket:Se(Th),squareBracket:Se(Th),paren:Se(Th),brace:Se(Th),content:es,heading:Wo,heading1:Se(Wo),heading2:Se(Wo),heading3:Se(Wo),heading4:Se(Wo),heading5:Se(Wo),heading6:Se(Wo),contentSeparator:Se(es),list:Se(es),quote:Se(es),emphasis:Se(es),strong:Se(es),link:Se(es),monospace:Se(es),strikethrough:Se(es),inserted:Se(),deleted:Se(),changed:Se(),invalid:Se(),meta:Cm,documentMeta:Se(Cm),annotation:Se(Cm),processingInstruction:Se(Cm),definition:Yi.defineModifier("definition"),constant:Yi.defineModifier("constant"),function:Yi.defineModifier("function"),standard:Yi.defineModifier("standard"),local:Yi.defineModifier("local"),special:Yi.defineModifier("special")};for(let t in Y){let e=Y[t];e instanceof Yi&&(e.name=t)}eX([{tag:Y.link,class:"tok-link"},{tag:Y.heading,class:"tok-heading"},{tag:Y.emphasis,class:"tok-emphasis"},{tag:Y.strong,class:"tok-strong"},{tag:Y.keyword,class:"tok-keyword"},{tag:Y.atom,class:"tok-atom"},{tag:Y.bool,class:"tok-bool"},{tag:Y.url,class:"tok-url"},{tag:Y.labelName,class:"tok-labelName"},{tag:Y.inserted,class:"tok-inserted"},{tag:Y.deleted,class:"tok-deleted"},{tag:Y.literal,class:"tok-literal"},{tag:Y.string,class:"tok-string"},{tag:Y.number,class:"tok-number"},{tag:[Y.regexp,Y.escape,Y.special(Y.string)],class:"tok-string2"},{tag:Y.variableName,class:"tok-variableName"},{tag:Y.local(Y.variableName),class:"tok-variableName tok-local"},{tag:Y.definition(Y.variableName),class:"tok-variableName tok-definition"},{tag:Y.special(Y.variableName),class:"tok-variableName2"},{tag:Y.definition(Y.propertyName),class:"tok-propertyName tok-definition"},{tag:Y.typeName,class:"tok-typeName"},{tag:Y.namespace,class:"tok-namespace"},{tag:Y.className,class:"tok-className"},{tag:Y.macroName,class:"tok-macroName"},{tag:Y.propertyName,class:"tok-propertyName"},{tag:Y.operator,class:"tok-operator"},{tag:Y.comment,class:"tok-comment"},{tag:Y.meta,class:"tok-meta"},{tag:Y.invalid,class:"tok-invalid"},{tag:Y.punctuation,class:"tok-punctuation"}]);var _x;const il=new Xe;function tQ(t){return Qe.define({combine:t?e=>e.concat(t):void 0})}const nQ=new Xe;class mr{constructor(e,n,i=[],r=""){this.data=e,this.name=r,lt.prototype.hasOwnProperty("tree")||Object.defineProperty(lt.prototype,"tree",{get(){return kt(this)}}),this.parser=n,this.extension=[go.of(this),lt.languageData.of((s,a,o)=>{let c=nN(s,a,o),u=c.type.prop(il);if(!u)return[];let f=s.facet(u),d=c.type.prop(nQ);if(d){let m=c.resolve(a-c.from,o);for(let v of d)if(v.test(m,s)){let y=s.facet(v.facet);return v.type=="replace"?y:y.concat(f)}}return f})].concat(i)}isActiveAt(e,n,i=-1){return nN(e,n,i).type.prop(il)==this.data}findRegions(e){let n=e.facet(go);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,a)=>{if(s.prop(il)==this.data){i.push({from:a,to:a+s.length});return}let o=s.prop(Xe.mounted);if(o){if(o.tree.prop(il)==this.data){if(o.overlay)for(let c of o.overlay)i.push({from:c.from+a,to:c.to+a});else i.push({from:a,to:a+s.length});return}else if(o.overlay){let c=i.length;if(r(o.tree,o.overlay[0].from+a),i.length>c)return}}for(let c=0;c<s.children.length;c++){let u=s.children[c];u instanceof gt&&r(u,s.positions[c]+a)}};return r(kt(e),0),i}get allowsNesting(){return!0}}mr.setState=Ke.define();function nN(t,e,n){let i=t.facet(go),r=kt(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,pt.ExcludeBuffers|pt.EnterBracketed))s.type.isTop&&(r=s);return r}class mo extends mr{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=tQ(e.languageData);return new mo(n,e.parser.configure({props:[il.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new mo(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function kt(t){let e=t.field(mr.state,!1);return e?e.tree:gt.empty}class qte{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Qh=null;class $f{constructor(e,n,i=[],r,s,a,o,c){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=a,this.skipped=o,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new $f(e,n,[],gt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new qte(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=gt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ta.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ta.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Qh;Qh=this;try{return e()}finally{Qh=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=iN(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:a,skipped:o}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((u,f,d,m)=>c.push({fromA:u,toA:f,fromB:d,toB:m})),i=ta.applyChanges(i,c),r=gt.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let f=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);f<d&&o.push({from:f,to:d})}}}return new $f(this.parser,n,i,r,s,a,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=iN(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends eQ{createParse(n,i,r){let s=r[0].from,a=r[r.length-1].to;return{parsedPos:s,advance(){let c=Qh;if(c){for(let u of r)c.tempSkipped.push(u);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new gt(Sn.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Qh}}function iN(t,e,n){return ta.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class eu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new eu(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=$f.create(e.facet(go).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new eu(i)}}mr.state=ei.define({create:eu.init,update(t,e){for(let n of e.effects)if(n.is(mr.setState))return n.value;return e.startState.facet(go)!=e.state.facet(go)?eu.init(e.state):t.apply(e)}});let tX=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(tX=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Sx=typeof navigator<"u"&&(!((_x=navigator.scheduling)===null||_x===void 0)&&_x.isInputPending)?()=>navigator.scheduling.isInputPending():null,Bte=_n.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(mr.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(mr.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=tX(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(mr.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Sx?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<r&&i.doc.length>r+1e3,c=s.context.work(()=>Sx&&Sx()||Date.now()>a,r+(o?0:1e5));this.chunkBudget-=Date.now()-n,(c||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:mr.setState.of(new eu(s.context))})),this.chunkBudget>0&&!(c&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Gi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),go=Qe.define({combine(t){return t.length?t[0]:null},enables:t=>[mr.state,Bte,we.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class gl{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class Gg{constructor(e,n,i,r,s,a=void 0){this.name=e,this.alias=n,this.extensions=i,this.filename=r,this.loadFunc=s,this.support=a,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:i}=e;if(!n){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(i)}return new Gg(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,n,i)}static matchFilename(e,n){for(let r of e)if(r.filename&&r.filename.test(n))return r;let i=/\.([^.]+)$/.exec(n);if(i){for(let r of e)if(r.extensions.indexOf(i[1])>-1)return r}return null}static matchLanguageName(e,n,i=!0){n=n.toLowerCase();for(let r of e)if(r.alias.some(s=>s==n))return r;if(i)for(let r of e)for(let s of r.alias){let a=n.indexOf(s);if(a>-1&&(s.length>2||!/\w/.test(n[a-1])&&!/\w/.test(n[a+s.length])))return r}return null}}const Ite=Qe.define(),md=Qe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Kg(t){let e=t.facet(md);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Nf(t,e){let n="",i=t.tabSize,r=t.facet(md)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function iQ(t,e){t instanceof lt&&(t=new UO(t));for(let i of t.state.facet(Ite)){let r=i(t,e);if(r!==void 0)return r}let n=kt(t.state);return n.length>=e?Xte(t,n,e):null}class UO{constructor(e,n={}){this.state=e,this.options=n,this.unit=Kg(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(s+=a-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return jr(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let a=s(r);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Tl=new Xe;function Xte(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let a=r;a&&!(a.from<i.node.from||a.to>i.node.to||a.from==i.node.from&&a.type==i.node.type);a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)i={node:s[a],next:i}}return nX(i,t,n)}function nX(t,e,n){for(let i=t;i;i=i.next){let r=Vte(i.node);if(r)return r(rQ.create(e,n,i))}return 0}function Zte(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Vte(t){let e=t.type.prop(Tl);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Xe.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return a=>iX(a,!0,1,void 0,s&&!Zte(a)?r.from:void 0)}return t.parent==null?Wte:null}function Wte(){return 0}class rQ extends UO{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new rQ(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Ute(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return nX(this.context.next,this.base,this.pos)}}function Ute(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Hte(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),a=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let o=n.to;;){let c=e.childAfter(o);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=a)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}o=c.to}}function dg({closing:t,align:e=!0,units:n=1}){return i=>iX(i,e,n,t)}function iX(t,e,n,i,r){let s=t.textAfter,a=s.match(/^\s*/)[0].length,o=i&&s.slice(a,a+i.length)==i||r==t.pos+a,c=e?Hte(t):null;return c?o?t.column(c.from):t.column(c.to):t.baseIndent+(o?0:t.unit*n)}const Yte=t=>t.baseIndent;function Bc({except:t,units:e=1}={}){return n=>{let i=t&&t.test(n.textAfter);return n.baseIndent+(i?0:e*n.unit)}}const Fte=200;function Gte(){return lt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+Fte)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:a}=t,o=-1,c=[];for(let{head:u}of a.selection.ranges){let f=a.doc.lineAt(u);if(f.from==o)continue;o=f.from;let d=iQ(a,f.from);if(d==null)continue;let m=/^\s*/.exec(f.text)[0],v=Nf(a,d);m!=v&&c.push({from:f.from,to:f.from+m.length,insert:v})}return c.length?[t,{changes:c,sequential:!0}]:t})}const rX=Qe.define(),xo=new Xe;function HO(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function Kte(t,e,n){let i=kt(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let a=r;a;a=a.next){let o=a.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let c=o.type.prop(xo);if(c&&(o.to<i.length-50||i.length==t.doc.length||!Jte(o))){let u=c(o,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function Jte(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Jg(t,e,n){for(let i of t.facet(rX)){let r=i(t,e,n);if(r)return r}return Kte(t,e,n)}function sX(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const YO=Ke.define({map:sX}),gd=Ke.define({map:sX});function aX(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Ol=ei.define({create(){return Be.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=rN(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(YO)&&!ene(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(cX),r=i?Be.replace({widget:new one(i(e.state,n.value))}):sN;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(gd)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=rN(t,e.selection.main.head)),t},provide:t=>we.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(sN.range(i,r))}return Be.set(e,!0)}});function rN(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function eO(t,e,n){var i;let r=null;return(i=t.field(Ol,!1))===null||i===void 0||i.between(e,n,(s,a)=>{(!r||r.from>s)&&(r={from:s,to:a})}),r}function ene(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function oX(t,e){return t.field(Ol,!1)?e:e.concat(Ke.appendConfig.of(uX()))}const tne=t=>{for(let e of aX(t)){let n=Jg(t.state,e.from,e.to);if(n)return t.dispatch({effects:oX(t.state,[YO.of(n),lX(t,n)])}),!0}return!1},nne=t=>{if(!t.state.field(Ol,!1))return!1;let e=[];for(let n of aX(t)){let i=eO(t.state,n.from,n.to);i&&e.push(gd.of(i),lX(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function lX(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return we.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const ine=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Jg(e,r.from,r.to);s&&n.push(YO.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:oX(t.state,n)}),!!n.length},rne=t=>{let e=t.state.field(Ol,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(gd.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},sne=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:tne},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:nne},{key:"Ctrl-Alt-[",run:ine},{key:"Ctrl-Alt-]",run:rne}],ane={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},cX=Qe.define({combine(t){return oa(t,ane)}});function uX(t){return[Ol,une]}function hX(t,e){let{state:n}=t,i=n.facet(cX),r=a=>{let o=t.lineBlockAt(t.posAtDOM(a.target)),c=eO(t.state,o.from,o.to);c&&t.dispatch({effects:gd.of(c)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const sN=Be.replace({widget:new class extends la{toDOM(t){return hX(t,null)}}});class one extends la{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return hX(e,this.value)}}const lne={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class wx extends ia{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function cne(t={}){let e={...lne,...t},n=new wx(e,!0),i=new wx(e,!1),r=_n.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(go)!=a.state.facet(go)||a.startState.field(Ol,!1)!=a.state.field(Ol,!1)||kt(a.startState)!=kt(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let o=new co;for(let c of a.viewportLineBlocks){let u=eO(a.state,c.from,c.to)?i:Jg(a.state,c.from,c.to)?n:null;u&&o.add(c.from,c.from,u)}return o.finish()}}),{domEventHandlers:s}=e;return[r,lte({class:"cm-foldGutter",markers(a){var o;return((o=a.plugin(r))===null||o===void 0?void 0:o.markers)||nt.empty},initialSpacer(){return new wx(e,!1)},domEventHandlers:{...s,click:(a,o,c)=>{if(s.click&&s.click(a,o,c))return!0;let u=eO(a.state,o.from,o.to);if(u)return a.dispatch({effects:gd.of(u)}),!0;let f=Jg(a.state,o.from,o.to);return f?(a.dispatch({effects:YO.of(f)}),!0):!1}}}),uX()]}const une=we.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class FO{constructor(e,n){this.specs=e;let i;function r(o){let c=uo.newName();return(i||(i=Object.create(null)))["."+c]=o,c}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,a=n.scope;this.scope=a instanceof mr?o=>o.prop(il)==a.data:a?o=>o==a:void 0,this.style=eX(e.map(o=>({tag:o.tag,class:o.class||r(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=i?new uo(i):null,this.themeType=n.themeType}static define(e,n){return new FO(e,n||{})}}const F2=Qe.define(),hne=Qe.define({combine(t){return t.length?[t[0]]:null}});function kx(t){let e=t.facet(F2);return e.length?e:t.facet(hne)}function fne(t,e){let n=[pne],i;return t instanceof FO&&(t.module&&n.push(we.styleModule.of(t.module)),i=t.themeType),i?n.push(F2.computeN([we.darkTheme],r=>r.facet(we.darkTheme)==(i=="dark")?[t]:[])):n.push(F2.of(t)),n}class dne{constructor(e){this.markCache=Object.create(null),this.tree=kt(e.state),this.decorations=this.buildDeco(e,kx(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=kt(e.state),i=kx(e.state),r=i!=kx(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Be.none;let i=new co;for(let{from:r,to:s}of e.visibleRanges)zte(this.tree,n,(a,o,c)=>{i.add(a,o,this.markCache[c]||(this.markCache[c]=Be.mark({class:c})))},r,s);return i.finish()}}const pne=sa.high(_n.fromClass(dne,{decorations:t=>t.decorations})),mne=we.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),fX=1e4,dX="()[]{}",pX=Qe.define({combine(t){return oa(t,{afterCursor:!0,brackets:dX,maxScanDistance:fX,renderMatch:vne})}}),gne=Be.mark({class:"cm-matchingBracket"}),One=Be.mark({class:"cm-nonmatchingBracket"});function vne(t){let e=[],n=t.matched?gne:One;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const yne=ei.define({create(){return Be.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(pX);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=ls(e.state,r.head,-1,i)||r.head>0&&ls(e.state,r.head-1,1,i)||i.afterCursor&&(ls(e.state,r.head,1,i)||r.head<e.state.doc.length&&ls(e.state,r.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,e.state)))}return Be.set(n,!0)},provide:t=>we.decorations.from(t)}),xne=[yne,mne];function bne(t={}){return[pX.of(t),xne]}const mX=new Xe;function G2(t,e,n){let i=t.prop(e<0?Xe.openedBy:Xe.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function K2(t){let e=t.type.prop(mX);return e?e(t.node):t}function ls(t,e,n,i={}){let r=i.maxScanDistance||fX,s=i.brackets||dX,a=kt(t),o=a.resolveInner(e,n);for(let c=o;c;c=c.parent){let u=G2(c.type,n,s);if(u&&c.from<c.to){let f=K2(c);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return _ne(t,e,n,c,f,u,s)}}return Sne(t,e,n,a,o.type,r,s)}function _ne(t,e,n,i,r,s,a){let o=i.parent,c={from:r.from,to:r.to},u=0,f=o?.cursor();if(f&&(n<0?f.childBefore(i.from):f.childAfter(i.to)))do if(n<0?f.to<=i.from:f.from>=i.to){if(u==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let d=K2(f);return{start:c,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(G2(f.type,n,a))u++;else if(G2(f.type,-n,a)){if(u==0){let d=K2(f);return{start:c,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?f.prevSibling():f.nextSibling());return{start:c,matched:!1}}function Sne(t,e,n,i,r,s,a){let o=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),c=a.indexOf(o);if(c<0||c%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},f=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let m=0;!f.next().done&&m<=s;){let v=f.value;n<0&&(m+=v.length);let y=e+m*n;for(let x=n>0?0:v.length-1,S=n>0?v.length:-1;x!=S;x+=n){let _=a.indexOf(v[x]);if(!(_<0||i.resolveInner(y+x,1).type!=r))if(_%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:y+x,to:y+x+1},matched:_>>1==c>>1};d--}}n>0&&(m+=v.length)}return f.done?{start:u,matched:!1}:null}const wne=Object.create(null),aN=[Sn.none],oN=[],lN=Object.create(null),kne=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])kne[t]=Cne(wne,e);function Cx(t,e){oN.indexOf(t)>-1||(oN.push(t),console.warn(e))}function Cne(t,e){let n=[];for(let o of e.split(" ")){let c=[];for(let u of o.split(".")){let f=t[u]||Y[u];f?typeof f=="function"?c.length?c=c.map(f):Cx(u,`Modifier ${u} used at start of tag`):c.length?Cx(u,`Tag ${u} used as modifier`):c=Array.isArray(f)?f:[f]:Cx(u,`Unknown highlighting tag ${u}`)}for(let u of c)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(o=>o.id),s=lN[r];if(s)return s.id;let a=lN[r]=Sn.define({id:aN.length,name:i,props:[yo({[i]:n})]});return aN.push(a),a.id}Rt.RTL,Rt.LTR;const Tne=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=aQ(t.state,n.from);return i.line?Qne(t):i.block?Pne(t):!1};function sQ(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Qne=sQ($ne,0),Ene=sQ(gX,0),Pne=sQ((t,e)=>gX(t,e,Rne(e)),0);function aQ(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Eh=50;function Ane(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Eh,i),a=t.sliceDoc(r,r+Eh),o=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(a)[0].length,u=s.length-o;if(s.slice(u-e.length,u)==e&&a.slice(c,c+n.length)==n)return{open:{pos:i-o,margin:o&&1},close:{pos:r+c,margin:c&&1}};let f,d;r-i<=2*Eh?f=d=t.sliceDoc(i,r):(f=t.sliceDoc(i,i+Eh),d=t.sliceDoc(r-Eh,r));let m=/^\s*/.exec(f)[0].length,v=/\s*$/.exec(d)[0].length,y=d.length-v-n.length;return f.slice(m,m+e.length)==e&&d.slice(y,y+n.length)==n?{open:{pos:i+m+e.length,margin:/\s/.test(f.charAt(m+e.length))?1:0},close:{pos:r-v-n.length,margin:/\s/.test(d.charAt(y-1))?1:0}}:null}function Rne(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function gX(t,e,n=e.selection.ranges){let i=n.map(s=>aQ(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,a)=>Ane(e,i[a],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,a)=>r[a]?[]:[{from:s.from,insert:i[a].open+" "},{from:s.to,insert:" "+i[a].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let a=0,o;a<r.length;a++)if(o=r[a]){let c=i[a],{open:u,close:f}=o;s.push({from:u.pos-c.open.length,to:u.pos+u.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:s}}return null}function $ne(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:a}of n){let o=i.length,c=1e9,u=aQ(e,s).line;if(u){for(let f=s;f<=a;){let d=e.doc.lineAt(f);if(d.from>r&&(s==a||a>d.from)){r=d.from;let m=/^\s*/.exec(d.text)[0].length,v=m==d.length,y=d.text.slice(m,m+u.length)==u?m:-1;m<d.text.length&&m<c&&(c=m),i.push({line:d,comment:y,token:u,indent:m,empty:v,single:!1})}f=d.to+1}if(c<1e9)for(let f=o;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=c);i.length==o+1&&(i[o].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:c,indent:u,empty:f,single:d}of i)(d||!f)&&s.push({from:o.from+u,insert:c+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:o,token:c}of i)if(o>=0){let u=a.from+o,f=u+c.length;a.text[f-a.from]==" "&&f++,s.push({from:u,to:f})}return{changes:s}}return null}const J2=aa.define(),Nne=aa.define(),Mne=Qe.define(),OX=Qe.define({combine(t){return oa(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),vX=ei.define({create(){return cs.empty},update(t,e){let n=e.state.facet(OX),i=e.annotation(J2);if(i){let c=ki.fromTransaction(e,i.selection),u=i.side,f=u==0?t.undone:t.done;return c?f=tO(f,f.length,n.minDepth,c):f=bX(f,e.startState.selection),new cs(u==0?i.rest:f,u==0?f:i.rest)}let r=e.annotation(Nne);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(fn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=ki.fromTransaction(e),a=e.annotation(fn.time),o=e.annotation(fn.userEvent);return s?t=t.addChanges(s,a,o,n,e):e.selection&&(t=t.addSelection(e.startState.selection,a,o,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new cs(t.done.map(ki.fromJSON),t.undone.map(ki.fromJSON))}});function jne(t={}){return[vX,OX.of(t),we.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?yX:e.inputType=="historyRedo"?eC:null;return i?(e.preventDefault(),i(n)):!1}})]}function GO(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(vX,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const yX=GO(0,!1),eC=GO(1,!1),zne=GO(0,!0),Dne=GO(1,!0);class ki{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new ki(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new ki(e.changes&&xn.fromJSON(e.changes),[],e.mapped&&hs.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,n){let i=gr;for(let r of e.startState.facet(Mne)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new ki(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,gr)}static selection(e){return new ki(void 0,gr,void 0,void 0,e)}}function tO(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Lne(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,a,o)=>{for(let c=0;c<n.length;){let u=n[c++],f=n[c++];o>=u&&a<=f&&(i=!0)}}),i}function qne(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function xX(t,e){return t.length?e.length?t.concat(e):t:e}const gr=[],Bne=200;function bX(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Bne));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),tO(t,t.length-1,1e9,n.setSelAfter(i)))}else return[ki.selection([e])]}function Ine(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Tx(t,e){if(!t.length)return t;let n=t.length,i=gr;for(;n;){let r=Xne(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[ki.selection(i)]:gr}function Xne(t,e,n){let i=xX(t.selectionsAfter.length?t.selectionsAfter.map(o=>o.map(e)):gr,n);if(!t.changes)return ki.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(s):s;return new ki(r,Ke.mapEffects(t.effects,e),a,t.startSelection.map(s),i)}const Zne=/^(input\.type|delete)($|\.)/;class cs{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new cs(this.done,this.undone):this}addChanges(e,n,i,r,s){let a=this.done,o=a[a.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!i||Zne.test(i))&&(!o.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Lne(o.changes,e.changes))||i=="input.type.compose")?a=tO(a,a.length-1,r.minDepth,new ki(e.changes.compose(o.changes),xX(Ke.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,gr)):a=tO(a,a.length,r.minDepth,e),new cs(a,gr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:gr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&qne(s[s.length-1],e)?this:new cs(bX(this.done,e),this.undone,n,i)}addMapping(e){return new cs(Tx(this.done,e),Tx(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],a=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:J2.of({side:e,rest:Ine(r),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?gr:r.slice(0,r.length-1);return s.mapped&&(o=Tx(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:J2.of({side:e,rest:o,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}cs.empty=new cs(gr,gr);const Vne=[{key:"Mod-z",run:yX,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:eC,preventDefault:!0},{linux:"Ctrl-Shift-z",run:eC,preventDefault:!0},{key:"Mod-u",run:zne,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Dne,preventDefault:!0}];function vu(t,e){return fe.create(t.ranges.map(e),t.mainIndex)}function Lr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qr({state:t,dispatch:e},n){let i=vu(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Lr(t,i)),!0)}function KO(t,e){return fe.cursor(e?t.to:t.from)}function _X(t,e){return qr(t,n=>n.empty?t.moveByChar(n,e):KO(n,e))}function ti(t){return t.textDirectionAt(t.state.selection.main.head)==Rt.LTR}const SX=t=>_X(t,!ti(t)),wX=t=>_X(t,ti(t));function kX(t,e){return qr(t,n=>n.empty?t.moveByGroup(n,e):KO(n,e))}const Wne=t=>kX(t,!ti(t)),Une=t=>kX(t,ti(t));function Hne(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function JO(t,e,n){let i=kt(t).resolveInner(e.head),r=n?Xe.closedBy:Xe.openedBy;for(let c=e.head;;){let u=n?i.childAfter(c):i.childBefore(c);if(!u)break;Hne(t,u,r)?i=u:c=n?u.to:u.from}let s=i.type.prop(r),a,o;return s&&(a=n?ls(t,i.from,1):ls(t,i.to,-1))&&a.matched?o=n?a.end.to:a.end.from:o=n?i.to:i.from,fe.cursor(o,n?-1:1)}const Yne=t=>qr(t,e=>JO(t.state,e,!ti(t))),Fne=t=>qr(t,e=>JO(t.state,e,ti(t)));function CX(t,e){return qr(t,n=>{if(!n.empty)return KO(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const TX=t=>CX(t,!1),QX=t=>CX(t,!0);function EX(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(we.scrollMargins)){let a=s(t);a?.top&&(n=Math.max(a?.top,n)),a?.bottom&&(i=Math.max(a?.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function PX(t,e){let n=EX(t),{state:i}=t,r=vu(i.selection,a=>a.empty?t.moveVertically(a,e,n.height):KO(a,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let a=t.coordsAtPos(i.selection.main.head),o=t.scrollDOM.getBoundingClientRect(),c=o.top+n.marginTop,u=o.bottom-n.marginBottom;a&&a.top>c&&a.bottom<u&&(s=we.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-c}))}return t.dispatch(Lr(i,r),{effects:s}),!0}const cN=t=>PX(t,!1),tC=t=>PX(t,!0);function bo(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=fe.cursor(i.from+s))}return r}const Gne=t=>qr(t,e=>bo(t,e,!0)),Kne=t=>qr(t,e=>bo(t,e,!1)),Jne=t=>qr(t,e=>bo(t,e,!ti(t))),eie=t=>qr(t,e=>bo(t,e,ti(t))),tie=t=>qr(t,e=>fe.cursor(t.lineBlockAt(e.head).from,1)),nie=t=>qr(t,e=>fe.cursor(t.lineBlockAt(e.head).to,-1));function iie(t,e,n){let i=!1,r=vu(t.selection,s=>{let a=ls(t,s.head,-1)||ls(t,s.head,1)||s.head>0&&ls(t,s.head-1,1)||s.head<t.doc.length&&ls(t,s.head+1,-1);if(!a||!a.end)return s;i=!0;let o=a.start.from==s.head?a.end.to:a.end.from;return fe.cursor(o)});return i?(e(Lr(t,r)),!0):!1}const rie=({state:t,dispatch:e})=>iie(t,e);function xr(t,e){let n=vu(t.state.selection,i=>{let r=e(i);return fe.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Lr(t.state,n)),!0)}function AX(t,e){return xr(t,n=>t.moveByChar(n,e))}const RX=t=>AX(t,!ti(t)),$X=t=>AX(t,ti(t));function NX(t,e){return xr(t,n=>t.moveByGroup(n,e))}const sie=t=>NX(t,!ti(t)),aie=t=>NX(t,ti(t)),oie=t=>xr(t,e=>JO(t.state,e,!ti(t))),lie=t=>xr(t,e=>JO(t.state,e,ti(t)));function MX(t,e){return xr(t,n=>t.moveVertically(n,e))}const jX=t=>MX(t,!1),zX=t=>MX(t,!0);function DX(t,e){return xr(t,n=>t.moveVertically(n,e,EX(t).height))}const uN=t=>DX(t,!1),hN=t=>DX(t,!0),cie=t=>xr(t,e=>bo(t,e,!0)),uie=t=>xr(t,e=>bo(t,e,!1)),hie=t=>xr(t,e=>bo(t,e,!ti(t))),fie=t=>xr(t,e=>bo(t,e,ti(t))),die=t=>xr(t,e=>fe.cursor(t.lineBlockAt(e.head).from)),pie=t=>xr(t,e=>fe.cursor(t.lineBlockAt(e.head).to)),fN=({state:t,dispatch:e})=>(e(Lr(t,{anchor:0})),!0),dN=({state:t,dispatch:e})=>(e(Lr(t,{anchor:t.doc.length})),!0),pN=({state:t,dispatch:e})=>(e(Lr(t,{anchor:t.selection.main.anchor,head:0})),!0),mN=({state:t,dispatch:e})=>(e(Lr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),mie=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),gie=({state:t,dispatch:e})=>{let n=e0(t).map(({from:i,to:r})=>fe.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:fe.create(n),userEvent:"select"})),!0},Oie=({state:t,dispatch:e})=>{let n=vu(t.selection,i=>{let r=kt(t),s=r.resolveStack(i.from,1);if(i.empty){let a=r.resolveStack(i.from,-1);a.node.from>=s.node.from&&a.node.to<=s.node.to&&(s=a)}for(let a=s;a;a=a.next){let{node:o}=a;if((o.from<i.from&&o.to>=i.to||o.to>i.to&&o.from<=i.from)&&a.next)return fe.range(o.to,o.from)}return i});return n.eq(t.selection)?!1:(e(Lr(t,n)),!0)};function LX(t,e){let{state:n}=t,i=n.selection,r=n.selection.ranges.slice();for(let s of n.selection.ranges){let a=n.doc.lineAt(s.head);if(e?a.to<t.state.doc.length:a.from>0)for(let o=s;;){let c=t.moveVertically(o,e);if(c.head<a.from||c.head>a.to){r.some(u=>u.head==c.head)||r.push(c);break}else{if(c.head==o.head)break;o=c}}}return r.length==i.ranges.length?!1:(t.dispatch(Lr(n,fe.create(r,r.length-1))),!0)}const vie=t=>LX(t,!1),yie=t=>LX(t,!0),xie=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=fe.create([n.main]):n.main.empty||(i=fe.create([fe.cursor(n.main.head)])),i?(e(Lr(t,i)),!0):!1};function Od(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:a,to:o}=s;if(a==o){let c=e(s);c<a?(n="delete.backward",c=Tm(t,c,!1)):c>a&&(n="delete.forward",c=Tm(t,c,!0)),a=Math.min(a,c),o=Math.max(o,c)}else a=Tm(t,a,!1),o=Tm(t,o,!0);return a==o?{range:s}:{changes:{from:a,to:o},range:fe.cursor(a,a<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?we.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Tm(t,e,n){if(t instanceof we)for(let i of t.state.facet(we.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const qX=(t,e,n)=>Od(t,i=>{let r=i.from,{state:s}=t,a=s.doc.lineAt(r),o,c;if(n&&!e&&r>a.from&&r<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,r-a.from))){if(o[o.length-1]=="	")return r-1;let u=jr(o,s.tabSize),f=u%Kg(s)||Kg(s);for(let d=0;d<f&&o[o.length-1-d]==" ";d++)r--;c=r}else c=bn(a.text,r-a.from,e,e)+a.from,c==r&&a.number!=(e?s.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,r-a.from))&&(c=bn(a.text,c-a.from,!1,!1)+a.from);return c}),nC=t=>qX(t,!1,!0),BX=t=>qX(t,!0,!1),IX=(t,e)=>Od(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),a=r.charCategorizer(i);for(let o=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=bn(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,c)-s.from,Math.max(i,c)-s.from),f=a(u);if(o!=null&&f!=o)break;(u!=" "||i!=n.head)&&(o=f),i=c}return i}),XX=t=>IX(t,!1),bie=t=>IX(t,!0),_ie=t=>Od(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Sie=t=>Od(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),wie=t=>Od(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),kie=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:mt.of(["",""])},range:fe.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Cie=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),a=r==s.from?r-1:bn(s.text,r-s.from,!1)+s.from,o=r==s.to?r+1:bn(s.text,r-s.from,!0)+s.from;return{changes:{from:a,to:o,insert:t.doc.slice(r,o).append(t.doc.slice(a,r))},range:fe.cursor(o)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function e0(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function ZX(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of e0(t)){if(n?s.to==t.doc.length:s.from==0)continue;let a=t.doc.lineAt(n?s.to+1:s.from-1),o=a.length+1;if(n){i.push({from:s.to,to:a.to},{from:s.from,insert:a.text+t.lineBreak});for(let c of s.ranges)r.push(fe.range(Math.min(t.doc.length,c.anchor+o),Math.min(t.doc.length,c.head+o)))}else{i.push({from:a.from,to:s.from},{from:s.to,insert:t.lineBreak+a.text});for(let c of s.ranges)r.push(fe.range(c.anchor-o,c.head-o))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:fe.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Tie=({state:t,dispatch:e})=>ZX(t,e,!1),Qie=({state:t,dispatch:e})=>ZX(t,e,!0);function VX(t,e,n){if(t.readOnly)return!1;let i=[];for(let s of e0(t))n?i.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):i.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});let r=t.changes(i);return e(t.update({changes:r,selection:t.selection.map(r,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Eie=({state:t,dispatch:e})=>VX(t,e,!1),Pie=({state:t,dispatch:e})=>VX(t,e,!0),Aie=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(e0(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=vu(e.selection,r=>{let s;if(t.lineWrapping){let a=t.lineBlockAt(r.head),o=t.coordsAtPos(r.head,r.assoc||1);o&&(s=a.bottom+t.documentTop-o.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Rie(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=kt(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Xe.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const gN=WX(!1),$ie=WX(!0);function WX(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:a}=r,o=e.doc.lineAt(s),c=!t&&s==a&&Rie(e,s);t&&(s=a=(a<=o.to?o:e.doc.lineAt(a)).to);let u=new UO(e,{simulateBreak:s,simulateDoubleBreak:!!c}),f=iQ(u,s);for(f==null&&(f=jr(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<o.to&&/\s/.test(o.text[a-o.from]);)a++;c?{from:s,to:a}=c:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let d=["",Nf(e,f)];return c&&d.push(Nf(e,u.lineIndent(o.from,-1))),{changes:{from:s,to:a,insert:mt.of(d)},range:fe.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function oQ(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let a=i.from;a<=i.to;){let o=t.doc.lineAt(a);o.number>n&&(i.empty||i.to>o.from)&&(e(o,r,i),n=o.number),a=o.to+1}let s=t.changes(r);return{changes:r,range:fe.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Nie=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new UO(t,{overrideIndentation:s=>{let a=n[s];return a??-1}}),r=oQ(t,(s,a,o)=>{let c=iQ(i,s.from);if(c==null)return;/\S/.test(s.text)||(c=0);let u=/^\s*/.exec(s.text)[0],f=Nf(t,c);(u!=f||o.from<s.from+u.length)&&(n[s.from]=c,a.push({from:s.from,to:s.from+u.length,insert:f}))});return r.changes.empty||e(t.update(r,{userEvent:"indent"})),!0},UX=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(oQ(t,(n,i)=>{i.push({from:n.from,insert:t.facet(md)})}),{userEvent:"input.indent"})),!0),HX=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(oQ(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=jr(r,t.tabSize),a=0,o=Nf(t,Math.max(0,s-Kg(t)));for(;a<r.length&&a<o.length&&r.charCodeAt(a)==o.charCodeAt(a);)a++;i.push({from:n.from+a,to:n.from+r.length,insert:o.slice(a)})}),{userEvent:"delete.dedent"})),!0),Mie=t=>(t.setTabFocusMode(),!0),jie=[{key:"Ctrl-b",run:SX,shift:RX,preventDefault:!0},{key:"Ctrl-f",run:wX,shift:$X},{key:"Ctrl-p",run:TX,shift:jX},{key:"Ctrl-n",run:QX,shift:zX},{key:"Ctrl-a",run:tie,shift:die},{key:"Ctrl-e",run:nie,shift:pie},{key:"Ctrl-d",run:BX},{key:"Ctrl-h",run:nC},{key:"Ctrl-k",run:_ie},{key:"Ctrl-Alt-h",run:XX},{key:"Ctrl-o",run:kie},{key:"Ctrl-t",run:Cie},{key:"Ctrl-v",run:tC}],zie=[{key:"ArrowLeft",run:SX,shift:RX,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Wne,shift:sie,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Jne,shift:hie,preventDefault:!0},{key:"ArrowRight",run:wX,shift:$X,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Une,shift:aie,preventDefault:!0},{mac:"Cmd-ArrowRight",run:eie,shift:fie,preventDefault:!0},{key:"ArrowUp",run:TX,shift:jX,preventDefault:!0},{mac:"Cmd-ArrowUp",run:fN,shift:pN},{mac:"Ctrl-ArrowUp",run:cN,shift:uN},{key:"ArrowDown",run:QX,shift:zX,preventDefault:!0},{mac:"Cmd-ArrowDown",run:dN,shift:mN},{mac:"Ctrl-ArrowDown",run:tC,shift:hN},{key:"PageUp",run:cN,shift:uN},{key:"PageDown",run:tC,shift:hN},{key:"Home",run:Kne,shift:uie,preventDefault:!0},{key:"Mod-Home",run:fN,shift:pN},{key:"End",run:Gne,shift:cie,preventDefault:!0},{key:"Mod-End",run:dN,shift:mN},{key:"Enter",run:gN,shift:gN},{key:"Mod-a",run:mie},{key:"Backspace",run:nC,shift:nC,preventDefault:!0},{key:"Delete",run:BX,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:XX,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:bie,preventDefault:!0},{mac:"Mod-Backspace",run:Sie,preventDefault:!0},{mac:"Mod-Delete",run:wie,preventDefault:!0}].concat(jie.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Die=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Yne,shift:oie},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Fne,shift:lie},{key:"Alt-ArrowUp",run:Tie},{key:"Shift-Alt-ArrowUp",run:Eie},{key:"Alt-ArrowDown",run:Qie},{key:"Shift-Alt-ArrowDown",run:Pie},{key:"Mod-Alt-ArrowUp",run:vie},{key:"Mod-Alt-ArrowDown",run:yie},{key:"Escape",run:xie},{key:"Mod-Enter",run:$ie},{key:"Alt-l",mac:"Ctrl-l",run:gie},{key:"Mod-i",run:Oie,preventDefault:!0},{key:"Mod-[",run:HX},{key:"Mod-]",run:UX},{key:"Mod-Alt-\\",run:Nie},{key:"Shift-Mod-k",run:Aie},{key:"Shift-Mod-\\",run:rie},{key:"Mod-/",run:Tne},{key:"Alt-A",run:Ene},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Mie}].concat(zie),Lie={key:"Tab",run:UX,shift:HX},ON=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class tu{constructor(e,n,i=0,r=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?o=>s(ON(o)):ON,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return _i(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=NT(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ss(e);let r=this.normalize(n);if(r.length)for(let s=0,a=i;;s++){let o=r.charCodeAt(s),c=this.match(o,a,this.bufferPos+this.bufferStart);if(s==r.length-1){if(c)return this.value=c,this;break}a==i&&s<n.length&&n.charCodeAt(s)==o&&a++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(tu.prototype[Symbol.iterator]=function(){return this});const YX={from:-1,to:-1,match:/.*/.exec("")},lQ="gm"+(/x/.unicode==null?"":"u");class FX{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=YX,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new GX(e,n,i,r,s);this.re=new RegExp(n,lQ+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let a=e.lineAt(r);this.curLineStart=a.from,this.matchPos=nO(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=nO(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Qx=new WeakMap;class Ic{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=Qx.get(e);if(!r||r.from>=i||r.to<=n){let o=new Ic(n,e.sliceString(n,i));return Qx.set(e,o),o}if(r.from==n&&r.to==i)return r;let{text:s,from:a}=r;return a>n&&(s=e.sliceString(n,a)+s,a=n),r.to<i&&(s+=e.sliceString(r.to,i)),Qx.set(e,new Ic(a,s)),new Ic(n,s.slice(n-a,i-a))}}class GX{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=YX,this.matchPos=nO(e,r),this.re=new RegExp(n,lQ+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=Ic.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=nO(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ic.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(FX.prototype[Symbol.iterator]=GX.prototype[Symbol.iterator]=function(){return this});function qie(t){try{return new RegExp(t,lQ),!0}catch{return!1}}function nO(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function iC(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Dn("input",{class:"cm-textfield",name:"line",value:e}),i=Dn("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:df.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Dn("label",t.state.phrase("Go to line"),": ",n)," ",Dn("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Dn("button",{name:"close",onclick:()=>{t.dispatch({effects:df.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:a}=t,o=a.doc.lineAt(a.selection.main.head),[,c,u,f,d]=s,m=f?+f.slice(1):0,v=u?+u:o.number;if(u&&d){let S=v/100;c&&(S=S*(c=="-"?-1:1)+o.number/a.doc.lines),v=Math.round(a.doc.lines*S)}else u&&c&&(v=v*(c=="-"?-1:1)+o.number);let y=a.doc.line(Math.max(1,Math.min(a.doc.lines,v))),x=fe.cursor(y.from+Math.max(0,Math.min(m,y.length)));t.dispatch({effects:[df.of(!1),we.scrollIntoView(x.from,{y:"center"})],selection:x}),t.focus()}return{dom:i}}const df=Ke.define(),vN=ei.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(df)&&(t=n.value);return t},provide:t=>Hg.from(t,e=>e?iC:null)}),Bie=t=>{let e=Ug(t,iC);if(!e){let n=[df.of(!0)];t.state.field(vN,!1)==null&&n.push(Ke.appendConfig.of([vN,Iie])),t.dispatch({effects:n}),e=Ug(t,iC)}return e&&e.dom.querySelector("input").select(),!0},Iie=we.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Xie={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Zie=Qe.define({combine(t){return oa(t,Xie,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Vie(t){return[Fie,Yie]}const Wie=Be.mark({class:"cm-selectionMatch"}),Uie=Be.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function yN(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=Lt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=Lt.Word)}function Hie(t,e,n,i){return t(e.sliceDoc(n,n+1))==Lt.Word&&t(e.sliceDoc(i-1,i))==Lt.Word}const Yie=_n.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Zie),{state:n}=t,i=n.selection;if(i.ranges.length>1)return Be.none;let r=i.main,s,a=null;if(r.empty){if(!e.highlightWordAroundCursor)return Be.none;let c=n.wordAt(r.head);if(!c)return Be.none;a=n.charCategorizer(r.head),s=n.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return Be.none;if(e.wholeWords){if(s=n.sliceDoc(r.from,r.to),a=n.charCategorizer(r.head),!(yN(a,n,r.from,r.to)&&Hie(a,n,r.from,r.to)))return Be.none}else if(s=n.sliceDoc(r.from,r.to),!s)return Be.none}let o=[];for(let c of t.visibleRanges){let u=new tu(n.doc,s,c.from,c.to);for(;!u.next().done;){let{from:f,to:d}=u.value;if((!a||yN(a,n,f,d))&&(r.empty&&f<=r.from&&d>=r.to?o.push(Uie.range(f,d)):(f>=r.to||d<=r.from)&&o.push(Wie.range(f,d)),o.length>e.maxMatches))return Be.none}}return Be.set(o)}},{decorations:t=>t.decorations}),Fie=we.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Gie=({state:t,dispatch:e})=>{let{selection:n}=t,i=fe.create(n.ranges.map(r=>t.wordAt(r.head)||fe.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Kie(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let a=!1,o=new tu(t.doc,e,i[i.length-1].to);;)if(o.next(),o.done){if(a)return null;o=new tu(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(c=>c.from==o.value.from))continue;if(s){let c=t.wordAt(o.value.from);if(!c||c.from!=o.value.from||c.to!=o.value.to)continue}return o.value}}const Jie=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Gie({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Kie(t,i);return r?(e(t.update({selection:t.selection.addRange(fe.range(r.from,r.to),!1),effects:we.scrollIntoView(r.to)})),!0):!1},yu=Qe.define({combine(t){return oa(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new hre(e),scrollToMatch:e=>we.scrollIntoView(e)})}});class KX{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||qie(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ire(this):new tre(this)}getCursor(e,n=0,i){let r=e.doc?e:lt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Tc(this,r,n,i):Cc(this,r,n,i)}}class JX{constructor(e){this.spec=e}}function Cc(t,e,n,i){return new tu(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?ere(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ere(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(iO(r,n-s))!=Lt.Word||e(rO(r,n-s))!=Lt.Word)&&(e(rO(r,i-s))!=Lt.Word||e(iO(r,i-s))!=Lt.Word))}class tre extends JX{constructor(e){super(e)}nextMatch(e,n,i){let r=Cc(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Cc(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),a=Cc(this.spec,e,s,r),o=null;for(;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Cc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Cc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Tc(t,e,n,i){return new FX(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?nre(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function iO(t,e){return t.slice(bn(t,e,!1),e)}function rO(t,e){return t.slice(e,bn(t,e))}function nre(t){return(e,n,i)=>!i[0].length||(t(iO(i.input,i.index))!=Lt.Word||t(rO(i.input,i.index))!=Lt.Word)&&(t(rO(i.input,i.index+i[0].length))!=Lt.Word||t(iO(i.input,i.index+i[0].length))!=Lt.Word)}class ire extends JX{nextMatch(e,n,i){let r=Tc(this.spec,e,i,e.doc.length).next();return r.done&&(r=Tc(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),a=Tc(this.spec,e,s,i),o=null;for(;!a.next().done;)o=a.value;if(o&&(s==n||o.from>s+10))return o;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Tc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Tc(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Mf=Ke.define(),cQ=Ke.define(),ro=ei.define({create(t){return new Ex(rC(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Mf)?t=new Ex(n.value.create(),t.panel):n.is(cQ)&&(t=new Ex(t.query,n.value?uQ:null));return t},provide:t=>Hg.from(t,e=>e.panel)});class Ex{constructor(e,n){this.query=e,this.panel=n}}const rre=Be.mark({class:"cm-searchMatch"}),sre=Be.mark({class:"cm-searchMatch cm-searchMatch-selected"}),are=_n.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ro))}update(t){let e=t.state.field(ro);(e!=t.startState.field(ro)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Be.none;let{view:n}=this,i=new co;for(let r=0,s=n.visibleRanges,a=s.length;r<a;r++){let{from:o,to:c}=s[r];for(;r<a-1&&c>s[r+1].from-500;)c=s[++r].to;t.highlight(n.state,o,c,(u,f)=>{let d=n.state.selection.ranges.some(m=>m.from==u&&m.to==f);i.add(u,f,d?sre:rre)})}return i.finish()}},{decorations:t=>t.decorations});function vd(t){return e=>{let n=e.state.field(ro,!1);return n&&n.query.spec.valid?t(e,n):n8(e)}}const sO=vd((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=fe.single(i.from,i.to),s=t.state.facet(yu);return t.dispatch({selection:r,effects:[hQ(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),t8(t),!0}),aO=vd((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=fe.single(r.from,r.to),a=t.state.facet(yu);return t.dispatch({selection:s,effects:[hQ(t,r),a.scrollToMatch(s.main,t)],userEvent:"select.search"}),t8(t),!0}),ore=vd((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:fe.create(n.map(i=>fe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),lre=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],a=0;for(let o=new tu(t.doc,t.sliceDoc(i,r));!o.next().done;){if(s.length>1e3)return!1;o.value.from==i&&(a=s.length),s.push(fe.range(o.value.from,o.value.to))}return e(t.update({selection:fe.create(s,a),userEvent:"select.search.matches"})),!0},xN=vd((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let a=s,o=[],c,u,f=[];a.from==i&&a.to==r&&(u=n.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(n,a.from,a.to),f.push(we.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(o);return a&&(c=fe.single(a.from,a.to).map(d),f.push(hQ(t,a)),f.push(n.facet(yu).scrollToMatch(c.main,t))),t.dispatch({changes:d,selection:c,effects:f,userEvent:"input.replace"}),!0}),cre=vd((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:a}=r;return{from:s,to:a,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:we.announce.of(i),userEvent:"input.replace.all"}),!0});function uQ(t){return t.state.facet(yu).createPanel(t)}function rC(t,e){var n,i,r,s,a;let o=t.selection.main,c=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!c)return e;let u=t.facet(yu);return new KX({search:((n=e?.literal)!==null&&n!==void 0?n:u.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}function e8(t){let e=Ug(t,uQ);return e&&e.dom.querySelector("[main-field]")}function t8(t){let e=e8(t);e&&e==t.root.activeElement&&e.select()}const n8=t=>{let e=t.state.field(ro,!1);if(e&&e.panel){let n=e8(t);if(n&&n!=t.root.activeElement){let i=rC(t.state,e.query.spec);i.valid&&t.dispatch({effects:Mf.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[cQ.of(!0),e?Mf.of(rC(t.state,e.query.spec)):Ke.appendConfig.of(dre)]});return!0},i8=t=>{let e=t.state.field(ro,!1);if(!e||!e.panel)return!1;let n=Ug(t,uQ);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:cQ.of(!1)}),!0},ure=[{key:"Mod-f",run:n8,scope:"editor search-panel"},{key:"F3",run:sO,shift:aO,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:sO,shift:aO,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:i8,scope:"editor search-panel"},{key:"Mod-Shift-l",run:lre},{key:"Mod-Alt-g",run:Bie},{key:"Mod-d",run:Jie,preventDefault:!0}];class hre{constructor(e){this.view=e;let n=this.query=e.state.field(ro).query.spec;this.commit=this.commit.bind(this),this.searchField=Dn("input",{value:n.search,placeholder:qi(e,"Find"),"aria-label":qi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Dn("input",{value:n.replace,placeholder:qi(e,"Replace"),"aria-label":qi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Dn("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Dn("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Dn("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,a){return Dn("button",{class:"cm-button",name:r,onclick:s,type:"button"},a)}this.dom=Dn("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>sO(e),[qi(e,"next")]),i("prev",()=>aO(e),[qi(e,"previous")]),i("select",()=>ore(e),[qi(e,"all")]),Dn("label",null,[this.caseField,qi(e,"match case")]),Dn("label",null,[this.reField,qi(e,"regexp")]),Dn("label",null,[this.wordField,qi(e,"by word")]),...e.state.readOnly?[]:[Dn("br"),this.replaceField,i("replace",()=>xN(e),[qi(e,"replace")]),i("replaceAll",()=>cre(e),[qi(e,"replace all")])],Dn("button",{name:"close",onclick:()=>i8(e),"aria-label":qi(e,"close"),type:"button"},[""])])}commit(){let e=new KX({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Mf.of(e)}))}keydown(e){See(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?aO:sO)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),xN(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Mf)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(yu).top}}function qi(t,e){return t.state.phrase(e)}const Qm=30,Em=/[\s\.,:;?!]/;function hQ(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Qm),a=Math.min(r,n+Qm),o=t.state.sliceDoc(s,a);if(s!=i.from){for(let c=0;c<Qm;c++)if(!Em.test(o[c+1])&&Em.test(o[c])){o=o.slice(c);break}}if(a!=r){for(let c=o.length-1;c>o.length-Qm;c--)if(!Em.test(o[c-1])&&Em.test(o[c])){o=o.slice(0,c);break}}return we.announce.of(`${t.state.phrase("current match")}. ${o} ${t.state.phrase("on line")} ${i.number}.`)}const fre=we.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),dre=[ro,sa.low(are),fre];class fQ{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=kt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(s8(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function bN(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function pre(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=bN(e)+bN(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function dQ(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:pre(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}function r8(t,e){return n=>{for(let i=kt(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(t.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(n)}}class _N{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function ol(t){return t.selection.main.from}function s8(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const pQ=aa.define();function mre(t,e,n,i){let{main:r}=t.selection,s=n-r.from,a=i-r.from;return{...t.changeByRange(o=>{if(o!=r&&n!=i&&t.sliceDoc(o.from+s,o.from+a)!=t.sliceDoc(n,i))return{range:o};let c=t.toText(e);return{changes:{from:o.from+s,to:i==r.from?o.to:o.from+a,insert:c},range:fe.cursor(o.from+s+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SN=new WeakMap;function gre(t){if(!Array.isArray(t))return t;let e=SN.get(t);return e||SN.set(t,e=dQ(t)),e}const oO=Ke.define(),jf=Ke.define();class Ore{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=_i(e,n),r=ss(i);this.chars.push(i);let s=e.slice(n,n+r),a=s.toUpperCase();this.folded.push(_i(a==s?s.toLowerCase():a,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:a}=this;if(n.length==1){let Q=_i(e,0),k=ss(Q),T=k==e.length?0:-100;if(Q!=n[0])if(Q==i[0])T+=-200;else return null;return this.ret(T,[0,k])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=n.length,u=0;if(o<0){for(let Q=0,k=Math.min(e.length,200);Q<k&&u<c;){let T=_i(e,Q);(T==n[u]||T==i[u])&&(r[u++]=Q),Q+=ss(T)}if(u<c)return null}let f=0,d=0,m=!1,v=0,y=-1,x=-1,S=/[a-z]/.test(e),_=!0;for(let Q=0,k=Math.min(e.length,200),T=0;Q<k&&d<c;){let E=_i(e,Q);o<0&&(f<c&&E==n[f]&&(s[f++]=Q),v<c&&(E==n[v]||E==i[v]?(v==0&&(y=Q),x=Q+1,v++):v=0));let C,P=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(C=NT(E))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!Q||P==1&&S||T==0&&P!=0)&&(n[d]==E||i[d]==E&&(m=!0)?a[d++]=Q:a.length&&(_=!1)),T=P,Q+=ss(E)}return d==c&&a[0]==0&&_?this.result(-100+(m?-200:0),a,e):v==c&&y==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):v==c?this.ret(-900-e.length,[y,x]):d==c?this.result(-100+(m?-200:0)+-700+(_?0:-1100),a,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let a of n){let o=a+(this.astral?ss(_i(i,a)):1);s&&r[s-1]==a?r[s-1]=o:(r[s++]=a,r[s++]=o)}return this.ret(e-i.length,r)}}class vre{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const An=Qe.define({combine(t){return oa(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:yre,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>wN(e(i),n(i)),optionClass:(e,n)=>i=>wN(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function wN(t,e){return t?e?t+" "+e:t:e}function yre(t,e,n,i,r,s){let a=t.textDirection==Rt.RTL,o=a,c=!1,u="top",f,d,m=e.left-r.left,v=r.right-e.right,y=i.right-i.left,x=i.bottom-i.top;if(o&&m<Math.min(y,v)?o=!1:!o&&v<Math.min(y,m)&&(o=!0),y<=(o?m:v))f=Math.max(r.top,Math.min(n.top,r.bottom-x))-e.top,d=Math.min(400,o?m:v);else{c=!0,d=Math.min(400,(a?e.right:r.right-e.left)-30);let Q=r.bottom-e.bottom;Q>=x||Q>e.top?f=n.bottom-e.top:(u="bottom",f=e.bottom-n.top)}let S=(e.bottom-e.top)/s.offsetHeight,_=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${f/S}px; max-width: ${d/_}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":o?"left":"right")}}function xre(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let a=document.createElement("span");a.className="cm-completionLabel";let o=n.displayLabel||n.label,c=0;for(let u=0;u<s.length;){let f=s[u++],d=s[u++];f>c&&a.appendChild(document.createTextNode(o.slice(c,f)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(o.slice(f,d))),m.className="cm-completionMatchedText",c=d}return c<o.length&&a.appendChild(document.createTextNode(o.slice(c))),a},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function Px(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class bre{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:a}=r.open,o=e.state.facet(An);this.optionContent=xre(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=Px(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:u}=e.state.field(n).open;for(let f=c.target,d;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(d=/-(\d+)$/.exec(f.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(An).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:jf.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:a,disabled:o}=i.open;(!r.open||r.open.options!=s)&&(this.range=Px(s.length,a,e.state.facet(An).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),o!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Px(n.options.length,n.selected,this.view.state.facet(An).maxRenderedOptions),this.showOptions(n.options,e.id));let i=this.updateSelectedOption(n.selected);if(i){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:s}=r;if(!s)return;let a=typeof s=="string"?document.createTextNode(s):s(r);if(!a)return;"then"in a?a.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Gi(this.view.state,o,"completion info")):(this.addInfoPane(a,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return n&&Sre(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(An).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",a=>{a.target==r&&a.preventDefault()});let s=null;for(let a=i.from;a<i.to;a++){let{completion:o,match:c}=e[a],{section:u}=o;if(u){let m=typeof u=="string"?u:u.name;if(m!=s&&(a>i.from||i.from==0))if(s=m,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let v=r.appendChild(document.createElement("completion-section"));v.textContent=m}}const f=r.appendChild(document.createElement("li"));f.id=n+"-"+a,f.setAttribute("role","option");let d=this.optionClass(o);d&&(f.className=d);for(let m of this.optionContent){let v=m(o,this.view.state,this.view,c);v&&f.appendChild(v)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function _re(t,e){return n=>new bre(n,t,e)}function Sre(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function kN(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function wre(t,e){let n=[],i=null,r=null,s=f=>{n.push(f);let{section:d}=f.completion;if(d){i||(i=[]);let m=typeof d=="string"?d:d.name;i.some(v=>v.name==m)||i.push(typeof d=="string"?{name:m}:d)}},a=e.facet(An);for(let f of t)if(f.hasResult()){let d=f.result.getMatch;if(f.result.filter===!1)for(let m of f.result.options)s(new _N(m,f.source,d?d(m):[],1e9-n.length));else{let m=e.sliceDoc(f.from,f.to),v,y=a.filterStrict?new vre(m):new Ore(m);for(let x of f.result.options)if(v=y.match(x.label)){let S=x.displayLabel?d?d(x,v.matched):[]:v.matched,_=v.score+(x.boost||0);if(s(new _N(x,f.source,S,_)),typeof x.section=="object"&&x.section.rank==="dynamic"){let{name:Q}=x.section;r||(r=Object.create(null)),r[Q]=Math.max(_,r[Q]||-1e9)}}}}if(i){let f=Object.create(null),d=0,m=(v,y)=>(v.rank==="dynamic"&&y.rank==="dynamic"?r[y.name]-r[v.name]:0)||(typeof v.rank=="number"?v.rank:1e9)-(typeof y.rank=="number"?y.rank:1e9)||(v.name<y.name?-1:1);for(let v of i.sort(m))d-=1e5,f[v.name]=d;for(let v of n){let{section:y}=v.completion;y&&(v.score+=f[typeof y=="string"?y:y.name])}}let o=[],c=null,u=a.compareCompletions;for(let f of n.sort((d,m)=>m.score-d.score||u(d.completion,m.completion))){let d=f.completion;!c||c.label!=d.label||c.detail!=d.detail||c.type!=null&&d.type!=null&&c.type!=d.type||c.apply!=d.apply||c.boost!=d.boost?o.push(f):kN(f.completion)>kN(c)&&(o[o.length-1]=f),c=f.completion}return o}class Rc{constructor(e,n,i,r,s,a){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Rc(this.options,CN(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,a){if(r&&!a&&e.some(u=>u.isPending))return r.setDisabled();let o=wre(e,n);if(!o.length)return r&&e.some(u=>u.isPending)?r.setDisabled():null;let c=n.facet(An).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let u=r.options[r.selected].completion;for(let f=0;f<o.length;f++)if(o[f].completion==u){c=f;break}}return new Rc(o,CN(i,c),{pos:e.reduce((u,f)=>f.hasResult()?Math.min(u,f.from):u,1e8),create:Pre,above:s.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new Rc(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Rc(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class lO{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new lO(Qre,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(An),s=(i.override||n.languageDataAt("autocomplete",ol(n)).map(gre)).map(c=>(this.active.find(f=>f.source==c)||new Or(c,this.active.some(f=>f.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((c,u)=>c==this.active[u])&&(s=this.active);let a=this.open,o=e.effects.some(c=>c.is(mQ));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!kre(s,this.active)||o?a=Rc.build(s,n,this.id,a,i,o):a&&a.disabled&&!s.some(c=>c.isPending)&&(a=null),!a&&s.every(c=>!c.isPending)&&s.some(c=>c.hasResult())&&(s=s.map(c=>c.hasResult()?new Or(c.source,0):c));for(let c of e.effects)c.is(o8)&&(a=a&&a.setSelected(c.value,this.id));return s==this.active&&a==this.open?this:new lO(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Cre:Tre}}function kre(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Cre={"aria-autocomplete":"list"},Tre={};function CN(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Qre=[];function a8(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(pQ);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Or{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=a8(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new Or(r.source,0)),i&4&&r.state==0&&(r=new Or(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(oO))r=new Or(r.source,1,s.value);else if(s.is(jf))r=new Or(r.source,0);else if(s.is(mQ))for(let a of s.value)a.source==r.source&&(r=a);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ol(e.state))}}class Xc extends Or{constructor(e,n,i,r,s,a){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=a}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),o=ol(e.state);if(o>a||!r||n&2&&(ol(e.startState)==this.from||o<this.limit))return new Or(this.source,n&4?1:0);let c=e.changes.mapPos(this.limit);return Ere(r.validFor,e.state,s,a)?new Xc(this.source,this.explicit,c,r,s,a):r.update&&(r=r.update(r,s,a,new fQ(e.state,o,!1)))?new Xc(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:ol(e.state)):new Or(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Xc(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Or(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Ere(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):s8(t,!0).test(r)}const mQ=Ke.define({map(t,e){return t.map(n=>n.map(e))}}),o8=Ke.define(),Si=ei.define({create(){return lO.start()},update(t,e){return t.update(e)},provide:t=>[XI.from(t,e=>e.tooltip),we.contentAttributes.from(t,e=>e.attrs)]});function gQ(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Si).active.find(r=>r.source==e.source);return i instanceof Xc?(typeof n=="string"?t.dispatch({...mre(t.state,n,i.from,i.to),annotations:pQ.of(e.completion)}):n(t,e.completion,i.from,i.to),!0):!1}const Pre=_re(Si,gQ);function Pm(t,e="option"){return n=>{let i=n.state.field(Si,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(An).interactionDelay)return!1;let r=1,s;e=="page"&&(s=ZI(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,o=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:a-1;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),n.dispatch({effects:o8.of(o)}),!0}}const Are=t=>{let e=t.state.field(Si,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(An).interactionDelay?!1:gQ(t,e.open.options[e.open.selected])},Ax=t=>t.state.field(Si,!1)?(t.dispatch({effects:oO.of(!0)}),!0):!1,Rre=t=>{let e=t.state.field(Si,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:jf.of(null)}),!0)};class $re{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Nre=50,Mre=1e3,jre=_n.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Si).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Si),n=t.state.facet(An);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Si)==e)return;let i=t.transactions.some(s=>{let a=a8(s,n);return a&8||(s.selection||s.docChanged)&&!(a&3)});for(let s=0;s<this.running.length;s++){let a=this.running[s];if(i||a.context.abortOnDocChange&&t.docChanged||a.updates.length+t.transactions.length>Nre&&Date.now()-a.time>Mre){for(let o of a.context.abortListeners)try{o()}catch(c){Gi(this.view.state,c)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(a=>a.is(oO)))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Si);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(An).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=ol(e),i=new fQ(e,n,t.explicit,this.view),r=new $re(t,i);this.running.push(r),Promise.resolve(t.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:jf.of(null)}),Gi(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(An).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(An),i=this.view.state.field(Si);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let o=ol(s.updates.length?s.updates[0].startState:this.view.state),c=Math.min(o,s.done.from+(s.active.explicit?0:1)),u=new Xc(s.active.source,s.active.explicit,c,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:o);for(let f of s.updates)u=u.update(f,n);if(u.hasResult()){e.push(u);continue}}let a=i.active.find(o=>o.source==s.active.source);if(a&&a.isPending)if(s.done==null){let o=new Or(s.active.source,0);for(let c of s.updates)o=o.update(c,n);o.isPending||e.push(o)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:mQ.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Si,!1);if(e&&e.tooltip&&this.view.state.facet(An).closeOnBlur){let n=e.open&&ZI(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:jf.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:oO.of(!1)}),20),this.composing=0}}}),zre=typeof navigator=="object"&&/Win/.test(navigator.platform),Dre=sa.highest(we.domEventHandlers({keydown(t,e){let n=e.state.field(Si,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(zre&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find(a=>a.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&gQ(e,i),!1}})),l8=we.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Lre{constructor(e,n,i,r){this.field=e,this.line=n,this.from=i,this.to=r}}class OQ{constructor(e,n,i){this.field=e,this.from=n,this.to=i}map(e){let n=e.mapPos(this.from,-1,Gn.TrackDel),i=e.mapPos(this.to,1,Gn.TrackDel);return n==null||i==null?null:new OQ(this.field,n,i)}}class vQ{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let i=[],r=[n],s=e.doc.lineAt(n),a=/^\s*/.exec(s.text)[0];for(let c of this.lines){if(i.length){let u=a,f=/^\t*/.exec(c)[0].length;for(let d=0;d<f;d++)u+=e.facet(md);r.push(n+u.length-f),c=u+c.slice(f)}i.push(c),n+=c.length+1}let o=this.fieldPositions.map(c=>new OQ(c.field,r[c.line]+c.from,r[c.line]+c.to));return{text:i,ranges:o}}static parse(e){let n=[],i=[],r=[],s;for(let a of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(a);){let o=s[1]?+s[1]:null,c=s[2]||s[3]||"",u=-1,f=c.replace(/\\[{}]/g,d=>d[1]);for(let d=0;d<n.length;d++)(o!=null?n[d].seq==o:f&&n[d].name==f)&&(u=d);if(u<0){let d=0;for(;d<n.length&&(o==null||n[d].seq!=null&&n[d].seq<o);)d++;n.splice(d,0,{seq:o,name:f}),u=d;for(let m of r)m.field>=u&&m.field++}for(let d of r)if(d.line==i.length&&d.from>s.index){let m=s[2]?3+(s[1]||"").length:2;d.from-=m,d.to-=m}r.push(new Lre(u,i.length,s.index,s.index+f.length)),a=a.slice(0,s.index)+c+a.slice(s.index+s[0].length)}a=a.replace(/\\([{}])/g,(o,c,u)=>{for(let f of r)f.line==i.length&&f.from>u&&(f.from--,f.to--);return c}),i.push(a)}return new vQ(i,r)}}let qre=Be.widget({widget:new class extends la{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Bre=Be.mark({class:"cm-snippetField"});class xu{constructor(e,n){this.ranges=e,this.active=n,this.deco=Be.set(e.map(i=>(i.from==i.to?qre:Bre).range(i.from,i.to)),!0)}map(e){let n=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;n.push(r)}return new xu(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(i=>i.field==this.active&&i.from<=n.from&&i.to>=n.to))}}const yd=Ke.define({map(t,e){return t&&t.map(e)}}),Ire=Ke.define(),zf=ei.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(yd))return n.value;if(n.is(Ire)&&t)return new xu(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>we.decorations.from(t,e=>e?e.deco:Be.none)});function yQ(t,e){return fe.create(t.filter(n=>n.field==e).map(n=>fe.range(n.from,n.to)))}function Xre(t){let e=vQ.parse(t);return(n,i,r,s)=>{let{text:a,ranges:o}=e.instantiate(n.state,r),{main:c}=n.state.selection,u={changes:{from:r,to:s==c.from?c.to:s,insert:mt.of(a)},scrollIntoView:!0,annotations:i?[pQ.of(i),fn.userEvent.of("input.complete")]:void 0};if(o.length&&(u.selection=yQ(o,0)),o.some(f=>f.field>0)){let f=new xu(o,0),d=u.effects=[yd.of(f)];n.state.field(zf,!1)===void 0&&d.push(Ke.appendConfig.of([zf,Hre,Yre,l8]))}n.dispatch(n.state.update(u))}}function c8(t){return({state:e,dispatch:n})=>{let i=e.field(zf,!1);if(!i||t<0&&i.active==0)return!1;let r=i.active+t,s=t>0&&!i.ranges.some(a=>a.field==r+t);return n(e.update({selection:yQ(i.ranges,r),effects:yd.of(s?null:new xu(i.ranges,r)),scrollIntoView:!0})),!0}}const Zre=({state:t,dispatch:e})=>t.field(zf,!1)?(e(t.update({effects:yd.of(null)})),!0):!1,Vre=c8(1),Wre=c8(-1),Ure=[{key:"Tab",run:Vre,shift:Wre},{key:"Escape",run:Zre}],TN=Qe.define({combine(t){return t.length?t[0]:Ure}}),Hre=sa.highest(Jc.compute([TN],t=>t.facet(TN)));function Ut(t,e){return{...e,apply:Xre(t)}}const Yre=we.domEventHandlers({mousedown(t,e){let n=e.state.field(zf,!1),i;if(!n||(i=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let r=n.ranges.find(s=>s.from<=i&&s.to>=i);return!r||r.field==n.active?!1:(e.dispatch({selection:yQ(n.ranges,r.field),effects:yd.of(n.ranges.some(s=>s.field>r.field)?new xu(n.ranges,r.field):null),scrollIntoView:!0}),!0)}}),Df={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},rl=Ke.define({map(t,e){let n=e.mapPos(t,-1,Gn.TrackAfter);return n??void 0}}),xQ=new class extends lo{};xQ.startSide=1;xQ.endSide=-1;const u8=ei.define({create(){return nt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(rl)&&(t=t.update({add:[xQ.range(n.value,n.value+1)]}));return t}});function Fre(){return[Kre,u8]}const Rx="()[]{}<>";function h8(t){for(let e=0;e<Rx.length;e+=2)if(Rx.charCodeAt(e)==t)return Rx.charAt(e+1);return NT(t<128?t:t+1)}function f8(t,e){return t.languageDataAt("closeBrackets",e)[0]||Df}const Gre=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Kre=we.inputHandler.of((t,e,n,i)=>{if((Gre?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let r=t.state.selection.main;if(i.length>2||i.length==2&&ss(_i(i,0))==1||e!=r.from||n!=r.to)return!1;let s=tse(t.state,i);return s?(t.dispatch(s),!0):!1}),Jre=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=f8(t,t.selection.main.head).brackets||Df.brackets,r=null,s=t.changeByRange(a=>{if(a.empty){let o=nse(t.doc,a.head);for(let c of i)if(c==o&&t0(t.doc,a.head)==h8(_i(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:fe.cursor(a.head-c.length)}}return{range:r=a}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},ese=[{key:"Backspace",run:Jre}];function tse(t,e){let n=f8(t,t.selection.main.head),i=n.brackets||Df.brackets;for(let r of i){let s=h8(_i(r,0));if(e==r)return s==r?sse(t,r,i.indexOf(r+r+r)>-1,n):ise(t,r,s,n.before||Df.before);if(e==s&&d8(t,t.selection.main.from))return rse(t,r,s)}return null}function d8(t,e){let n=!1;return t.field(u8).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function t0(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ss(_i(n,0)))}function nse(t,e){let n=t.sliceString(e-2,e);return ss(_i(n,0))==n.length?n:n.slice(1)}function ise(t,e,n,i){let r=null,s=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:rl.of(a.to+e.length),range:fe.range(a.anchor+e.length,a.head+e.length)};let o=t0(t.doc,a.head);return!o||/\s/.test(o)||i.indexOf(o)>-1?{changes:{insert:e+n,from:a.head},effects:rl.of(a.head+e.length),range:fe.cursor(a.head+e.length)}:{range:r=a}});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function rse(t,e,n){let i=null,r=t.changeByRange(s=>s.empty&&t0(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:fe.cursor(s.head+n.length)}:i={range:s});return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function sse(t,e,n,i){let r=i.stringPrefixes||Df.stringPrefixes,s=null,a=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:rl.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let c=o.head,u=t0(t.doc,c),f;if(u==e){if(QN(t,c))return{changes:{insert:e+e,from:c},effects:rl.of(c+e.length),range:fe.cursor(c+e.length)};if(d8(t,c)){let m=n&&t.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:fe.cursor(c+m.length)}}}else{if(n&&t.sliceDoc(c-2*e.length,c)==e+e&&(f=EN(t,c-2*e.length,r))>-1&&QN(t,f))return{changes:{insert:e+e+e+e,from:c},effects:rl.of(c+e.length),range:fe.cursor(c+e.length)};if(t.charCategorizer(c)(u)!=Lt.Word&&EN(t,c,r)>-1&&!ase(t,c,e,r))return{changes:{insert:e+e,from:c},effects:rl.of(c+e.length),range:fe.cursor(c+e.length)}}return{range:s=o}});return s?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function QN(t,e){let n=kt(t).resolveInner(e+1);return n.parent&&n.from==e}function ase(t,e,n,i){let r=kt(t).resolveInner(e,-1),s=i.reduce((a,o)=>Math.max(a,o.length),0);for(let a=0;a<5;a++){let o=t.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),c=o.indexOf(n);if(!c||c>-1&&i.indexOf(o.slice(0,c))>-1){let f=r.firstChild;for(;f&&f.from==r.from&&f.to-f.from>n.length+c;){if(t.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let u=r.to==e&&r.parent;if(!u)break;r=u}return!1}function EN(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=Lt.Word)return e;for(let r of n){let s=e-r.length;if(t.sliceDoc(s,e)==r&&i(t.sliceDoc(s-1,s))!=Lt.Word)return s}return-1}function ose(t={}){return[Dre,Si,An.of(t),jre,lse,l8]}const p8=[{key:"Ctrl-Space",run:Ax},{mac:"Alt-`",run:Ax},{mac:"Alt-i",run:Ax},{key:"Escape",run:Rre},{key:"ArrowDown",run:Pm(!0)},{key:"ArrowUp",run:Pm(!1)},{key:"PageDown",run:Pm(!0,"page")},{key:"PageUp",run:Pm(!1,"page")},{key:"Enter",run:Are}],lse=sa.highest(Jc.computeN([An],t=>t.facet(An).defaultKeymap?[p8]:[]));var PN={};class cO{constructor(e,n,i,r,s,a,o,c,u,f=0,d){this.p=e,this.stack=n,this.state=i,this.reducePos=r,this.pos=s,this.score=a,this.buffer=o,this.bufferBase=c,this.curContext=u,this.lookAhead=f,this.parent=d}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let r=e.parser.context;return new cO(e,[],n,i,i,0,[],0,r?new AN(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,r=e&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),o=s.dynamicPrecedence(r);if(o&&(this.score+=o),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),u=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-u;f>=2e3&&!(!((n=this.p.parser.nodeSet.types[r])===null||n===void 0)&&n.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=f));let d=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-d;if(r<s.minRepeatTerm||e&131072){let v=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,v,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let v=this.stack[c-3];this.state=s.getGoto(v,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,n,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(n==i)return;if(a.buffer[o-2]>=n){a.buffer[o-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,n,i,r);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let o=!1;for(let c=a;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,r>4&&(r-=4)}this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=i,this.buffer[a+3]=r}}shift(e,n,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:a}=this.p;this.pos=r,!a.stateFlag(s,1)&&(r>i||n<=a.maxNode)&&(this.reducePos=r),this.pushState(s,Math.min(i,this.reducePos)),this.shiftContext(n,i),n<=a.maxNode&&this.buffer.push(n,i,r,4)}else this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4)}apply(e,n,i,r){e&65536?this.reduce(e):this.shift(e,n,i,r)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(n,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),r=e.bufferBase+n;for(;e&&r==e.bufferBase;)e=e.parent;return new cO(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new cse(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if((i&65536)==0)return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let r=[];for(let s=0,a;s<n.length;s+=2)(a=n[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&r.push(n[s],a);if(this.stack.length<120)for(let s=0;r.length<8&&s<n.length;s+=2){let a=n[s+1];r.some((o,c)=>c&1&&o==a)||r.push(n[s],a)}n=r}let i=[];for(let r=0;r<n.length&&i.length<4;r+=2){let s=n[r+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[r],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let i=n>>19,r=n&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(r,s)=>{if(!n.includes(r))return n.push(r),e.allActions(r,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-s;if(o>1){let c=a&65535,u=this.stack.length-o*3;if(u>=0&&e.getGoto(this.stack[u],c,!1)>=0)return o<<19|65536|c}}else{let o=i(a,s+1);if(o!=null)return o}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new AN(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class AN{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class cse{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=r}}class uO{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new uO(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new uO(this.stack,this.pos,this.index)}}function Fh(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let i=0,r=0;i<t.length;){let s=0;for(;;){let a=t.charCodeAt(i++),o=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,o=!0),s+=c,o)break;s*=46}n?n[r++]=s:n=new e(s)}return n}class pg{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const RN=new pg;class use{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=RN,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let a=this.ranges[--r];s-=i.from-a.to,i=a}for(;n<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let a=this.ranges[++r];s+=a.from-i.to,i=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,r;if(n>=0&&n<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=RN,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let r of this.ranges){if(r.from>=n)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,n)))}return i}}class Zc{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;m8(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}Zc.prototype.contextual=Zc.prototype.fallback=Zc.prototype.extend=!1;class hO{constructor(e,n,i){this.precTable=n,this.elseToken=i,this.data=typeof e=="string"?Fh(e):e}token(e,n){let i=e.pos,r=0;for(;;){let s=e.next<0,a=e.resolveOffset(1,1);if(m8(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||r++,a==null)break;e.reset(a,e.token)}r&&(e.reset(i,e.token),e.acceptToken(this.elseToken,r))}}hO.prototype.contextual=Zc.prototype.fallback=Zc.prototype.extend=!1;class Xn{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function m8(t,e,n,i,r,s){let a=0,o=1<<i,{dialect:c}=n.p.parser;e:for(;(o&t[a])!=0;){let u=t[a+1];for(let v=a+3;v<u;v+=2)if((t[v+1]&o)>0){let y=t[v];if(c.allows(y)&&(e.token.value==-1||e.token.value==y||hse(y,e.token.value,r,s))){e.acceptToken(y);break}}let f=e.next,d=0,m=t[a+2];if(e.next<0&&m>d&&t[u+m*3-3]==65535){a=t[u+m*3-1];continue e}for(;d<m;){let v=d+m>>1,y=u+v+(v<<1),x=t[y],S=t[y+1]||65536;if(f<x)m=v;else if(f>=S)d=v+1;else{a=t[y+2],e.advance();continue e}}break}}function $N(t,e,n){for(let i=e,r;(r=t[i])!=65535;i++)if(r==n)return i-e;return-1}function hse(t,e,n,i){let r=$N(n,i,e);return r<0||$N(n,i,t)<r}const Bi=typeof process<"u"&&PN&&/\bparse\b/.test(PN.LOG);let $x=null;function NN(t,e,n){let i=t.cursor(pt.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}let fse=class{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?NN(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?NN(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],r=this.index[n];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],a=this.start[n]+i.positions[r];if(a>e)return this.nextStart=a,null;if(s instanceof gt){if(a==e){if(a<this.safeFrom)return null;let o=a+s.length;if(o<=this.safeTo){let c=s.prop(Xe.lookAhead);if(!c||o+c<this.fragment.to)return s}}this.index[n]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+s.length}}};class dse{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new pg)}getActions(e){let n=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,a=r.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,c=0;for(let u=0;u<s.length;u++){if((1<<u&a)==0)continue;let f=s[u],d=this.tokens[u];if(!(i&&!f.fallback)&&((f.contextual||d.start!=e.pos||d.mask!=a||d.context!=o)&&(this.updateCachedToken(d,f,e),d.mask=a,d.context=o),d.lookAhead>d.end+25&&(c=Math.max(d.lookAhead,c)),d.value!=0)){let m=n;if(d.extended>-1&&(n=this.addActions(e,d.extended,d.end,n)),n=this.addActions(e,d.value,d.end,n),!f.extend&&(i=d,n>m))break}}for(;this.actions.length>n;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new pg,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new pg,{pos:i,p:r}=e;return n.start=i,n.end=Math.min(i+1,r.stream.end),n.value=i==r.stream.end?r.parser.eofTerm:0,n}updateCachedToken(e,n,i){let r=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let o=s.specializers[a](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,n,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=n,this.actions[r++]=i,r}addActions(e,n,i,r){let{state:s}=e,{parser:a}=e.p,{data:o}=a;for(let c=0;c<2;c++)for(let u=a.stateSlot(s,c?2:1);;u+=3){if(o[u]==65535)if(o[u+1]==1)u=Fs(o,u+2);else{r==0&&o[u+1]==2&&(r=this.putAction(Fs(o,u+2),n,i,r));break}o[u]==n&&(r=this.putAction(Fs(o,u+1),n,i,r))}return r}}class pse{constructor(e,n,i,r){this.parser=e,this.input=n,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new use(n,r),this.tokens=new dse(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[cO.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new fse(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let o=e[a];for(;;){if(this.tokens.mainToken=null,o.pos>n)i.push(o);else{if(this.advanceStack(o,i,e))continue;{r||(r=[],s=[]),r.push(o);let c=this.tokens.getMainToken(o);s.push(c.value,c.end)}}break}}if(!i.length){let a=r&&gse(r);if(a)return Bi&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Bi&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&r){let a=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(a)return Bi&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((o,c)=>c.score-o.score);i.length>a;)i.pop();i.some(o=>o.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let o=i[a];for(let c=a+1;c<i.length;c++){let u=i[c];if(o.sameState(u)||o.buffer.length>500&&u.buffer.length>500)if((o.score-u.score||o.buffer.length-u.buffer.length)>0)i.splice(c--,1);else{i.splice(a--,1);continue e}}}i.length>12&&(i.sort((a,o)=>o.score-a.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let r=e.pos,{parser:s}=this,a=Bi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,f=u?e.curContext.hash:0;for(let d=this.fragments.nodeAt(r);d;){let m=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(e.state,d.type.id):-1;if(m>-1&&d.length&&(!u||(d.prop(Xe.contextHash)||0)==f))return e.useNode(d,m),Bi&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof gt)||d.children.length==0||d.positions[0]>0)break;let v=d.children[0];if(v instanceof gt&&d.positions[0]==0)d=v;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),Bi&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let u=0;u<c.length;){let f=c[u++],d=c[u++],m=c[u++],v=u==c.length||!i,y=v?e:e.split(),x=this.tokens.mainToken;if(y.apply(f,d,x?x.start:y.pos,m),Bi&&console.log(a+this.stackID(y)+` (via ${(f&65536)==0?"shift":`reduce of ${s.getName(f&65535)}`} for ${s.getName(d)} @ ${r}${y==e?"":", split"})`),v)return!0;y.pos>r?n.push(y):i.push(y)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return MN(e,n),!0}}runRecovery(e,n,i){let r=null,s=!1;for(let a=0;a<e.length;a++){let o=e[a],c=n[a<<1],u=n[(a<<1)+1],f=Bi?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),Bi&&console.log(f+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let d=o.split(),m=f;for(let v=0;v<10&&d.forceReduce()&&(Bi&&console.log(m+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,i));v++)Bi&&(m=this.stackID(d)+" -> ");for(let v of o.recoverByInsert(c))Bi&&console.log(f+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,i);this.stream.end>o.pos?(u==o.pos&&(u++,c=0),o.recoverByDelete(c,u),Bi&&console.log(f+this.stackID(o)+` (via recover-delete ${this.parser.getName(c)})`),MN(o,i)):(!r||r.score<d.score)&&(r=d)}return r}stackToTree(e){return e.close(),gt.build({buffer:uO.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=($x||($x=new WeakMap)).get(e);return n||$x.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function MN(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class mse{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Nx=t=>t;class bQ{constructor(e){this.start=e.start,this.shift=e.shift||Nx,this.reduce=e.reduce||Nx,this.reuse=e.reuse||Nx,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Oo extends eQ{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let o=0;o<e.repeatNodeCount;o++)n.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),r=[];for(let o=0;o<n.length;o++)r.push([]);function s(o,c,u){r[o].push([c,c.deserialize(String(u))])}if(e.nodeProps)for(let o of e.nodeProps){let c=o[0];typeof c=="string"&&(c=Xe[c]);for(let u=1;u<o.length;){let f=o[u++];if(f>=0)s(f,c,o[u++]);else{let d=o[u+-f];for(let m=-f;m>0;m--)s(o[u++],c,d);u++}}}this.nodeSet=new pd(n.map((o,c)=>Sn.define({name:c>=this.minRepeatTerm?void 0:o,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=HI;let a=Fh(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(jN),this.states=Fh(e.states,Uint32Array),this.data=Fh(e.stateData),this.goto=Fh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Zc(a,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let r=new pse(this,e,n,i);for(let s of this.wrappers)r=s(r,e,n,i);return r}getGoto(e,n,i=!1){let r=this.goto;if(n>=r[0])return-1;for(let s=r[n+1];;){let a=r[s++],o=a&1,c=r[s++];if(o&&i)return c;for(let u=s+(a>>1);s<u;s++)if(r[s]==e)return c;if(o)return-1}}hasAction(e,n){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),a;;s+=3){if((a=i[s])==65535)if(i[s+1]==1)a=i[s=Fs(i,s+2)];else{if(i[s+1]==2)return Fs(i,s+2);break}if(a==n||a==0)return Fs(i,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),r=i?n(i):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Fs(this.data,s+2);else break;r=n(Fs(this.data,s+1))}return r}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Fs(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];n.some((s,a)=>a&1&&s==r)||n.push(this.data[i],r)}}return n}configure(e){let n=Object.assign(Object.create(Oo.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(o=>o.from==i.external);if(!s)return i;let a=Object.assign(Object.assign({},i),{external:s.to});return n.specializers[r]=jN(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let s of e.split(" ")){let a=n.indexOf(s);a>=0&&(i[a]=!0)}let r=null;for(let s=0;s<n.length;s++)if(!i[s])for(let a=this.dialects[n[s]],o;(o=this.data[a++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[o]=1;return new mse(e,i,r)}static deserialize(e){return new Oo(e)}}function Fs(t,e){return t[e]|t[e+1]<<16}function gse(t){let e=null;for(let n of t){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function jN(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}const Ose=316,vse=317,zN=1,yse=2,xse=3,bse=4,_se=318,Sse=320,wse=321,kse=5,Cse=6,Tse=0,sC=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],g8=125,Qse=59,aC=47,Ese=42,Pse=43,Ase=45,Rse=60,$se=44,Nse=63,Mse=46,jse=91,zse=new bQ({start:!1,shift(t,e){return e==kse||e==Cse||e==Sse?t:e==wse},strict:!1}),Dse=new Xn((t,e)=>{let{next:n}=t;(n==g8||n==-1||e.context)&&t.acceptToken(_se)},{contextual:!0,fallback:!0}),Lse=new Xn((t,e)=>{let{next:n}=t,i;sC.indexOf(n)>-1||n==aC&&((i=t.peek(1))==aC||i==Ese)||n!=g8&&n!=Qse&&n!=-1&&!e.context&&t.acceptToken(Ose)},{contextual:!0}),qse=new Xn((t,e)=>{t.next==jse&&!e.context&&t.acceptToken(vse)},{contextual:!0}),Bse=new Xn((t,e)=>{let{next:n}=t;if(n==Pse||n==Ase){if(t.advance(),n==t.next){t.advance();let i=!e.context&&e.canShift(zN);t.acceptToken(i?zN:yse)}}else n==Nse&&t.peek(1)==Mse&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(xse))},{contextual:!0});function Mx(t,e){return t>=65&&t<=90||t>=97&&t<=122||t==95||t>=192||!e&&t>=48&&t<=57}const Ise=new Xn((t,e)=>{if(t.next!=Rse||!e.dialectEnabled(Tse)||(t.advance(),t.next==aC))return;let n=0;for(;sC.indexOf(t.next)>-1;)t.advance(),n++;if(Mx(t.next,!0)){for(t.advance(),n++;Mx(t.next,!1);)t.advance(),n++;for(;sC.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==$se)return;for(let i=0;;i++){if(i==7){if(!Mx(t.next,!0))return;break}if(t.next!="extends".charCodeAt(i))break;t.advance(),n++}}t.acceptToken(bse,-n)}),Xse=yo({"get set async static":Y.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Y.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Y.operatorKeyword,"let var const using function class extends":Y.definitionKeyword,"import export from":Y.moduleKeyword,"with debugger new":Y.keyword,TemplateString:Y.special(Y.string),super:Y.atom,BooleanLiteral:Y.bool,this:Y.self,null:Y.null,Star:Y.modifier,VariableName:Y.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Y.function(Y.variableName),VariableDefinition:Y.definition(Y.variableName),Label:Y.labelName,PropertyName:Y.propertyName,PrivatePropertyName:Y.special(Y.propertyName),"CallExpression/MemberExpression/PropertyName":Y.function(Y.propertyName),"FunctionDeclaration/VariableDefinition":Y.function(Y.definition(Y.variableName)),"ClassDeclaration/VariableDefinition":Y.definition(Y.className),"NewExpression/VariableName":Y.className,PropertyDefinition:Y.definition(Y.propertyName),PrivatePropertyDefinition:Y.definition(Y.special(Y.propertyName)),UpdateOp:Y.updateOperator,"LineComment Hashbang":Y.lineComment,BlockComment:Y.blockComment,Number:Y.number,String:Y.string,Escape:Y.escape,ArithOp:Y.arithmeticOperator,LogicOp:Y.logicOperator,BitOp:Y.bitwiseOperator,CompareOp:Y.compareOperator,RegExp:Y.regexp,Equals:Y.definitionOperator,Arrow:Y.function(Y.punctuation),": Spread":Y.punctuation,"( )":Y.paren,"[ ]":Y.squareBracket,"{ }":Y.brace,"InterpolationStart InterpolationEnd":Y.special(Y.brace),".":Y.derefOperator,", ;":Y.separator,"@":Y.meta,TypeName:Y.typeName,TypeDefinition:Y.definition(Y.typeName),"type enum interface implements namespace module declare":Y.definitionKeyword,"abstract global Privacy readonly override":Y.modifier,"is keyof unique infer asserts":Y.operatorKeyword,JSXAttributeValue:Y.attributeValue,JSXText:Y.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Y.angleBracket,"JSXIdentifier JSXNameSpacedName":Y.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Y.attributeName,"JSXBuiltin/JSXIdentifier":Y.standard(Y.tagName)}),Zse={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},Vse={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},Wse={__proto__:null,"<":193},Use=Oo.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:zse,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[Xse],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[Lse,qse,Bse,Ise,2,3,4,5,6,7,8,9,10,11,12,13,14,Dse,new hO("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new hO("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:t=>Zse[t]||-1},{term:343,get:t=>Vse[t]||-1},{term:95,get:t=>Wse[t]||-1}],tokenPrec:15201}),O8=[Ut("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ut("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ut("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ut("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ut("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ut(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ut("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ut(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ut(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ut('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ut('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Hse=O8.concat([Ut("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Ut("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Ut("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),DN=new JT,v8=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Ph(t){return(e,n)=>{let i=e.node.getChild("VariableDefinition");return i&&n(i,t),!0}}const Yse=["FunctionDeclaration"],Fse={FunctionDeclaration:Ph("function"),ClassDeclaration:Ph("class"),ClassExpression:()=>!0,EnumDeclaration:Ph("constant"),TypeAliasDeclaration:Ph("type"),NamespaceDeclaration:Ph("namespace"),VariableDefinition(t,e){t.matchContext(Yse)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function y8(t,e){let n=DN.get(e);if(n)return n;let i=[],r=!0;function s(a,o){let c=t.sliceString(a.from,a.to);i.push({label:c,type:o})}return e.cursor(pt.IncludeAnonymous).iterate(a=>{if(r)r=!1;else if(a.name){let o=Fse[a.name];if(o&&o(a,s)||v8.has(a.name))return!1}else if(a.to-a.from>8192){for(let o of y8(t,a.node))i.push(o);return!1}}),DN.set(e,i),i}const LN=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,x8=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function Gse(t){let e=kt(t.state).resolveInner(t.pos,-1);if(x8.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&LN.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let i=[];for(let r=e;r;r=r.parent)v8.has(r.name)&&(i=i.concat(y8(t.state.doc,r)));return{options:i,from:n?e.from:t.pos,validFor:LN}}const fs=mo.define({name:"javascript",parser:Use.configure({props:[Tl.add({IfStatement:Bc({except:/^\s*({|else\b)/}),TryStatement:Bc({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:Yte,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:i?1:2)*t.unit},Block:dg({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":Bc({except:/^\s*{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),xo.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":HO,BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),b8={test:t=>/^JSX/.test(t.name),facet:tQ({commentTokens:{block:{open:"{/*",close:"*/}"}}})},_8=fs.configure({dialect:"ts"},"typescript"),S8=fs.configure({dialect:"jsx",props:[nQ.add(t=>t.isTop?[b8]:void 0)]}),w8=fs.configure({dialect:"jsx ts",props:[nQ.add(t=>t.isTop?[b8]:void 0)]},"typescript");let k8=t=>({label:t,type:"keyword"});const C8="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(k8),Kse=C8.concat(["declare","implements","private","protected","public"].map(k8));function oC(t={}){let e=t.jsx?t.typescript?w8:S8:t.typescript?_8:fs,n=t.typescript?Hse.concat(Kse):O8.concat(C8);return new gl(e,[fs.data.of({autocomplete:r8(x8,dQ(n))}),fs.data.of({autocomplete:Gse}),t.jsx?tae:[]])}function Jse(t){for(;;){if(t.name=="JSXOpenTag"||t.name=="JSXSelfClosingTag"||t.name=="JSXFragmentTag")return t;if(t.name=="JSXEscape"||!t.parent)return null;t=t.parent}}function qN(t,e,n=t.length){for(let i=e?.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return t.sliceString(i.from,Math.min(i.to,n));return""}const eae=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),tae=we.inputHandler.of((t,e,n,i,r)=>{if((eae?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||i!=">"&&i!="/"||!fs.isActiveAt(t.state,e,-1))return!1;let s=r(),{state:a}=s,o=a.changeByRange(c=>{var u;let{head:f}=c,d=kt(a).resolveInner(f-1,-1),m;if(d.name=="JSXStartTag"&&(d=d.parent),!(a.doc.sliceString(f-1,f)!=i||d.name=="JSXAttributeValue"&&d.to>f)){if(i==">"&&d.name=="JSXFragmentTag")return{range:c,changes:{from:f,insert:"</>"}};if(i=="/"&&d.name=="JSXStartCloseTag"){let v=d.parent,y=v.parent;if(y&&v.from==f-2&&((m=qN(a.doc,y.firstChild,f))||((u=y.firstChild)===null||u===void 0?void 0:u.name)=="JSXFragmentTag")){let x=`${m}>`;return{range:fe.cursor(f+x.length,-1),changes:{from:f,insert:x}}}}else if(i==">"){let v=Jse(d);if(v&&v.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(a.doc.sliceString(f,f+2))&&(m=qN(a.doc,v,f)))return{range:c,changes:{from:f,insert:`</${m}>`}}}}return{range:c}});return o.changes.empty?!1:(t.dispatch([s,a.update(o,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),nae=1,T8=194,Q8=195,iae=196,BN=197,rae=198,sae=199,aae=200,oae=2,E8=3,IN=201,lae=24,cae=25,uae=49,hae=50,fae=55,dae=56,pae=57,mae=59,gae=60,Oae=61,vae=62,yae=63,xae=65,bae=238,_ae=71,Sae=241,wae=242,kae=243,Cae=244,Tae=245,Qae=246,Eae=247,Pae=248,P8=72,Aae=249,Rae=250,$ae=251,Nae=252,Mae=253,jae=254,zae=255,Dae=256,Lae=73,qae=77,Bae=263,Iae=112,Xae=130,Zae=151,Vae=152,Wae=155,vl=10,Lf=13,_Q=32,n0=9,SQ=35,Uae=40,Hae=46,lC=123,XN=125,A8=39,R8=34,ZN=92,Yae=111,Fae=120,Gae=78,Kae=117,Jae=85,eoe=new Set([cae,uae,hae,Bae,xae,Xae,dae,pae,bae,vae,yae,P8,Lae,qae,gae,Oae,Zae,Vae,Wae,Iae]);function jx(t){return t==vl||t==Lf}function zx(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}const toe=new Xn((t,e)=>{let n;if(t.next<0)t.acceptToken(sae);else if(e.context.flags&mg)jx(t.next)&&t.acceptToken(rae,1);else if(((n=t.peek(-1))<0||jx(n))&&e.canShift(BN)){let i=0;for(;t.next==_Q||t.next==n0;)t.advance(),i++;(t.next==vl||t.next==Lf||t.next==SQ)&&t.acceptToken(BN,-i)}else jx(t.next)&&t.acceptToken(iae,1)},{contextual:!0}),noe=new Xn((t,e)=>{let n=e.context;if(n.flags)return;let i=t.peek(-1);if(i==vl||i==Lf){let r=0,s=0;for(;;){if(t.next==_Q)r++;else if(t.next==n0)r+=8-r%8;else break;t.advance(),s++}r!=n.indent&&t.next!=vl&&t.next!=Lf&&t.next!=SQ&&(r<n.indent?t.acceptToken(Q8,-s):t.acceptToken(T8))}}),mg=1,$8=2,Vs=4,Ws=8,Us=16,Hs=32;function gg(t,e,n){this.parent=t,this.indent=e,this.flags=n,this.hash=(t?t.hash+t.hash<<8:0)+e+(e<<4)+n+(n<<6)}const ioe=new gg(null,0,0);function roe(t){let e=0;for(let n=0;n<t.length;n++)e+=t.charCodeAt(n)==n0?8-e%8:1;return e}const VN=new Map([[Sae,0],[wae,Vs],[kae,Ws],[Cae,Ws|Vs],[Tae,Us],[Qae,Us|Vs],[Eae,Us|Ws],[Pae,Us|Ws|Vs],[Aae,Hs],[Rae,Hs|Vs],[$ae,Hs|Ws],[Nae,Hs|Ws|Vs],[Mae,Hs|Us],[jae,Hs|Us|Vs],[zae,Hs|Us|Ws],[Dae,Hs|Us|Ws|Vs]].map(([t,e])=>[t,e|$8])),soe=new bQ({start:ioe,reduce(t,e,n,i){return t.flags&mg&&eoe.has(e)||(e==_ae||e==P8)&&t.flags&$8?t.parent:t},shift(t,e,n,i){return e==T8?new gg(t,roe(i.read(i.pos,n.pos)),0):e==Q8?t.parent:e==lae||e==fae||e==mae||e==E8?new gg(t,0,mg):VN.has(e)?new gg(t,0,VN.get(e)|t.flags&mg):t},hash(t){return t.hash}}),aoe=new Xn(t=>{for(let e=0;e<5;e++){if(t.next!="print".charCodeAt(e))return;t.advance()}if(!/\w/.test(String.fromCharCode(t.next)))for(let e=0;;e++){let n=t.peek(e);if(!(n==_Q||n==n0)){n!=Uae&&n!=Hae&&n!=vl&&n!=Lf&&n!=SQ&&t.acceptToken(nae);return}}}),ooe=new Xn((t,e)=>{let{flags:n}=e.context,i=n&Vs?R8:A8,r=(n&Ws)>0,s=!(n&Us),a=(n&Hs)>0,o=t.pos;for(;!(t.next<0);)if(a&&t.next==lC)if(t.peek(1)==lC)t.advance(2);else{if(t.pos==o){t.acceptToken(E8,1);return}break}else if(s&&t.next==ZN){if(t.pos==o){t.advance();let c=t.next;c>=0&&(t.advance(),loe(t,c)),t.acceptToken(oae);return}break}else if(t.next==ZN&&!s&&t.peek(1)>-1)t.advance(2);else if(t.next==i&&(!r||t.peek(1)==i&&t.peek(2)==i)){if(t.pos==o){t.acceptToken(IN,r?3:1);return}break}else if(t.next==vl){if(r)t.advance();else if(t.pos==o){t.acceptToken(IN);return}break}else t.advance();t.pos>o&&t.acceptToken(aae)});function loe(t,e){if(e==Yae)for(let n=0;n<2&&t.next>=48&&t.next<=55;n++)t.advance();else if(e==Fae)for(let n=0;n<2&&zx(t.next);n++)t.advance();else if(e==Kae)for(let n=0;n<4&&zx(t.next);n++)t.advance();else if(e==Jae)for(let n=0;n<8&&zx(t.next);n++)t.advance();else if(e==Gae&&t.next==lC){for(t.advance();t.next>=0&&t.next!=XN&&t.next!=A8&&t.next!=R8&&t.next!=vl;)t.advance();t.next==XN&&t.advance()}}const coe=yo({'async "*" "**" FormatConversion FormatSpec':Y.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":Y.controlKeyword,"in not and or is del":Y.operatorKeyword,"from def class global nonlocal lambda":Y.definitionKeyword,import:Y.moduleKeyword,"with as print":Y.keyword,Boolean:Y.bool,None:Y.null,VariableName:Y.variableName,"CallExpression/VariableName":Y.function(Y.variableName),"FunctionDefinition/VariableName":Y.function(Y.definition(Y.variableName)),"ClassDefinition/VariableName":Y.definition(Y.className),PropertyName:Y.propertyName,"CallExpression/MemberExpression/PropertyName":Y.function(Y.propertyName),Comment:Y.lineComment,Number:Y.number,String:Y.string,FormatString:Y.special(Y.string),Escape:Y.escape,UpdateOp:Y.updateOperator,"ArithOp!":Y.arithmeticOperator,BitOp:Y.bitwiseOperator,CompareOp:Y.compareOperator,AssignOp:Y.definitionOperator,Ellipsis:Y.punctuation,At:Y.meta,"( )":Y.paren,"[ ]":Y.squareBracket,"{ }":Y.brace,".":Y.derefOperator,", ;":Y.separator}),uoe={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},hoe=Oo.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:soe,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[coe],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[aoe,noe,toe,ooe,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:t=>uoe[t]||-1}],tokenPrec:7668}),WN=new JT,N8=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function Am(t){return(e,n,i)=>{if(i)return!1;let r=e.node.getChild("VariableName");return r&&n(r,t),!0}}const foe={FunctionDefinition:Am("function"),ClassDefinition:Am("class"),ForStatement(t,e,n){if(n){for(let i=t.node.firstChild;i;i=i.nextSibling)if(i.name=="VariableName")e(i,"variable");else if(i.name=="in")break}},ImportStatement(t,e){var n,i;let{node:r}=t,s=((n=r.firstChild)===null||n===void 0?void 0:n.name)=="from";for(let a=r.getChild("import");a;a=a.nextSibling)a.name=="VariableName"&&((i=a.nextSibling)===null||i===void 0?void 0:i.name)!="as"&&e(a,s?"variable":"namespace")},AssignStatement(t,e){for(let n=t.node.firstChild;n;n=n.nextSibling)if(n.name=="VariableName")e(n,"variable");else if(n.name==":"||n.name=="AssignOp")break},ParamList(t,e){for(let n=null,i=t.node.firstChild;i;i=i.nextSibling)i.name=="VariableName"&&(!n||!/\*|AssignOp/.test(n.name))&&e(i,"variable"),n=i},CapturePattern:Am("variable"),AsPattern:Am("variable"),__proto__:null};function M8(t,e){let n=WN.get(e);if(n)return n;let i=[],r=!0;function s(a,o){let c=t.sliceString(a.from,a.to);i.push({label:c,type:o})}return e.cursor(pt.IncludeAnonymous).iterate(a=>{if(a.name){let o=foe[a.name];if(o&&o(a,s,r)||!r&&N8.has(a.name))return!1;r=!1}else if(a.to-a.from>8192){for(let o of M8(t,a.node))i.push(o);return!1}}),WN.set(e,i),i}const UN=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,j8=["String","FormatString","Comment","PropertyName"];function doe(t){let e=kt(t.state).resolveInner(t.pos,-1);if(j8.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&UN.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let i=[];for(let r=e;r;r=r.parent)N8.has(r.name)&&(i=i.concat(M8(t.state.doc,r)));return{options:i,from:n?e.from:t.pos,validFor:UN}}const poe=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(t=>({label:t,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(t=>({label:t,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(t=>({label:t,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(t=>({label:t,type:"function"}))),moe=[Ut("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Ut("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Ut("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Ut("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Ut(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Ut("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Ut("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Ut("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Ut("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],goe=r8(j8,dQ(poe.concat(moe)));function Dx(t){let{node:e,pos:n}=t,i=t.lineIndent(n,-1),r=null;for(;;){let s=e.childBefore(n);if(s)if(s.name=="Comment")n=s.from;else if(s.name=="Body"||s.name=="MatchBody")t.baseIndentFor(s)+t.unit<=i&&(r=s),e=s;else if(s.name=="MatchClause")e=s;else if(s.type.is("Statement"))e=s;else break;else break}return r}function Lx(t,e){let n=t.baseIndentFor(e),i=t.lineAt(t.pos,-1),r=i.from+i.text.length;return/^\s*($|#)/.test(i.text)&&t.node.to<r+100&&!/\S/.test(t.state.sliceDoc(r,t.node.to))&&t.lineIndent(t.pos,-1)<=n||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(t.textAfter)&&t.lineIndent(t.pos,-1)>n?null:n+t.unit}const qx=mo.define({name:"python",parser:hoe.configure({props:[Tl.add({Body:t=>{var e;let n=/^\s*(#|$)/.test(t.textAfter)&&Dx(t)||t.node;return(e=Lx(t,n))!==null&&e!==void 0?e:t.continue()},MatchBody:t=>{var e;let n=Dx(t);return(e=Lx(t,n||t.node))!==null&&e!==void 0?e:t.continue()},IfStatement:t=>/^\s*(else:|elif )/.test(t.textAfter)?t.baseIndent:t.continue(),"ForStatement WhileStatement":t=>/^\s*else:/.test(t.textAfter)?t.baseIndent:t.continue(),TryStatement:t=>/^\s*(except[ :]|finally:|else:)/.test(t.textAfter)?t.baseIndent:t.continue(),MatchStatement:t=>/^\s*case /.test(t.textAfter)?t.baseIndent+t.unit:t.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":dg({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":dg({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":dg({closing:"]"}),MemberExpression:t=>t.baseIndent+t.unit,"String FormatString":()=>null,Script:t=>{var e;let n=Dx(t);return(e=n&&Lx(t,n))!==null&&e!==void 0?e:t.continue()}}),xo.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":HO,Body:(t,e)=>({from:t.from+1,to:t.to-(t.to==e.doc.length?0:1)}),"String FormatString":(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});function Ooe(){return new gl(qx,[qx.data.of({autocomplete:doe}),qx.data.of({autocomplete:goe})])}const voe=yo({String:Y.string,Number:Y.number,"True False":Y.bool,PropertyName:Y.propertyName,Null:Y.null,", :":Y.separator,"[ ]":Y.squareBracket,"{ }":Y.brace}),yoe=Oo.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[voe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),xoe=mo.define({name:"json",parser:yoe.configure({props:[Tl.add({Object:Bc({except:/^\s*\}/}),Array:Bc({except:/^\s*\]/})}),xo.add({"Object Array":HO})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function boe(){return new gl(xoe)}const _oe=55,Soe=1,woe=56,koe=2,Coe=57,Toe=3,HN=4,Qoe=5,wQ=6,z8=7,D8=8,L8=9,q8=10,Eoe=11,Poe=12,Aoe=13,Bx=58,Roe=14,$oe=15,YN=59,B8=21,Noe=23,I8=24,Moe=25,cC=27,X8=28,joe=29,zoe=32,Doe=35,Loe=37,qoe=38,Boe=0,Ioe=1,Xoe={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Zoe={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},FN={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Voe(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}let GN=null,KN=null,JN=0;function uC(t,e){let n=t.pos+e;if(JN==n&&KN==t)return GN;let i=t.peek(e),r="";for(;Voe(i);)r+=String.fromCharCode(i),i=t.peek(++e);return KN=t,JN=n,GN=r?r.toLowerCase():i==Woe||i==Uoe?void 0:null}const Z8=60,fO=62,kQ=47,Woe=63,Uoe=33,Hoe=45;function eM(t,e){this.name=t,this.parent=e}const Yoe=[wQ,q8,z8,D8,L8],Foe=new bQ({start:null,shift(t,e,n,i){return Yoe.indexOf(e)>-1?new eM(uC(i,1)||"",t):t},reduce(t,e){return e==B8&&t?t.parent:t},reuse(t,e,n,i){let r=e.type.id;return r==wQ||r==Loe?new eM(uC(i,1)||"",t):t},strict:!1}),Goe=new Xn((t,e)=>{if(t.next!=Z8){t.next<0&&e.context&&t.acceptToken(Bx);return}t.advance();let n=t.next==kQ;n&&t.advance();let i=uC(t,0);if(i===void 0)return;if(!i)return t.acceptToken(n?$oe:Roe);let r=e.context?e.context.name:null;if(n){if(i==r)return t.acceptToken(Eoe);if(r&&Zoe[r])return t.acceptToken(Bx,-2);if(e.dialectEnabled(Boe))return t.acceptToken(Poe);for(let s=e.context;s;s=s.parent)if(s.name==i)return;t.acceptToken(Aoe)}else{if(i=="script")return t.acceptToken(z8);if(i=="style")return t.acceptToken(D8);if(i=="textarea")return t.acceptToken(L8);if(Xoe.hasOwnProperty(i))return t.acceptToken(q8);r&&FN[r]&&FN[r][i]?t.acceptToken(Bx,-1):t.acceptToken(wQ)}},{contextual:!0}),Koe=new Xn(t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(YN);break}if(t.next==Hoe)e++;else if(t.next==fO&&e>=2){n>=3&&t.acceptToken(YN,-2);break}else e=0;t.advance()}});function Joe(t){for(;t;t=t.parent)if(t.name=="svg"||t.name=="math")return!0;return!1}const ele=new Xn((t,e)=>{if(t.next==kQ&&t.peek(1)==fO){let n=e.dialectEnabled(Ioe)||Joe(e.context);t.acceptToken(n?Qoe:HN,2)}else t.next==fO&&t.acceptToken(HN,1)});function CQ(t,e,n){let i=2+t.length;return new Xn(r=>{for(let s=0,a=0,o=0;;o++){if(r.next<0){o&&r.acceptToken(e);break}if(s==0&&r.next==Z8||s==1&&r.next==kQ||s>=2&&s<i&&r.next==t.charCodeAt(s-2))s++,a++;else if(s==i&&r.next==fO){o>a?r.acceptToken(e,-a):r.acceptToken(n,-(a-2));break}else if((r.next==10||r.next==13)&&o){r.acceptToken(e,1);break}else s=a=0;r.advance()}})}const tle=CQ("script",_oe,Soe),nle=CQ("style",woe,koe),ile=CQ("textarea",Coe,Toe),rle=yo({"Text RawText IncompleteTag IncompleteCloseTag":Y.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":Y.angleBracket,TagName:Y.tagName,"MismatchedCloseTag/TagName":[Y.tagName,Y.invalid],AttributeName:Y.attributeName,"AttributeValue UnquotedAttributeValue":Y.attributeValue,Is:Y.definitionOperator,"EntityReference CharacterReference":Y.character,Comment:Y.blockComment,ProcessingInst:Y.processingInstruction,DoctypeDecl:Y.documentMeta}),sle=Oo.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:Foe,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[rle],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[tle,nle,ile,ele,Goe,Koe,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function V8(t,e){let n=Object.create(null);for(let i of t.getChildren(I8)){let r=i.getChild(Moe),s=i.getChild(cC)||i.getChild(X8);r&&(n[e.read(r.from,r.to)]=s?s.type.id==cC?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return n}function tM(t,e){let n=t.getChild(Noe);return n?e.read(n.from,n.to):" "}function Ix(t,e,n){let i;for(let r of n)if(!r.attrs||r.attrs(i||(i=V8(t.node.parent.firstChild,e))))return{parser:r.parser,bracketed:!0};return null}function W8(t=[],e=[]){let n=[],i=[],r=[],s=[];for(let o of t)(o.tag=="script"?n:o.tag=="style"?i:o.tag=="textarea"?r:s).push(o);let a=e.length?Object.create(null):null;for(let o of e)(a[o.name]||(a[o.name]=[])).push(o);return KI((o,c)=>{let u=o.type.id;if(u==joe)return Ix(o,c,n);if(u==zoe)return Ix(o,c,i);if(u==Doe)return Ix(o,c,r);if(u==B8&&s.length){let f=o.node,d=f.firstChild,m=d&&tM(d,c),v;if(m){for(let y of s)if(y.tag==m&&(!y.attrs||y.attrs(v||(v=V8(d,c))))){let x=f.lastChild,S=x.type.id==qoe?x.from:f.to;if(S>d.to)return{parser:y.parser,overlay:[{from:d.to,to:S}]}}}}if(a&&u==I8){let f=o.node,d;if(d=f.firstChild){let m=a[c.read(d.from,d.to)];if(m)for(let v of m){if(v.tagName&&v.tagName!=tM(f.parent,c))continue;let y=f.lastChild;if(y.type.id==cC){let x=y.from+1,S=y.lastChild,_=y.to-(S&&S.isError?0:1);if(_>x)return{parser:v.parser,overlay:[{from:x,to:_}],bracketed:!0}}else if(y.type.id==X8)return{parser:v.parser,overlay:[{from:y.from,to:y.to}]}}}}return null})}const ale=122,nM=1,ole=123,lle=124,U8=2,cle=125,ule=3,hle=4,H8=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],fle=58,dle=40,Y8=95,ple=91,Og=45,mle=46,gle=35,Ole=37,vle=38,yle=92,xle=10,ble=42;function qf(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function TQ(t){return t>=48&&t<=57}function iM(t){return TQ(t)||t>=97&&t<=102||t>=65&&t<=70}const F8=(t,e,n)=>(i,r)=>{for(let s=!1,a=0,o=0;;o++){let{next:c}=i;if(qf(c)||c==Og||c==Y8||s&&TQ(c))!s&&(c!=Og||o>0)&&(s=!0),a===o&&c==Og&&a++,i.advance();else if(c==yle&&i.peek(1)!=xle){if(i.advance(),iM(i.next)){do i.advance();while(iM(i.next));i.next==32&&i.advance()}else i.next>-1&&i.advance();s=!0}else{s&&i.acceptToken(a==2&&r.canShift(U8)?e:c==dle?n:t);break}}},_le=new Xn(F8(ole,U8,lle)),Sle=new Xn(F8(cle,ule,hle)),wle=new Xn(t=>{if(H8.includes(t.peek(-1))){let{next:e}=t;(qf(e)||e==Y8||e==gle||e==mle||e==ble||e==ple||e==fle&&qf(t.peek(1))||e==Og||e==vle)&&t.acceptToken(ale)}}),kle=new Xn(t=>{if(!H8.includes(t.peek(-1))){let{next:e}=t;if(e==Ole&&(t.advance(),t.acceptToken(nM)),qf(e)){do t.advance();while(qf(t.next)||TQ(t.next));t.acceptToken(nM)}}}),Cle=yo({"AtKeyword import charset namespace keyframes media supports":Y.definitionKeyword,"from to selector":Y.keyword,NamespaceName:Y.namespace,KeyframeName:Y.labelName,KeyframeRangeName:Y.operatorKeyword,TagName:Y.tagName,ClassName:Y.className,PseudoClassName:Y.constant(Y.className),IdName:Y.labelName,"FeatureName PropertyName":Y.propertyName,AttributeName:Y.attributeName,NumberLiteral:Y.number,KeywordQuery:Y.keyword,UnaryQueryOp:Y.operatorKeyword,"CallTag ValueName":Y.atom,VariableName:Y.variableName,Callee:Y.operatorKeyword,Unit:Y.unit,"UniversalSelector NestingSelector":Y.definitionOperator,"MatchOp CompareOp":Y.compareOperator,"ChildOp SiblingOp, LogicOp":Y.logicOperator,BinOp:Y.arithmeticOperator,Important:Y.modifier,Comment:Y.blockComment,ColorLiteral:Y.color,"ParenthesizedContent StringLiteral":Y.string,":":Y.punctuation,"PseudoOp #":Y.derefOperator,"; ,":Y.separator,"( )":Y.paren,"[ ]":Y.squareBracket,"{ }":Y.brace}),Tle={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},Qle={__proto__:null,or:98,and:98,not:106,only:106,layer:170},Ele={__proto__:null,selector:112,layer:166},Ple={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},Ale={__proto__:null,to:207},Rle=Oo.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[Cle],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[wle,kle,_le,Sle,1,2,3,4,new hO("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>Tle[t]||-1},{term:125,get:t=>Qle[t]||-1},{term:4,get:t=>Ele[t]||-1},{term:25,get:t=>Ple[t]||-1},{term:123,get:t=>Ale[t]||-1}],tokenPrec:1963});let Xx=null;function Zx(){if(!Xx&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let i in t)i!="cssText"&&i!="cssFloat"&&typeof t[i]=="string"&&(/[A-Z]/.test(i)&&(i=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase())),n.has(i)||(e.push(i),n.add(i)));Xx=e.sort().map(i=>({type:"property",label:i,apply:i+": "}))}return Xx||[]}const rM=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),sM=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),$le=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),Nle=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),Is=/^(\w[\w-]*|-\w[\w-]*|)$/,Mle=/^-(-[\w-]*)?$/;function jle(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let i=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return i?.name!="Callee"?!1:e.sliceString(i.from,i.to)=="var"}const aM=new JT,zle=["Declaration"];function Dle(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function G8(t,e,n){if(e.to-e.from>4096){let i=aM.get(e);if(i)return i;let r=[],s=new Set,a=e.cursor(pt.IncludeAnonymous);if(a.firstChild())do for(let o of G8(t,a.node,n))s.has(o.label)||(s.add(o.label),r.push(o));while(a.nextSibling());return aM.set(e,r),r}else{let i=[],r=new Set;return e.cursor().iterate(s=>{var a;if(n(s)&&s.matchContext(zle)&&((a=s.node.nextSibling)===null||a===void 0?void 0:a.name)==":"){let o=t.sliceString(s.from,s.to);r.has(o)||(r.add(o),i.push({label:o,type:"variable"}))}}),i}}const Lle=t=>e=>{let{state:n,pos:i}=e,r=kt(n).resolveInner(i,-1),s=r.type.isError&&r.from==r.to-1&&n.doc.sliceString(r.from,r.to)=="-";if(r.name=="PropertyName"||(s||r.name=="TagName")&&/^(Block|Styles)$/.test(r.resolve(r.to).name))return{from:r.from,options:Zx(),validFor:Is};if(r.name=="ValueName")return{from:r.from,options:sM,validFor:Is};if(r.name=="PseudoClassName")return{from:r.from,options:rM,validFor:Is};if(t(r)||(e.explicit||s)&&jle(r,n.doc))return{from:t(r)||s?r.from:i,options:G8(n.doc,Dle(r),t),validFor:Mle};if(r.name=="TagName"){for(let{parent:c}=r;c;c=c.parent)if(c.name=="Block")return{from:r.from,options:Zx(),validFor:Is};return{from:r.from,options:$le,validFor:Is}}if(r.name=="AtKeyword")return{from:r.from,options:Nle,validFor:Is};if(!e.explicit)return null;let a=r.resolve(i),o=a.childBefore(i);return o&&o.name==":"&&a.name=="PseudoClassSelector"?{from:i,options:rM,validFor:Is}:o&&o.name==":"&&a.name=="Declaration"||a.name=="ArgList"?{from:i,options:sM,validFor:Is}:a.name=="Block"||a.name=="Styles"?{from:i,options:Zx(),validFor:Is}:null},qle=Lle(t=>t.name=="VariableName"),dO=mo.define({name:"css",parser:Rle.configure({props:[Tl.add({Declaration:Bc()}),xo.add({"Block KeyframeList":HO})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function K8(){return new gl(dO,dO.data.of({autocomplete:qle}))}const Ah=["_blank","_self","_top","_parent"],Vx=["ascii","utf-8","utf-16","latin1","latin1"],Wx=["get","post","put","delete"],Ux=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Ii=["true","false"],Ne={},Ble={a:{attrs:{href:null,ping:null,type:null,media:null,target:Ah,hreflang:null}},abbr:Ne,address:Ne,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Ne,aside:Ne,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Ne,base:{attrs:{href:null,target:Ah}},bdi:Ne,bdo:Ne,blockquote:{attrs:{cite:null}},body:Ne,br:Ne,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Ux,formmethod:Wx,formnovalidate:["novalidate"],formtarget:Ah,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Ne,center:Ne,cite:Ne,code:Ne,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Ne,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Ne,div:Ne,dl:Ne,dt:Ne,em:Ne,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Ne,figure:Ne,footer:Ne,form:{attrs:{action:null,name:null,"accept-charset":Vx,autocomplete:["on","off"],enctype:Ux,method:Wx,novalidate:["novalidate"],target:Ah}},h1:Ne,h2:Ne,h3:Ne,h4:Ne,h5:Ne,h6:Ne,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Ne,hgroup:Ne,hr:Ne,html:{attrs:{manifest:null}},i:Ne,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Ux,formmethod:Wx,formnovalidate:["novalidate"],formtarget:Ah,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Ne,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Ne,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Ne,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Vx,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Ne,noscript:Ne,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Ne,param:{attrs:{name:null,value:null}},pre:Ne,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Ne,rt:Ne,ruby:Ne,samp:Ne,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Vx}},section:Ne,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Ne,source:{attrs:{src:null,type:null,media:null}},span:Ne,strong:Ne,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Ne,summary:Ne,sup:Ne,table:Ne,tbody:Ne,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Ne,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Ne,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Ne,time:{attrs:{datetime:null}},title:Ne,tr:Ne,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Ne,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Ne},J8={accesskey:null,class:null,contenteditable:Ii,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Ii,autocorrect:Ii,autocapitalize:Ii,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Ii,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Ii,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Ii,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Ii,"aria-hidden":Ii,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Ii,"aria-multiselectable":Ii,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Ii,"aria-relevant":null,"aria-required":Ii,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},e7="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(t=>"on"+t);for(let t of e7)J8[t]=null;let Bf=class{constructor(e,n){this.tags={...Ble,...e},this.globalAttrs={...J8,...n},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}};Bf.default=new Bf;function nu(t,e,n=t.length){if(!e)return"";let i=e.firstChild,r=i&&i.getChild("TagName");return r?t.sliceString(r.from,Math.min(r.to,n)):""}function iu(t,e=!1){for(;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function t7(t,e,n){let i=n.tags[nu(t,iu(e))];return i?.children||n.allTags}function QQ(t,e){let n=[];for(let i=iu(e);i&&!i.type.isTop;i=iu(i.parent)){let r=nu(t,i);if(r&&i.lastChild.name=="CloseTag")break;r&&n.indexOf(r)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&n.push(r)}return n}const n7=/^[:\-\.\w\u00b7-\uffff]*$/;function oM(t,e,n,i,r){let s=/\s*>/.test(t.sliceDoc(r,r+5))?"":">",a=iu(n,n.name=="StartTag"||n.name=="TagName");return{from:i,to:r,options:t7(t.doc,a,e).map(o=>({label:o,type:"type"})).concat(QQ(t.doc,n).map((o,c)=>({label:"/"+o,apply:"/"+o+s,type:"type",boost:99-c}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function lM(t,e,n,i){let r=/\s*>/.test(t.sliceDoc(i,i+5))?"":">";return{from:n,to:i,options:QQ(t.doc,e).map((s,a)=>({label:s,apply:s+r,type:"type",boost:99-a})),validFor:n7}}function Ile(t,e,n,i){let r=[],s=0;for(let a of t7(t.doc,n,e))r.push({label:"<"+a,type:"type"});for(let a of QQ(t.doc,n))r.push({label:"</"+a+">",type:"type",boost:99-s++});return{from:i,to:i,options:r,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function Xle(t,e,n,i,r){let s=iu(n),a=s?e.tags[nu(t.doc,s)]:null,o=a&&a.attrs?Object.keys(a.attrs):[],c=a&&a.globalAttrs===!1?o:o.length?o.concat(e.globalAttrNames):e.globalAttrNames;return{from:i,to:r,options:c.map(u=>({label:u,type:"property"})),validFor:n7}}function Zle(t,e,n,i,r){var s;let a=(s=n.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),o=[],c;if(a){let u=t.sliceDoc(a.from,a.to),f=e.globalAttrs[u];if(!f){let d=iu(n),m=d?e.tags[nu(t.doc,d)]:null;f=m?.attrs&&m.attrs[u]}if(f){let d=t.sliceDoc(i,r).toLowerCase(),m='"',v='"';/^['"]/.test(d)?(c=d[0]=='"'?/^[^"]*$/:/^[^']*$/,m="",v=t.sliceDoc(r,r+1)==d[0]?"":d[0],d=d.slice(1),i++):c=/^[^\s<>='"]*$/;for(let y of f)o.push({label:y,apply:m+y+v,type:"constant"})}}return{from:i,to:r,options:o,validFor:c}}function i7(t,e){let{state:n,pos:i}=e,r=kt(n).resolveInner(i,-1),s=r.resolve(i);for(let a=i,o;s==r&&(o=r.childBefore(a));){let c=o.lastChild;if(!c||!c.type.isError||c.from<c.to)break;s=r=o,a=c.from}return r.name=="TagName"?r.parent&&/CloseTag$/.test(r.parent.name)?lM(n,r,r.from,i):oM(n,t,r,r.from,i):r.name=="StartTag"||r.name=="IncompleteTag"?oM(n,t,r,i,i):r.name=="StartCloseTag"||r.name=="IncompleteCloseTag"?lM(n,r,i,i):r.name=="OpenTag"||r.name=="SelfClosingTag"||r.name=="AttributeName"?Xle(n,t,r,r.name=="AttributeName"?r.from:i,i):r.name=="Is"||r.name=="AttributeValue"||r.name=="UnquotedAttributeValue"?Zle(n,t,r,r.name=="Is"?i:r.from,i):e.explicit&&(s.name=="Element"||s.name=="Text"||s.name=="Document")?Ile(n,t,r,i):null}function Vle(t){return i7(Bf.default,t)}function Wle(t){let{extraTags:e,extraGlobalAttributes:n}=t,i=n||e?new Bf(e,n):Bf.default;return r=>i7(i,r)}const Ule=fs.parser.configure({top:"SingleExpression"}),r7=[{tag:"script",attrs:t=>t.type=="text/typescript"||t.lang=="ts",parser:_8.parser},{tag:"script",attrs:t=>t.type=="text/babel"||t.type=="text/jsx",parser:S8.parser},{tag:"script",attrs:t=>t.type=="text/typescript-jsx",parser:w8.parser},{tag:"script",attrs(t){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type)},parser:Ule},{tag:"script",attrs(t){return!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type)},parser:fs.parser},{tag:"style",attrs(t){return(!t.lang||t.lang=="css")&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type))},parser:dO.parser}],s7=[{name:"style",parser:dO.parser.configure({top:"Styles"})}].concat(e7.map(t=>({name:t,parser:fs.parser}))),a7=mo.define({name:"html",parser:sle.configure({props:[Tl.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit},Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e=null,n;for(let i=t.node;;){let r=i.lastChild;if(!r||r.name!="Element"||r.to!=i.to)break;e=i=r}return e&&!((n=e.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?t.lineIndent(e.from)+t.unit:null}}),xo.add({Element(t){let e=t.firstChild,n=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:n.name=="CloseTag"?n.from:t.to}}}),mX.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),vg=a7.configure({wrap:W8(r7,s7)});function o7(t={}){let e="",n;t.matchClosingTags===!1&&(e="noMatch"),t.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(n=W8((t.nestedLanguages||[]).concat(r7),(t.nestedAttributes||[]).concat(s7)));let i=n?a7.configure({wrap:n,dialect:e}):e?vg.configure({dialect:e}):vg;return new gl(i,[vg.data.of({autocomplete:Wle(t)}),t.autoCloseTags!==!1?Hle:[],oC().support,K8().support])}const cM=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),Hle=we.inputHandler.of((t,e,n,i,r)=>{if(t.composing||t.state.readOnly||e!=n||i!=">"&&i!="/"||!vg.isActiveAt(t.state,e,-1))return!1;let s=r(),{state:a}=s,o=a.changeByRange(c=>{var u,f,d;let m=a.doc.sliceString(c.from-1,c.to)==i,{head:v}=c,y=kt(a).resolveInner(v,-1),x;if(m&&i==">"&&y.name=="EndTag"){let S=y.parent;if(((f=(u=S.parent)===null||u===void 0?void 0:u.lastChild)===null||f===void 0?void 0:f.name)!="CloseTag"&&(x=nu(a.doc,S.parent,v))&&!cM.has(x)){let _=v+(a.doc.sliceString(v,v+1)===">"?1:0),Q=`</${x}>`;return{range:c,changes:{from:v,to:_,insert:Q}}}}else if(m&&i=="/"&&y.name=="IncompleteCloseTag"){let S=y.parent;if(y.from==v-2&&((d=S.lastChild)===null||d===void 0?void 0:d.name)!="CloseTag"&&(x=nu(a.doc,S,v))&&!cM.has(x)){let _=v+(a.doc.sliceString(v,v+1)===">"?1:0),Q=`${x}>`;return{range:fe.cursor(v+Q.length,-1),changes:{from:v,to:_,insert:Q}}}}return{range:c}});return o.changes.empty?!1:(t.dispatch([s,a.update(o,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});class pO{static create(e,n,i,r,s){let a=r+(r<<8)+e+(n<<4)|0;return new pO(e,n,i,a,s,[],[])}constructor(e,n,i,r,s,a,o){this.type=e,this.value=n,this.from=i,this.hash=r,this.end=s,this.children=a,this.positions=o,this.hashProp=[[Xe.contextHash,r]]}addChild(e,n){e.prop(Xe.contextHash)!=this.hash&&(e=new gt(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(n)}toTree(e,n=this.end){let i=this.children.length-1;return i>=0&&(n=Math.max(n,this.positions[i]+this.children[i].length+this.from)),new gt(e.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(r,s,a)=>new gt(Sn.none,r,s,a,this.hashProp)})}}var xe;(function(t){t[t.Document=1]="Document",t[t.CodeBlock=2]="CodeBlock",t[t.FencedCode=3]="FencedCode",t[t.Blockquote=4]="Blockquote",t[t.HorizontalRule=5]="HorizontalRule",t[t.BulletList=6]="BulletList",t[t.OrderedList=7]="OrderedList",t[t.ListItem=8]="ListItem",t[t.ATXHeading1=9]="ATXHeading1",t[t.ATXHeading2=10]="ATXHeading2",t[t.ATXHeading3=11]="ATXHeading3",t[t.ATXHeading4=12]="ATXHeading4",t[t.ATXHeading5=13]="ATXHeading5",t[t.ATXHeading6=14]="ATXHeading6",t[t.SetextHeading1=15]="SetextHeading1",t[t.SetextHeading2=16]="SetextHeading2",t[t.HTMLBlock=17]="HTMLBlock",t[t.LinkReference=18]="LinkReference",t[t.Paragraph=19]="Paragraph",t[t.CommentBlock=20]="CommentBlock",t[t.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",t[t.Escape=22]="Escape",t[t.Entity=23]="Entity",t[t.HardBreak=24]="HardBreak",t[t.Emphasis=25]="Emphasis",t[t.StrongEmphasis=26]="StrongEmphasis",t[t.Link=27]="Link",t[t.Image=28]="Image",t[t.InlineCode=29]="InlineCode",t[t.HTMLTag=30]="HTMLTag",t[t.Comment=31]="Comment",t[t.ProcessingInstruction=32]="ProcessingInstruction",t[t.Autolink=33]="Autolink",t[t.HeaderMark=34]="HeaderMark",t[t.QuoteMark=35]="QuoteMark",t[t.ListMark=36]="ListMark",t[t.LinkMark=37]="LinkMark",t[t.EmphasisMark=38]="EmphasisMark",t[t.CodeMark=39]="CodeMark",t[t.CodeText=40]="CodeText",t[t.CodeInfo=41]="CodeInfo",t[t.LinkTitle=42]="LinkTitle",t[t.LinkLabel=43]="LinkLabel",t[t.URL=44]="URL"})(xe||(xe={}));class Yle{constructor(e,n){this.start=e,this.content=n,this.marks=[],this.parsers=[]}}class Fle{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return pf(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,n=0,i=0){for(let r=n;r<e;r++)i+=this.text.charCodeAt(r)==9?4-i%4:1;return i}findColumn(e){let n=0;for(let i=0;n<this.text.length&&i<e;n++)i+=this.text.charCodeAt(n)==9?4-i%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let e="";for(let n=0;n<this.basePos;n++)e+=" ";return e+this.text.slice(this.basePos)}}function uM(t,e,n){if(n.pos==n.text.length||t!=e.block&&n.indent>=e.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let i=(t.type==xe.OrderedList?AQ:PQ)(n,e,!1);return i>0&&(t.type!=xe.BulletList||EQ(n,e,!1)<0)&&n.text.charCodeAt(n.pos+i-1)==t.value}const l7={[xe.Blockquote](t,e,n){return n.next!=62?!1:(n.markers.push(ot(xe.QuoteMark,e.lineStart+n.pos,e.lineStart+n.pos+1)),n.moveBase(n.pos+(br(n.text.charCodeAt(n.pos+1))?2:1)),t.end=e.lineStart+n.text.length,!0)},[xe.ListItem](t,e,n){return n.indent<n.baseIndent+t.value&&n.next>-1?!1:(n.moveBaseColumn(n.baseIndent+t.value),!0)},[xe.OrderedList]:uM,[xe.BulletList]:uM,[xe.Document](){return!0}};function br(t){return t==32||t==9||t==10||t==13}function pf(t,e=0){for(;e<t.length&&br(t.charCodeAt(e));)e++;return e}function hM(t,e,n){for(;e>n&&br(t.charCodeAt(e-1));)e--;return e}function c7(t){if(t.next!=96&&t.next!=126)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;if(e<t.pos+3)return-1;if(t.next==96){for(let n=e;n<t.text.length;n++)if(t.text.charCodeAt(n)==96)return-1}return e}function u7(t){return t.next!=62?-1:t.text.charCodeAt(t.pos+1)==32?2:1}function EQ(t,e,n){if(t.next!=42&&t.next!=45&&t.next!=95)return-1;let i=1;for(let r=t.pos+1;r<t.text.length;r++){let s=t.text.charCodeAt(r);if(s==t.next)i++;else if(!br(s))return-1}return n&&t.next==45&&d7(t)>-1&&t.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(O7.SetextHeading)>-1||i<3?-1:1}function h7(t,e){for(let n=t.stack.length-1;n>=0;n--)if(t.stack[n].type==e)return!0;return!1}function PQ(t,e,n){return(t.next==45||t.next==43||t.next==42)&&(t.pos==t.text.length-1||br(t.text.charCodeAt(t.pos+1)))&&(!n||h7(e,xe.BulletList)||t.skipSpace(t.pos+2)<t.text.length)?1:-1}function AQ(t,e,n){let i=t.pos,r=t.next;for(;r>=48&&r<=57;){i++;if(i==t.text.length)return-1;r=t.text.charCodeAt(i)}return i==t.pos||i>t.pos+9||r!=46&&r!=41||i<t.text.length-1&&!br(t.text.charCodeAt(i+1))||n&&!h7(e,xe.OrderedList)&&(t.skipSpace(i+1)==t.text.length||i>t.pos+1||t.next!=49)?-1:i+1-t.pos}function f7(t){if(t.next!=35)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==35;)e++;if(e<t.text.length&&t.text.charCodeAt(e)!=32)return-1;let n=e-t.pos;return n>6?-1:n}function d7(t){if(t.next!=45&&t.next!=61||t.indent>=t.baseIndent+4)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;let n=e;for(;e<t.text.length&&br(t.text.charCodeAt(e));)e++;return e==t.text.length?n:-1}const hC=/^[ \t]*$/,p7=/-->/,m7=/\?>/,fC=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,p7],[/^\s*<\?/,m7],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,hC],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,hC]];function g7(t,e,n){if(t.next!=60)return-1;let i=t.text.slice(t.pos);for(let r=0,s=fC.length-(n?1:0);r<s;r++)if(fC[r][0].test(i))return r;return-1}function fM(t,e){let n=t.countIndent(e,t.pos,t.indent),i=t.countIndent(t.skipSpace(e),e,n);return i>=n+5?n+1:i}function Xa(t,e,n){let i=t.length-1;i>=0&&t[i].to==e&&t[i].type==xe.CodeText?t[i].to=n:t.push(ot(xe.CodeText,e,n))}const Rm={LinkReference:void 0,IndentedCode(t,e){let n=e.baseIndent+4;if(e.indent<n)return!1;let i=e.findColumn(n),r=t.lineStart+i,s=t.lineStart+e.text.length,a=[],o=[];for(Xa(a,r,s);t.nextLine()&&e.depth>=t.stack.length;)if(e.pos==e.text.length){Xa(o,t.lineStart-1,t.lineStart);for(let c of e.markers)o.push(c)}else{if(e.indent<n)break;{if(o.length){for(let u of o)u.type==xe.CodeText?Xa(a,u.from,u.to):a.push(u);o=[]}Xa(a,t.lineStart-1,t.lineStart);for(let u of e.markers)a.push(u);s=t.lineStart+e.text.length;let c=t.lineStart+e.findColumn(e.baseIndent+4);c<s&&Xa(a,c,s)}}return o.length&&(o=o.filter(c=>c.type!=xe.CodeText),o.length&&(e.markers=o.concat(e.markers))),t.addNode(t.buffer.writeElements(a,-r).finish(xe.CodeBlock,s-r),r),!0},FencedCode(t,e){let n=c7(e);if(n<0)return!1;let i=t.lineStart+e.pos,r=e.next,s=n-e.pos,a=e.skipSpace(n),o=hM(e.text,e.text.length,a),c=[ot(xe.CodeMark,i,i+s)];a<o&&c.push(ot(xe.CodeInfo,t.lineStart+a,t.lineStart+o));for(let u=!0,f=!0,d=!1;t.nextLine()&&e.depth>=t.stack.length;u=!1){let m=e.pos;if(e.indent-e.baseIndent<4)for(;m<e.text.length&&e.text.charCodeAt(m)==r;)m++;if(m-e.pos>=s&&e.skipSpace(m)==e.text.length){for(let v of e.markers)c.push(v);f&&d&&Xa(c,t.lineStart-1,t.lineStart),c.push(ot(xe.CodeMark,t.lineStart+e.pos,t.lineStart+m)),t.nextLine();break}else{d=!0,u||(Xa(c,t.lineStart-1,t.lineStart),f=!1);for(let x of e.markers)c.push(x);let v=t.lineStart+e.basePos,y=t.lineStart+e.text.length;v<y&&(Xa(c,v,y),f=!1)}}return t.addNode(t.buffer.writeElements(c,-i).finish(xe.FencedCode,t.prevLineEnd()-i),i),!0},Blockquote(t,e){let n=u7(e);return n<0?!1:(t.startContext(xe.Blockquote,e.pos),t.addNode(xe.QuoteMark,t.lineStart+e.pos,t.lineStart+e.pos+1),e.moveBase(e.pos+n),null)},HorizontalRule(t,e){if(EQ(e,t,!1)<0)return!1;let n=t.lineStart+e.pos;return t.nextLine(),t.addNode(xe.HorizontalRule,n),!0},BulletList(t,e){let n=PQ(e,t,!1);if(n<0)return!1;t.block.type!=xe.BulletList&&t.startContext(xe.BulletList,e.basePos,e.next);let i=fM(e,e.pos+1);return t.startContext(xe.ListItem,e.basePos,i-e.baseIndent),t.addNode(xe.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(i),null},OrderedList(t,e){let n=AQ(e,t,!1);if(n<0)return!1;t.block.type!=xe.OrderedList&&t.startContext(xe.OrderedList,e.basePos,e.text.charCodeAt(e.pos+n-1));let i=fM(e,e.pos+n);return t.startContext(xe.ListItem,e.basePos,i-e.baseIndent),t.addNode(xe.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(i),null},ATXHeading(t,e){let n=f7(e);if(n<0)return!1;let i=e.pos,r=t.lineStart+i,s=hM(e.text,e.text.length,i),a=s;for(;a>i&&e.text.charCodeAt(a-1)==e.next;)a--;(a==s||a==i||!br(e.text.charCodeAt(a-1)))&&(a=e.text.length);let o=t.buffer.write(xe.HeaderMark,0,n).writeElements(t.parser.parseInline(e.text.slice(i+n+1,a),r+n+1),-r);a<e.text.length&&o.write(xe.HeaderMark,a-i,s-i);let c=o.finish(xe.ATXHeading1-1+n,e.text.length-i);return t.nextLine(),t.addNode(c,r),!0},HTMLBlock(t,e){let n=g7(e,t,!1);if(n<0)return!1;let i=t.lineStart+e.pos,r=fC[n][1],s=[],a=r!=hC;for(;!r.test(e.text)&&t.nextLine();){if(e.depth<t.stack.length){a=!1;break}for(let u of e.markers)s.push(u)}a&&t.nextLine();let o=r==p7?xe.CommentBlock:r==m7?xe.ProcessingInstructionBlock:xe.HTMLBlock,c=t.prevLineEnd();return t.addNode(t.buffer.writeElements(s,-i).finish(o,c-i),i),!0},SetextHeading:void 0};class Gle{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,n,i){if(this.stage==-1)return!1;let r=i.content+`
`+n.scrub(),s=this.advance(r);return s>-1&&s<r.length?this.complete(e,i,s):!1}finish(e,n){return(this.stage==2||this.stage==3)&&pf(n.content,this.pos)==n.content.length?this.complete(e,n,n.content.length):!1}complete(e,n,i){return e.addLeafElement(n,ot(xe.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(C7(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(ot(xe.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(w7(e,pf(e,this.pos),this.start)))return-1}else if(this.stage==2){let n=pf(e,this.pos),i=0;if(n>this.pos){let r=k7(e,n,this.start);if(r){let s=Hx(e,r.to-this.start);s>0&&(this.nextStage(r),i=s)}}return i||(i=Hx(e,this.pos)),i>0&&i<e.length?i:-1}else return Hx(e,this.pos)}}}function Hx(t,e){for(;e<t.length;e++){let n=t.charCodeAt(e);if(n==10)break;if(!br(n))return-1}return e}class Kle{nextLine(e,n,i){let r=n.depth<e.stack.length?-1:d7(n),s=n.next;if(r<0)return!1;let a=ot(xe.HeaderMark,e.lineStart+n.pos,e.lineStart+r);return e.nextLine(),e.addLeafElement(i,ot(s==61?xe.SetextHeading1:xe.SetextHeading2,i.start,e.prevLineEnd(),[...e.parser.parseInline(i.content,i.start),a])),!0}finish(){return!1}}const O7={LinkReference(t,e){return e.content.charCodeAt(0)==91?new Gle(e):null},SetextHeading(){return new Kle}},Jle=[(t,e)=>f7(e)>=0,(t,e)=>c7(e)>=0,(t,e)=>u7(e)>=0,(t,e)=>PQ(e,t,!0)>=0,(t,e)=>AQ(e,t,!0)>=0,(t,e)=>EQ(e,t,!0)>=0,(t,e)=>g7(e,t,!0)>=0],ece={text:"",end:0};class tce{constructor(e,n,i,r){this.parser=e,this.input=n,this.ranges=r,this.line=new Fle,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=r[r.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=r[0].from,this.block=pO.create(xe.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new rce(i,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let i=0;;){let r=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;i<e.markers.length&&(!r||e.markers[i].from<r.end);){let s=e.markers[i++];this.addNode(s.type,s.from,s.to)}if(!r)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let r=i(this,e);if(r!=!1){if(r==!0)return null;e.forward();continue e}}break}let n=new Yle(this.lineStart+e.pos,e.text.slice(e.pos));for(let i of this.parser.leafBlockParsers)if(i){let r=i(this,n);r&&n.parsers.push(r)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,e,n))break e}for(let i of n.parsers)if(i.nextLine(this,e,n))return null;n.content+=`
`+e.scrub();for(let i of e.markers)n.marks.push(i)}return this.finishLeaf(n),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return n?(this.absoluteLineStart+=n,this.lineStart=T7(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let n=ece;if(n.end=e,e>=this.to)n.text="";else if(n.text=this.lineChunkAt(e),n.end+=n.text.length,this.ranges.length>1){let i=this.absoluteLineStart,r=this.rangeI;for(;this.ranges[r].to<n.end;){r++;let s=this.ranges[r].from,a=this.lineChunkAt(s);n.end=s+a.length,n.text=n.text.slice(0,this.ranges[r-1].to-i)+a,i=n.end-n.text.length}}return n}readLine(){let{line:e}=this,{text:n,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,e.reset(n);e.depth<this.stack.length;e.depth++){let r=this.stack[e.depth],s=this.parser.skipContextMarkup[r.type];if(!s)throw new Error("Unhandled block context "+xe[r.type]);let a=this.line.markers.length;if(!s(r,this,e)){this.line.markers.length>a&&(r.end=this.line.markers[this.line.markers.length-1].to),e.forward();break}e.forward()}}lineChunkAt(e){let n=this.input.chunk(e),i;if(this.input.lineChunks)i=n==`
`?"":n;else{let r=n.indexOf(`
`);i=r<0?n:n.slice(0,r)}return e+i.length>this.to?i.slice(0,this.to-e):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,n,i=0){this.block=pO.create(e,i,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,n,i=0){this.startContext(this.parser.getNodeType(e),n,i)}addNode(e,n,i){typeof e=="number"&&(e=new gt(this.parser.nodeSet.types[e],ru,ru,(i??this.prevLineEnd())-n)),this.block.addChild(e,n-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,n){this.addNode(this.buffer.writeElements(pC(n.children,e.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let e=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(e.toTree(this.parser.nodeSet),e.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?v7(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let i of e.parsers)if(i.finish(this,e))return;let n=pC(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(n,-e.start).finish(xe.Paragraph,e.content.length),e.start)}elt(e,n,i,r){return typeof e=="string"?ot(this.parser.getNodeType(e),n,i,r):new b7(e,n)}get buffer(){return new x7(this.parser.nodeSet)}}function v7(t,e,n,i,r){let s=t[e].to,a=[],o=[],c=n.from+i;function u(f,d){for(;d?f>=s:f>s;){let m=t[e+1].from-s;i+=m,f+=m,e++,s=t[e].to}}for(let f=n.firstChild;f;f=f.nextSibling){u(f.from+i,!0);let d=f.from+i,m,v=r.get(f.tree);v?m=v:f.to+i>s?(m=v7(t,e,f,i,r),u(f.to+i,!1)):m=f.toTree(),a.push(m),o.push(d-c)}return u(n.to+i,!1),new gt(n.type,a,o,n.to+i-c,n.tree?n.tree.propValues:void 0)}class i0 extends eQ{constructor(e,n,i,r,s,a,o,c,u){super(),this.nodeSet=e,this.blockParsers=n,this.leafBlockParsers=i,this.blockNames=r,this.endLeafBlock=s,this.skipContextMarkup=a,this.inlineParsers=o,this.inlineNames=c,this.wrappers=u,this.nodeTypes=Object.create(null);for(let f of e.types)this.nodeTypes[f.name]=f.id}createParse(e,n,i){let r=new tce(this,e,n,i);for(let s of this.wrappers)r=s(r,e,n,i);return r}configure(e){let n=dC(e);if(!n)return this;let{nodeSet:i,skipContextMarkup:r}=this,s=this.blockParsers.slice(),a=this.leafBlockParsers.slice(),o=this.blockNames.slice(),c=this.inlineParsers.slice(),u=this.inlineNames.slice(),f=this.endLeafBlock.slice(),d=this.wrappers;if(Rh(n.defineNodes)){r=Object.assign({},r);let m=i.types.slice(),v;for(let y of n.defineNodes){let{name:x,block:S,composite:_,style:Q}=typeof y=="string"?{name:y}:y;if(m.some(E=>E.name==x))continue;_&&(r[m.length]=(E,C,P)=>_(C,P,E.value));let k=m.length,T=_?["Block","BlockContext"]:S?k>=xe.ATXHeading1&&k<=xe.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;m.push(Sn.define({id:k,name:x,props:T&&[[Xe.group,T]]})),Q&&(v||(v={}),Array.isArray(Q)||Q instanceof Yi?v[x]=Q:Object.assign(v,Q))}i=new pd(m),v&&(i=i.extend(yo(v)))}if(Rh(n.props)&&(i=i.extend(...n.props)),Rh(n.remove))for(let m of n.remove){let v=this.blockNames.indexOf(m),y=this.inlineNames.indexOf(m);v>-1&&(s[v]=a[v]=void 0),y>-1&&(c[y]=void 0)}if(Rh(n.parseBlock))for(let m of n.parseBlock){let v=o.indexOf(m.name);if(v>-1)s[v]=m.parse,a[v]=m.leaf;else{let y=m.before?$m(o,m.before):m.after?$m(o,m.after)+1:o.length-1;s.splice(y,0,m.parse),a.splice(y,0,m.leaf),o.splice(y,0,m.name)}m.endLeaf&&f.push(m.endLeaf)}if(Rh(n.parseInline))for(let m of n.parseInline){let v=u.indexOf(m.name);if(v>-1)c[v]=m.parse;else{let y=m.before?$m(u,m.before):m.after?$m(u,m.after)+1:u.length-1;c.splice(y,0,m.parse),u.splice(y,0,m.name)}}return n.wrap&&(d=d.concat(n.wrap)),new i0(i,s,a,o,f,r,c,u,d)}getNodeType(e){let n=this.nodeTypes[e];if(n==null)throw new RangeError(`Unknown node type '${e}'`);return n}parseInline(e,n){let i=new RQ(this,e,n);e:for(let r=n;r<i.end;){let s=i.char(r);for(let a of this.inlineParsers)if(a){let o=a(i,s,r);if(o>=0){r=o;continue e}}r++}return i.resolveMarkers(0)}}function Rh(t){return t!=null&&t.length>0}function dC(t){if(!Array.isArray(t))return t;if(t.length==0)return null;let e=dC(t[0]);if(t.length==1)return e;let n=dC(t.slice(1));if(!n||!e)return e||n;let i=(a,o)=>(a||ru).concat(o||ru),r=e.wrap,s=n.wrap;return{props:i(e.props,n.props),defineNodes:i(e.defineNodes,n.defineNodes),parseBlock:i(e.parseBlock,n.parseBlock),parseInline:i(e.parseInline,n.parseInline),remove:i(e.remove,n.remove),wrap:r?s?(a,o,c,u)=>r(s(a,o,c,u),o,c,u):r:s}}function $m(t,e){let n=t.indexOf(e);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return n}let y7=[Sn.none];for(let t=1,e;e=xe[t];t++)y7[t]=Sn.define({id:t,name:e,props:t>=xe.Escape?[]:[[Xe.group,t in l7?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const ru=[];class x7{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,n,i,r=0){return this.content.push(e,n,i,4+r*4),this}writeElements(e,n=0){for(let i of e)i.writeTo(this,n);return this}finish(e,n){return gt.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:n})}}let If=class{constructor(e,n,i,r=ru){this.type=e,this.from=n,this.to=i,this.children=r}writeTo(e,n){let i=e.content.length;e.writeElements(this.children,n),e.content.push(this.type,this.from+n,this.to+n,e.content.length+4-i)}toTree(e){return new x7(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class b7{constructor(e,n){this.tree=e,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return ru}writeTo(e,n){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function ot(t,e,n,i){return new If(t,e,n,i)}const _7={resolve:"Emphasis",mark:"EmphasisMark"},S7={resolve:"Emphasis",mark:"EmphasisMark"},el={},mO={};class Hi{constructor(e,n,i,r){this.type=e,this.from=n,this.to=i,this.side=r}}const dM="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Xf=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Xf=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const Yx={Escape(t,e,n){if(e!=92||n==t.end-1)return-1;let i=t.char(n+1);for(let r=0;r<dM.length;r++)if(dM.charCodeAt(r)==i)return t.append(ot(xe.Escape,n,n+2));return-1},Entity(t,e,n){if(e!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(t.slice(n+1,n+31));return i?t.append(ot(xe.Entity,n,n+1+i[0].length)):-1},InlineCode(t,e,n){if(e!=96||n&&t.char(n-1)==96)return-1;let i=n+1;for(;i<t.end&&t.char(i)==96;)i++;let r=i-n,s=0;for(;i<t.end;i++)if(t.char(i)==96){if(s++,s==r&&t.char(i+1)!=96)return t.append(ot(xe.InlineCode,n,i+1,[ot(xe.CodeMark,n,n+r),ot(xe.CodeMark,i+1-r,i+1)]))}else s=0;return-1},HTMLTag(t,e,n){if(e!=60||n==t.end-1)return-1;let i=t.slice(n+1,t.end),r=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(r)return t.append(ot(xe.Autolink,n,n+1+r[0].length,[ot(xe.LinkMark,n,n+1),ot(xe.URL,n+1,n+r[0].length),ot(xe.LinkMark,n+r[0].length,n+1+r[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(s)return t.append(ot(xe.Comment,n,n+1+s[0].length));let a=/^\?[^]*?\?>/.exec(i);if(a)return t.append(ot(xe.ProcessingInstruction,n,n+1+a[0].length));let o=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return o?t.append(ot(xe.HTMLTag,n,n+1+o[0].length)):-1},Emphasis(t,e,n){if(e!=95&&e!=42)return-1;let i=n+1;for(;t.char(i)==e;)i++;let r=t.slice(n-1,n),s=t.slice(i,i+1),a=Xf.test(r),o=Xf.test(s),c=/\s|^$/.test(r),u=/\s|^$/.test(s),f=!u&&(!o||c||a),d=!c&&(!a||u||o),m=f&&(e==42||!d||a),v=d&&(e==42||!f||o);return t.append(new Hi(e==95?_7:S7,n,i,(m?1:0)|(v?2:0)))},HardBreak(t,e,n){if(e==92&&t.char(n+1)==10)return t.append(ot(xe.HardBreak,n,n+2));if(e==32){let i=n+1;for(;t.char(i)==32;)i++;if(t.char(i)==10&&i>=n+2)return t.append(ot(xe.HardBreak,n,i+1))}return-1},Link(t,e,n){return e==91?t.append(new Hi(el,n,n+1,1)):-1},Image(t,e,n){return e==33&&t.char(n+1)==91?t.append(new Hi(mO,n,n+2,1)):-1},LinkEnd(t,e,n){if(e!=93)return-1;for(let i=t.parts.length-1;i>=0;i--){let r=t.parts[i];if(r instanceof Hi&&(r.type==el||r.type==mO)){if(!r.side||t.skipSpace(r.to)==n&&!/[(\[]/.test(t.slice(n+1,n+2)))return t.parts[i]=null,-1;let s=t.takeContent(i),a=t.parts[i]=nce(t,s,r.type==el?xe.Link:xe.Image,r.from,n+1);if(r.type==el)for(let o=0;o<i;o++){let c=t.parts[o];c instanceof Hi&&c.type==el&&(c.side=0)}return a.to}}return-1}};function nce(t,e,n,i,r){let{text:s}=t,a=t.char(r),o=r;if(e.unshift(ot(xe.LinkMark,i,i+(n==xe.Image?2:1))),e.push(ot(xe.LinkMark,r-1,r)),a==40){let c=t.skipSpace(r+1),u=w7(s,c-t.offset,t.offset),f;u&&(c=t.skipSpace(u.to),c!=u.to&&(f=k7(s,c-t.offset,t.offset),f&&(c=t.skipSpace(f.to)))),t.char(c)==41&&(e.push(ot(xe.LinkMark,r,r+1)),o=c+1,u&&e.push(u),f&&e.push(f),e.push(ot(xe.LinkMark,c,o)))}else if(a==91){let c=C7(s,r-t.offset,t.offset,!1);c&&(e.push(c),o=c.to)}return ot(n,i,o,e)}function w7(t,e,n){if(t.charCodeAt(e)==60){for(let r=e+1;r<t.length;r++){let s=t.charCodeAt(r);if(s==62)return ot(xe.URL,e+n,r+1+n);if(s==60||s==10)return!1}return null}else{let r=0,s=e;for(let a=!1;s<t.length;s++){let o=t.charCodeAt(s);if(br(o))break;if(a)a=!1;else if(o==40)r++;else if(o==41){if(!r)break;r--}else o==92&&(a=!0)}return s>e?ot(xe.URL,e+n,s+n):s==t.length?null:!1}}function k7(t,e,n){let i=t.charCodeAt(e);if(i!=39&&i!=34&&i!=40)return!1;let r=i==40?41:i;for(let s=e+1,a=!1;s<t.length;s++){let o=t.charCodeAt(s);if(a)a=!1;else{if(o==r)return ot(xe.LinkTitle,e+n,s+1+n);o==92&&(a=!0)}}return null}function C7(t,e,n,i){for(let r=!1,s=e+1,a=Math.min(t.length,s+999);s<a;s++){let o=t.charCodeAt(s);if(r)r=!1;else{if(o==93)return i?!1:ot(xe.LinkLabel,e+n,s+1+n);if(i&&!br(o)&&(i=!1),o==91)return!1;o==92&&(r=!0)}}return null}class RQ{constructor(e,n,i){this.parser=e,this.text=n,this.offset=i,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,n){return this.text.slice(e-this.offset,n-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,n,i,r,s){return this.append(new Hi(e,n,i,(r?1:0)|(s?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let n=this.parts[e];if(n instanceof Hi&&(n.type==el||n.type==mO))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let i=e;i<this.parts.length;i++){let r=this.parts[i];if(!(r instanceof Hi&&r.type.resolve&&r.side&2))continue;let s=r.type==_7||r.type==S7,a=r.to-r.from,o,c=i-1;for(;c>=e;c--){let x=this.parts[c];if(x instanceof Hi&&x.side&1&&x.type==r.type&&!(s&&(r.side&1||x.side&2)&&(x.to-x.from+a)%3==0&&((x.to-x.from)%3||a%3))){o=x;break}}if(!o)continue;let u=r.type.resolve,f=[],d=o.from,m=r.to;if(s){let x=Math.min(2,o.to-o.from,a);d=o.to-x,m=r.from+x,u=x==1?"Emphasis":"StrongEmphasis"}o.type.mark&&f.push(this.elt(o.type.mark,d,o.to));for(let x=c+1;x<i;x++)this.parts[x]instanceof If&&f.push(this.parts[x]),this.parts[x]=null;r.type.mark&&f.push(this.elt(r.type.mark,r.from,m));let v=this.elt(u,d,m,f);this.parts[c]=s&&o.from!=d?new Hi(o.type,o.from,d,o.side):null,(this.parts[i]=s&&r.to!=m?new Hi(r.type,m,r.to,r.side):null)?this.parts.splice(i,0,v):this.parts[i]=v}let n=[];for(let i=e;i<this.parts.length;i++){let r=this.parts[i];r instanceof If&&n.push(r)}return n}findOpeningDelimiter(e){for(let n=this.parts.length-1;n>=0;n--){let i=this.parts[n];if(i instanceof Hi&&i.type==e&&i.side&1)return n}return null}takeContent(e){let n=this.resolveMarkers(e);return this.parts.length=e,n}getDelimiterAt(e){let n=this.parts[e];return n instanceof Hi?n:null}skipSpace(e){return pf(this.text,e-this.offset)+this.offset}elt(e,n,i,r){return typeof e=="string"?ot(this.parser.getNodeType(e),n,i,r):new b7(e,n)}}RQ.linkStart=el;RQ.imageStart=mO;function pC(t,e){if(!e.length)return t;if(!t.length)return e;let n=t.slice(),i=0;for(let r of e){for(;i<n.length&&n[i].to<r.to;)i++;if(i<n.length&&n[i].from<r.from){let s=n[i];s instanceof If&&(n[i]=new If(s.type,s.from,s.to,pC(s.children,[r])))}else n.splice(i++,0,r)}return n}const ice=[xe.CodeBlock,xe.ListItem,xe.OrderedList,xe.BulletList];class rce{constructor(e,n){this.fragments=e,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,n){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let r=e+this.fragment.offset;for(;i.to<=r;)if(!i.parent())return!1;for(;;){if(i.from>=r)return this.fragment.from<=n;if(!i.childAfter(r))return!1}}matches(e){let n=this.cursor.tree;return n&&n.prop(Xe.contextHash)==e}takeNodes(e){let n=this.cursor,i=this.fragment.offset,r=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,a=s,o=e.block.children.length,c=a,u=o;for(;;){if(n.to-i>r){if(n.type.isAnonymous&&n.firstChild())continue;break}let f=T7(n.from-i,e.ranges);if(n.to-i<=e.ranges[e.rangeI].to)e.addNode(n.tree,f);else{let d=new gt(e.parser.nodeSet.types[xe.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(d,n.tree),e.addNode(d,f)}if(n.type.is("Block")&&(ice.indexOf(n.type.id)<0?(a=n.to-i,o=e.block.children.length):(a=c,o=u),c=n.to-i,u=e.block.children.length),!n.nextSibling())break}for(;e.block.children.length>o;)e.block.children.pop(),e.block.positions.pop();return a-s}}function T7(t,e){let n=t;for(let i=1;i<e.length;i++){let r=e[i-1].to,s=e[i].from;r<t&&(n-=s-r)}return n}const sce=yo({"Blockquote/...":Y.quote,HorizontalRule:Y.contentSeparator,"ATXHeading1/... SetextHeading1/...":Y.heading1,"ATXHeading2/... SetextHeading2/...":Y.heading2,"ATXHeading3/...":Y.heading3,"ATXHeading4/...":Y.heading4,"ATXHeading5/...":Y.heading5,"ATXHeading6/...":Y.heading6,"Comment CommentBlock":Y.comment,Escape:Y.escape,Entity:Y.character,"Emphasis/...":Y.emphasis,"StrongEmphasis/...":Y.strong,"Link/... Image/...":Y.link,"OrderedList/... BulletList/...":Y.list,"BlockQuote/...":Y.quote,"InlineCode CodeText":Y.monospace,"URL Autolink":Y.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":Y.processingInstruction,"CodeInfo LinkLabel":Y.labelName,LinkTitle:Y.string,Paragraph:Y.content}),ace=new i0(new pd(y7).extend(sce),Object.keys(Rm).map(t=>Rm[t]),Object.keys(Rm).map(t=>O7[t]),Object.keys(Rm),Jle,l7,Object.keys(Yx).map(t=>Yx[t]),Object.keys(Yx),[]);function oce(t,e,n){let i=[];for(let r=t.firstChild,s=e;;r=r.nextSibling){let a=r?r.from:n;if(a>s&&i.push({from:s,to:a}),!r)break;s=r.to}return i}function lce(t){let{codeParser:e,htmlParser:n}=t;return{wrap:KI((r,s)=>{let a=r.type.id;if(e&&(a==xe.CodeBlock||a==xe.FencedCode)){let o="";if(a==xe.FencedCode){let u=r.node.getChild(xe.CodeInfo);u&&(o=s.read(u.from,u.to))}let c=e(o);if(c)return{parser:c,overlay:u=>u.type.id==xe.CodeText,bracketed:a==xe.FencedCode}}else if(n&&(a==xe.HTMLBlock||a==xe.HTMLTag||a==xe.CommentBlock))return{parser:n,overlay:oce(r.node,r.from,r.to)};return null})}}const cce={resolve:"Strikethrough",mark:"StrikethroughMark"},uce={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":Y.strikethrough}},{name:"StrikethroughMark",style:Y.processingInstruction}],parseInline:[{name:"Strikethrough",parse(t,e,n){if(e!=126||t.char(n+1)!=126||t.char(n+2)==126)return-1;let i=t.slice(n-1,n),r=t.slice(n+2,n+3),s=/\s|^$/.test(i),a=/\s|^$/.test(r),o=Xf.test(i),c=Xf.test(r);return t.addDelimiter(cce,n,n+2,!a&&(!c||s||o),!s&&(!o||a||c))},after:"Emphasis"}]};function mf(t,e,n=0,i,r=0){let s=0,a=!0,o=-1,c=-1,u=!1,f=()=>{i.push(t.elt("TableCell",r+o,r+c,t.parser.parseInline(e.slice(o,c),r+o)))};for(let d=n;d<e.length;d++){let m=e.charCodeAt(d);m==124&&!u?((!a||o>-1)&&s++,a=!1,i&&(o>-1&&f(),i.push(t.elt("TableDelimiter",d+r,d+r+1))),o=c=-1):(u||m!=32&&m!=9)&&(o<0&&(o=d),c=d+1),u=!u&&m==92}return o>-1&&(s++,i&&f()),s}function pM(t,e){for(let n=e;n<t.length;n++){let i=t.charCodeAt(n);if(i==124)return!0;i==92&&n++}return!1}const Q7=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class mM{constructor(){this.rows=null}nextLine(e,n,i){if(this.rows==null){this.rows=!1;let r;if((n.next==45||n.next==58||n.next==124)&&Q7.test(r=n.text.slice(n.pos))){let s=[];mf(e,i.content,0,s,i.start)==mf(e,r,n.pos)&&(this.rows=[e.elt("TableHeader",i.start,i.start+i.content.length,s),e.elt("TableDelimiter",e.lineStart+n.pos,e.lineStart+n.text.length)])}}else if(this.rows){let r=[];mf(e,n.text,n.pos,r,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+n.pos,e.lineStart+n.text.length,r))}return!1}finish(e,n){return this.rows?(e.addLeafElement(n,e.elt("Table",n.start,n.start+n.content.length,this.rows)),!0):!1}}const hce={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":Y.heading}},"TableRow",{name:"TableCell",style:Y.content},{name:"TableDelimiter",style:Y.processingInstruction}],parseBlock:[{name:"Table",leaf(t,e){return pM(e.content,0)?new mM:null},endLeaf(t,e,n){if(n.parsers.some(r=>r instanceof mM)||!pM(e.text,e.basePos))return!1;let i=t.peekLine();return Q7.test(i)&&mf(t,e.text,e.basePos)==mf(t,i,e.basePos)},before:"SetextHeading"}]};class fce{nextLine(){return!1}finish(e,n){return e.addLeafElement(n,e.elt("Task",n.start,n.start+n.content.length,[e.elt("TaskMarker",n.start,n.start+3),...e.parser.parseInline(n.content.slice(3),n.start+3)])),!0}}const dce={defineNodes:[{name:"Task",block:!0,style:Y.list},{name:"TaskMarker",style:Y.atom}],parseBlock:[{name:"TaskList",leaf(t,e){return/^\[[ xX]\][ \t]/.test(e.content)&&t.parentType().name=="ListItem"?new fce:null},after:"SetextHeading"}]},gM=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,OM=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,pce=/[\w-]+\.[\w-]+($|\/)/,vM=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,yM=/\/[a-zA-Z\d@.]+/gy;function xM(t,e,n,i){let r=0;for(let s=e;s<n;s++)t[s]==i&&r++;return r}function mce(t,e){OM.lastIndex=e;let n=OM.exec(t);if(!n||pce.exec(n[0])[0].indexOf("_")>-1)return-1;let i=e+n[0].length;for(;;){let r=t[i-1],s;if(/[?!.,:*_~]/.test(r)||r==")"&&xM(t,e,i,")")>xM(t,e,i,"("))i--;else if(r==";"&&(s=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(t.slice(e,i))))i=e+s.index;else break}return i}function bM(t,e){vM.lastIndex=e;let n=vM.exec(t);if(!n)return-1;let i=n[0][n[0].length-1];return i=="_"||i=="-"?-1:e+n[0].length-(i=="."?1:0)}const gce={parseInline:[{name:"Autolink",parse(t,e,n){let i=n-t.offset;if(i&&/\w/.test(t.text[i-1]))return-1;gM.lastIndex=i;let r=gM.exec(t.text),s=-1;if(!r)return-1;if(r[1]||r[2]){if(s=mce(t.text,i+r[0].length),s>-1&&t.hasOpenLink){let a=/([^\[\]]|\[[^\]]*\])*/.exec(t.text.slice(i,s));s=i+a[0].length}}else r[3]?s=bM(t.text,i):(s=bM(t.text,i+r[0].length),s>-1&&r[0]=="xmpp:"&&(yM.lastIndex=s,r=yM.exec(t.text),r&&(s=r.index+r[0].length)));return s<0?-1:(t.addElement(t.elt("URL",n,s+t.offset)),s+t.offset)}}]},Oce=[hce,dce,uce,gce];function E7(t,e,n){return(i,r,s)=>{if(r!=t||i.char(s+1)==t)return-1;let a=[i.elt(n,s,s+1)];for(let o=s+1;o<i.end;o++){let c=i.char(o);if(c==t)return i.addElement(i.elt(e,s,o+1,a.concat(i.elt(n,o,o+1))));if(c==92&&a.push(i.elt("Escape",o,o+++2)),br(c))break}return-1}}const vce={defineNodes:[{name:"Superscript",style:Y.special(Y.content)},{name:"SuperscriptMark",style:Y.processingInstruction}],parseInline:[{name:"Superscript",parse:E7(94,"Superscript","SuperscriptMark")}]},yce={defineNodes:[{name:"Subscript",style:Y.special(Y.content)},{name:"SubscriptMark",style:Y.processingInstruction}],parseInline:[{name:"Subscript",parse:E7(126,"Subscript","SubscriptMark")}]},xce={defineNodes:[{name:"Emoji",style:Y.character}],parseInline:[{name:"Emoji",parse(t,e,n){let i;return e!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(t.slice(n+1,t.end)))?-1:t.addElement(t.elt("Emoji",n,n+1+i[0].length))}}]},P7=tQ({commentTokens:{block:{open:"<!--",close:"-->"}}}),A7=new Xe,R7=ace.configure({props:[xo.add(t=>!t.is("Block")||t.is("Document")||mC(t)!=null||bce(t)?void 0:(e,n)=>({from:n.doc.lineAt(e.from).to,to:e.to})),A7.add(mC),Tl.add({Document:()=>null}),il.add({Document:P7})]});function mC(t){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(t.name);return e?+e[1]:void 0}function bce(t){return t.name=="OrderedList"||t.name=="BulletList"}function _ce(t,e){let n=t;for(;;){let i=n.nextSibling,r;if(!i||(r=mC(i.type))!=null&&r<=e)break;n=i}return n.to}const Sce=rX.of((t,e,n)=>{for(let i=kt(t).resolveInner(n,-1);i&&!(i.from<e);i=i.parent){let r=i.type.prop(A7);if(r==null)continue;let s=_ce(i,r);if(s>n)return{from:n,to:s}}return null});function $Q(t){return new mr(P7,t,[],"markdown")}const wce=$Q(R7),kce=R7.configure([Oce,yce,vce,xce,{props:[xo.add({Table:(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}]),gO=$Q(kce);function Cce(t,e){return n=>{if(n&&t){let i=null;if(n=/\S*/.exec(n)[0],typeof t=="function"?i=t(n):i=Gg.matchLanguageName(t,n,!0),i instanceof Gg)return i.support?i.support.language.parser:$f.getSkippingParser(i.load());if(i)return i.parser}return e?e.parser:null}}class Fx{constructor(e,n,i,r,s,a,o){this.node=e,this.from=n,this.to=i,this.spaceBefore=r,this.spaceAfter=s,this.type=a,this.item=o}blank(e,n=!0){let i=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;i.length<e;)i+=" ";return i}else{for(let r=this.to-this.from-i.length-this.spaceAfter.length;r>0;r--)i+=" ";return i+(n?this.spaceAfter:"")}}marker(e,n){let i=this.node.name=="OrderedList"?String(+N7(this.item,e)[2]+n):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function $7(t,e){let n=[],i=[];for(let r=t;r;r=r.parent){if(r.name=="FencedCode")return i;(r.name=="ListItem"||r.name=="Blockquote")&&n.push(r)}for(let r=n.length-1;r>=0;r--){let s=n[r],a,o=e.lineAt(s.from),c=s.from-o.from;if(s.name=="Blockquote"&&(a=/^ *>( ?)/.exec(o.text.slice(c))))i.push(new Fx(s,c,c+a[0].length,"",a[1],">",null));else if(s.name=="ListItem"&&s.parent.name=="OrderedList"&&(a=/^( *)\d+([.)])( *)/.exec(o.text.slice(c)))){let u=a[3],f=a[0].length;u.length>=4&&(u=u.slice(0,u.length-4),f-=4),i.push(new Fx(s.parent,c,c+f,a[1],u,a[2],s))}else if(s.name=="ListItem"&&s.parent.name=="BulletList"&&(a=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(o.text.slice(c)))){let u=a[4],f=a[0].length;u.length>4&&(u=u.slice(0,u.length-4),f-=4);let d=a[2];a[3]&&(d+=a[3].replace(/[xX]/," ")),i.push(new Fx(s.parent,c,c+f,a[1],u,d,s))}}return i}function N7(t,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(t.from,t.from+10))}function Gx(t,e,n,i=0){for(let r=-1,s=t;;){if(s.name=="ListItem"){let o=N7(s,e),c=+o[2];if(r>=0){if(c!=r+1)return;n.push({from:s.from+o[1].length,to:s.from+o[0].length,insert:String(r+2+i)})}r=c}let a=s.nextSibling;if(!a)break;s=a}}function NQ(t,e){let n=/^[ \t]*/.exec(t)[0].length;if(!n||e.facet(md)!="	")return t;let i=jr(t,4,n),r="";for(let s=i;s>0;)s>=4?(r+="	",s-=4):(r+=" ",s--);return r+t.slice(n)}const Tce=(t={})=>({state:e,dispatch:n})=>{let i=kt(e),{doc:r}=e,s=null,a=e.changeByRange(o=>{if(!o.empty||!gO.isActiveAt(e,o.from,-1)&&!gO.isActiveAt(e,o.from,1))return s={range:o};let c=o.from,u=r.lineAt(c),f=$7(i.resolveInner(c,-1),r);for(;f.length&&f[f.length-1].from>c-u.from;)f.pop();if(!f.length)return s={range:o};let d=f[f.length-1];if(d.to-d.spaceAfter.length>c-u.from)return s={range:o};let m=c>=d.to-d.spaceAfter.length&&!/\S/.test(u.text.slice(d.to));if(d.item&&m){let _=d.node.firstChild,Q=d.node.getChild("ListItem","ListItem");if(_.to>=c||Q&&Q.to<c||u.from>0&&!/[^\s>]/.test(r.lineAt(u.from-1).text)||t.nonTightLists===!1){let k=f.length>1?f[f.length-2]:null,T,E="";k&&k.item?(T=u.from+k.from,E=k.marker(r,1)):T=u.from+(k?k.to:0);let C=[{from:T,to:c,insert:E}];return d.node.name=="OrderedList"&&Gx(d.item,r,C,-2),k&&k.node.name=="OrderedList"&&Gx(k.item,r,C),{range:fe.cursor(T+E.length),changes:C}}else{let k=SM(f,e,u);return{range:fe.cursor(c+k.length+1),changes:{from:u.from,insert:k+e.lineBreak}}}}if(d.node.name=="Blockquote"&&m&&u.from){let _=r.lineAt(u.from-1),Q=/>\s*$/.exec(_.text);if(Q&&Q.index==d.from){let k=e.changes([{from:_.from+Q.index,to:_.to},{from:u.from+d.from,to:u.to}]);return{range:o.map(k),changes:k}}}let v=[];d.node.name=="OrderedList"&&Gx(d.item,r,v);let y=d.item&&d.item.from<u.from,x="";if(!y||/^[\s\d.)\-+*>]*/.exec(u.text)[0].length>=d.to)for(let _=0,Q=f.length-1;_<=Q;_++)x+=_==Q&&!y?f[_].marker(r,1):f[_].blank(_<Q?jr(u.text,4,f[_+1].from)-x.length:null);let S=c;for(;S>u.from&&/\s/.test(u.text.charAt(S-u.from-1));)S--;return x=NQ(x,e),Ece(d.node,e.doc)&&(x=SM(f,e,u)+e.lineBreak+x),v.push({from:S,to:c,insert:e.lineBreak+x}),{range:fe.cursor(S+x.length+1),changes:v}});return s?!1:(n(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0)},Qce=Tce();function _M(t){return t.name=="QuoteMark"||t.name=="ListMark"}function Ece(t,e){if(t.name!="OrderedList"&&t.name!="BulletList")return!1;let n=t.firstChild,i=t.getChild("ListItem","ListItem");if(!i)return!1;let r=e.lineAt(n.to),s=e.lineAt(i.from),a=/^[\s>]*$/.test(r.text);return r.number+(a?0:1)<s.number}function SM(t,e,n){let i="";for(let r=0,s=t.length-2;r<=s;r++)i+=t[r].blank(r<s?jr(n.text,4,t[r+1].from)-i.length:null,r<s);return NQ(i,e)}function Pce(t,e){let n=t.resolveInner(e,-1),i=e;_M(n)&&(i=n.from,n=n.parent);for(let r;r=n.childBefore(i);)if(_M(r))i=r.from;else if(r.name=="OrderedList"||r.name=="BulletList")n=r.lastChild,i=n.to;else break;return n}const Ace=({state:t,dispatch:e})=>{let n=kt(t),i=null,r=t.changeByRange(s=>{let a=s.from,{doc:o}=t;if(s.empty&&gO.isActiveAt(t,s.from)){let c=o.lineAt(a),u=$7(Pce(n,a),o);if(u.length){let f=u[u.length-1],d=f.to-f.spaceAfter.length+(f.spaceAfter?1:0);if(a-c.from>d&&!/\S/.test(c.text.slice(d,a-c.from)))return{range:fe.cursor(c.from+d),changes:{from:c.from+d,to:a}};if(a-c.from==d&&(!f.item||c.from<=f.item.from||!/\S/.test(c.text.slice(0,f.to)))){let m=c.from+f.from;if(f.item&&f.node.from<f.item.from&&/\S/.test(c.text.slice(f.from,f.to))){let v=f.blank(jr(c.text,4,f.to)-jr(c.text,4,f.from));return m==c.from&&(v=NQ(v,t)),{range:fe.cursor(m+v.length),changes:{from:m,to:c.from+f.to,insert:v}}}if(m<a)return{range:fe.cursor(m),changes:{from:m,to:a}}}}}return i={range:s}});return i?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"delete"})),!0)},Rce=[{key:"Enter",run:Qce},{key:"Backspace",run:Ace}],M7=o7({matchClosingTags:!1});function $ce(t={}){let{codeLanguages:e,defaultCodeLanguage:n,addKeymap:i=!0,base:{parser:r}=wce,completeHTMLTags:s=!0,pasteURLAsLink:a=!0,htmlTagLanguage:o=M7}=t;if(!(r instanceof i0))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let c=t.extensions?[t.extensions]:[],u=[o.support,Sce],f;a&&u.push(zce),n instanceof gl?(u.push(n.support),f=n.language):n&&(f=n);let d=e||f?Cce(e,f):void 0;c.push(lce({codeParser:d,htmlParser:o.language.parser})),i&&u.push(sa.high(Jc.of(Rce)));let m=$Q(r.configure(c));return s&&u.push(m.data.of({autocomplete:Nce})),new gl(m,u)}function Nce(t){let{state:e,pos:n}=t,i=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(n-25,n));if(!i)return null;let r=kt(e).resolveInner(n,-1);for(;r&&!r.type.isTop;){if(r.name=="CodeBlock"||r.name=="FencedCode"||r.name=="ProcessingInstructionBlock"||r.name=="CommentBlock"||r.name=="Link"||r.name=="Image")return null;r=r.parent}return{from:n-i[0].length,to:n,options:Mce(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let Kx=null;function Mce(){if(Kx)return Kx;let t=Vle(new fQ(lt.create({extensions:M7}),0,!0));return Kx=t?t.options:[]}const jce=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,zce=we.domEventHandlers({paste:(t,e)=>{var n;let{main:i}=e.state.selection;if(i.empty)return!1;let r=(n=t.clipboardData)===null||n===void 0?void 0:n.getData("text/plain");if(!r||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(r)||(/^www\./.test(r)&&(r="https://"+r),!gO.isActiveAt(e.state,i.from,1)))return!1;let s=kt(e.state),a=!1;return s.iterate({from:i.from,to:i.to,enter:o=>{(o.from>i.from||jce.test(o.name))&&(a=!0)},leave:o=>{o.to<i.to&&(a=!0)}}),a?!1:(e.dispatch({changes:[{from:i.from,insert:"["},{from:i.to,insert:`](${r})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}}),Dce="#e5c07b",wM="#e06c75",Lce="#56b6c2",qce="#ffffff",yg="#abb2bf",gC="#7d8799",Bce="#61afef",Ice="#98c379",kM="#d19a66",Xce="#c678dd",Zce="#21252b",CM="#2c313a",TM="#282c34",Jx="#353a42",Vce="#3E4451",QM="#528bff",Wce=we.theme({"&":{color:yg,backgroundColor:TM},".cm-content":{caretColor:QM},".cm-cursor, .cm-dropCursor":{borderLeftColor:QM},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Vce},".cm-panels":{backgroundColor:Zce,color:yg},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:TM,color:gC,border:"none"},".cm-activeLineGutter":{backgroundColor:CM},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Jx},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Jx,borderBottomColor:Jx},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:CM,color:yg}}},{dark:!0}),Uce=FO.define([{tag:Y.keyword,color:Xce},{tag:[Y.name,Y.deleted,Y.character,Y.propertyName,Y.macroName],color:wM},{tag:[Y.function(Y.variableName),Y.labelName],color:Bce},{tag:[Y.color,Y.constant(Y.name),Y.standard(Y.name)],color:kM},{tag:[Y.definition(Y.name),Y.separator],color:yg},{tag:[Y.typeName,Y.className,Y.number,Y.changed,Y.annotation,Y.modifier,Y.self,Y.namespace],color:Dce},{tag:[Y.operator,Y.operatorKeyword,Y.url,Y.escape,Y.regexp,Y.link,Y.special(Y.string)],color:Lce},{tag:[Y.meta,Y.comment],color:gC},{tag:Y.strong,fontWeight:"bold"},{tag:Y.emphasis,fontStyle:"italic"},{tag:Y.strikethrough,textDecoration:"line-through"},{tag:Y.link,color:gC,textDecoration:"underline"},{tag:Y.heading,fontWeight:"bold",color:wM},{tag:[Y.atom,Y.bool,Y.special(Y.variableName)],color:kM},{tag:[Y.processingInstruction,Y.string,Y.inserted],color:Ice},{tag:Y.invalid,color:qce}]),Hce=[Wce,fne(Uce)];function Yce(t){switch(t){case"javascript":return oC({jsx:!0,typescript:!1});case"typescript":return oC({jsx:!0,typescript:!0});case"python":return Ooe();case"json":return boe();case"html":return o7();case"css":return K8();case"markdown":return $ce();default:return[]}}function Fce({content:t,language:e,onChange:n,onSave:i}){const r=X.useRef(null),s=X.useRef(null),a=X.useRef(t);return X.useEffect(()=>{if(!r.current)return;const o=we.updateListener.of(m=>{if(m.docChanged){const v=m.state.doc.toString();a.current=v,n(v)}}),c=Jc.of([{key:"Mod-s",run:()=>(i?.(),!0)}]),u=[mte(),vte(),qee(),jne(),cne(),Eee(),Nee(),lt.allowMultipleSelections.of(!0),Gte(),bne(),Fre(),ose(),Kee(),tte(),Wee(),Vie(),Jc.of([...ese,...Die,...ure,...Vne,...sne,...p8,Lie]),Yce(e),Hce,o,c,we.theme({"&":{height:"100%",width:"100%"},".cm-scroller":{overflow:"auto"},".cm-content":{minWidth:"0"}}),we.lineWrapping],f=lt.create({doc:t,extensions:u}),d=new we({state:f,parent:r.current});return s.current=d,a.current=t,()=>{d.destroy(),s.current=null}},[e]),X.useEffect(()=>{if(s.current&&t!==a.current){const o=s.current.state.doc.toString();o!==t&&(s.current.dispatch({changes:{from:0,to:o.length,insert:t}}),a.current=t)}},[t]),g.jsx("div",{ref:r,className:"h-full w-full"})}function Gce({x:t,y:e,onClose:n,onAction:i}){const r=X.useRef(null);X.useEffect(()=>{const a=c=>{r.current&&!r.current.contains(c.target)&&n()},o=c=>{c.key==="Escape"&&n()};return document.addEventListener("mousedown",a),document.addEventListener("keydown",o),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",o)}},[n]),X.useEffect(()=>{if(r.current){const a=r.current.getBoundingClientRect(),o=window.innerWidth,c=window.innerHeight;a.right>o&&(r.current.style.left=`${t-a.width}px`),a.bottom>c&&(r.current.style.top=`${e-a.height}px`)}},[t,e]);const s=[{label:"Close",icon:g.jsx(li,{size:14}),action:"close"},{label:"Close Others",icon:g.jsx($g,{size:14}),action:"close-others"},{label:"Close All",icon:g.jsx(L$,{size:14}),action:"close-all"},{label:"Close Saved",icon:g.jsx(L$,{size:14}),action:"close-saved"},{label:"Close to the Right",icon:g.jsx(BY,{size:14}),action:"close-right"},{label:"Copy Path",icon:g.jsx(d6,{size:14}),action:"copy-path"}];return g.jsx("div",{ref:r,className:"fixed z-50 min-w-[180px] bg-[var(--bg-secondary)] border border-[var(--border)] rounded-md shadow-lg py-1",style:{left:t,top:e},children:s.map((a,o)=>g.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-left hover:bg-[var(--bg-tertiary)]",onClick:()=>{i(a.action),n()},children:[a.icon,a.label]},o))})}class Kce extends X.Component{constructor(e){super(e),this.state={hasError:!1,error:""}}static getDerivedStateFromError(e){return{hasError:!0,error:e.message}}componentDidCatch(e,n){console.error("Editor error:",e,n)}render(){return this.state.hasError?g.jsx("div",{className:"h-full flex items-center justify-center bg-red-900/20 text-red-400 p-4",children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"font-medium",children:"Editor crashed"}),g.jsx("p",{className:"text-sm mt-1",children:this.state.error}),g.jsx("button",{onClick:()=>this.setState({hasError:!1,error:""}),className:"mt-2 px-3 py-1 bg-red-600 rounded text-sm",children:"Retry"})]})}):this.props.children}}function EM(){const{openTabs:t,activeTab:e,closeTab:n,closeOtherTabs:i,closeAllTabs:r,closeSavedTabs:s,closeTabsToRight:a,setActiveTab:o,updateContent:c,saveFile:u}=qO(),[f,d]=X.useState({visible:!1,x:0,y:0,tabPath:""}),m=t.find(x=>x.path===e),v=(x,S)=>{x.preventDefault(),d({visible:!0,x:x.clientX,y:x.clientY,tabPath:S})},y=x=>{const{tabPath:S}=f;switch(x){case"close":n(S);break;case"close-others":i(S);break;case"close-all":r();break;case"close-saved":s();break;case"close-right":a(S);break;case"copy-path":navigator.clipboard.writeText(S);break}};return t.length===0?g.jsx("div",{className:"flex-1 flex items-center justify-center bg-[var(--bg-primary)] text-[var(--text-secondary)]",children:g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-lg",children:"No file open"}),g.jsx("p",{className:"text-sm mt-1",children:"Select a file from the sidebar to edit"})]})}):g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-[var(--bg-primary)] h-full w-full",children:[g.jsx("div",{className:"h-9 flex items-center bg-[var(--bg-tertiary)] border-b border-[var(--border)] overflow-x-auto flex-shrink-0",children:t.map(x=>g.jsxs("div",{className:`
              flex items-center gap-2 px-3 h-full cursor-pointer border-r border-[var(--border)]
              ${e===x.path?"bg-[var(--bg-primary)]":"hover:bg-[var(--bg-secondary)]"}
            `,onClick:()=>o(x.path),onContextMenu:S=>v(S,x.path),children:[x.isDirty?g.jsx(h6,{size:8,className:"fill-current text-[var(--accent)]"}):null,g.jsx("span",{className:"text-sm whitespace-nowrap",children:x.name}),g.jsx("button",{className:"p-0.5 rounded hover:bg-[var(--bg-tertiary)]",onClick:S=>{S.stopPropagation(),n(x.path)},children:g.jsx(li,{size:14})})]},x.path))}),g.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:m&&g.jsx(Kce,{children:g.jsx(Fce,{content:m.content,language:m.language,onChange:x=>c(m.path,x),onSave:()=>u(m.path)})},m.path)}),f.visible&&g.jsx(Gce,{x:f.x,y:f.y,tabPath:f.tabPath,onAction:y,onClose:()=>d({visible:!1,x:0,y:0,tabPath:""})})]})}var j7=Object.defineProperty,Jce=Object.getOwnPropertyDescriptor,eue=(t,e)=>{for(var n in e)j7(t,n,{get:e[n],enumerable:!0})},Gt=(t,e,n,i)=>{for(var r=i>1?void 0:i?Jce(e,n):e,s=t.length-1,a;s>=0;s--)(a=t[s])&&(r=(i?a(e,n,r):a(r))||r);return i&&r&&j7(e,n,r),r},Ce=(t,e)=>(n,i)=>e(n,i,t),PM="Terminal input",OC={get:()=>PM,set:t=>PM=t},AM="Too much output to announce, navigate to rows manually to read",vC={get:()=>AM,set:t=>AM=t};function tue(t){return t.replace(/\r?\n/g,"\r")}function nue(t,e){return e?"\x1B[200~"+t+"\x1B[201~":t}function iue(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()}function rue(t,e,n,i){if(t.stopPropagation(),t.clipboardData){let r=t.clipboardData.getData("text/plain");z7(r,e,n,i)}}function z7(t,e,n,i){t=tue(t),t=nue(t,n.decPrivateModes.bracketedPasteMode&&i.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),e.value=""}function D7(t,e,n){let i=n.getBoundingClientRect(),r=t.clientX-i.left-10,s=t.clientY-i.top-10;e.style.width="20px",e.style.height="20px",e.style.left=`${r}px`,e.style.top=`${s}px`,e.style.zIndex="1000",e.focus()}function RM(t,e,n,i,r){D7(t,e,n),r&&i.rightClickSelect(t),e.value=i.selectionText,e.select()}function Ka(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function r0(t,e=0,n=t.length){let i="";for(let r=e;r<n;++r){let s=t[r];s>65535?(s-=65536,i+=String.fromCharCode((s>>10)+55296)+String.fromCharCode(s%1024+56320)):i+=String.fromCharCode(s)}return i}var sue=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,e){let n=t.length;if(!n)return 0;let i=0,r=0;if(this._interim){let s=t.charCodeAt(r++);56320<=s&&s<=57343?e[i++]=(this._interim-55296)*1024+s-56320+65536:(e[i++]=this._interim,e[i++]=s),this._interim=0}for(let s=r;s<n;++s){let a=t.charCodeAt(s);if(55296<=a&&a<=56319){if(++s>=n)return this._interim=a,i;let o=t.charCodeAt(s);56320<=o&&o<=57343?e[i++]=(a-55296)*1024+o-56320+65536:(e[i++]=a,e[i++]=o);continue}a!==65279&&(e[i++]=a)}return i}},aue=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,e){let n=t.length;if(!n)return 0;let i=0,r,s,a,o,c=0,u=0;if(this.interim[0]){let m=!1,v=this.interim[0];v&=(v&224)===192?31:(v&240)===224?15:7;let y=0,x;for(;(x=this.interim[++y]&63)&&y<4;)v<<=6,v|=x;let S=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,_=S-y;for(;u<_;){if(u>=n)return 0;if(x=t[u++],(x&192)!==128){u--,m=!0;break}else this.interim[y++]=x,v<<=6,v|=x&63}m||(S===2?v<128?u--:e[i++]=v:S===3?v<2048||v>=55296&&v<=57343||v===65279||(e[i++]=v):v<65536||v>1114111||(e[i++]=v)),this.interim.fill(0)}let f=n-4,d=u;for(;d<n;){for(;d<f&&!((r=t[d])&128)&&!((s=t[d+1])&128)&&!((a=t[d+2])&128)&&!((o=t[d+3])&128);)e[i++]=r,e[i++]=s,e[i++]=a,e[i++]=o,d+=4;if(r=t[d++],r<128)e[i++]=r;else if((r&224)===192){if(d>=n)return this.interim[0]=r,i;if(s=t[d++],(s&192)!==128){d--;continue}if(c=(r&31)<<6|s&63,c<128){d--;continue}e[i++]=c}else if((r&240)===224){if(d>=n)return this.interim[0]=r,i;if(s=t[d++],(s&192)!==128){d--;continue}if(d>=n)return this.interim[0]=r,this.interim[1]=s,i;if(a=t[d++],(a&192)!==128){d--;continue}if(c=(r&15)<<12|(s&63)<<6|a&63,c<2048||c>=55296&&c<=57343||c===65279)continue;e[i++]=c}else if((r&248)===240){if(d>=n)return this.interim[0]=r,i;if(s=t[d++],(s&192)!==128){d--;continue}if(d>=n)return this.interim[0]=r,this.interim[1]=s,i;if(a=t[d++],(a&192)!==128){d--;continue}if(d>=n)return this.interim[0]=r,this.interim[1]=s,this.interim[2]=a,i;if(o=t[d++],(o&192)!==128){d--;continue}if(c=(r&7)<<18|(s&63)<<12|(a&63)<<6|o&63,c<65536||c>1114111)continue;e[i++]=c}}return i}},L7="",no=" ",xd=class q7{constructor(){this.fg=0,this.bg=0,this.extended=new OO}static toColorRGB(e){return[e>>>16&255,e>>>8&255,e&255]}static fromColorRGB(e){return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255}clone(){let e=new q7;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},OO=class B7{constructor(e=0,n=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(e){this._ext&=-67108864,this._ext|=e&67108863}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){let e=(this._ext&3758096384)>>29;return e<0?e^4294967288:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}clone(){return new B7(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},vr=class I7 extends xd{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new OO,this.combinedData=""}static fromCharData(e){let n=new I7;return n.setFromCharData(e),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Ka(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(e){this.fg=e[0],this.bg=0;let n=!1;if(e[1].length>2)n=!0;else if(e[1].length===2){let i=e[1].charCodeAt(0);if(55296<=i&&i<=56319){let r=e[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(i-55296)*1024+r-56320+65536|e[2]<<22:n=!0}else n=!0}else this.content=e[1].charCodeAt(0)|e[2]<<22;n&&(this.combinedData=e[1],this.content=2097152|e[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},$M="di$target",yC="di$dependencies",eb=new Map;function oue(t){return t[yC]||[]}function Rn(t){if(eb.has(t))return eb.get(t);let e=function(n,i,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");lue(e,n,r)};return e._id=t,eb.set(t,e),e}function lue(t,e,n){e[$M]===e?e[yC].push({id:t,index:n}):(e[yC]=[{id:t,index:n}],e[$M]=e)}var ci=Rn("BufferService"),X7=Rn("CoreMouseService"),Ql=Rn("CoreService"),cue=Rn("CharsetService"),MQ=Rn("InstantiationService"),Z7=Rn("LogService"),ui=Rn("OptionsService"),V7=Rn("OscLinkService"),uue=Rn("UnicodeService"),bd=Rn("DecorationService"),xC=class{constructor(t,e,n){this._bufferService=t,this._optionsService=e,this._oscLinkService=n}provideLinks(t,e){let n=this._bufferService.buffer.lines.get(t-1);if(!n){e(void 0);return}let i=[],r=this._optionsService.rawOptions.linkHandler,s=new vr,a=n.getTrimmedLength(),o=-1,c=-1,u=!1;for(let f=0;f<a;f++)if(!(c===-1&&!n.hasContent(f))){if(n.loadCell(f,s),s.hasExtendedAttrs()&&s.extended.urlId)if(c===-1){c=f,o=s.extended.urlId;continue}else u=s.extended.urlId!==o;else c!==-1&&(u=!0);if(u||c!==-1&&f===a-1){let d=this._oscLinkService.getLinkData(o)?.uri;if(d){let m={start:{x:c+1,y:t},end:{x:f+(!u&&f===a-1?1:0),y:t}},v=!1;if(!r?.allowNonHttpProtocols)try{let y=new URL(d);["http:","https:"].includes(y.protocol)||(v=!0)}catch{v=!0}v||i.push({text:d,range:m,activate:(y,x)=>r?r.activate(y,x,m):hue(y,x),hover:(y,x)=>r?.hover?.(y,x,m),leave:(y,x)=>r?.leave?.(y,x,m)})}u=!1,s.hasExtendedAttrs()&&s.extended.urlId?(c=f,o=s.extended.urlId):(c=-1,o=-1)}}e(i)}};xC=Gt([Ce(0,ci),Ce(1,ui),Ce(2,V7)],xC);function hue(t,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}var s0=Rn("CharSizeService"),ca=Rn("CoreBrowserService"),jQ=Rn("MouseService"),ua=Rn("RenderService"),fue=Rn("SelectionService"),W7=Rn("CharacterJoinerService"),bu=Rn("ThemeService"),U7=Rn("LinkProviderService"),due=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?NM.isErrorNoTelemetry(t)?new NM(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(e=>{e(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},pue=new due;function xg(t){mue(t)||pue.onUnexpectedError(t)}var bC="Canceled";function mue(t){return t instanceof gue?!0:t instanceof Error&&t.name===bC&&t.message===bC}var gue=class extends Error{constructor(){super(bC),this.name=this.message}};function Oue(t){return new Error(`Illegal argument: ${t}`)}var NM=class _C extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof _C)return e;let n=new _C;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},SC=class H7 extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,H7.prototype)}};function Xi(t,e=0){return t[t.length-(1+e)]}var vue;(t=>{function e(s){return s<0}t.isLessThan=e;function n(s){return s<=0}t.isLessThanOrEqual=n;function i(s){return s>0}t.isGreaterThan=i;function r(s){return s===0}t.isNeitherLessOrGreaterThan=r,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(vue||={});function yue(t,e){let n=this,i=!1,r;return function(){return i||(i=!0,e||(r=t.apply(n,arguments))),r}}var Y7;(t=>{function e(T){return T&&typeof T=="object"&&typeof T[Symbol.iterator]=="function"}t.is=e;let n=Object.freeze([]);function i(){return n}t.empty=i;function*r(T){yield T}t.single=r;function s(T){return e(T)?T:r(T)}t.wrap=s;function a(T){return T||n}t.from=a;function*o(T){for(let E=T.length-1;E>=0;E--)yield T[E]}t.reverse=o;function c(T){return!T||T[Symbol.iterator]().next().done===!0}t.isEmpty=c;function u(T){return T[Symbol.iterator]().next().value}t.first=u;function f(T,E){let C=0;for(let P of T)if(E(P,C++))return!0;return!1}t.some=f;function d(T,E){for(let C of T)if(E(C))return C}t.find=d;function*m(T,E){for(let C of T)E(C)&&(yield C)}t.filter=m;function*v(T,E){let C=0;for(let P of T)yield E(P,C++)}t.map=v;function*y(T,E){let C=0;for(let P of T)yield*E(P,C++)}t.flatMap=y;function*x(...T){for(let E of T)yield*E}t.concat=x;function S(T,E,C){let P=C;for(let L of T)P=E(P,L);return P}t.reduce=S;function*_(T,E,C=T.length){for(E<0&&(E+=T.length),C<0?C+=T.length:C>T.length&&(C=T.length);E<C;E++)yield T[E]}t.slice=_;function Q(T,E=Number.POSITIVE_INFINITY){let C=[];if(E===0)return[C,T];let P=T[Symbol.iterator]();for(let L=0;L<E;L++){let B=P.next();if(B.done)return[C,t.empty()];C.push(B.value)}return[C,{[Symbol.iterator](){return P}}]}t.consume=Q;async function k(T){let E=[];for await(let C of T)E.push(C);return Promise.resolve(E)}t.asyncToArray=k})(Y7||={});function yl(t){if(Y7.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function xue(...t){return qt(()=>yl(t))}function qt(t){return{dispose:yue(()=>{t()})}}var F7=class G7{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{yl(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?G7.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};F7.DISABLE_DISPOSED_WARNING=!1;var so=F7,Ge=class{constructor(){this._store=new so,this._store}dispose(){this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}};Ge.None=Object.freeze({dispose(){}});var su=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},Js=typeof window=="object"?window:globalThis,wC=class kC{constructor(e){this.element=e,this.next=kC.Undefined,this.prev=kC.Undefined}};wC.Undefined=new wC(void 0);var Vt=wC,MM=class{constructor(){this._first=Vt.Undefined,this._last=Vt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Vt.Undefined}clear(){let t=this._first;for(;t!==Vt.Undefined;){let e=t.next;t.prev=Vt.Undefined,t.next=Vt.Undefined,t=e}this._first=Vt.Undefined,this._last=Vt.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){let n=new Vt(t);if(this._first===Vt.Undefined)this._first=n,this._last=n;else if(e){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Vt.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==Vt.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==Vt.Undefined&&t.next!==Vt.Undefined){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===Vt.Undefined&&t.next===Vt.Undefined?(this._first=Vt.Undefined,this._last=Vt.Undefined):t.next===Vt.Undefined?(this._last=this._last.prev,this._last.next=Vt.Undefined):t.prev===Vt.Undefined&&(this._first=this._first.next,this._first.prev=Vt.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==Vt.Undefined;)yield t.element,t=t.next}},bue=globalThis.performance&&typeof globalThis.performance.now=="function",_ue=class K7{static create(e){return new K7(e)}constructor(e){this._now=bue&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Bn;(t=>{t.None=()=>Ge.None;function e($,I){return d($,()=>{},0,void 0,!0,void 0,I)}t.defer=e;function n($){return(I,j=null,D)=>{let R=!1,W;return W=$(U=>{if(!R)return W?W.dispose():R=!0,I.call(j,U)},null,D),R&&W.dispose(),W}}t.once=n;function i($,I,j){return u((D,R=null,W)=>$(U=>D.call(R,I(U)),null,W),j)}t.map=i;function r($,I,j){return u((D,R=null,W)=>$(U=>{I(U),D.call(R,U)},null,W),j)}t.forEach=r;function s($,I,j){return u((D,R=null,W)=>$(U=>I(U)&&D.call(R,U),null,W),j)}t.filter=s;function a($){return $}t.signal=a;function o(...$){return(I,j=null,D)=>{let R=xue(...$.map(W=>W(U=>I.call(j,U))));return f(R,D)}}t.any=o;function c($,I,j,D){let R=j;return i($,W=>(R=I(R,W),R),D)}t.reduce=c;function u($,I){let j,D={onWillAddFirstListener(){j=$(R.fire,R)},onDidRemoveLastListener(){j?.dispose()}},R=new be(D);return I?.add(R),R.event}function f($,I){return I instanceof Array?I.push($):I&&I.add($),$}function d($,I,j=100,D=!1,R=!1,W,U){let G,q,V,F=0,z,H={leakWarningThreshold:W,onWillAddFirstListener(){G=$(ee=>{F++,q=I(q,ee),D&&!V&&(K.fire(q),q=void 0),z=()=>{let ie=q;q=void 0,V=void 0,(!D||F>1)&&K.fire(ie),F=0},typeof j=="number"?(clearTimeout(V),V=setTimeout(z,j)):V===void 0&&(V=0,queueMicrotask(z))})},onWillRemoveListener(){R&&F>0&&z?.()},onDidRemoveLastListener(){z=void 0,G.dispose()}},K=new be(H);return U?.add(K),K.event}t.debounce=d;function m($,I=0,j){return t.debounce($,(D,R)=>D?(D.push(R),D):[R],I,void 0,!0,void 0,j)}t.accumulate=m;function v($,I=(D,R)=>D===R,j){let D=!0,R;return s($,W=>{let U=D||!I(W,R);return D=!1,R=W,U},j)}t.latch=v;function y($,I,j){return[t.filter($,I,j),t.filter($,D=>!I(D),j)]}t.split=y;function x($,I=!1,j=[],D){let R=j.slice(),W=$(q=>{R?R.push(q):G.fire(q)});D&&D.add(W);let U=()=>{R?.forEach(q=>G.fire(q)),R=null},G=new be({onWillAddFirstListener(){W||(W=$(q=>G.fire(q)),D&&D.add(W))},onDidAddFirstListener(){R&&(I?setTimeout(U):U())},onDidRemoveLastListener(){W&&W.dispose(),W=null}});return D&&D.add(G),G.event}t.buffer=x;function S($,I){return(j,D,R)=>{let W=I(new Q);return $(function(U){let G=W.evaluate(U);G!==_&&j.call(D,G)},void 0,R)}}t.chain=S;let _=Symbol("HaltChainable");class Q{constructor(){this.steps=[]}map(I){return this.steps.push(I),this}forEach(I){return this.steps.push(j=>(I(j),j)),this}filter(I){return this.steps.push(j=>I(j)?j:_),this}reduce(I,j){let D=j;return this.steps.push(R=>(D=I(D,R),D)),this}latch(I=(j,D)=>j===D){let j=!0,D;return this.steps.push(R=>{let W=j||!I(R,D);return j=!1,D=R,W?R:_}),this}evaluate(I){for(let j of this.steps)if(I=j(I),I===_)break;return I}}function k($,I,j=D=>D){let D=(...G)=>U.fire(j(...G)),R=()=>$.on(I,D),W=()=>$.removeListener(I,D),U=new be({onWillAddFirstListener:R,onDidRemoveLastListener:W});return U.event}t.fromNodeEventEmitter=k;function T($,I,j=D=>D){let D=(...G)=>U.fire(j(...G)),R=()=>$.addEventListener(I,D),W=()=>$.removeEventListener(I,D),U=new be({onWillAddFirstListener:R,onDidRemoveLastListener:W});return U.event}t.fromDOMEventEmitter=T;function E($){return new Promise(I=>n($)(I))}t.toPromise=E;function C($){let I=new be;return $.then(j=>{I.fire(j)},()=>{I.fire(void 0)}).finally(()=>{I.dispose()}),I.event}t.fromPromise=C;function P($,I){return $(j=>I.fire(j))}t.forward=P;function L($,I,j){return I(j),$(D=>I(D))}t.runAndSubscribe=L;class B{constructor(I,j){this._observable=I,this._counter=0,this._hasChanged=!1;let D={onWillAddFirstListener:()=>{I.addObserver(this)},onDidRemoveLastListener:()=>{I.removeObserver(this)}};this.emitter=new be(D),j&&j.add(this.emitter)}beginUpdate(I){this._counter++}handlePossibleChange(I){}handleChange(I,j){this._hasChanged=!0}endUpdate(I){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function N($,I){return new B($,I).emitter.event}t.fromObservable=N;function M($){return(I,j,D)=>{let R=0,W=!1,U={beginUpdate(){R++},endUpdate(){R--,R===0&&($.reportChanges(),W&&(W=!1,I.call(j)))},handlePossibleChange(){},handleChange(){W=!0}};$.addObserver(U),$.reportChanges();let G={dispose(){$.removeObserver(U)}};return D instanceof so?D.add(G):Array.isArray(D)&&D.push(G),G}}t.fromObservableLight=M})(Bn||={});var CC=class TC{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${TC._idPool++}`,TC.all.add(this)}start(e){this._stopWatch=new _ue,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};CC.all=new Set,CC._idPool=0;var Sue=CC,wue=-1,J7=class e9{constructor(e,n,i=(e9._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=n,this.name=i,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,n){let i=this.threshold;if(i<=0||n<i)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let[s,a]=this.getMostFrequentStack(),o=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${a}):`;console.warn(o),console.warn(s);let c=new Tue(o,s);this._errorHandler(c)}return()=>{let s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[i,r]of this._stacks)(!e||n<r)&&(e=[i,r],n=r);return e}};J7._idPool=1;var kue=J7,Cue=class t9{constructor(e){this.value=e}static create(){let e=new Error;return new t9(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Tue=class extends Error{constructor(t,e){super(t),this.name="ListenerLeakError",this.stack=e}},Que=class extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}},Eue=0,tb=class{constructor(t){this.value=t,this.id=Eue++}},Pue=2,Aue,be=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new kue(e?.onListenerError??xg,this._options?.leakWarningThreshold??wue):void 0,this._perfMon=this._options?._profName?new Sue(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,n,i)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let o=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(o);let c=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],u=new Que(`${o}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this._options?.onListenerError||xg)(u),Ge.None}if(this._disposed)return Ge.None;n&&(e=e.bind(n));let r=new tb(e),s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=Cue.create(),s=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof tb?(this._deliveryQueue??=new Rue,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=qt(()=>{s?.(),this._removeListener(r)});return i instanceof so?i.add(a):Array.isArray(i)&&i.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,i=n.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[i]=void 0;let r=this._deliveryQueue.current===this;if(this._size*Pue<=n.length){let s=0;for(let a=0;a<n.length;a++)n[a]?n[s++]=n[a]:r&&(this._deliveryQueue.end--,s<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=s}}_deliver(e,n){if(!e)return;let i=this._options?.onListenerError||xg;if(!i){e.value(n);return}try{e.value(n)}catch(r){i(r)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof tb)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}},Rue=class{constructor(){this.i=-1,this.end=0}enqueue(t,e,n){this.i=0,this.end=n,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},QC=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new be,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new be,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,n){if(this.getZoomLevel(n)===e)return;let i=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(i,e),this._onDidChangeZoomLevel.fire(i)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),e)}setFullscreen(e,n){if(this.isFullscreen(n)===e)return;let i=this.getWindowId(n);this.mapWindowIdToFullScreen.set(i,e),this._onDidChangeFullscreen.fire(i)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};QC.INSTANCE=new QC;var zQ=QC;function $ue(t,e,n){typeof e=="string"&&(e=t.matchMedia(e)),e.addEventListener("change",n)}zQ.INSTANCE.onDidChangeZoomLevel;function Nue(t){return zQ.INSTANCE.getZoomFactor(t)}zQ.INSTANCE.onDidChangeFullscreen;var _u=typeof navigator=="object"?navigator.userAgent:"",EC=_u.indexOf("Firefox")>=0,Mue=_u.indexOf("AppleWebKit")>=0,DQ=_u.indexOf("Chrome")>=0,jue=!DQ&&_u.indexOf("Safari")>=0;_u.indexOf("Electron/")>=0;_u.indexOf("Android")>=0;var nb=!1;if(typeof Js.matchMedia=="function"){let t=Js.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Js.matchMedia("(display-mode: fullscreen)");nb=t.matches,$ue(Js,t,({matches:n})=>{nb&&e.matches||(nb=n)})}var $c="en",PC=!1,AC=!1,bg=!1,n9=!1,Nm,_g=$c,jM=$c,zue,Ys,ll=globalThis,Wi;typeof ll.vscode<"u"&&typeof ll.vscode.process<"u"?Wi=ll.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Wi=process);var Due=typeof Wi?.versions?.electron=="string",Lue=Due&&Wi?.type==="renderer";if(typeof Wi=="object"){PC=Wi.platform==="win32",AC=Wi.platform==="darwin",bg=Wi.platform==="linux",bg&&Wi.env.SNAP&&Wi.env.SNAP_REVISION,Wi.env.CI||Wi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Nm=$c,_g=$c;let t=Wi.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);Nm=e.userLocale,jM=e.osLocale,_g=e.resolvedLanguage||$c,zue=e.languagePack?.translationsConfigFile}catch{}n9=!0}else typeof navigator=="object"&&!Lue?(Ys=navigator.userAgent,PC=Ys.indexOf("Windows")>=0,AC=Ys.indexOf("Macintosh")>=0,(Ys.indexOf("Macintosh")>=0||Ys.indexOf("iPad")>=0||Ys.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,bg=Ys.indexOf("Linux")>=0,Ys?.indexOf("Mobi")>=0,_g=globalThis._VSCODE_NLS_LANGUAGE||$c,Nm=navigator.language.toLowerCase(),jM=Nm):console.error("Unable to resolve platform.");var i9=PC,ds=AC,que=bg,zM=n9,gs=Ys,Za=_g,Bue;(t=>{function e(){return Za}t.value=e;function n(){return Za.length===2?Za==="en":Za.length>=3?Za[0]==="e"&&Za[1]==="n"&&Za[2]==="-":!1}t.isDefaultVariant=n;function i(){return Za==="en"}t.isDefault=i})(Bue||={});var Iue=typeof ll.postMessage=="function"&&!ll.importScripts;(()=>{if(Iue){let t=[];ll.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let i=0,r=t.length;i<r;i++){let s=t[i];if(s.id===n.data.vscodeScheduleAsyncWork){t.splice(i,1),s.callback();return}}});let e=0;return n=>{let i=++e;t.push({id:i,callback:n}),ll.postMessage({vscodeScheduleAsyncWork:i},"*")}}return t=>setTimeout(t)})();var Xue=!!(gs&&gs.indexOf("Chrome")>=0);gs&&gs.indexOf("Firefox")>=0;!Xue&&gs&&gs.indexOf("Safari")>=0;gs&&gs.indexOf("Edg/")>=0;gs&&gs.indexOf("Android")>=0;var xc=typeof navigator=="object"?navigator:{};zM||document.queryCommandSupported&&document.queryCommandSupported("copy")||xc&&xc.clipboard&&xc.clipboard.writeText,zM||xc&&xc.clipboard&&xc.clipboard.readText;var LQ=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},ib=new LQ,DM=new LQ,LM=new LQ,Zue=new Array(230),r9;(t=>{function e(o){return ib.keyCodeToStr(o)}t.toString=e;function n(o){return ib.strToKeyCode(o)}t.fromString=n;function i(o){return DM.keyCodeToStr(o)}t.toUserSettingsUS=i;function r(o){return LM.keyCodeToStr(o)}t.toUserSettingsGeneral=r;function s(o){return DM.strToKeyCode(o)||LM.strToKeyCode(o)}t.fromUserSettings=s;function a(o){if(o>=98&&o<=113)return null;switch(o){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return ib.keyCodeToStr(o)}t.toElectronAccelerator=a})(r9||={});var Vue=class s9{constructor(e,n,i,r,s){this.ctrlKey=e,this.shiftKey=n,this.altKey=i,this.metaKey=r,this.keyCode=s}equals(e){return e instanceof s9&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",i=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${e}${n}${i}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Wue([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Wue=class{constructor(t){if(t.length===0)throw Oue("chords");this.chords=t}getHashCode(){let t="";for(let e=0,n=this.chords.length;e<n;e++)e!==0&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}};function Uue(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return r9.fromString(n)}let e=t.keyCode;if(e===3)return 7;if(EC)switch(e){case 59:return 85;case 60:if(que)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(ds)return 57;break}else if(Mue&&(ds&&e===93||!ds&&e===92))return 57;return Zue[e]||0}var Hue=ds?256:2048,Yue=512,Fue=1024,Gue=ds?2048:256,qM=class{constructor(t){this._standardKeyboardEventBrand=!0;let e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState?.("AltGraph"),this.keyCode=Uue(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=Hue),this.altKey&&(e|=Yue),this.shiftKey&&(e|=Fue),this.metaKey&&(e|=Gue),e|=t,e}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new Vue(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},BM=new WeakMap;function Kue(t){if(!t.parent||t.parent===t)return null;try{let e=t.location,n=t.parent.location;if(e.origin!=="null"&&n.origin!=="null"&&e.origin!==n.origin)return null}catch{return null}return t.parent}var Jue=class{static getSameOriginWindowChain(t){let e=BM.get(t);if(!e){e=[],BM.set(t,e);let n=t,i;do i=Kue(n),i?e.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):e.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return e.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,e){if(!e||t===e)return{top:0,left:0};let n=0,i=0,r=this.getSameOriginWindowChain(t);for(let s of r){let a=s.window.deref();if(n+=a?.scrollY??0,i+=a?.scrollX??0,a===e||!s.iframeElement)break;let o=s.iframeElement.getBoundingClientRect();n+=o.top,i+=o.left}return{top:n,left:i}}},Mm=class{constructor(t,e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=Jue.getPositionOfChildWindowRelativeToAncestorWindow(t,e.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},IM=class{constructor(t,e=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e;let i=!1;if(DQ){let r=navigator.userAgent.match(/Chrome\/(\d+)/);i=(r?parseInt(r[1]):123)<=122}if(t){let r=t,s=t,a=t.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")i?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(t.type==="wheel"){let o=t;o.deltaMode===o.DOM_DELTA_LINE?EC&&!ds?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof r.wheelDeltaX<"u")jue&&i9?this.deltaX=-(r.wheelDeltaX/120):i?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let o=t;o.deltaMode===o.DOM_DELTA_LINE?EC&&!ds?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(i?this.deltaY=t.wheelDelta/(120*a):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},a9=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),ehe;(t=>{function e(n){return n===t.None||n===t.Cancelled||n instanceof the?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Bn.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:a9})})(ehe||={});var the=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a9:(this._emitter||(this._emitter=new be),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},qQ=class{constructor(t,e){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof e=="number"&&this.setIfNotSet(t,e)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,e){if(this._isDisposed)throw new SC("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},e)}setIfNotSet(t,e){if(this._isDisposed)throw new SC("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},e))}},nhe=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,e,n=globalThis){if(this.isDisposed)throw new SC("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let i=n.setInterval(()=>{t()},e);this.disposable=qt(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},ihe;(t=>{async function e(i){let r,s=await Promise.all(i.map(a=>a.then(o=>o,o=>{r||(r=o)})));if(typeof r<"u")throw r;return s}t.settled=e;function n(i){return new Promise(async(r,s)=>{try{await i(r,s)}catch(a){s(a)}})}t.withAsyncBody=n})(ihe||={});var XM=class ur{static fromArray(e){return new ur(n=>{n.emitMany(e)})}static fromPromise(e){return new ur(async n=>{n.emitMany(await e)})}static fromPromises(e){return new ur(async n=>{await Promise.all(e.map(async i=>n.emitOne(await i)))})}static merge(e){return new ur(async n=>{await Promise.all(e.map(async i=>{for await(let r of i)n.emitOne(r)}))})}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new be,queueMicrotask(async()=>{let i={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(i)),this.resolve()}catch(r){this.reject(r)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Bn.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,n){return new ur(async i=>{for await(let r of e)i.emitOne(n(r))})}map(e){return ur.map(this,e)}static filter(e,n){return new ur(async i=>{for await(let r of e)n(r)&&i.emitOne(r)})}filter(e){return ur.filter(this,e)}static coalesce(e){return ur.filter(e,n=>!!n)}coalesce(){return ur.coalesce(this)}static async toPromise(e){let n=[];for await(let i of e)n.push(i);return n}toPromise(){return ur.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};XM.EMPTY=XM.fromArray([]);var{getWindow:us,getWindowId:rhe,onDidRegisterWindow:she}=(function(){let t=new Map,e={window:Js,disposables:new so};t.set(Js.vscodeWindowId,e);let n=new be,i=new be,r=new be;function s(a,o){return(typeof a=="number"?t.get(a):void 0)??(o?e:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:i.event,registerWindow(a){if(t.has(a.vscodeWindowId))return Ge.None;let o=new so,c={window:a,disposables:o.add(new so)};return t.set(a.vscodeWindowId,c),o.add(qt(()=>{t.delete(a.vscodeWindowId),i.fire(a)})),o.add(Ie(a,Tn.BEFORE_UNLOAD,()=>{r.fire(a)})),n.fire(c),o},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(a){return a.vscodeWindowId},hasWindow(a){return t.has(a)},getWindowById:s,getWindow(a){let o=a;if(o?.ownerDocument?.defaultView)return o.ownerDocument.defaultView.window;let c=a;return c?.view?c.view.window:Js},getDocument(a){return us(a).document}}})(),ahe=class{constructor(t,e,n,i){this._node=t,this._type=e,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function Ie(t,e,n,i){return new ahe(t,e,n,i)}var ZM=function(t,e,n,i){return Ie(t,e,n,i)},BQ,ohe=class extends nhe{constructor(t){super(),this.defaultTarget=t&&us(t)}cancelAndSet(t,e,n){return super.cancelAndSet(t,e,n??this.defaultTarget)}},VM=class{constructor(t,e=0){this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){xg(t)}}static sort(t,e){return e.priority-t.priority}};(function(){let t=new Map,e=new Map,n=new Map,i=new Map,r=s=>{n.set(s,!1);let a=t.get(s)??[];for(e.set(s,a),t.set(s,[]),i.set(s,!0);a.length>0;)a.sort(VM.sort),a.shift().execute();i.set(s,!1)};BQ=(s,a,o=0)=>{let c=rhe(s),u=new VM(a,o),f=t.get(c);return f||(f=[],t.set(c,f)),f.push(u),n.get(c)||(n.set(c,!0),s.requestAnimationFrame(()=>r(c))),u}})();function lhe(t){let e=t.getBoundingClientRect(),n=us(t);return{left:e.left+n.scrollX,top:e.top+n.scrollY,width:e.width,height:e.height}}var Tn={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},che=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let e=xi(t);this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let e=xi(t);this._width!==e&&(this._width=e,this.domNode.style.width=this._width)}setHeight(t){let e=xi(t);this._height!==e&&(this._height=e,this.domNode.style.height=this._height)}setTop(t){let e=xi(t);this._top!==e&&(this._top=e,this.domNode.style.top=this._top)}setLeft(t){let e=xi(t);this._left!==e&&(this._left=e,this.domNode.style.left=this._left)}setBottom(t){let e=xi(t);this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom)}setRight(t){let e=xi(t);this._right!==e&&(this._right=e,this.domNode.style.right=this._right)}setPaddingTop(t){let e=xi(t);this._paddingTop!==e&&(this._paddingTop=e,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let e=xi(t);this._paddingLeft!==e&&(this._paddingLeft=e,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let e=xi(t);this._paddingBottom!==e&&(this._paddingBottom=e,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let e=xi(t);this._paddingRight!==e&&(this._paddingRight=e,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let e=xi(t);this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let e=xi(t);this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let e=xi(t);this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,e){this.domNode.classList.toggle(t,e),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,e){this.domNode.setAttribute(t,e)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function xi(t){return typeof t=="number"?`${t}px`:t}function gf(t){return new che(t)}var o9=class{constructor(){this._hooks=new so,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,n,i,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=r;let s=t;try{t.setPointerCapture(e),this._hooks.add(qt(()=>{try{t.releasePointerCapture(e)}catch{}}))}catch{s=us(t)}this._hooks.add(Ie(s,Tn.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Ie(s,Tn.POINTER_UP,a=>this.stopMonitoring(!0)))}};function uhe(t,e,n){let i=null,r=null;if(typeof n.value=="function"?(i="value",r=n.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(i="get",r=n.get),!r)throw new Error("not supported");let s=`$memoize$${e}`;n[i]=function(...a){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,a)}),this[s]}}var ts;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(ts||={});var Gh=class Yn extends Ge{constructor(){super(),this.dispatched=!1,this.targets=new MM,this.ignoreTargets=new MM,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Bn.runAndSubscribe(she,({window:e,disposables:n})=>{n.add(Ie(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),n.add(Ie(e.document,"touchend",i=>this.onTouchEnd(e,i))),n.add(Ie(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Js,disposables:this._store}))}static addTarget(e){if(!Yn.isTouchDevice())return Ge.None;Yn.INSTANCE||(Yn.INSTANCE=new Yn);let n=Yn.INSTANCE.targets.push(e);return qt(n)}static ignoreTarget(e){if(!Yn.isTouchDevice())return Ge.None;Yn.INSTANCE||(Yn.INSTANCE=new Yn);let n=Yn.INSTANCE.ignoreTargets.push(e);return qt(n)}static isTouchDevice(){return"ontouchstart"in Js||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,r=e.targetTouches.length;i<r;i++){let s=e.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:n,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[n],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};let a=this.newGestureEvent(ts.Start,s.target);a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,n){let i=Date.now(),r=Object.keys(this.activeTouches).length;for(let s=0,a=n.changedTouches.length;s<a;s++){let o=n.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let c=this.activeTouches[o.identifier],u=Date.now()-c.initialTimeStamp;if(u<Yn.HOLD_DELAY&&Math.abs(c.initialPageX-Xi(c.rollingPageX))<30&&Math.abs(c.initialPageY-Xi(c.rollingPageY))<30){let f=this.newGestureEvent(ts.Tap,c.initialTarget);f.pageX=Xi(c.rollingPageX),f.pageY=Xi(c.rollingPageY),this.dispatchEvent(f)}else if(u>=Yn.HOLD_DELAY&&Math.abs(c.initialPageX-Xi(c.rollingPageX))<30&&Math.abs(c.initialPageY-Xi(c.rollingPageY))<30){let f=this.newGestureEvent(ts.Contextmenu,c.initialTarget);f.pageX=Xi(c.rollingPageX),f.pageY=Xi(c.rollingPageY),this.dispatchEvent(f)}else if(r===1){let f=Xi(c.rollingPageX),d=Xi(c.rollingPageY),m=Xi(c.rollingTimestamps)-c.rollingTimestamps[0],v=f-c.rollingPageX[0],y=d-c.rollingPageY[0],x=[...this.targets].filter(S=>c.initialTarget instanceof Node&&S.contains(c.initialTarget));this.inertia(e,x,i,Math.abs(v)/m,v>0?1:-1,f,Math.abs(y)/m,y>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(ts.End,c.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,n){let i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=n,i.tapCount=0,i}dispatchEvent(e){if(e.type===ts.Tap){let n=new Date().getTime(),i=0;n-this._lastSetTapCountTime>Yn.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=n,e.tapCount=i}else(e.type===ts.Change||e.type===ts.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let i of this.ignoreTargets)if(i.contains(e.initialTarget))return;let n=[];for(let i of this.targets)if(i.contains(e.initialTarget)){let r=0,s=e.initialTarget;for(;s&&s!==i;)r++,s=s.parentElement;n.push([r,i])}n.sort((i,r)=>i[0]-r[0]);for(let[i,r]of n)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,n,i,r,s,a,o,c,u){this.handle=BQ(e,()=>{let f=Date.now(),d=f-i,m=0,v=0,y=!0;r+=Yn.SCROLL_FRICTION*d,o+=Yn.SCROLL_FRICTION*d,r>0&&(y=!1,m=s*r*d),o>0&&(y=!1,v=c*o*d);let x=this.newGestureEvent(ts.Change);x.translationX=m,x.translationY=v,n.forEach(S=>S.dispatchEvent(x)),y||this.inertia(e,n,f,r,s,a+m,o,c,u+v)})}onTouchMove(e){let n=Date.now();for(let i=0,r=e.changedTouches.length;i<r;i++){let s=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}let a=this.activeTouches[s.identifier],o=this.newGestureEvent(ts.Change,a.initialTarget);o.translationX=s.pageX-Xi(a.rollingPageX),o.translationY=s.pageY-Xi(a.rollingPageY),o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o),a.rollingPageX.length>3&&(a.rollingPageX.shift(),a.rollingPageY.shift(),a.rollingTimestamps.shift()),a.rollingPageX.push(s.pageX),a.rollingPageY.push(s.pageY),a.rollingTimestamps.push(n)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Gh.SCROLL_FRICTION=-.005,Gh.HOLD_DELAY=700,Gh.CLEAR_TAP_COUNT_TIME=400,Gt([uhe],Gh,"isTouchDevice",1);var hhe=Gh,IQ=class extends Ge{onclick(t,e){this._register(Ie(t,Tn.CLICK,n=>e(new Mm(us(t),n))))}onmousedown(t,e){this._register(Ie(t,Tn.MOUSE_DOWN,n=>e(new Mm(us(t),n))))}onmouseover(t,e){this._register(Ie(t,Tn.MOUSE_OVER,n=>e(new Mm(us(t),n))))}onmouseleave(t,e){this._register(Ie(t,Tn.MOUSE_LEAVE,n=>e(new Mm(us(t),n))))}onkeydown(t,e){this._register(Ie(t,Tn.KEY_DOWN,n=>e(new qM(n))))}onkeyup(t,e){this._register(Ie(t,Tn.KEY_UP,n=>e(new qM(n))))}oninput(t,e){this._register(Ie(t,Tn.INPUT,e))}onblur(t,e){this._register(Ie(t,Tn.BLUR,e))}onfocus(t,e){this._register(Ie(t,Tn.FOCUS,e))}onchange(t,e){this._register(Ie(t,Tn.CHANGE,e))}ignoreGesture(t){return hhe.ignoreTarget(t)}},WM=11,fhe=class extends IQ{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=WM+"px",this.domNode.style.height=WM+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new o9),this._register(ZM(this.bgDomNode,Tn.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(ZM(this.domNode,Tn.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new ohe),this._pointerdownScheduleRepeatTimer=this._register(new qQ)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,us(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(e,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},dhe=class RC{constructor(e,n,i,r,s,a,o){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,i=i|0,r=r|0,s=s|0,a=a|0,o=o|0),this.rawScrollLeft=r,this.rawScrollTop=o,n<0&&(n=0),r+n>i&&(r=i-n),r<0&&(r=0),s<0&&(s=0),o+s>a&&(o=a-s),o<0&&(o=0),this.width=n,this.scrollWidth=i,this.scrollLeft=r,this.height=s,this.scrollHeight=a,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,n){return new RC(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new RC(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,n){let i=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,a=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,c=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:n,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:r,scrollLeftChanged:s,heightChanged:a,scrollHeightChanged:o,scrollTopChanged:c}}},phe=class extends Ge{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new dhe(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,e){let n=this._state.withScrollDimensions(t,e);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e,!1)}setScrollPositionSmooth(t,e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;e?i=new HM(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=HM.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),e=this._state.withScrollPosition(t);if(this._setState(e,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,e){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,e)))}},UM=class{constructor(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}};function rb(t,e){let n=e-t;return function(i){return t+n*Ohe(i)}}function mhe(t,e,n){return function(i){return i<n?t(i/n):e((i-n)/(1-n))}}var HM=class $C{constructor(e,n,i,r){this.from=e,this.to=n,this.duration=r,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,n,i){if(Math.abs(e-n)>2.5*i){let r,s;return e<n?(r=e+.75*i,s=n-.75*i):(r=e-.75*i,s=n+.75*i),mhe(rb(e,r),rb(s,n),.33)}return rb(e,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let n=(e-this.startTime)/this.duration;if(n<1){let i=this.scrollLeft(n),r=this.scrollTop(n);return new UM(i,r,!1)}return new UM(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,n,i){return $C.start(e,n,i)}static start(e,n,i){i=i+10;let r=Date.now()-10;return new $C(e,n,r,i)}};function ghe(t){return Math.pow(t,3)}function Ohe(t){return 1-ghe(1-t)}var vhe=class extends Ge{constructor(t,e,n){super(),this._visibility=t,this._visibleClassName=e,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new qQ)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},yhe=140,l9=class extends IQ{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new vhe(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new o9),this._shouldRender=!0,this.domNode=gf(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Ie(this.domNode.domNode,Tn.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(t){let e=this._register(new fhe(t));this.domNode.domNode.appendChild(e.bgDomNode),this.domNode.domNode.appendChild(e.domNode)}_createSlider(t,e,n,i){this.slider=gf(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Ie(this.slider.domNode,Tn.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),i=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(t);n<=r&&r<=i?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let e,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")e=t.offsetX,n=t.offsetY;else{let r=lhe(this.domNode.domNode);e=t.pageX-r.left,n=t.pageY-r.top}let i=this._pointerDownRelativePosition(e,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,r=>{let s=this._sliderOrthogonalPointerPosition(r),a=Math.abs(s-n);if(i9&&a>yhe){this._setDesiredScrollPositionNow(i.getScrollPosition());return}let o=this._sliderPointerPosition(r)-e;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(o))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},c9=class NC{constructor(e,n,i,r,s,a){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=s,this._scrollPosition=a,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new NC(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let n=Math.round(e);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(e){let n=Math.round(e);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let n=Math.round(e);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,n,i,r,s){let a=Math.max(0,i-e),o=Math.max(0,a-2*n),c=r>0&&r>i;if(!c)return{computedAvailableSize:Math.round(a),computedIsNeeded:c,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};let u=Math.round(Math.max(20,Math.floor(i*o/r))),f=(o-u)/(r-i),d=s*f;return{computedAvailableSize:Math.round(a),computedIsNeeded:c,computedSliderSize:Math.round(u),computedSliderRatio:f,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){let e=NC._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize,i=this._scrollPosition;return n<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+e;return Math.round(n/this._computedSliderRatio)}},xhe=class extends l9{constructor(t,e,n){let i=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new c9(e.horizontalHasArrows?e.arrowSize:0,e.horizontal===2?0:e.horizontalScrollbarSize,e.vertical===2?0:e.verticalScrollbarSize,i.width,i.scrollWidth,r.scrollLeft),visibility:e.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:e.scrollByPage}),e.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((e.horizontalScrollbarSize-e.horizontalSliderSize)/2),0,void 0,e.horizontalSliderSize)}_updateSlider(t,e){this.slider.setWidth(t),this.slider.setLeft(e)}_renderDomNode(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,e){t.scrollLeft=e}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},bhe=class extends l9{constructor(t,e,n){let i=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new c9(e.verticalHasArrows?e.arrowSize:0,e.vertical===2?0:e.verticalScrollbarSize,0,i.height,i.scrollHeight,r.scrollTop),visibility:e.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:e.scrollByPage}),e.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((e.verticalScrollbarSize-e.verticalSliderSize)/2),e.verticalSliderSize,void 0)}_updateSlider(t,e){this.slider.setHeight(t),this.slider.setTop(e)}_renderDomNode(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return e}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,e){t.scrollTop=e}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},_he=500,YM=50,She=class{constructor(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}},MC=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,n=0,i=1,r=this._rear;do{let s=r===this._front?e:Math.pow(2,-i);if(e-=s,n+=this._memory[r].score*s,r===this._front)break;r=(this._capacity+r-1)%this._capacity,i++}while(!0);return n<=.5}acceptStandardWheelEvent(e){if(DQ){let n=us(e.browserEvent),i=Nue(n);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,n,i){let r=null,s=new She(e,n,i);this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,r)}_computeScore(e,n){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),n){let r=Math.abs(e.deltaX),s=Math.abs(e.deltaY),a=Math.abs(n.deltaX),o=Math.abs(n.deltaY),c=Math.max(Math.min(r,a),1),u=Math.max(Math.min(s,o),1),f=Math.max(r,a),d=Math.max(s,o);f%c===0&&d%u===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};MC.INSTANCE=new MC;var whe=MC,khe=class extends IQ{constructor(t,e,n){super(),this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new be),this.onWillScroll=this._onWillScroll.event,this._options=The(e),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let i={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new bhe(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new xhe(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=gf(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=gf(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=gf(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new qQ),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=yl(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,ds&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new IM(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=yl(this._mouseWheelToDispose),t)){let e=n=>{this._onMouseWheel(new IM(n))};this._mouseWheelToDispose.push(Ie(this._listenOnDomNode,Tn.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let e=whe.INSTANCE;e.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let r=t.deltaY*this._options.mouseWheelScrollSensitivity,s=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+r===0?s=r=0:Math.abs(r)>=Math.abs(s)?s=0:r=0),this._options.flipAxes&&([r,s]=[s,r]);let a=!ds&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=r,r=0),t.browserEvent&&t.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let o=this._scrollable.getFutureScrollPosition(),c={};if(r){let u=YM*r,f=o.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(c,f)}if(s){let u=YM*s,f=o.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(c,f)}c=this._scrollable.validateScrollPosition(c),(o.scrollLeft!==c.scrollLeft||o.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),e=t.scrollTop>0,n=t.scrollLeft>0,i=n?" left":"",r=e?" top":"",s=n||e?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${r}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),_he)}},Che=class extends khe{constructor(t,e,n){super(t,e,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function The(t){let e={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return e.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:e.verticalScrollbarSize,ds&&(e.className+=" mac"),e}var jC=class extends Ge{constructor(t,e,n,i,r,s,a,o){super(),this._bufferService=n,this._optionsService=a,this._renderService=o,this._onRequestScrollLines=this._register(new be),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let c=this._register(new phe({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:u=>BQ(i.window,u)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{c.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new Che(e,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},c)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(u=>{this._scrollableElement.updateOptions({handleMouseWheel:!(u&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Bn.runAndSubscribe(s.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=s.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(qt(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=i.mainDocument.createElement("style"),e.appendChild(this._styleElement),this._register(qt(()=>this._styleElement.remove())),this._register(Bn.runAndSubscribe(s.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${s.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${s.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${s.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(u=>this._handleScroll(u)))}scrollLines(t){let e=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:e.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,e){e&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!e,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let e=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=e-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=e,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};jC=Gt([Ce(2,ci),Ce(3,ca),Ce(4,X7),Ce(5,bu),Ce(6,ui),Ce(7,ua)],jC);var zC=class extends Ge{constructor(t,e,n,i,r){super(),this._screenElement=t,this._bufferService=e,this._coreBrowserService=n,this._decorationService=i,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(s=>this._removeDecoration(s))),this._register(qt(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let e=this._coreBrowserService.mainDocument.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),e.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,e.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(t,e),e}_refreshStyle(t){let e=t.marker.line-this._bufferService.buffers.active.ydisp;if(e<0||e>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${e*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,e=t.element){if(!e)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?e.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":e.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};zC=Gt([Ce(1,ci),Ce(2,ca),Ce(3,bd),Ce(4,ua)],zC);var Qhe=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let e of this._zones)if(e.color===t.options.overviewRulerOptions.color&&e.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(e,t.marker.line))return;if(this._lineAdjacentToZone(e,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(e,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,e){return e>=t.startBufferLine&&e<=t.endBufferLine}_lineAdjacentToZone(t,e,n){return e>=t.startBufferLine-this._linePadding[n||"full"]&&e<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,e){t.startBufferLine=Math.min(t.startBufferLine,e),t.endBufferLine=Math.max(t.endBufferLine,e)}},Kr={full:0,left:0,center:0,right:0},Va={full:0,left:0,center:0,right:0},$h={full:0,left:0,center:0,right:0},vO=class extends Ge{constructor(t,e,n,i,r,s,a,o){super(),this._viewportElement=t,this._screenElement=e,this._bufferService=n,this._decorationService=i,this._renderService=r,this._optionsService=s,this._themeService=a,this._coreBrowserService=o,this._colorZoneStore=new Qhe,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(qt(()=>this._canvas?.remove()));let c=this._canvas.getContext("2d");if(c)this._ctx=c;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),e=Math.ceil((this._canvas.width-1)/3);Va.full=this._canvas.width,Va.left=t,Va.center=e,Va.right=t,this._refreshDrawHeightConstants(),$h.full=1,$h.left=1,$h.center=1+Va.left,$h.right=1+Va.left+Va.center}_refreshDrawHeightConstants(){Kr.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,e=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);Kr.left=e,Kr.center=e,Kr.right=e}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Kr.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Kr.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Kr.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Kr.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let e of t)e.position!=="full"&&this._renderColorZone(e);for(let e of t)e.position==="full"&&this._renderColorZone(e);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect($h[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-Kr[t.position||"full"]/2),Va[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+Kr[t.position||"full"]))}_queueRefresh(t,e){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=e||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};vO=Gt([Ce(2,ci),Ce(3,bd),Ce(4,ua),Ce(5,ui),Ce(6,bu),Ce(7,ca)],vO);var me;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(me||={});var Sg;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(Sg||={});var u9;(t=>t.ST=`${me.ESC}\\`)(u9||={});var DC=class{constructor(t,e,n,i,r,s){this._textarea=t,this._compositionView=e,this._bufferService=n,this._optionsService=i,this._coreService=r,this._renderService=s,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;e.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(e.start,this._compositionPosition.start):n=this._textarea.value.substring(e.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,n=e.replace(t,"");this._dataAlreadySent=n,e.length>t.length?this._coreService.triggerDataEvent(n,!0):e.length<t.length?this._coreService.triggerDataEvent(`${me.DEL}`,!0):e.length===t.length&&e!==t&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let s=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};DC=Gt([Ce(2,ci),Ce(3,ui),Ce(4,Ql),Ce(5,ua)],DC);var Qn=0,En=0,Pn=0,Ft=0,FM={css:"#00000000",rgba:0},hn;(t=>{function e(r,s,a,o){return o!==void 0?`#${Uo(r)}${Uo(s)}${Uo(a)}${Uo(o)}`:`#${Uo(r)}${Uo(s)}${Uo(a)}`}t.toCss=e;function n(r,s,a,o=255){return(r<<24|s<<16|a<<8|o)>>>0}t.toRgba=n;function i(r,s,a,o){return{css:t.toCss(r,s,a,o),rgba:t.toRgba(r,s,a,o)}}t.toColor=i})(hn||={});var Mt;(t=>{function e(c,u){if(Ft=(u.rgba&255)/255,Ft===1)return{css:u.css,rgba:u.rgba};let f=u.rgba>>24&255,d=u.rgba>>16&255,m=u.rgba>>8&255,v=c.rgba>>24&255,y=c.rgba>>16&255,x=c.rgba>>8&255;Qn=v+Math.round((f-v)*Ft),En=y+Math.round((d-y)*Ft),Pn=x+Math.round((m-x)*Ft);let S=hn.toCss(Qn,En,Pn),_=hn.toRgba(Qn,En,Pn);return{css:S,rgba:_}}t.blend=e;function n(c){return(c.rgba&255)===255}t.isOpaque=n;function i(c,u,f){let d=wg.ensureContrastRatio(c.rgba,u.rgba,f);if(d)return hn.toColor(d>>24&255,d>>16&255,d>>8&255)}t.ensureContrastRatio=i;function r(c){let u=(c.rgba|255)>>>0;return[Qn,En,Pn]=wg.toChannels(u),{css:hn.toCss(Qn,En,Pn),rgba:u}}t.opaque=r;function s(c,u){return Ft=Math.round(u*255),[Qn,En,Pn]=wg.toChannels(c.rgba),{css:hn.toCss(Qn,En,Pn,Ft),rgba:hn.toRgba(Qn,En,Pn,Ft)}}t.opacity=s;function a(c,u){return Ft=c.rgba&255,s(c,Ft*u/255)}t.multiplyOpacity=a;function o(c){return[c.rgba>>24&255,c.rgba>>16&255,c.rgba>>8&255]}t.toColorRGB=o})(Mt||={});var Wt;(t=>{let e,n;try{let r=document.createElement("canvas");r.width=1,r.height=1;let s=r.getContext("2d",{willReadFrequently:!0});s&&(e=s,e.globalCompositeOperation="copy",n=e.createLinearGradient(0,0,1,1))}catch{}function i(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return Qn=parseInt(r.slice(1,2).repeat(2),16),En=parseInt(r.slice(2,3).repeat(2),16),Pn=parseInt(r.slice(3,4).repeat(2),16),hn.toColor(Qn,En,Pn);case 5:return Qn=parseInt(r.slice(1,2).repeat(2),16),En=parseInt(r.slice(2,3).repeat(2),16),Pn=parseInt(r.slice(3,4).repeat(2),16),Ft=parseInt(r.slice(4,5).repeat(2),16),hn.toColor(Qn,En,Pn,Ft);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let s=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return Qn=parseInt(s[1]),En=parseInt(s[2]),Pn=parseInt(s[3]),Ft=Math.round((s[5]===void 0?1:parseFloat(s[5]))*255),hn.toColor(Qn,En,Pn,Ft);if(!e||!n)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=n,e.fillStyle=r,typeof e.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[Qn,En,Pn,Ft]=e.getImageData(0,0,1,1).data,Ft!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:hn.toRgba(Qn,En,Pn,Ft),css:r}}t.toColor=i})(Wt||={});var ri;(t=>{function e(i){return n(i>>16&255,i>>8&255,i&255)}t.relativeLuminance=e;function n(i,r,s){let a=i/255,o=r/255,c=s/255,u=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),f=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),d=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4);return u*.2126+f*.7152+d*.0722}t.relativeLuminance2=n})(ri||={});var wg;(t=>{function e(a,o){if(Ft=(o&255)/255,Ft===1)return o;let c=o>>24&255,u=o>>16&255,f=o>>8&255,d=a>>24&255,m=a>>16&255,v=a>>8&255;return Qn=d+Math.round((c-d)*Ft),En=m+Math.round((u-m)*Ft),Pn=v+Math.round((f-v)*Ft),hn.toRgba(Qn,En,Pn)}t.blend=e;function n(a,o,c){let u=ri.relativeLuminance(a>>8),f=ri.relativeLuminance(o>>8);if(Xs(u,f)<c){if(f<u){let v=i(a,o,c),y=Xs(u,ri.relativeLuminance(v>>8));if(y<c){let x=r(a,o,c),S=Xs(u,ri.relativeLuminance(x>>8));return y>S?v:x}return v}let d=r(a,o,c),m=Xs(u,ri.relativeLuminance(d>>8));if(m<c){let v=i(a,o,c),y=Xs(u,ri.relativeLuminance(v>>8));return m>y?d:v}return d}}t.ensureContrastRatio=n;function i(a,o,c){let u=a>>24&255,f=a>>16&255,d=a>>8&255,m=o>>24&255,v=o>>16&255,y=o>>8&255,x=Xs(ri.relativeLuminance2(m,v,y),ri.relativeLuminance2(u,f,d));for(;x<c&&(m>0||v>0||y>0);)m-=Math.max(0,Math.ceil(m*.1)),v-=Math.max(0,Math.ceil(v*.1)),y-=Math.max(0,Math.ceil(y*.1)),x=Xs(ri.relativeLuminance2(m,v,y),ri.relativeLuminance2(u,f,d));return(m<<24|v<<16|y<<8|255)>>>0}t.reduceLuminance=i;function r(a,o,c){let u=a>>24&255,f=a>>16&255,d=a>>8&255,m=o>>24&255,v=o>>16&255,y=o>>8&255,x=Xs(ri.relativeLuminance2(m,v,y),ri.relativeLuminance2(u,f,d));for(;x<c&&(m<255||v<255||y<255);)m=Math.min(255,m+Math.ceil((255-m)*.1)),v=Math.min(255,v+Math.ceil((255-v)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),x=Xs(ri.relativeLuminance2(m,v,y),ri.relativeLuminance2(u,f,d));return(m<<24|v<<16|y<<8|255)>>>0}t.increaseLuminance=r;function s(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]}t.toChannels=s})(wg||={});function Uo(t){let e=t.toString(16);return e.length<2?"0"+e:e}function Xs(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}var Ehe=class extends xd{constructor(t,e,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},yO=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new vr}register(t){let e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];let n=[],i=e.translateToString(!0),r=0,s=0,a=0,o=e.getFg(0),c=e.getBg(0);for(let u=0;u<e.getTrimmedLength();u++)if(e.loadCell(u,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==o||this._workCell.bg!==c){if(u-r>1){let f=this._getJoinedRanges(i,a,s,e,r);for(let d=0;d<f.length;d++)n.push(f[d])}r=u,a=s,o=this._workCell.fg,c=this._workCell.bg}s+=this._workCell.getChars().length||no.length}if(this._bufferService.cols-r>1){let u=this._getJoinedRanges(i,a,s,e,r);for(let f=0;f<u.length;f++)n.push(u[f])}return n}_getJoinedRanges(t,e,n,i,r){let s=t.substring(e,n),a=[];try{a=this._characterJoiners[0].handler(s)}catch(o){console.error(o)}for(let o=1;o<this._characterJoiners.length;o++)try{let c=this._characterJoiners[o].handler(s);for(let u=0;u<c.length;u++)yO._mergeRanges(a,c[u])}catch(c){console.error(c)}return this._stringRangesToCellRanges(a,i,r),a}_stringRangesToCellRanges(t,e,n){let i=0,r=!1,s=0,a=t[i];if(a){for(let o=n;o<this._bufferService.cols;o++){let c=e.getWidth(o),u=e.getString(o).length||no.length;if(c!==0){if(!r&&a[0]<=s&&(a[0]=o,r=!0),a[1]<=s){if(a[1]=o,a=t[++i],!a)break;a[0]<=s?(a[0]=o,r=!0):r=!1}s+=u}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let n=!1;for(let i=0;i<t.length;i++){let r=t[i];if(n){if(e[1]<=r[0])return t[i-1][1]=e[1],t;if(e[1]<=r[1])return t[i-1][1]=Math.max(e[1],r[1]),t.splice(i,1),t;t.splice(i,1),i--}else{if(e[1]<=r[0])return t.splice(i,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),n=!0);continue}}return n?t[t.length-1][1]=e[1]:t.push(e),t}};yO=Gt([Ce(0,ci)],yO);function Phe(t){return 57508<=t&&t<=57558}function Ahe(t){return 9472<=t&&t<=9631}function Rhe(t){return Phe(t)||Ahe(t)}function $he(){return{css:{canvas:jm(),cell:jm()},device:{canvas:jm(),cell:jm(),char:{width:0,height:0,left:0,top:0}}}}function jm(){return{width:0,height:0}}var LC=class{constructor(t,e,n,i,r,s,a){this._document=t,this._characterJoinerService=e,this._optionsService=n,this._coreBrowserService=i,this._coreService=r,this._decorationService=s,this._themeService=a,this._workCell=new vr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,e,n){this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=n}createRow(t,e,n,i,r,s,a,o,c,u,f){let d=[],m=this._characterJoinerService.getJoinedCharacters(e),v=this._themeService.colors,y=t.getNoBgTrimmedLength();n&&y<s+1&&(y=s+1);let x,S=0,_="",Q=0,k=0,T=0,E=0,C=!1,P=0,L=!1,B=0,N=0,M=[],$=u!==-1&&f!==-1;for(let I=0;I<y;I++){t.loadCell(I,this._workCell);let j=this._workCell.getWidth();if(j===0)continue;let D=!1,R=I>=N,W=I,U=this._workCell;if(m.length>0&&I===m[0][0]&&R){let ge=m.shift(),$e=this._isCellInSelection(ge[0],e);for(Q=ge[0]+1;Q<ge[1];Q++)R&&=$e===this._isCellInSelection(Q,e);R&&=!n||s<ge[0]||s>=ge[1],R?(D=!0,U=new Ehe(this._workCell,t.translateToString(!0,ge[0],ge[1]),ge[1]-ge[0]),W=ge[1]-1,j=U.getWidth()):N=ge[1]}let G=this._isCellInSelection(I,e),q=n&&I===s,V=$&&I>=u&&I<=f,F=!1;this._decorationService.forEachDecorationAtCell(I,e,void 0,ge=>{F=!0});let z=U.getChars()||no;if(z===" "&&(U.isUnderline()||U.isOverline())&&(z=""),B=j*o-c.get(z,U.isBold(),U.isItalic()),!x)x=this._document.createElement("span");else if(S&&(G&&L||!G&&!L&&U.bg===k)&&(G&&L&&v.selectionForeground||U.fg===T)&&U.extended.ext===E&&V===C&&B===P&&!q&&!D&&!F&&R){U.isInvisible()?_+=no:_+=z,S++;continue}else S&&(x.textContent=_),x=this._document.createElement("span"),S=0,_="";if(k=U.bg,T=U.fg,E=U.extended.ext,C=V,P=B,L=G,D&&s>=I&&s<=W&&(s=I),!this._coreService.isCursorHidden&&q&&this._coreService.isCursorInitialized){if(M.push("xterm-cursor"),this._coreBrowserService.isFocused)a&&M.push("xterm-cursor-blink"),M.push(i==="bar"?"xterm-cursor-bar":i==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":M.push("xterm-cursor-outline");break;case"block":M.push("xterm-cursor-block");break;case"bar":M.push("xterm-cursor-bar");break;case"underline":M.push("xterm-cursor-underline");break}}if(U.isBold()&&M.push("xterm-bold"),U.isItalic()&&M.push("xterm-italic"),U.isDim()&&M.push("xterm-dim"),U.isInvisible()?_=no:_=U.getChars()||no,U.isUnderline()&&(M.push(`xterm-underline-${U.extended.underlineStyle}`),_===" "&&(_=""),!U.isUnderlineColorDefault()))if(U.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${xd.toColorRGB(U.getUnderlineColor()).join(",")})`;else{let ge=U.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&U.isBold()&&ge<8&&(ge+=8),x.style.textDecorationColor=v.ansi[ge].css}U.isOverline()&&(M.push("xterm-overline"),_===" "&&(_="")),U.isStrikethrough()&&M.push("xterm-strikethrough"),V&&(x.style.textDecoration="underline");let H=U.getFgColor(),K=U.getFgColorMode(),ee=U.getBgColor(),ie=U.getBgColorMode(),le=!!U.isInverse();if(le){let ge=H;H=ee,ee=ge;let $e=K;K=ie,ie=$e}let ae,_e,ke=!1;this._decorationService.forEachDecorationAtCell(I,e,void 0,ge=>{ge.options.layer!=="top"&&ke||(ge.backgroundColorRGB&&(ie=50331648,ee=ge.backgroundColorRGB.rgba>>8&16777215,ae=ge.backgroundColorRGB),ge.foregroundColorRGB&&(K=50331648,H=ge.foregroundColorRGB.rgba>>8&16777215,_e=ge.foregroundColorRGB),ke=ge.options.layer==="top")}),!ke&&G&&(ae=this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque,ee=ae.rgba>>8&16777215,ie=50331648,ke=!0,v.selectionForeground&&(K=50331648,H=v.selectionForeground.rgba>>8&16777215,_e=v.selectionForeground)),ke&&M.push("xterm-decoration-top");let Ee;switch(ie){case 16777216:case 33554432:Ee=v.ansi[ee],M.push(`xterm-bg-${ee}`);break;case 50331648:Ee=hn.toColor(ee>>16,ee>>8&255,ee&255),this._addStyle(x,`background-color:#${GM((ee>>>0).toString(16),"0",6)}`);break;default:le?(Ee=v.foreground,M.push("xterm-bg-257")):Ee=v.background}switch(ae||U.isDim()&&(ae=Mt.multiplyOpacity(Ee,.5)),K){case 16777216:case 33554432:U.isBold()&&H<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(H+=8),this._applyMinimumContrast(x,Ee,v.ansi[H],U,ae,void 0)||M.push(`xterm-fg-${H}`);break;case 50331648:let ge=hn.toColor(H>>16&255,H>>8&255,H&255);this._applyMinimumContrast(x,Ee,ge,U,ae,_e)||this._addStyle(x,`color:#${GM(H.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(x,Ee,v.foreground,U,ae,_e)||le&&M.push("xterm-fg-257")}M.length&&(x.className=M.join(" "),M.length=0),!q&&!D&&!F&&R?S++:x.textContent=_,B!==this.defaultSpacing&&(x.style.letterSpacing=`${B}px`),d.push(x),I=W}return x&&S&&(x.textContent=_),d}_applyMinimumContrast(t,e,n,i,r,s){if(this._optionsService.rawOptions.minimumContrastRatio===1||Rhe(i.getCode()))return!1;let a=this._getContrastCache(i),o;if(!r&&!s&&(o=a.getColor(e.rgba,n.rgba)),o===void 0){let c=this._optionsService.rawOptions.minimumContrastRatio/(i.isDim()?2:1);o=Mt.ensureContrastRatio(r||e,s||n,c),a.setColor((r||e).rgba,(s||n).rgba,o??null)}return o?(this._addStyle(t,`color:${o.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,e){t.setAttribute("style",`${t.getAttribute("style")||""}${e};`)}_isCellInSelection(t,e){let n=this._selectionStart,i=this._selectionEnd;return!n||!i?!1:this._columnSelectMode?n[0]<=i[0]?t>=n[0]&&e>=n[1]&&t<i[0]&&e<=i[1]:t<n[0]&&e>=n[1]&&t>=i[0]&&e<=i[1]:e>n[1]&&e<i[1]||n[1]===i[1]&&e===n[1]&&t>=n[0]&&t<i[0]||n[1]<i[1]&&e===i[1]&&t<i[0]||n[1]<i[1]&&e===n[1]&&t>=n[0]}};LC=Gt([Ce(1,W7),Ce(2,ui),Ce(3,ca),Ce(4,Ql),Ce(5,bd),Ce(6,bu)],LC);function GM(t,e,n){for(;t.length<n;)t=e+t;return t}var Nhe=class{constructor(t,e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let i=t.createElement("span");i.classList.add("xterm-char-measure-element"),i.style.fontWeight="bold";let r=t.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let s=t.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[n,i,r,s],this._container.appendChild(n),this._container.appendChild(i),this._container.appendChild(r),this._container.appendChild(s),e.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,e,n,i){t===this._font&&e===this._fontSize&&n===this._weight&&i===this._weightBold||(this._font=t,this._fontSize=e,this._weight=n,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(t,e,n){let i=0;if(!e&&!n&&t.length===1&&(i=t.charCodeAt(0))<256){if(this._flat[i]!==-9999)return this._flat[i];let a=this._measure(t,0);return a>0&&(this._flat[i]=a),a}let r=t;e&&(r+="B"),n&&(r+="I");let s=this._holey.get(r);if(s===void 0){let a=0;e&&(a|=1),n&&(a|=2),s=this._measure(t,a),s>0&&this._holey.set(r,s)}return s}_measure(t,e){let n=this._measureElements[e];return n.textContent=t.repeat(32),n.offsetWidth/32}},Mhe=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,e,n,i=!1){if(this.selectionStart=e,this.selectionEnd=n,!e||!n||e[0]===n[0]&&e[1]===n[1]){this.clear();return}let r=t.buffers.active.ydisp,s=e[1]-r,a=n[1]-r,o=Math.max(s,0),c=Math.min(a,t.rows-1);if(o>=t.rows||c<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=i,this.viewportStartRow=s,this.viewportEndRow=a,this.viewportCappedStartRow=o,this.viewportCappedEndRow=c,this.startCol=e[0],this.endCol=n[0]}isCellSelected(t,e,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?e>=this.startCol&&n>=this.viewportCappedStartRow&&e<this.endCol&&n<=this.viewportCappedEndRow:e<this.startCol&&n>=this.viewportCappedStartRow&&e>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol):!1}};function jhe(){return new Mhe}var sb="xterm-dom-renderer-owner-",cr="xterm-rows",zm="xterm-fg-",KM="xterm-bg-",Nh="xterm-focus",Dm="xterm-selection",zhe=1,qC=class extends Ge{constructor(t,e,n,i,r,s,a,o,c,u,f,d,m,v){super(),this._terminal=t,this._document=e,this._element=n,this._screenElement=i,this._viewportElement=r,this._helperContainer=s,this._linkifier2=a,this._charSizeService=c,this._optionsService=u,this._bufferService=f,this._coreService=d,this._coreBrowserService=m,this._themeService=v,this._terminalClass=zhe++,this._rowElements=[],this._selectionRenderModel=jhe(),this.onRequestRedraw=this._register(new be).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(cr),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Dm),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=$he(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(y=>this._injectCss(y))),this._injectCss(this._themeService.colors),this._rowFactory=o.createInstance(LC,document),this._element.classList.add(sb+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(y=>this._handleLinkHover(y))),this._register(this._linkifier2.onHideLinkUnderline(y=>this._handleLinkLeave(y))),this._register(qt(()=>{this._element.classList.remove(sb+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Nhe(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let e=`${this._terminalSelector} .${cr} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=e,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let e=`${this._terminalSelector} .${cr} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;e+=`${this._terminalSelector} .${cr} .xterm-dim { color: ${Mt.multiplyOpacity(t.foreground,.5).css};}`,e+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,i=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;e+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,e+=`@keyframes ${i} { 50% {  box-shadow: none; }}`,e+=`@keyframes ${r} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,e+=`${this._terminalSelector} .${cr}.${Nh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${cr}.${Nh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${cr}.${Nh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${cr} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${cr} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${cr} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${cr} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${cr} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,e+=`${this._terminalSelector} .${Dm} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Dm} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Dm} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[s,a]of t.ansi.entries())e+=`${this._terminalSelector} .${zm}${s} { color: ${a.css}; }${this._terminalSelector} .${zm}${s}.xterm-dim { color: ${Mt.multiplyOpacity(a,.5).css}; }${this._terminalSelector} .${KM}${s} { background-color: ${a.css}; }`;e+=`${this._terminalSelector} .${zm}257 { color: ${Mt.opaque(t.background).css}; }${this._terminalSelector} .${zm}257.xterm-dim { color: ${Mt.multiplyOpacity(Mt.opaque(t.background),.5).css}; }${this._terminalSelector} .${KM}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=e}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,e){for(let n=this._rowElements.length;n<=e;n++){let i=this._document.createElement("div");this._rowContainer.appendChild(i),this._rowElements.push(i)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,e){this._refreshRowElements(t,e),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Nh),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Nh),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,e,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,e,n),this.renderRows(0,this._bufferService.rows-1),!t||!e||(this._selectionRenderModel.update(this._terminal,t,e,n),!this._selectionRenderModel.hasSelection))return;let i=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,s=this._selectionRenderModel.viewportCappedStartRow,a=this._selectionRenderModel.viewportCappedEndRow,o=this._document.createDocumentFragment();if(n){let c=t[0]>e[0];o.appendChild(this._createSelectionElement(s,c?e[0]:t[0],c?t[0]:e[0],a-s+1))}else{let c=i===s?t[0]:0,u=s===r?e[0]:this._bufferService.cols;o.appendChild(this._createSelectionElement(s,c,u));let f=a-s-1;if(o.appendChild(this._createSelectionElement(s+1,0,this._bufferService.cols,f)),s!==a){let d=r===a?e[0]:this._bufferService.cols;o.appendChild(this._createSelectionElement(a,0,d))}}this._selectionContainer.appendChild(o)}_createSelectionElement(t,e,n,i=1){let r=this._document.createElement("div"),s=e*this.dimensions.css.cell.width,a=this.dimensions.css.cell.width*(n-e);return s+a>this.dimensions.css.canvas.width&&(a=this.dimensions.css.canvas.width-s),r.style.height=`${i*this.dimensions.css.cell.height}px`,r.style.top=`${t*this.dimensions.css.cell.height}px`,r.style.left=`${s}px`,r.style.width=`${a}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,e){let n=this._bufferService.buffer,i=n.ybase+n.y,r=Math.min(n.x,this._bufferService.cols-1),s=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,a=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,o=this._optionsService.rawOptions.cursorInactiveStyle;for(let c=t;c<=e;c++){let u=c+n.ydisp,f=this._rowElements[c],d=n.lines.get(u);if(!f||!d)break;f.replaceChildren(...this._rowFactory.createRow(d,u,u===i,a,o,r,s,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${sb}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,e,n,i,r,s){n<0&&(t=0),i<0&&(e=0);let a=this._bufferService.rows-1;n=Math.max(Math.min(n,a),0),i=Math.max(Math.min(i,a),0),r=Math.min(r,this._bufferService.cols);let o=this._bufferService.buffer,c=o.ybase+o.y,u=Math.min(o.x,r-1),f=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,m=this._optionsService.rawOptions.cursorInactiveStyle;for(let v=n;v<=i;++v){let y=v+o.ydisp,x=this._rowElements[v],S=o.lines.get(y);if(!x||!S)break;x.replaceChildren(...this._rowFactory.createRow(S,y,y===c,d,m,u,f,this.dimensions.css.cell.width,this._widthCache,s?v===n?t:0:-1,s?(v===i?e:r)-1:-1))}}};qC=Gt([Ce(7,MQ),Ce(8,s0),Ce(9,ui),Ce(10,ci),Ce(11,Ql),Ce(12,ca),Ce(13,bu)],qC);var BC=class extends Ge{constructor(t,e,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new be),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Lhe(this._optionsService))}catch{this._measureStrategy=this._register(new Dhe(t,e,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};BC=Gt([Ce(2,ui)],BC);var h9=class extends Ge{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,e){t!==void 0&&t>0&&e!==void 0&&e>0&&(this._result.width=t,this._result.height=e)}},Dhe=class extends h9{constructor(t,e,n){super(),this._document=t,this._parentElement=e,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Lhe=class extends h9{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let e=this._ctx.measureText("W");if(!("width"in e&&"fontBoundingBoxAscent"in e&&"fontBoundingBoxDescent"in e))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},qhe=class extends Ge{constructor(t,e,n){super(),this._textarea=t,this._window=e,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Bhe(this._window)),this._onDprChange=this._register(new be),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new be),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(i=>this._screenDprMonitor.setWindow(i))),this._register(Bn.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(Ie(this._textarea,"focus",()=>this._isFocused=!0)),this._register(Ie(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Bhe=class extends Ge{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new su),this._onDprChange=this._register(new be),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(qt(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=Ie(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Ihe=class extends Ge{constructor(){super(),this.linkProviders=[],this._register(qt(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let e=this.linkProviders.indexOf(t);e!==-1&&this.linkProviders.splice(e,1)}}}};function XQ(t,e,n){let i=n.getBoundingClientRect(),r=t.getComputedStyle(n),s=parseInt(r.getPropertyValue("padding-left")),a=parseInt(r.getPropertyValue("padding-top"));return[e.clientX-i.left-s,e.clientY-i.top-a]}function Xhe(t,e,n,i,r,s,a,o,c){if(!s)return;let u=XQ(t,e,n);if(u)return u[0]=Math.ceil((u[0]+(c?a/2:0))/a),u[1]=Math.ceil(u[1]/o),u[0]=Math.min(Math.max(u[0],1),i+(c?1:0)),u[1]=Math.min(Math.max(u[1],1),r),u}var IC=class{constructor(t,e){this._renderService=t,this._charSizeService=e}getCoords(t,e,n,i,r){return Xhe(window,t,e,n,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(t,e){let n=XQ(window,t,e);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};IC=Gt([Ce(0,ua),Ce(1,s0)],IC);var Zhe=class{constructor(t,e){this._renderCallback=t,this._coreBrowserService=e,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},f9={};eue(f9,{getSafariVersion:()=>Whe,isChromeOS:()=>g9,isFirefox:()=>d9,isIpad:()=>Uhe,isIphone:()=>Hhe,isLegacyEdge:()=>Vhe,isLinux:()=>ZQ,isMac:()=>xO,isNode:()=>a0,isSafari:()=>p9,isWindows:()=>m9});var a0=typeof process<"u"&&"title"in process,_d=a0?"node":navigator.userAgent,Sd=a0?"node":navigator.platform,d9=_d.includes("Firefox"),Vhe=_d.includes("Edge"),p9=/^((?!chrome|android).)*safari/i.test(_d);function Whe(){if(!p9)return 0;let t=_d.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var xO=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Sd),Uhe=Sd==="iPad",Hhe=Sd==="iPhone",m9=["Windows","Win16","Win32","WinCE"].includes(Sd),ZQ=Sd.indexOf("Linux")>=0,g9=/\bCrOS\b/.test(_d),O9=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let e=0,n=0,i=t.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(e=performance.now(),this._tasks[this._i]()||this._i++,e=Math.max(1,performance.now()-e),n=Math.max(e,n),r=t.timeRemaining(),n*1.5>r){i-e<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(i-e))}ms`),this._start();return}i=r}this.clear()}},Yhe=class extends O9{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let e=performance.now()+t;return{timeRemaining:()=>Math.max(0,e-performance.now())}}},Fhe=class extends O9{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},bO=!a0&&"requestIdleCallback"in window?Fhe:Yhe,Ghe=class{constructor(){this._queue=new bO}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},XC=class extends Ge{constructor(t,e,n,i,r,s,a,o,c){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=i,this._coreService=r,this._coreBrowserService=o,this._renderer=this._register(new su),this._pausedResizeTask=new Ghe,this._observerDisposable=this._register(new su),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new be),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new be),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new be),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new be),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Zhe((u,f)=>this._renderRows(u,f),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new Khe(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(qt(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(a.onResize(()=>this._fullRefresh())),this._register(a.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(s.onDecorationRegistered(()=>this._fullRefresh())),this._register(s.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(a.cols,a.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(a.buffer.y,a.buffer.y,!0))),this._register(c.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,e),this._register(this._coreBrowserService.onWindowChange(u=>this._registerIntersectionObserver(u,e)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,e){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(i=>this._handleIntersectionChange(i[i.length-1]),{threshold:0});n.observe(e),this._observerDisposable.value=qt(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,e,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}let i=this._syncOutputHandler.flush();i&&(t=Math.min(t,i.start),e=Math.max(e,i.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,e,this._rowCount)}_renderRows(t,e){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}t=Math.min(t,this._rowCount-1),e=Math.min(e,this._rowCount-1),this._renderer.value.renderRows(t,e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:e}),this._onRender.fire({start:t,end:e}),this._isNextRenderRedrawOnly=!0}}resize(t,e){this._rowCount=e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,e)):this._renderer.value.handleResize(t,e),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,e,n){this._selectionState.start=t,this._selectionState.end=e,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,e,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};XC=Gt([Ce(2,ui),Ce(3,s0),Ce(4,Ql),Ce(5,bd),Ce(6,ci),Ce(7,ca),Ce(8,bu)],XC);var Khe=class{constructor(t,e,n){this._coreBrowserService=t,this._coreService=e,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,e){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,e)):(this._start=t,this._end=e,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Jhe(t,e,n,i){let r=n.buffer.x,s=n.buffer.y;if(!n.buffer.hasScrollback)return nfe(r,s,t,e,n,i)+o0(s,e,n,i)+ife(r,s,t,e,n,i);let a;if(s===e)return a=r>t?"D":"C",Vf(Math.abs(r-t),Zf(a,i));a=s>e?"D":"C";let o=Math.abs(s-e),c=tfe(s>e?t:r,n)+(o-1)*n.cols+1+efe(s>e?r:t);return Vf(c,Zf(a,i))}function efe(t,e){return t-1}function tfe(t,e){return e.cols-t}function nfe(t,e,n,i,r,s){return o0(e,i,r,s).length===0?"":Vf(y9(t,e,t,e-xl(e,r),!1,r).length,Zf("D",s))}function o0(t,e,n,i){let r=t-xl(t,n),s=e-xl(e,n),a=Math.abs(r-s)-rfe(t,e,n);return Vf(a,Zf(v9(t,e),i))}function ife(t,e,n,i,r,s){let a;o0(e,i,r,s).length>0?a=i-xl(i,r):a=e;let o=i,c=sfe(t,e,n,i,r,s);return Vf(y9(t,a,n,o,c==="C",r).length,Zf(c,s))}function rfe(t,e,n){let i=0,r=t-xl(t,n),s=e-xl(e,n);for(let a=0;a<Math.abs(r-s);a++){let o=v9(t,e)==="A"?-1:1;n.buffer.lines.get(r+o*a)?.isWrapped&&i++}return i}function xl(t,e){let n=0,i=e.buffer.lines.get(t),r=i?.isWrapped;for(;r&&t>=0&&t<e.rows;)n++,i=e.buffer.lines.get(--t),r=i?.isWrapped;return n}function sfe(t,e,n,i,r,s){let a;return o0(n,i,r,s).length>0?a=i-xl(i,r):a=e,t<n&&a<=i||t>=n&&a<i?"C":"D"}function v9(t,e){return t>e?"A":"B"}function y9(t,e,n,i,r,s){let a=t,o=e,c="";for(;(a!==n||o!==i)&&o>=0&&o<s.buffer.lines.length;)a+=r?1:-1,r&&a>s.cols-1?(c+=s.buffer.translateBufferLineToString(o,!1,t,a),a=0,t=0,o++):!r&&a<0&&(c+=s.buffer.translateBufferLineToString(o,!1,0,t+1),a=s.cols-1,t=a,o--);return c+s.buffer.translateBufferLineToString(o,!1,t,a)}function Zf(t,e){let n=e?"O":"[";return me.ESC+n+t}function Vf(t,e){t=Math.floor(t);let n="";for(let i=0;i<t;i++)n+=e;return n}var afe=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,e=this.selectionEnd;return!t||!e?!1:t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function JM(t,e){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return e*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var ab=50,ofe=15,lfe=50,cfe=500,ufe="",hfe=new RegExp(ufe,"g"),ZC=class extends Ge{constructor(t,e,n,i,r,s,a,o,c){super(),this._element=t,this._screenElement=e,this._linkifier=n,this._bufferService=i,this._coreService=r,this._mouseService=s,this._optionsService=a,this._renderService=o,this._coreBrowserService=c,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new vr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new be),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new be),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new be),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new be),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=u=>this._handleMouseMove(u),this._mouseUpListener=u=>this._handleMouseUp(u),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(u=>this._handleTrim(u)),this._register(this._bufferService.buffers.onBufferActivate(u=>this._handleBufferActivate(u))),this.enable(),this._model=new afe(this._bufferService),this._activeSelectionMode=0,this._register(qt(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(u=>{u.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!t||!e?!1:t[0]!==e[0]||t[1]!==e[1]}get selectionText(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";let n=this._bufferService.buffer,i=[];if(this._activeSelectionMode===3){if(t[0]===e[0])return"";let r=t[0]<e[0]?t[0]:e[0],s=t[0]<e[0]?e[0]:t[0];for(let a=t[1];a<=e[1];a++){let o=n.translateBufferLineToString(a,!0,r,s);i.push(o)}}else{let r=t[1]===e[1]?e[0]:void 0;i.push(n.translateBufferLineToString(t[1],!0,t[0],r));for(let s=t[1]+1;s<=e[1]-1;s++){let a=n.lines.get(s),o=n.translateBufferLineToString(s,!0);a?.isWrapped?i[i.length-1]+=o:i.push(o)}if(t[1]!==e[1]){let s=n.lines.get(e[1]),a=n.translateBufferLineToString(e[1],!0,0,e[0]);s&&s.isWrapped?i[i.length-1]+=a:i.push(a)}}return i.map(r=>r.replace(hfe," ")).join(m9?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),ZQ&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let e=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!n||!i||!e?!1:this._areCoordsInSelection(e,n,i)}isCellInSelection(t,e){let n=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!n||!i?!1:this._areCoordsInSelection([t,e],n,i)}_areCoordsInSelection(t,e,n){return t[1]>e[1]&&t[1]<n[1]||e[1]===n[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<n[0]||e[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||e[1]<n[1]&&t[1]===e[1]&&t[0]>=e[0]}_selectWordAtCursor(t,e){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=JM(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let i=this._getMouseBufferCoords(t);return i?(this._selectWordAt(i,e),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(e)return e[0]--,e[1]--,e[1]+=this._bufferService.buffer.ydisp,e}_getMouseEventScrollAmount(t){let e=XQ(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return e>=0&&e<=n?0:(e>n&&(e-=n),e=Math.min(Math.max(e,-ab),ab),e/=ab,e/Math.abs(e)+Math.round(e*(ofe-1)))}shouldForceSelection(t){return xO?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),lfe)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let e=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);e&&e.length!==this._model.selectionStart[0]&&e.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let e=this._getMouseBufferCoords(t);e&&(this._activeSelectionMode=2,this._selectLineAt(e[1]))}shouldColumnSelect(t){return t.altKey&&!(xO&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let i=n.lines.get(this._model.selectionEnd[1]);i&&i.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!e||e[0]!==this._model.selectionEnd[0]||e[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let e=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&e<cfe&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let i=Jhe(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(i,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd,n=!!t&&!!e&&(t[0]!==e[0]||t[1]!==e[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,e,n);return}!t||!e||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||e[0]!==this._oldSelectionEnd[0]||e[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,e,n)}_fireOnSelectionChange(t,e,n){this._oldSelectionStart=t,this._oldSelectionEnd=e,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(t,e){let n=e;for(let i=0;e>=i;i++){let r=t.loadCell(i,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:r>1&&e!==i&&(n+=r-1)}return n}setSelection(t,e,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,e,n=!0,i=!0){if(t[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,s=r.lines.get(t[1]);if(!s)return;let a=r.translateBufferLineToString(t[1],!1),o=this._convertViewportColToCharacterIndex(s,t[0]),c=o,u=t[0]-o,f=0,d=0,m=0,v=0;if(a.charAt(o)===" "){for(;o>0&&a.charAt(o-1)===" ";)o--;for(;c<a.length&&a.charAt(c+1)===" ";)c++}else{let S=t[0],_=t[0];s.getWidth(S)===0&&(f++,S--),s.getWidth(_)===2&&(d++,_++);let Q=s.getString(_).length;for(Q>1&&(v+=Q-1,c+=Q-1);S>0&&o>0&&!this._isCharWordSeparator(s.loadCell(S-1,this._workCell));){s.loadCell(S-1,this._workCell);let k=this._workCell.getChars().length;this._workCell.getWidth()===0?(f++,S--):k>1&&(m+=k-1,o-=k-1),o--,S--}for(;_<s.length&&c+1<a.length&&!this._isCharWordSeparator(s.loadCell(_+1,this._workCell));){s.loadCell(_+1,this._workCell);let k=this._workCell.getChars().length;this._workCell.getWidth()===2?(d++,_++):k>1&&(v+=k-1,c+=k-1),c++,_++}}c++;let y=o+u-f+m,x=Math.min(this._bufferService.cols,c-o+f+d-m-v);if(!(!e&&a.slice(o,c).trim()==="")){if(n&&y===0&&s.getCodePoint(0)!==32){let S=r.lines.get(t[1]-1);if(S&&s.isWrapped&&S.getCodePoint(this._bufferService.cols-1)!==32){let _=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(_){let Q=this._bufferService.cols-_.start;y-=Q,x+=Q}}}if(i&&y+x===this._bufferService.cols&&s.getCodePoint(this._bufferService.cols-1)!==32){let S=r.lines.get(t[1]+1);if(S?.isWrapped&&S.getCodePoint(0)!==32){let _=this._getWordAt([0,t[1]+1],!1,!1,!0);_&&(x+=_.length)}}return{start:y,length:x}}}_selectWordAt(t,e){let n=this._getWordAt(t,e);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let e=this._getWordAt(t,!0);if(e){let n=t[1];for(;e.start<0;)e.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let e=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:e.first},end:{x:this._bufferService.cols-1,y:e.last}};this._model.selectionStart=[0,e.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=JM(n,this._bufferService.cols)}};ZC=Gt([Ce(3,ci),Ce(4,Ql),Ce(5,jQ),Ce(6,ui),Ce(7,ua),Ce(8,ca)],ZC);var ej=class{constructor(){this._data={}}set(t,e,n){this._data[t]||(this._data[t]={}),this._data[t][e]=n}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}},tj=class{constructor(){this._color=new ej,this._css=new ej}setCss(t,e,n){this._css.set(t,e,n)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,n){this._color.set(t,e,n)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}},vn=Object.freeze((()=>{let t=[Wt.toColor("#2e3436"),Wt.toColor("#cc0000"),Wt.toColor("#4e9a06"),Wt.toColor("#c4a000"),Wt.toColor("#3465a4"),Wt.toColor("#75507b"),Wt.toColor("#06989a"),Wt.toColor("#d3d7cf"),Wt.toColor("#555753"),Wt.toColor("#ef2929"),Wt.toColor("#8ae234"),Wt.toColor("#fce94f"),Wt.toColor("#729fcf"),Wt.toColor("#ad7fa8"),Wt.toColor("#34e2e2"),Wt.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let n=0;n<216;n++){let i=e[n/36%6|0],r=e[n/6%6|0],s=e[n%6];t.push({css:hn.toCss(i,r,s),rgba:hn.toRgba(i,r,s)})}for(let n=0;n<24;n++){let i=8+n*10;t.push({css:hn.toCss(i,i,i),rgba:hn.toRgba(i,i,i)})}return t})()),Fo=Wt.toColor("#ffffff"),Kh=Wt.toColor("#000000"),nj=Wt.toColor("#ffffff"),ij=Kh,Mh={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},ffe=Fo,VC=class extends Ge{constructor(t){super(),this._optionsService=t,this._contrastCache=new tj,this._halfContrastCache=new tj,this._onChangeColors=this._register(new be),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Fo,background:Kh,cursor:nj,cursorAccent:ij,selectionForeground:void 0,selectionBackgroundTransparent:Mh,selectionBackgroundOpaque:Mt.blend(Kh,Mh),selectionInactiveBackgroundTransparent:Mh,selectionInactiveBackgroundOpaque:Mt.blend(Kh,Mh),scrollbarSliderBackground:Mt.opacity(Fo,.2),scrollbarSliderHoverBackground:Mt.opacity(Fo,.4),scrollbarSliderActiveBackground:Mt.opacity(Fo,.5),overviewRulerBorder:Fo,ansi:vn.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let e=this._colors;if(e.foreground=wt(t.foreground,Fo),e.background=wt(t.background,Kh),e.cursor=Mt.blend(e.background,wt(t.cursor,nj)),e.cursorAccent=Mt.blend(e.background,wt(t.cursorAccent,ij)),e.selectionBackgroundTransparent=wt(t.selectionBackground,Mh),e.selectionBackgroundOpaque=Mt.blend(e.background,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundTransparent=wt(t.selectionInactiveBackground,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundOpaque=Mt.blend(e.background,e.selectionInactiveBackgroundTransparent),e.selectionForeground=t.selectionForeground?wt(t.selectionForeground,FM):void 0,e.selectionForeground===FM&&(e.selectionForeground=void 0),Mt.isOpaque(e.selectionBackgroundTransparent)&&(e.selectionBackgroundTransparent=Mt.opacity(e.selectionBackgroundTransparent,.3)),Mt.isOpaque(e.selectionInactiveBackgroundTransparent)&&(e.selectionInactiveBackgroundTransparent=Mt.opacity(e.selectionInactiveBackgroundTransparent,.3)),e.scrollbarSliderBackground=wt(t.scrollbarSliderBackground,Mt.opacity(e.foreground,.2)),e.scrollbarSliderHoverBackground=wt(t.scrollbarSliderHoverBackground,Mt.opacity(e.foreground,.4)),e.scrollbarSliderActiveBackground=wt(t.scrollbarSliderActiveBackground,Mt.opacity(e.foreground,.5)),e.overviewRulerBorder=wt(t.overviewRulerBorder,ffe),e.ansi=vn.slice(),e.ansi[0]=wt(t.black,vn[0]),e.ansi[1]=wt(t.red,vn[1]),e.ansi[2]=wt(t.green,vn[2]),e.ansi[3]=wt(t.yellow,vn[3]),e.ansi[4]=wt(t.blue,vn[4]),e.ansi[5]=wt(t.magenta,vn[5]),e.ansi[6]=wt(t.cyan,vn[6]),e.ansi[7]=wt(t.white,vn[7]),e.ansi[8]=wt(t.brightBlack,vn[8]),e.ansi[9]=wt(t.brightRed,vn[9]),e.ansi[10]=wt(t.brightGreen,vn[10]),e.ansi[11]=wt(t.brightYellow,vn[11]),e.ansi[12]=wt(t.brightBlue,vn[12]),e.ansi[13]=wt(t.brightMagenta,vn[13]),e.ansi[14]=wt(t.brightCyan,vn[14]),e.ansi[15]=wt(t.brightWhite,vn[15]),t.extendedAnsi){let n=Math.min(e.ansi.length-16,t.extendedAnsi.length);for(let i=0;i<n;i++)e.ansi[i+16]=wt(t.extendedAnsi[i],vn[i+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};VC=Gt([Ce(0,ui)],VC);function wt(t,e){if(t!==void 0)try{return Wt.toColor(t)}catch{}return e}var dfe=class{constructor(...t){this._entries=new Map;for(let[e,n]of t)this.set(e,n)}set(t,e){let n=this._entries.get(t);return this._entries.set(t,e),n}forEach(t){for(let[e,n]of this._entries.entries())t(e,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},pfe=class{constructor(){this._services=new dfe,this._services.set(MQ,this)}setService(t,e){this._services.set(t,e)}getService(t){return this._services.get(t)}createInstance(t,...e){let n=oue(t).sort((s,a)=>s.index-a.index),i=[];for(let s of n){let a=this._services.get(s.id);if(!a)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${s.id._id}.`);i.push(a)}let r=n.length>0?n[0].index:e.length;if(e.length!==r)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);return new t(...e,...i)}},mfe={trace:0,debug:1,info:2,warn:3,error:4,off:5},gfe="xterm.js: ",WC=class extends Ge{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=mfe[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let e=0;e<t.length;e++)typeof t[e]=="function"&&(t[e]=t[e]())}_log(t,e,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":gfe)+e,...n)}trace(t,...e){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,e)}debug(t,...e){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,e)}info(t,...e){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,e)}warn(t,...e){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,e)}error(t,...e){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,e)}};WC=Gt([Ce(0,ui)],WC);var rj=class extends Ge{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new be),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new be),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new be),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let e=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)e[n]=this._array[this._getCyclicIndex(n)];this._array=e,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let e=this._length;e<t;e++)this._array[e]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,e){this._array[this._getCyclicIndex(t)]=e}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,e,...n){if(e){for(let i=t;i<this._length-e;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+e)];this._length-=e,this.onDeleteEmitter.fire({index:t,amount:e})}for(let i=this._length-1;i>=t;i--)this._array[this._getCyclicIndex(i+n.length)]=this._array[this._getCyclicIndex(i)];for(let i=0;i<n.length;i++)this._array[this._getCyclicIndex(t+i)]=n[i];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let i=this._length+n.length-this._maxLength;this._startIndex+=i,this._length=this._maxLength,this.onTrimEmitter.fire(i)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,e,n){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let r=e-1;r>=0;r--)this.set(t+r+n,this.get(t+r));let i=t+e+n-this._length;if(i>0)for(this._length+=i;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let i=0;i<e;i++)this.set(t+i+n,this.get(t+i))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},Fe=3,un=Object.freeze(new xd),Lm=0,ob=2,Jh=class x9{constructor(e,n,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(e*Fe);let r=n||vr.fromCharData([0,L7,1,0]);for(let s=0;s<e;++s)this.setCell(s,r);this.length=e}get(e){let n=this._data[e*Fe+0],i=n&2097151;return[this._data[e*Fe+1],n&2097152?this._combined[e]:i?Ka(i):"",n>>22,n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,n){this._data[e*Fe+1]=n[0],n[1].length>1?(this._combined[e]=n[1],this._data[e*Fe+0]=e|2097152|n[2]<<22):this._data[e*Fe+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(e){return this._data[e*Fe+0]>>22}hasWidth(e){return this._data[e*Fe+0]&12582912}getFg(e){return this._data[e*Fe+1]}getBg(e){return this._data[e*Fe+2]}hasContent(e){return this._data[e*Fe+0]&4194303}getCodePoint(e){let n=this._data[e*Fe+0];return n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):n&2097151}isCombined(e){return this._data[e*Fe+0]&2097152}getString(e){let n=this._data[e*Fe+0];return n&2097152?this._combined[e]:n&2097151?Ka(n&2097151):""}isProtected(e){return this._data[e*Fe+2]&536870912}loadCell(e,n){return Lm=e*Fe,n.content=this._data[Lm+0],n.fg=this._data[Lm+1],n.bg=this._data[Lm+2],n.content&2097152&&(n.combinedData=this._combined[e]),n.bg&268435456&&(n.extended=this._extendedAttrs[e]),n}setCell(e,n){n.content&2097152&&(this._combined[e]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[e]=n.extended),this._data[e*Fe+0]=n.content,this._data[e*Fe+1]=n.fg,this._data[e*Fe+2]=n.bg}setCellFromCodepoint(e,n,i,r){r.bg&268435456&&(this._extendedAttrs[e]=r.extended),this._data[e*Fe+0]=n|i<<22,this._data[e*Fe+1]=r.fg,this._data[e*Fe+2]=r.bg}addCodepointToCell(e,n,i){let r=this._data[e*Fe+0];r&2097152?this._combined[e]+=Ka(n):r&2097151?(this._combined[e]=Ka(r&2097151)+Ka(n),r&=-2097152,r|=2097152):r=n|1<<22,i&&(r&=-12582913,r|=i<<22),this._data[e*Fe+0]=r}insertCells(e,n,i){if(e%=this.length,e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,i),n<this.length-e){let r=new vr;for(let s=this.length-e-n-1;s>=0;--s)this.setCell(e+n+s,this.loadCell(e+s,r));for(let s=0;s<n;++s)this.setCell(e+s,i)}else for(let r=e;r<this.length;++r)this.setCell(r,i);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(e,n,i){if(e%=this.length,n<this.length-e){let r=new vr;for(let s=0;s<this.length-e-n;++s)this.setCell(e+s,this.loadCell(e+n+s,r));for(let s=this.length-n;s<this.length;++s)this.setCell(s,i)}else for(let r=e;r<this.length;++r)this.setCell(r,i);e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,i),this.getWidth(e)===0&&!this.hasContent(e)&&this.setCellFromCodepoint(e,0,1,i)}replaceCells(e,n,i,r=!1){if(r){for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,i);e<n&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;return}for(e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,i),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,i);e<n&&e<this.length;)this.setCell(e++,i)}resize(e,n){if(e===this.length)return this._data.length*4*ob<this._data.buffer.byteLength;let i=e*Fe;if(e>this.length){if(this._data.buffer.byteLength>=i*4)this._data=new Uint32Array(this._data.buffer,0,i);else{let r=new Uint32Array(i);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,i);let r=Object.keys(this._combined);for(let a=0;a<r.length;a++){let o=parseInt(r[a],10);o>=e&&delete this._combined[o]}let s=Object.keys(this._extendedAttrs);for(let a=0;a<s.length;a++){let o=parseInt(s[a],10);o>=e&&delete this._extendedAttrs[o]}}return this.length=e,i*4*ob<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*ob<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,n=!1){if(n){for(let i=0;i<this.length;++i)this.isProtected(i)||this.setCell(i,e);return}this._combined={},this._extendedAttrs={};for(let i=0;i<this.length;++i)this.setCell(i,e)}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let n in e._combined)this._combined[n]=e._combined[n];this._extendedAttrs={};for(let n in e._extendedAttrs)this._extendedAttrs[n]=e._extendedAttrs[n];this.isWrapped=e.isWrapped}clone(){let e=new x9(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let n in this._combined)e._combined[n]=this._combined[n];for(let n in this._extendedAttrs)e._extendedAttrs[n]=this._extendedAttrs[n];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*Fe+0]&4194303)return e+(this._data[e*Fe+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*Fe+0]&4194303||this._data[e*Fe+2]&50331648)return e+(this._data[e*Fe+0]>>22);return 0}copyCellsFrom(e,n,i,r,s){let a=e._data;if(s)for(let c=r-1;c>=0;c--){for(let u=0;u<Fe;u++)this._data[(i+c)*Fe+u]=a[(n+c)*Fe+u];a[(n+c)*Fe+2]&268435456&&(this._extendedAttrs[i+c]=e._extendedAttrs[n+c])}else for(let c=0;c<r;c++){for(let u=0;u<Fe;u++)this._data[(i+c)*Fe+u]=a[(n+c)*Fe+u];a[(n+c)*Fe+2]&268435456&&(this._extendedAttrs[i+c]=e._extendedAttrs[n+c])}let o=Object.keys(e._combined);for(let c=0;c<o.length;c++){let u=parseInt(o[c],10);u>=n&&(this._combined[u-n+i]=e._combined[u])}}translateToString(e,n,i,r){n=n??0,i=i??this.length,e&&(i=Math.min(i,this.getTrimmedLength())),r&&(r.length=0);let s="";for(;n<i;){let a=this._data[n*Fe+0],o=a&2097151,c=a&2097152?this._combined[n]:o?Ka(o):no;if(s+=c,r)for(let u=0;u<c.length;++u)r.push(n);n+=a>>22||1}return r&&r.push(n),s}};function Ofe(t,e,n,i,r,s){let a=[];for(let o=0;o<t.length-1;o++){let c=o,u=t.get(++c);if(!u.isWrapped)continue;let f=[t.get(o)];for(;c<t.length&&u.isWrapped;)f.push(u),u=t.get(++c);if(!s&&i>=o&&i<c){o+=f.length-1;continue}let d=0,m=Wf(f,d,e),v=1,y=0;for(;v<f.length;){let S=Wf(f,v,e),_=S-y,Q=n-m,k=Math.min(_,Q);f[d].copyCellsFrom(f[v],y,m,k,!1),m+=k,m===n&&(d++,m=0),y+=k,y===S&&(v++,y=0),m===0&&d!==0&&f[d-1].getWidth(n-1)===2&&(f[d].copyCellsFrom(f[d-1],n-1,m++,1,!1),f[d-1].setCell(n-1,r))}f[d].replaceCells(m,n,r);let x=0;for(let S=f.length-1;S>0&&(S>d||f[S].getTrimmedLength()===0);S--)x++;x>0&&(a.push(o+f.length-x),a.push(x)),o+=f.length-1}return a}function vfe(t,e){let n=[],i=0,r=e[i],s=0;for(let a=0;a<t.length;a++)if(r===a){let o=e[++i];t.onDeleteEmitter.fire({index:a-s,amount:o}),a+=o-1,s+=o,r=e[++i]}else n.push(a);return{layout:n,countRemoved:s}}function yfe(t,e){let n=[];for(let i=0;i<e.length;i++)n.push(t.get(e[i]));for(let i=0;i<n.length;i++)t.set(i,n[i]);t.length=e.length}function xfe(t,e,n){let i=[],r=t.map((c,u)=>Wf(t,u,e)).reduce((c,u)=>c+u),s=0,a=0,o=0;for(;o<r;){if(r-o<n){i.push(r-o);break}s+=n;let c=Wf(t,a,e);s>c&&(s-=c,a++);let u=t[a].getWidth(s-1)===2;u&&s--;let f=u?n-1:n;i.push(f),o+=f}return i}function Wf(t,e,n){if(e===t.length-1)return t[e].getTrimmedLength();let i=!t[e].hasContent(n-1)&&t[e].getWidth(n-1)===1,r=t[e+1].getWidth(0)===2;return i&&r?n-1:n}var b9=class _9{constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=_9._nextId++,this._onDispose=this.register(new be),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),yl(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}};b9._nextId=1;var bfe=b9,wn={},Go=wn.B;wn[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};wn.A={"#":""};wn.B=void 0;wn[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};wn.C=wn[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};wn.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};wn.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};wn.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};wn.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};wn.E=wn[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};wn.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};wn.H=wn[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};wn["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var sj=4294967295,aj=class{constructor(t,e,n){this._hasScrollback=t,this._optionsService=e,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=un.clone(),this.savedCharset=Go,this.markers=[],this._nullCell=vr.fromCharData([0,L7,1,0]),this._whitespaceCell=vr.fromCharData([0,no,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new bO,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new rj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new OO),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new OO),this._whitespaceCell}getBlankLine(t,e){return new Jh(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let e=t+this._optionsService.rawOptions.scrollback;return e>sj?sj:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=un);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new rj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){let n=this.getNullCell(un),i=0,r=this._getCorrectBufferLength(e);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<t)for(let a=0;a<this.lines.length;a++)i+=+this.lines.get(a).resize(t,n);let s=0;if(this._rows<e)for(let a=this._rows;a<e;a++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Jh(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+s+1?(this.ybase--,s++,this.ydisp>0&&this.ydisp--):this.lines.push(new Jh(t,n)));else for(let a=this._rows;a>e;a--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let a=this.lines.length-r;a>0&&(this.lines.trimStart(a),this.ybase=Math.max(this.ybase-a,0),this.ydisp=Math.max(this.ydisp-a,0),this.savedY=Math.max(this.savedY-a,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),s&&(this.y+=s),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let s=0;s<this.lines.length;s++)i+=+this.lines.get(s).resize(t,n);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),i>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,i=Ofe(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(un),n);if(i.length>0){let r=vfe(this.lines,i);yfe(this.lines,r.layout),this._reflowLargerAdjustViewport(t,e,r.countRemoved)}}_reflowLargerAdjustViewport(t,e,n){let i=this.getNullCell(un),r=n;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new Jh(t,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,i=this.getNullCell(un),r=[],s=0;for(let a=this.lines.length-1;a>=0;a--){let o=this.lines.get(a);if(!o||!o.isWrapped&&o.getTrimmedLength()<=t)continue;let c=[o];for(;o.isWrapped&&a>0;)o=this.lines.get(--a),c.unshift(o);if(!n){let k=this.ybase+this.y;if(k>=a&&k<a+c.length)continue}let u=c[c.length-1].getTrimmedLength(),f=xfe(c,this._cols,t),d=f.length-c.length,m;this.ybase===0&&this.y!==this.lines.length-1?m=Math.max(0,this.y-this.lines.maxLength+d):m=Math.max(0,this.lines.length-this.lines.maxLength+d);let v=[];for(let k=0;k<d;k++){let T=this.getBlankLine(un,!0);v.push(T)}v.length>0&&(r.push({start:a+c.length+s,newLines:v}),s+=v.length),c.push(...v);let y=f.length-1,x=f[y];x===0&&(y--,x=f[y]);let S=c.length-d-1,_=u;for(;S>=0;){let k=Math.min(_,x);if(c[y]===void 0)break;if(c[y].copyCellsFrom(c[S],_-k,x-k,k,!0),x-=k,x===0&&(y--,x=f[y]),_-=k,_===0){S--;let T=Math.max(S,0);_=Wf(c,T,this._cols)}}for(let k=0;k<c.length;k++)f[k]<t&&c[k].setCell(f[k],i);let Q=d-m;for(;Q-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+s)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+d,this.ybase+e-1)}if(r.length>0){let a=[],o=[];for(let x=0;x<this.lines.length;x++)o.push(this.lines.get(x));let c=this.lines.length,u=c-1,f=0,d=r[f];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+s);let m=0;for(let x=Math.min(this.lines.maxLength-1,c+s-1);x>=0;x--)if(d&&d.start>u+m){for(let S=d.newLines.length-1;S>=0;S--)this.lines.set(x--,d.newLines[S]);x++,a.push({index:u+1,amount:d.newLines.length}),m+=d.newLines.length,d=r[++f]}else this.lines.set(x,o[u--]);let v=0;for(let x=a.length-1;x>=0;x--)a[x].index+=v,this.lines.onInsertEmitter.fire(a[x]),v+=a[x].amount;let y=Math.max(0,c+s-this.lines.maxLength);y>0&&this.lines.onTrimEmitter.fire(y)}}translateBufferLineToString(t,e,n=0,i){let r=this.lines.get(t);return r?r.translateToString(e,n,i):""}getWrappedRangeForLine(t){let e=t,n=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:e,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let e=new bfe(t);return this.markers.push(e),e.register(this.lines.onTrim(n=>{e.line-=n,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(n=>{e.line>=n.index&&(e.line+=n.amount)})),e.register(this.lines.onDelete(n=>{e.line>=n.index&&e.line<n.index+n.amount&&e.dispose(),e.line>n.index&&(e.line-=n.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},_fe=class extends Ge{constructor(t,e){super(),this._optionsService=t,this._bufferService=e,this._onBufferActivate=this._register(new be),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new aj(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new aj(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,e){this._normal.resize(t,e),this._alt.resize(t,e),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},S9=2,w9=1,UC=class extends Ge{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new be),this.onResize=this._onResize.event,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,S9),this.rows=Math.max(t.rawOptions.rows||0,w9),this.buffers=this._register(new _fe(t,this)),this._register(this.buffers.onBufferActivate(e=>{this._onScroll.fire(e.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,e){let n=this.cols!==t,i=this.rows!==e;this.cols=t,this.rows=e,this.buffers.resize(t,e),this._onResize.fire({cols:t,rows:e,colsChanged:n,rowsChanged:i})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,e=!1){let n=this.buffer,i;i=this._cachedBlankLine,(!i||i.length!==this.cols||i.getFg(0)!==t.fg||i.getBg(0)!==t.bg)&&(i=n.getBlankLine(t,e),this._cachedBlankLine=i),i.isWrapped=e;let r=n.ybase+n.scrollTop,s=n.ybase+n.scrollBottom;if(n.scrollTop===0){let a=n.lines.isFull;s===n.lines.length-1?a?n.lines.recycle().copyFrom(i):n.lines.push(i.clone()):n.lines.splice(s+1,0,i.clone()),a?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let a=s-r+1;n.lines.shiftElements(r+1,a-1,-1),n.lines.set(s,i.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,e){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let i=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),i!==n.ydisp&&(e||this._onScroll.fire(n.ydisp))}};UC=Gt([Ce(0,ui)],UC);var bc={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:xO,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},Sfe=["normal","bold","100","200","300","400","500","600","700","800","900"],wfe=class extends Ge{constructor(t){super(),this._onOptionChange=this._register(new be),this.onOptionChange=this._onOptionChange.event;let e={...bc};for(let n in t)if(n in e)try{let i=t[n];e[n]=this._sanitizeAndValidateOption(n,i)}catch(i){console.error(i)}this.rawOptions=e,this.options={...e},this._setupOptions(),this._register(qt(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,e){return this.onOptionChange(n=>{n===t&&e(this.rawOptions[t])})}onMultipleOptionChange(t,e){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&e()})}_setupOptions(){let t=n=>{if(!(n in bc))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},e=(n,i)=>{if(!(n in bc))throw new Error(`No option with key "${n}"`);i=this._sanitizeAndValidateOption(n,i),this.rawOptions[n]!==i&&(this.rawOptions[n]=i,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let i={get:t.bind(this,n),set:e.bind(this,n)};Object.defineProperty(this.options,n,i)}}_sanitizeAndValidateOption(t,e){switch(t){case"cursorStyle":if(e||(e=bc[t]),!kfe(e))throw new Error(`"${e}" is not a valid value for ${t}`);break;case"wordSeparator":e||(e=bc[t]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=Sfe.includes(e)?e:bc[t];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${t} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(e*10)/10));break;case"scrollback":if(e=Math.min(e,4294967295),e<0)throw new Error(`${t} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${t} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{};break}return e}};function kfe(t){return t==="block"||t==="underline"||t==="bar"}function ef(t,e=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let i in t)n[i]=e<=1?t[i]:t[i]&&ef(t[i],e-1);return n}var oj=Object.freeze({insertMode:!1}),lj=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),HC=class extends Ge{constructor(t,e,n){super(),this._bufferService=t,this._logService=e,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new be),this.onData=this._onData.event,this._onUserInput=this._register(new be),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new be),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new be),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=ef(oj),this.decPrivateModes=ef(lj)}reset(){this.modes=ef(oj),this.decPrivateModes=ef(lj)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(i=>i.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};HC=Gt([Ce(0,ci),Ce(1,Z7),Ce(2,ui)],HC);var cj={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function lb(t,e){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!e&&(n|=3)),n}var cb=String.fromCharCode,uj={DEFAULT:t=>{let e=[lb(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":`\x1B[M${cb(e[0])}${cb(e[1])}${cb(e[2])}`},SGR:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${lb(t,!0)};${t.col};${t.row}${e}`},SGR_PIXELS:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${lb(t,!0)};${t.x};${t.y}${e}`}},YC=class extends Ge{constructor(t,e,n){super(),this._bufferService=t,this._coreService=e,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new be),this.onProtocolChange=this._onProtocolChange.event;for(let i of Object.keys(cj))this.addProtocol(i,cj[i]);for(let i of Object.keys(uj))this.addEncoding(i,uj[i]);this.reset()}addProtocol(t,e){this._protocols[t]=e}addEncoding(t,e){this._encodings[t]=e}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,e,n){if(t.deltaY===0||t.shiftKey||e===void 0||n===void 0)return 0;let i=e/n,r=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=i+0,Math.abs(t.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(t,e){return e.altKey||e.ctrlKey||e.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,e,n){if(n){if(t.x!==e.x||t.y!==e.y)return!1}else if(t.col!==e.col||t.row!==e.row)return!1;return!(t.button!==e.button||t.action!==e.action||t.ctrl!==e.ctrl||t.alt!==e.alt||t.shift!==e.shift)}};YC=Gt([Ce(0,ci),Ce(1,Ql),Ce(2,ui)],YC);var ub=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],Cfe=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],yn;function Tfe(t,e){let n=0,i=e.length-1,r;if(t<e[0][0]||t>e[i][1])return!1;for(;i>=n;)if(r=n+i>>1,t>e[r][1])n=r+1;else if(t<e[r][0])i=r-1;else return!0;return!1}var Qfe=class{constructor(){if(this.version="6",!yn){yn=new Uint8Array(65536),yn.fill(1),yn[0]=0,yn.fill(0,1,32),yn.fill(0,127,160),yn.fill(2,4352,4448),yn[9001]=2,yn[9002]=2,yn.fill(2,11904,42192),yn[12351]=1,yn.fill(2,44032,55204),yn.fill(2,63744,64256),yn.fill(2,65040,65050),yn.fill(2,65072,65136),yn.fill(2,65280,65377),yn.fill(2,65504,65511);for(let t=0;t<ub.length;++t)yn.fill(0,ub[t][0],ub[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?yn[t]:Tfe(t,Cfe)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,e){let n=this.wcwidth(t),i=n===0&&e!==0;if(i){let r=sl.extractWidth(e);r===0?i=!1:r>n&&(n=r)}return sl.createPropertyValue(0,n,i)}},sl=class kg{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new be,this.onChange=this._onChange.event;let e=new Qfe;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,n,i=!1){return(e&16777215)<<3|(n&3)<<1|(i?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let n=0,i=0,r=e.length;for(let s=0;s<r;++s){let a=e.charCodeAt(s);if(55296<=a&&a<=56319){if(++s>=r)return n+this.wcwidth(a);let u=e.charCodeAt(s);56320<=u&&u<=57343?a=(a-55296)*1024+u-56320+65536:n+=this.wcwidth(u)}let o=this.charProperties(a,i),c=kg.extractWidth(o);kg.extractShouldJoin(o)&&(c-=kg.extractWidth(i)),n+=c,i=o}return n}charProperties(e,n){return this._activeProvider.charProperties(e,n)}},Efe=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,e){this._charsets[t]=e,this.glevel===t&&(this.charset=e)}};function hj(t){let e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&e&&(n.isWrapped=e[3]!==0&&e[3]!==32)}var jh=2147483647,Pfe=256,k9=class FC{constructor(e=32,n=32){if(this.maxLength=e,this.maxSubParamsLength=n,n>Pfe)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(e){let n=new FC;if(!e.length)return n;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){let r=e[i];if(Array.isArray(r))for(let s=0;s<r.length;++s)n.addSubParam(r[s]);else n.addParam(r)}return n}clone(){let e=new FC(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){let e=[];for(let n=0;n<this.length;++n){e.push(this.params[n]);let i=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>jh?jh:e}addSubParam(e){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>jh?jh:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(this._subParamsIdx[e]&255)-(this._subParamsIdx[e]>>8)>0}getSubParams(e){let n=this._subParamsIdx[e]>>8,i=this._subParamsIdx[e]&255;return i-n>0?this._subParams.subarray(n,i):null}getSubParamsAll(){let e={};for(let n=0;n<this.length;++n){let i=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-i>0&&(e[n]=this._subParams.slice(i,r))}return e}addDigit(e){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let i=this._digitIsSub?this._subParams:this.params,r=i[n-1];i[n-1]=~r?Math.min(r*10+e,jh):e}},zh=[],Afe=class{constructor(){this._state=0,this._active=zh,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=zh}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=zh,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||zh,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,e,n){if(!this._active.length)this._handlerFb(this._id,"PUT",r0(t,e,n));else for(let i=this._active.length-1;i>=0;i--)this._active[i].put(t,e,n)}start(){this.reset(),this._state=1}put(t,e,n){if(this._state!==3){if(this._state===1)for(;e<n;){let i=t[e++];if(i===59){this._state=2,this._start();break}if(i<48||57<i){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+i-48}this._state===2&&n-e>0&&this._put(t,e,n)}}end(t,e=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,i=this._active.length-1,r=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;i>=0&&(n=this._active[i].end(t),n!==!0);i--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,n;i--}for(;i>=0;i--)if(n=this._active[i].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,n}this._active=zh,this._id=-1,this._state=0}}},Zi=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=r0(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data),e instanceof Promise))return e.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,e}},Dh=[],Rfe=class{constructor(){this._handlers=Object.create(null),this._active=Dh,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Dh}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=Dh,this._ident=0}hook(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||Dh,!this._active.length)this._handlerFb(this._ident,"HOOK",e);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(e)}put(t,e,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",r0(t,e,n));else for(let i=this._active.length-1;i>=0;i--)this._active[i].put(t,e,n)}unhook(t,e=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,i=this._active.length-1,r=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;i>=0&&(n=this._active[i].unhook(t),n!==!0);i--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,n;i--}for(;i>=0;i--)if(n=this._active[i].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,n}this._active=Dh,this._ident=0}},tf=new k9;tf.addParam(0);var fj=class{constructor(t){this._handler=t,this._data="",this._params=tf,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():tf,this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=r0(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data,this._params),e instanceof Promise))return e.then(n=>(this._params=tf,this._data="",this._hitLimit=!1,n));return this._params=tf,this._data="",this._hitLimit=!1,e}},$fe=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,e){this.table.fill(t<<4|e)}add(t,e,n,i){this.table[e<<8|t]=n<<4|i}addMany(t,e,n,i){for(let r=0;r<t.length;r++)this.table[e<<8|t[r]]=n<<4|i}},hr=160,Nfe=(function(){let t=new $fe(4095),e=Array.apply(null,Array(256)).map((o,c)=>c),n=(o,c)=>e.slice(o,c),i=n(32,127),r=n(0,24);r.push(25),r.push.apply(r,n(28,32));let s=n(0,14),a;t.setDefault(1,0),t.addMany(i,0,2,0);for(a in s)t.addMany([24,26,153,154],a,3,0),t.addMany(n(128,144),a,3,0),t.addMany(n(144,152),a,3,0),t.add(156,a,0,0),t.add(27,a,11,1),t.add(157,a,4,8),t.addMany([152,158,159],a,0,7),t.add(155,a,11,3),t.add(144,a,11,9);return t.addMany(r,0,3,0),t.addMany(r,1,3,1),t.add(127,1,0,1),t.addMany(r,8,0,8),t.addMany(r,3,3,3),t.add(127,3,0,3),t.addMany(r,4,3,4),t.add(127,4,0,4),t.addMany(r,6,3,6),t.addMany(r,5,3,5),t.add(127,5,0,5),t.addMany(r,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(i,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(i,7,0,7),t.addMany(r,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(r,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(r,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(r,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(r,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(r,13,13,13),t.addMany(i,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(hr,0,2,0),t.add(hr,8,5,8),t.add(hr,6,0,6),t.add(hr,11,0,11),t.add(hr,13,13,13),t})(),Mfe=class extends Ge{constructor(t=Nfe){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new k9,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,n,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,n)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(qt(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new Afe),this._dcsParser=this._register(new Rfe),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,e=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<t.intermediates.length;++r){let s=t.intermediates.charCodeAt(r);if(32>s||s>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=s}}if(t.final.length!==1)throw new Error("final must be a single byte");let i=t.final.charCodeAt(0);if(e[0]>i||i>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return n<<=8,n|=i,n}identToString(t){let e=[];for(;t;)e.push(String.fromCharCode(t&255)),t>>=8;return e.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,e){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let i=this._escHandlers[n];return i.push(e),{dispose:()=>{let r=i.indexOf(e);r!==-1&&i.splice(r,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,e){this._executeHandlers[t.charCodeAt(0)]=e}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,e){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let i=this._csiHandlers[n];return i.push(e),{dispose:()=>{let r=i.indexOf(e);r!==-1&&i.splice(r,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,e){return this._dcsParser.registerHandler(this._identifier(t),e)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,e){return this._oscParser.registerHandler(t,e)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,e,n,i,r){this._parseStack.state=t,this._parseStack.handlers=e,this._parseStack.handlerPos=n,this._parseStack.transition=i,this._parseStack.chunkPos=r}parse(t,e,n){let i=0,r=0,s=0,a;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,s=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let o=this._parseStack.handlers,c=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&c>-1){for(;c>=0&&(a=o[c](this._params),a!==!0);c--)if(a instanceof Promise)return this._parseStack.handlerPos=c,a}this._parseStack.handlers=[];break;case 4:if(n===!1&&c>-1){for(;c>=0&&(a=o[c](),a!==!0);c--)if(a instanceof Promise)return this._parseStack.handlerPos=c,a}this._parseStack.handlers=[];break;case 6:if(i=t[this._parseStack.chunkPos],a=this._dcsParser.unhook(i!==24&&i!==26,n),a)return a;i===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(i=t[this._parseStack.chunkPos],a=this._oscParser.end(i!==24&&i!==26,n),a)return a;i===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,s=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let o=s;o<e;++o){switch(i=t[o],r=this._transitions.table[this.currentState<<8|(i<160?i:hr)],r>>4){case 2:for(let m=o+1;;++m){if(m>=e||(i=t[m])<32||i>126&&i<hr){this._printHandler(t,o,m),o=m-1;break}if(++m>=e||(i=t[m])<32||i>126&&i<hr){this._printHandler(t,o,m),o=m-1;break}if(++m>=e||(i=t[m])<32||i>126&&i<hr){this._printHandler(t,o,m),o=m-1;break}if(++m>=e||(i=t[m])<32||i>126&&i<hr){this._printHandler(t,o,m),o=m-1;break}}break;case 3:this._executeHandlers[i]?this._executeHandlers[i]():this._executeHandlerFb(i),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:o,code:i,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let c=this._csiHandlers[this._collect<<8|i],u=c?c.length-1:-1;for(;u>=0&&(a=c[u](this._params),a!==!0);u--)if(a instanceof Promise)return this._preserveStack(3,c,u,r,o),a;u<0&&this._csiHandlerFb(this._collect<<8|i,this._params),this.precedingJoinState=0;break;case 8:do switch(i){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(i-48)}while(++o<e&&(i=t[o])>47&&i<60);o--;break;case 9:this._collect<<=8,this._collect|=i;break;case 10:let f=this._escHandlers[this._collect<<8|i],d=f?f.length-1:-1;for(;d>=0&&(a=f[d](),a!==!0);d--)if(a instanceof Promise)return this._preserveStack(4,f,d,r,o),a;d<0&&this._escHandlerFb(this._collect<<8|i),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|i,this._params);break;case 13:for(let m=o+1;;++m)if(m>=e||(i=t[m])===24||i===26||i===27||i>127&&i<hr){this._dcsParser.put(t,o,m),o=m-1;break}break;case 14:if(a=this._dcsParser.unhook(i!==24&&i!==26),a)return this._preserveStack(6,[],0,r,o),a;i===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let m=o+1;;m++)if(m>=e||(i=t[m])<32||i>127&&i<hr){this._oscParser.put(t,o,m),o=m-1;break}break;case 6:if(a=this._oscParser.end(i!==24&&i!==26),a)return this._preserveStack(5,[],0,r,o),a;i===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},jfe=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,zfe=/^[\da-f]+$/;function dj(t){if(!t)return;let e=t.toLowerCase();if(e.indexOf("rgb:")===0){e=e.slice(4);let n=jfe.exec(e);if(n){let i=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/i*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/i*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/i*255)]}}else if(e.indexOf("#")===0&&(e=e.slice(1),zfe.exec(e)&&[3,6,9,12].includes(e.length))){let n=e.length/3,i=[0,0,0];for(let r=0;r<3;++r){let s=parseInt(e.slice(n*r,n*r+n),16);i[r]=n===1?s<<4:n===2?s:n===3?s>>4:s>>8}return i}}function hb(t,e){let n=t.toString(16),i=n.length<2?"0"+n:n;switch(e){case 4:return n[0];case 8:return i;case 12:return(i+i).slice(0,3);default:return i+i}}function Dfe(t,e=16){let[n,i,r]=t;return`rgb:${hb(n,e)}/${hb(i,e)}/${hb(r,e)}`}var Lfe={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Wa=131072,pj=10;function mj(t,e){if(t>24)return e.setWinLines||!1;switch(t){case 1:return!!e.restoreWin;case 2:return!!e.minimizeWin;case 3:return!!e.setWinPosition;case 4:return!!e.setWinSizePixels;case 5:return!!e.raiseWin;case 6:return!!e.lowerWin;case 7:return!!e.refreshWin;case 8:return!!e.setWinSizeChars;case 9:return!!e.maximizeWin;case 10:return!!e.fullscreenWin;case 11:return!!e.getWinState;case 13:return!!e.getWinPosition;case 14:return!!e.getWinSizePixels;case 15:return!!e.getScreenSizePixels;case 16:return!!e.getCellSizePixels;case 18:return!!e.getWinSizeChars;case 19:return!!e.getScreenSizeChars;case 20:return!!e.getIconTitle;case 21:return!!e.getWinTitle;case 22:return!!e.pushTitle;case 23:return!!e.popTitle;case 24:return!!e.setWinLines}return!1}var gj=5e3,Oj=0,qfe=class extends Ge{constructor(t,e,n,i,r,s,a,o,c=new Mfe){super(),this._bufferService=t,this._charsetService=e,this._coreService=n,this._logService=i,this._optionsService=r,this._oscLinkService=s,this._coreMouseService=a,this._unicodeService=o,this._parser=c,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new sue,this._utf8Decoder=new aue,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=un.clone(),this._eraseAttrDataInternal=un.clone(),this._onRequestBell=this._register(new be),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new be),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new be),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new be),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new be),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new be),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new be),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new be),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new be),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new be),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new be),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new be),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new GC(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(u=>this._activeBuffer=u.activeBuffer)),this._parser.setCsiHandlerFallback((u,f)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(u),params:f.toArray()})}),this._parser.setEscHandlerFallback(u=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(u)})}),this._parser.setExecuteHandlerFallback(u=>{this._logService.debug("Unknown EXECUTE code: ",{code:u})}),this._parser.setOscHandlerFallback((u,f,d)=>{this._logService.debug("Unknown OSC code: ",{identifier:u,action:f,data:d})}),this._parser.setDcsHandlerFallback((u,f,d)=>{f==="HOOK"&&(d=d.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(u),action:f,payload:d})}),this._parser.setPrintHandler((u,f,d)=>this.print(u,f,d)),this._parser.registerCsiHandler({final:"@"},u=>this.insertChars(u)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},u=>this.scrollLeft(u)),this._parser.registerCsiHandler({final:"A"},u=>this.cursorUp(u)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},u=>this.scrollRight(u)),this._parser.registerCsiHandler({final:"B"},u=>this.cursorDown(u)),this._parser.registerCsiHandler({final:"C"},u=>this.cursorForward(u)),this._parser.registerCsiHandler({final:"D"},u=>this.cursorBackward(u)),this._parser.registerCsiHandler({final:"E"},u=>this.cursorNextLine(u)),this._parser.registerCsiHandler({final:"F"},u=>this.cursorPrecedingLine(u)),this._parser.registerCsiHandler({final:"G"},u=>this.cursorCharAbsolute(u)),this._parser.registerCsiHandler({final:"H"},u=>this.cursorPosition(u)),this._parser.registerCsiHandler({final:"I"},u=>this.cursorForwardTab(u)),this._parser.registerCsiHandler({final:"J"},u=>this.eraseInDisplay(u,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},u=>this.eraseInDisplay(u,!0)),this._parser.registerCsiHandler({final:"K"},u=>this.eraseInLine(u,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},u=>this.eraseInLine(u,!0)),this._parser.registerCsiHandler({final:"L"},u=>this.insertLines(u)),this._parser.registerCsiHandler({final:"M"},u=>this.deleteLines(u)),this._parser.registerCsiHandler({final:"P"},u=>this.deleteChars(u)),this._parser.registerCsiHandler({final:"S"},u=>this.scrollUp(u)),this._parser.registerCsiHandler({final:"T"},u=>this.scrollDown(u)),this._parser.registerCsiHandler({final:"X"},u=>this.eraseChars(u)),this._parser.registerCsiHandler({final:"Z"},u=>this.cursorBackwardTab(u)),this._parser.registerCsiHandler({final:"`"},u=>this.charPosAbsolute(u)),this._parser.registerCsiHandler({final:"a"},u=>this.hPositionRelative(u)),this._parser.registerCsiHandler({final:"b"},u=>this.repeatPrecedingCharacter(u)),this._parser.registerCsiHandler({final:"c"},u=>this.sendDeviceAttributesPrimary(u)),this._parser.registerCsiHandler({prefix:">",final:"c"},u=>this.sendDeviceAttributesSecondary(u)),this._parser.registerCsiHandler({final:"d"},u=>this.linePosAbsolute(u)),this._parser.registerCsiHandler({final:"e"},u=>this.vPositionRelative(u)),this._parser.registerCsiHandler({final:"f"},u=>this.hVPosition(u)),this._parser.registerCsiHandler({final:"g"},u=>this.tabClear(u)),this._parser.registerCsiHandler({final:"h"},u=>this.setMode(u)),this._parser.registerCsiHandler({prefix:"?",final:"h"},u=>this.setModePrivate(u)),this._parser.registerCsiHandler({final:"l"},u=>this.resetMode(u)),this._parser.registerCsiHandler({prefix:"?",final:"l"},u=>this.resetModePrivate(u)),this._parser.registerCsiHandler({final:"m"},u=>this.charAttributes(u)),this._parser.registerCsiHandler({final:"n"},u=>this.deviceStatus(u)),this._parser.registerCsiHandler({prefix:"?",final:"n"},u=>this.deviceStatusPrivate(u)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},u=>this.softReset(u)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},u=>this.setCursorStyle(u)),this._parser.registerCsiHandler({final:"r"},u=>this.setScrollRegion(u)),this._parser.registerCsiHandler({final:"s"},u=>this.saveCursor(u)),this._parser.registerCsiHandler({final:"t"},u=>this.windowOptions(u)),this._parser.registerCsiHandler({final:"u"},u=>this.restoreCursor(u)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},u=>this.insertColumns(u)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},u=>this.deleteColumns(u)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},u=>this.selectProtected(u)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},u=>this.requestMode(u,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},u=>this.requestMode(u,!1)),this._parser.setExecuteHandler(me.BEL,()=>this.bell()),this._parser.setExecuteHandler(me.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(me.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(me.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(me.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(me.BS,()=>this.backspace()),this._parser.setExecuteHandler(me.HT,()=>this.tab()),this._parser.setExecuteHandler(me.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(me.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Sg.IND,()=>this.index()),this._parser.setExecuteHandler(Sg.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Sg.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Zi(u=>(this.setTitle(u),this.setIconName(u),!0))),this._parser.registerOscHandler(1,new Zi(u=>this.setIconName(u))),this._parser.registerOscHandler(2,new Zi(u=>this.setTitle(u))),this._parser.registerOscHandler(4,new Zi(u=>this.setOrReportIndexedColor(u))),this._parser.registerOscHandler(8,new Zi(u=>this.setHyperlink(u))),this._parser.registerOscHandler(10,new Zi(u=>this.setOrReportFgColor(u))),this._parser.registerOscHandler(11,new Zi(u=>this.setOrReportBgColor(u))),this._parser.registerOscHandler(12,new Zi(u=>this.setOrReportCursorColor(u))),this._parser.registerOscHandler(104,new Zi(u=>this.restoreIndexedColor(u))),this._parser.registerOscHandler(110,new Zi(u=>this.restoreFgColor(u))),this._parser.registerOscHandler(111,new Zi(u=>this.restoreBgColor(u))),this._parser.registerOscHandler(112,new Zi(u=>this.restoreCursorColor(u))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let u in wn)this._parser.registerEscHandler({intermediates:"(",final:u},()=>this.selectCharset("("+u)),this._parser.registerEscHandler({intermediates:")",final:u},()=>this.selectCharset(")"+u)),this._parser.registerEscHandler({intermediates:"*",final:u},()=>this.selectCharset("*"+u)),this._parser.registerEscHandler({intermediates:"+",final:u},()=>this.selectCharset("+"+u)),this._parser.registerEscHandler({intermediates:"-",final:u},()=>this.selectCharset("-"+u)),this._parser.registerEscHandler({intermediates:".",final:u},()=>this.selectCharset("."+u)),this._parser.registerEscHandler({intermediates:"/",final:u},()=>this.selectCharset("/"+u));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(u=>(this._logService.error("Parsing error: ",u),u)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new fj((u,f)=>this.requestStatusString(u,f)))}getAttrData(){return this._curAttrData}_preserveStack(t,e,n,i){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=e,this._parseStack.decodedLength=n,this._parseStack.position=i}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((e,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),gj))]).catch(e=>{if(e!=="#SLOW_TIMEOUT")throw e;console.warn(`async parser handler taking longer than ${gj} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,e){let n,i=this._activeBuffer.x,r=this._activeBuffer.y,s=0,a=this._parseStack.paused;if(a){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,e))return this._logSlowResolvingAsync(n),n;i=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>Wa&&(s=this._parseStack.position+Wa)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,u=>String.fromCharCode(u)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(u=>u.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<Wa&&(this._parseBuffer=new Uint32Array(Math.min(t.length,Wa))),a||this._dirtyRowTracker.clearRange(),t.length>Wa)for(let u=s;u<t.length;u+=Wa){let f=u+Wa<t.length?u+Wa:t.length,d=typeof t=="string"?this._stringDecoder.decode(t.substring(u,f),this._parseBuffer):this._utf8Decoder.decode(t.subarray(u,f),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,d))return this._preserveStack(i,r,d,u),this._logSlowResolvingAsync(n),n}else if(!a){let u=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,u))return this._preserveStack(i,r,u,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==i||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let o=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),c=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);c<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(c,this._bufferService.rows-1),end:Math.min(o,this._bufferService.rows-1)})}print(t,e,n){let i,r,s=this._charsetService.charset,a=this._optionsService.rawOptions.screenReaderMode,o=this._bufferService.cols,c=this._coreService.decPrivateModes.wraparound,u=this._coreService.modes.insertMode,f=this._curAttrData,d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-e>0&&d.getWidth(this._activeBuffer.x-1)===2&&d.setCellFromCodepoint(this._activeBuffer.x-1,0,1,f);let m=this._parser.precedingJoinState;for(let v=e;v<n;++v){if(i=t[v],i<127&&s){let _=s[String.fromCharCode(i)];_&&(i=_.charCodeAt(0))}let y=this._unicodeService.charProperties(i,m);r=sl.extractWidth(y);let x=sl.extractShouldJoin(y),S=x?sl.extractWidth(m):0;if(m=y,a&&this._onA11yChar.fire(Ka(i)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-S>o){if(c){let _=d,Q=this._activeBuffer.x-S;for(this._activeBuffer.x=S,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),S>0&&d instanceof Jh&&d.copyCellsFrom(_,Q,0,S,!1);Q<o;)_.setCellFromCodepoint(Q++,0,1,f)}else if(this._activeBuffer.x=o-1,r===2)continue}if(x&&this._activeBuffer.x){let _=d.getWidth(this._activeBuffer.x-1)?1:2;d.addCodepointToCell(this._activeBuffer.x-_,i,r);for(let Q=r-S;--Q>=0;)d.setCellFromCodepoint(this._activeBuffer.x++,0,0,f);continue}if(u&&(d.insertCells(this._activeBuffer.x,r-S,this._activeBuffer.getNullCell(f)),d.getWidth(o-1)===2&&d.setCellFromCodepoint(o-1,0,1,f)),d.setCellFromCodepoint(this._activeBuffer.x++,i,r,f),r>0)for(;--r;)d.setCellFromCodepoint(this._activeBuffer.x++,0,0,f)}this._parser.precedingJoinState=m,this._activeBuffer.x<o&&n-e>0&&d.getWidth(this._activeBuffer.x)===0&&!d.hasContent(this._activeBuffer.x)&&d.setCellFromCodepoint(this._activeBuffer.x,0,1,f),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,e){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>mj(n.params[0],this._optionsService.rawOptions.windowOptions)?e(n):!0):this._parser.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._parser.registerDcsHandler(t,new fj(e))}registerEscHandler(t,e){return this._parser.registerEscHandler(t,e)}registerOscHandler(t,e){return this._parser.registerOscHandler(t,new Zi(e))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,e){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+e):(this._activeBuffer.x=t,this._activeBuffer.y=e),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,e){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+e)}cursorUp(t){let e=this._activeBuffer.y-this._activeBuffer.scrollTop;return e>=0?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let e=this._activeBuffer.scrollBottom-this._activeBuffer.y;return e>=0?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let e=t.params[0];return e===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:e===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let e=t.params[0];return e===1&&(this._curAttrData.bg|=536870912),(e===2||e===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,e,n,i=!1,r=!1){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);s.replaceCells(e,n,this._activeBuffer.getNullCell(this._eraseAttrData()),r),i&&(s.isWrapped=!1)}_resetBufferLine(t,e=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),e),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,e=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);n<this._bufferService.rows;n++)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,e),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0)}break;case 3:let i=this._activeBuffer.lines.length-this._bufferService.rows;i>0&&(this._activeBuffer.lines.trimStart(i),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-i,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-i,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,e=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,e);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,e);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-i+1;for(;e--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,i;for(i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,i=this._bufferService.rows-1+this._activeBuffer.ybase-i;e--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(un));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);i.deleteCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);i.insertCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);i.insertCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);i.deleteCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let e=this._parser.precedingJoinState;if(!e)return!0;let n=t.params[0]||1,i=sl.extractWidth(e),r=this._activeBuffer.x-i,s=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),a=new Uint32Array(s.length*n),o=0;for(let u=0;u<s.length;){let f=s.codePointAt(u)||0;a[o++]=f,u+=f>65535?2:1}let c=o;for(let u=1;u<n;++u)a.copyWithin(c,0,o),c+=o;return this.print(a,0,c),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(me.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(me.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(me.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(me.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(me.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Go),this._charsetService.setgCharset(1,Go),this._charsetService.setgCharset(2,Go),this._charsetService.setgCharset(3,Go);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[e]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,e){let n;(x=>(x[x.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",x[x.SET=1]="SET",x[x.RESET=2]="RESET",x[x.PERMANENTLY_SET=3]="PERMANENTLY_SET",x[x.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let i=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:s}=this._coreMouseService,a=this._coreService,{buffers:o,cols:c}=this._bufferService,{active:u,alt:f}=o,d=this._optionsService.rawOptions,m=(x,S)=>(a.triggerDataEvent(`${me.ESC}[${e?"":"?"}${x};${S}$y`),!0),v=x=>x?1:2,y=t.params[0];return e?y===2?m(y,4):y===4?m(y,v(a.modes.insertMode)):y===12?m(y,3):y===20?m(y,v(d.convertEol)):m(y,0):y===1?m(y,v(i.applicationCursorKeys)):y===3?m(y,d.windowOptions.setWinLines?c===80?2:c===132?1:0:0):y===6?m(y,v(i.origin)):y===7?m(y,v(i.wraparound)):y===8?m(y,3):y===9?m(y,v(r==="X10")):y===12?m(y,v(d.cursorBlink)):y===25?m(y,v(!a.isCursorHidden)):y===45?m(y,v(i.reverseWraparound)):y===66?m(y,v(i.applicationKeypad)):y===67?m(y,4):y===1e3?m(y,v(r==="VT200")):y===1002?m(y,v(r==="DRAG")):y===1003?m(y,v(r==="ANY")):y===1004?m(y,v(i.sendFocus)):y===1005?m(y,4):y===1006?m(y,v(s==="SGR")):y===1015?m(y,4):y===1016?m(y,v(s==="SGR_PIXELS")):y===1048?m(y,1):y===47||y===1047||y===1049?m(y,v(u===f)):y===2004?m(y,v(i.bracketedPasteMode)):y===2026?m(y,v(i.synchronizedOutput)):m(y,0)}_updateAttrColor(t,e,n,i,r){return e===2?(t|=50331648,t&=-16777216,t|=xd.fromColorRGB([n,i,r])):e===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,e,n){let i=[0,0,-1,0,0,0],r=0,s=0;do{if(i[s+r]=t.params[e+s],t.hasSubParams(e+s)){let a=t.getSubParams(e+s),o=0;do i[1]===5&&(r=1),i[s+o+1+r]=a[o];while(++o<a.length&&o+s+1+r<i.length);break}if(i[1]===5&&s+r>=2||i[1]===2&&s+r>=5)break;i[1]&&(r=1)}while(++s+e<t.length&&s+r<i.length);for(let a=2;a<i.length;++a)i[a]===-1&&(i[a]=0);switch(i[0]){case 38:n.fg=this._updateAttrColor(n.fg,i[1],i[3],i[4],i[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,i[1],i[3],i[4],i[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,i[1],i[3],i[4],i[5])}return s}_processUnderline(t,e){e.extended=e.extended.clone(),(!~t||t>5)&&(t=1),e.extended.underlineStyle=t,e.fg|=268435456,t===0&&(e.fg&=-268435457),e.updateExtended()}_processSGR0(t){t.fg=un.fg,t.bg=un.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let e=t.length,n,i=this._curAttrData;for(let r=0;r<e;r++)n=t.params[r],n>=30&&n<=37?(i.fg&=-50331904,i.fg|=16777216|n-30):n>=40&&n<=47?(i.bg&=-50331904,i.bg|=16777216|n-40):n>=90&&n<=97?(i.fg&=-50331904,i.fg|=16777216|n-90|8):n>=100&&n<=107?(i.bg&=-50331904,i.bg|=16777216|n-100|8):n===0?this._processSGR0(i):n===1?i.fg|=134217728:n===3?i.bg|=67108864:n===4?(i.fg|=268435456,this._processUnderline(t.hasSubParams(r)?t.getSubParams(r)[0]:1,i)):n===5?i.fg|=536870912:n===7?i.fg|=67108864:n===8?i.fg|=1073741824:n===9?i.fg|=2147483648:n===2?i.bg|=134217728:n===21?this._processUnderline(2,i):n===22?(i.fg&=-134217729,i.bg&=-134217729):n===23?i.bg&=-67108865:n===24?(i.fg&=-268435457,this._processUnderline(0,i)):n===25?i.fg&=-536870913:n===27?i.fg&=-67108865:n===28?i.fg&=-1073741825:n===29?i.fg&=2147483647:n===39?(i.fg&=-67108864,i.fg|=un.fg&16777215):n===49?(i.bg&=-67108864,i.bg|=un.bg&16777215):n===38||n===48||n===58?r+=this._extractColor(t,r,i):n===53?i.bg|=1073741824:n===55?i.bg&=-1073741825:n===59?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):n===100?(i.fg&=-67108864,i.fg|=un.fg&16777215,i.bg&=-67108864,i.bg|=un.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${me.ESC}[0n`);break;case 6:let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${me.ESC}[${e};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${me.ESC}[?${e};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=un.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let e=t.length===0?1:t.params[0];if(e===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(e){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=e%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let e=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>e&&(this._activeBuffer.scrollTop=e-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!mj(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let e=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:e!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${me.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(e===0||e===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>pj&&this._windowTitleStack.shift()),(e===0||e===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>pj&&this._iconNameStack.shift());break;case 23:(e===0||e===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(e===0||e===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let e=[],n=t.split(";");for(;n.length>1;){let i=n.shift(),r=n.shift();if(/^\d+$/.exec(i)){let s=parseInt(i);if(vj(s))if(r==="?")e.push({type:0,index:s});else{let a=dj(r);a&&e.push({type:1,index:s,color:a})}}}return e.length&&this._onColor.fire(e),!0}setHyperlink(t){let e=t.indexOf(";");if(e===-1)return!0;let n=t.slice(0,e).trim(),i=t.slice(e+1);return i?this._createHyperlink(n,i):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,e){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),i,r=n.findIndex(s=>s.startsWith("id="));return r!==-1&&(i=n[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:i,uri:e}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,e){let n=t.split(";");for(let i=0;i<n.length&&!(e>=this._specialColors.length);++i,++e)if(n[i]==="?")this._onColor.fire([{type:0,index:this._specialColors[e]}]);else{let r=dj(n[i]);r&&this._onColor.fire([{type:1,index:this._specialColors[e],color:r}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let e=[],n=t.split(";");for(let i=0;i<n.length;++i)if(/^\d+$/.exec(n[i])){let r=parseInt(n[i]);vj(r)&&e.push({type:2,index:r})}return e.length&&this._onColor.fire(e),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Go),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(Lfe[t[0]],wn[t[1]]||Go),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=un.clone(),this._eraseAttrDataInternal=un.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new vr;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let e=0;e<this._bufferService.rows;++e){let n=this._activeBuffer.ybase+this._activeBuffer.y+e,i=this._activeBuffer.lines.get(n);i&&(i.fill(t),i.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,e){let n=a=>(this._coreService.triggerDataEvent(`${me.ESC}${a}${me.ESC}\\`),!0),i=this._bufferService.buffer,r=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,e){this._dirtyRowTracker.markRangeDirty(t,e)}},GC=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,e){t>e&&(Oj=t,t=e,e=Oj),t<this.start&&(this.start=t),e>this.end&&(this.end=e)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};GC=Gt([Ce(0,ci)],GC);function vj(t){return 0<=t&&t<256}var Bfe=5e7,yj=12,Ife=50,Xfe=class extends Ge{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new be),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,e){if(e!==void 0&&this._syncCalls>e){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let i=this._callbacks.shift();i&&i()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,e){if(this._pendingData>Bfe)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)}_innerWrite(t=0,e=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let i=this._writeBuffer[this._bufferOffset],r=this._action(i,e);if(r){let a=o=>performance.now()-n>=yj?setTimeout(()=>this._innerWrite(0,o)):this._innerWrite(n,o);r.catch(o=>(queueMicrotask(()=>{throw o}),Promise.resolve(!1))).then(a);return}let s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=i.length,performance.now()-n>=yj)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>Ife&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},KC=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let e=this._bufferService.buffer;if(t.id===void 0){let o=e.addMarker(e.ybase+e.y),c={data:t,id:this._nextId++,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(c,o)),this._dataByLinkId.set(c.id,c),c.id}let n=t,i=this._getEntryIdKey(n),r=this._entriesWithId.get(i);if(r)return this.addLineToLink(r.id,e.ybase+e.y),r.id;let s=e.addMarker(e.ybase+e.y),a={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(a,s)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(t,e){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(i=>i.line!==e)){let i=this._bufferService.buffer.addMarker(e);n.lines.push(i),i.onDispose(()=>this._removeMarkerFromLink(n,i))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,e){let n=t.lines.indexOf(e);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};KC=Gt([Ce(0,ci)],KC);var xj=!1,Zfe=class extends Ge{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new su),this._onBinary=this._register(new be),this.onBinary=this._onBinary.event,this._onData=this._register(new be),this.onData=this._onData.event,this._onLineFeed=this._register(new be),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new be),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new be),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new be),this._instantiationService=new pfe,this.optionsService=this._register(new wfe(t)),this._instantiationService.setService(ui,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(UC)),this._instantiationService.setService(ci,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(WC)),this._instantiationService.setService(Z7,this._logService),this.coreService=this._register(this._instantiationService.createInstance(HC)),this._instantiationService.setService(Ql,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(YC)),this._instantiationService.setService(X7,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(sl)),this._instantiationService.setService(uue,this.unicodeService),this._charsetService=this._instantiationService.createInstance(Efe),this._instantiationService.setService(cue,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(KC),this._instantiationService.setService(V7,this._oscLinkService),this._inputHandler=this._register(new qfe(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Bn.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Bn.forward(this._bufferService.onResize,this._onResize)),this._register(Bn.forward(this.coreService.onData,this._onData)),this._register(Bn.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new Xfe((e,n)=>this._inputHandler.parse(e,n))),this._register(Bn.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new be),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let e in t)this.optionsService.options[e]=t[e]}write(t,e){this._writeBuffer.write(t,e)}writeSync(t,e){this._logService.logLevel<=3&&!xj&&(this._logService.warn("writeSync is unreliable and will be removed soon."),xj=!0),this._writeBuffer.writeSync(t,e)}input(t,e=!0){this.coreService.triggerDataEvent(t,e)}resize(t,e){isNaN(t)||isNaN(e)||(t=Math.max(t,S9),e=Math.max(e,w9),this._bufferService.resize(t,e))}scroll(t,e=!1){this._bufferService.scroll(t,e)}scrollLines(t,e){this._bufferService.scrollLines(t,e)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}registerEscHandler(t,e){return this._inputHandler.registerEscHandler(t,e)}registerDcsHandler(t,e){return this._inputHandler.registerDcsHandler(t,e)}registerCsiHandler(t,e){return this._inputHandler.registerCsiHandler(t,e)}registerOscHandler(t,e){return this._inputHandler.registerOscHandler(t,e)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,e=this.optionsService.rawOptions.windowsPty;e&&e.buildNumber!==void 0&&e.buildNumber!==void 0?t=e.backend==="conpty"&&e.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(hj.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(hj(this._bufferService),!1))),this._windowsWrappingHeuristics.value=qt(()=>{for(let e of t)e.dispose()})}}},Vfe={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function Wfe(t,e,n,i){let r={type:0,cancel:!1,key:void 0},s=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?e?r.key=me.ESC+"OA":r.key=me.ESC+"[A":t.key==="UIKeyInputLeftArrow"?e?r.key=me.ESC+"OD":r.key=me.ESC+"[D":t.key==="UIKeyInputRightArrow"?e?r.key=me.ESC+"OC":r.key=me.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(e?r.key=me.ESC+"OB":r.key=me.ESC+"[B");break;case 8:r.key=t.ctrlKey?"\b":me.DEL,t.altKey&&(r.key=me.ESC+r.key);break;case 9:if(t.shiftKey){r.key=me.ESC+"[Z";break}r.key=me.HT,r.cancel=!0;break;case 13:r.key=t.altKey?me.ESC+me.CR:me.CR,r.cancel=!0;break;case 27:r.key=me.ESC,t.altKey&&(r.key=me.ESC+me.ESC),r.cancel=!0;break;case 37:if(t.metaKey)break;s?r.key=me.ESC+"[1;"+(s+1)+"D":e?r.key=me.ESC+"OD":r.key=me.ESC+"[D";break;case 39:if(t.metaKey)break;s?r.key=me.ESC+"[1;"+(s+1)+"C":e?r.key=me.ESC+"OC":r.key=me.ESC+"[C";break;case 38:if(t.metaKey)break;s?r.key=me.ESC+"[1;"+(s+1)+"A":e?r.key=me.ESC+"OA":r.key=me.ESC+"[A";break;case 40:if(t.metaKey)break;s?r.key=me.ESC+"[1;"+(s+1)+"B":e?r.key=me.ESC+"OB":r.key=me.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(r.key=me.ESC+"[2~");break;case 46:s?r.key=me.ESC+"[3;"+(s+1)+"~":r.key=me.ESC+"[3~";break;case 36:s?r.key=me.ESC+"[1;"+(s+1)+"H":e?r.key=me.ESC+"OH":r.key=me.ESC+"[H";break;case 35:s?r.key=me.ESC+"[1;"+(s+1)+"F":e?r.key=me.ESC+"OF":r.key=me.ESC+"[F";break;case 33:t.shiftKey?r.type=2:t.ctrlKey?r.key=me.ESC+"[5;"+(s+1)+"~":r.key=me.ESC+"[5~";break;case 34:t.shiftKey?r.type=3:t.ctrlKey?r.key=me.ESC+"[6;"+(s+1)+"~":r.key=me.ESC+"[6~";break;case 112:s?r.key=me.ESC+"[1;"+(s+1)+"P":r.key=me.ESC+"OP";break;case 113:s?r.key=me.ESC+"[1;"+(s+1)+"Q":r.key=me.ESC+"OQ";break;case 114:s?r.key=me.ESC+"[1;"+(s+1)+"R":r.key=me.ESC+"OR";break;case 115:s?r.key=me.ESC+"[1;"+(s+1)+"S":r.key=me.ESC+"OS";break;case 116:s?r.key=me.ESC+"[15;"+(s+1)+"~":r.key=me.ESC+"[15~";break;case 117:s?r.key=me.ESC+"[17;"+(s+1)+"~":r.key=me.ESC+"[17~";break;case 118:s?r.key=me.ESC+"[18;"+(s+1)+"~":r.key=me.ESC+"[18~";break;case 119:s?r.key=me.ESC+"[19;"+(s+1)+"~":r.key=me.ESC+"[19~";break;case 120:s?r.key=me.ESC+"[20;"+(s+1)+"~":r.key=me.ESC+"[20~";break;case 121:s?r.key=me.ESC+"[21;"+(s+1)+"~":r.key=me.ESC+"[21~";break;case 122:s?r.key=me.ESC+"[23;"+(s+1)+"~":r.key=me.ESC+"[23~";break;case 123:s?r.key=me.ESC+"[24;"+(s+1)+"~":r.key=me.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?r.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?r.key=me.NUL:t.keyCode>=51&&t.keyCode<=55?r.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?r.key=me.DEL:t.keyCode===219?r.key=me.ESC:t.keyCode===220?r.key=me.FS:t.keyCode===221&&(r.key=me.GS);else if((!n||i)&&t.altKey&&!t.metaKey){let a=Vfe[t.keyCode]?.[t.shiftKey?1:0];if(a)r.key=me.ESC+a;else if(t.keyCode>=65&&t.keyCode<=90){let o=t.ctrlKey?t.keyCode-64:t.keyCode+32,c=String.fromCharCode(o);t.shiftKey&&(c=c.toUpperCase()),r.key=me.ESC+c}else if(t.keyCode===32)r.key=me.ESC+(t.ctrlKey?me.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let o=t.code.slice(3,4);t.shiftKey||(o=o.toLowerCase()),r.key=me.ESC+o,r.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(r.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?r.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(r.key=me.US),t.key==="@"&&(r.key=me.NUL));break}return r}var en=0,Ufe=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new bO,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new bO,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((r,s)=>this._getKey(r)-this._getKey(s)),e=0,n=0,i=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<i.length;r++)n>=this._array.length||this._getKey(t[e])<=this._getKey(this._array[n])?(i[r]=t[e],e++):i[r]=this._array[n++];this._array=i,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let e=this._getKey(t);if(e===void 0||(en=this._search(e),en===-1)||this._getKey(this._array[en])!==e)return!1;do if(this._array[en]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(en),!0;while(++en<this._array.length&&this._getKey(this._array[en])===e);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((r,s)=>r-s),e=0,n=new Array(this._array.length-t.length),i=0;for(let r=0;r<this._array.length;r++)t[e]===r?e++:n[i++]=this._array[r];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(en=this._search(t),!(en<0||en>=this._array.length)&&this._getKey(this._array[en])===t))do yield this._array[en];while(++en<this._array.length&&this._getKey(this._array[en])===t)}forEachByKey(t,e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(en=this._search(t),!(en<0||en>=this._array.length)&&this._getKey(this._array[en])===t))do e(this._array[en]);while(++en<this._array.length&&this._getKey(this._array[en])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let e=0,n=this._array.length-1;for(;n>=e;){let i=e+n>>1,r=this._getKey(this._array[i]);if(r>t)n=i-1;else if(r<t)e=i+1;else{for(;i>0&&this._getKey(this._array[i-1])===t;)i--;return i}}return e}},fb=0,bj=0,Hfe=class extends Ge{constructor(){super(),this._decorations=new Ufe(t=>t?.marker.line),this._onDecorationRegistered=this._register(new be),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new be),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(qt(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let e=new Yfe(t);if(e){let n=e.marker.onDispose(()=>e.dispose()),i=e.onDispose(()=>{i.dispose(),e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),n.dispose())});this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,n){let i=0,r=0;for(let s of this._decorations.getKeyIterator(e))i=s.options.x??0,r=i+(s.options.width??1),t>=i&&t<r&&(!n||(s.options.layer??"bottom")===n)&&(yield s)}forEachDecorationAtCell(t,e,n,i){this._decorations.forEachByKey(e,r=>{fb=r.options.x??0,bj=fb+(r.options.width??1),t>=fb&&t<bj&&(!n||(r.options.layer??"bottom")===n)&&i(r)})}},Yfe=class extends so{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new be),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new be),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Wt.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Wt.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},Ffe=1e3,Gfe=class{constructor(t,e=Ffe){this._renderCallback=t,this._debounceThresholdMS=e,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e;let i=performance.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=i-this._lastRefreshMs,s=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},s)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e)}},_j=20,_O=class extends Ge{constructor(t,e,n,i){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=i,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let s=0;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);if(this._topBoundaryFocusListener=s=>this._handleBoundaryFocus(s,0),this._bottomBoundaryFocusListener=s=>this._handleBoundaryFocus(s,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new Gfe(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(s=>this._handleResize(s.rows))),this._register(this._terminal.onRender(s=>this._refreshRows(s.start,s.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(s=>this._handleChar(s))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(s=>this._handleTab(s))),this._register(this._terminal.onKey(s=>this._handleKey(s.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(Ie(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(qt(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let e=0;e<t;e++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<_j+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===_j+1&&(this._liveRegion.textContent+=vC.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,e){this._liveRegionDebouncer.refresh(t,e,this._terminal.rows)}_renderRows(t,e){let n=this._terminal.buffer,i=n.lines.length.toString();for(let r=t;r<=e;r++){let s=n.lines.get(n.ydisp+r),a=[],o=s?.translateToString(!0,void 0,void 0,a)||"",c=(n.ydisp+r+1).toString(),u=this._rowElements[r];u&&(o.length===0?(u.textContent="",this._rowColumns.set(u,[0,1])):(u.textContent=o,this._rowColumns.set(u,a)),u.setAttribute("aria-posinset",c),u.setAttribute("aria-setsize",i),this._alignRowWidth(u))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,e){let n=t.target,i=this._rowElements[e===0?1:this._rowElements.length-2],r=n.getAttribute("aria-posinset"),s=e===0?"1":`${this._terminal.buffer.lines.length}`;if(r===s||t.relatedTarget!==i)return;let a,o;if(e===0?(a=n,o=this._rowElements.pop(),this._rowContainer.removeChild(o)):(a=this._rowElements.shift(),o=n,this._rowContainer.removeChild(a)),a.removeEventListener("focus",this._topBoundaryFocusListener),o.removeEventListener("focus",this._bottomBoundaryFocusListener),e===0){let c=this._createAccessibilityTreeNode();this._rowElements.unshift(c),this._rowContainer.insertAdjacentElement("afterbegin",c)}else{let c=this._createAccessibilityTreeNode();this._rowElements.push(c),this._rowContainer.appendChild(c)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(e===0?-1:1),this._rowElements[e===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let e={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((e.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||e.node===n.node&&e.offset>n.offset)&&([e,n]=[n,e]),e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(e.node))return;let i=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(i)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:i,offset:i.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let r=({node:o,offset:c})=>{let u=o instanceof Text?o.parentNode:o,f=parseInt(u?.getAttribute("aria-posinset"),10)-1;if(isNaN(f))return console.warn("row is invalid. Race condition?"),null;let d=this._rowColumns.get(u);if(!d)return console.warn("columns is null. Race condition?"),null;let m=c<d.length?d[c]:d.slice(-1)[0]+1;return m>=this._terminal.cols&&(++f,m=0),{row:f,column:m}},s=r(e),a=r(n);if(!(!s||!a)){if(s.row>a.row||s.row===a.row&&s.column>=a.column)throw new Error("invalid range");this._terminal.select(s.column,s.row,(a.row-s.row)*this._terminal.cols-s.column+a.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let e=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let i=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${i/e})`}};_O=Gt([Ce(1,MQ),Ce(2,ca),Ce(3,ua)],_O);var JC=class extends Ge{constructor(t,e,n,i,r){super(),this._element=t,this._mouseService=e,this._renderService=n,this._bufferService=i,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new be),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new be),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(qt(()=>{yl(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(Ie(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(Ie(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(Ie(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(Ie(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;let n=t.composedPath();for(let i=0;i<n.length;i++){let r=n[i];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||e.x!==this._lastBufferCell.x||e.y!==this._lastBufferCell.y)&&(this._handleHover(e),this._lastBufferCell=e)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,e){(!this._activeProviderReplies||!e)&&(this._activeProviderReplies?.forEach(i=>{i?.forEach(r=>{r.link.dispose&&r.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[i,r]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(i)&&(n=this._checkLinkProviderResult(i,t,n)):r.provideLinks(t.y,s=>{if(this._isMouseOut)return;let a=s?.map(o=>({link:o}));this._activeProviderReplies?.set(i,a),n=this._checkLinkProviderResult(i,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,e){let n=new Set;for(let i=0;i<e.size;i++){let r=e.get(i);if(r)for(let s=0;s<r.length;s++){let a=r[s],o=a.link.range.start.y<t?0:a.link.range.start.x,c=a.link.range.end.y>t?this._bufferService.cols:a.link.range.end.x;for(let u=o;u<=c;u++){if(n.has(u)){r.splice(s--,1);break}n.add(u)}}}}_checkLinkProviderResult(t,e,n){if(!this._activeProviderReplies)return n;let i=this._activeProviderReplies.get(t),r=!1;for(let s=0;s<t;s++)(!this._activeProviderReplies.has(s)||this._activeProviderReplies.get(s))&&(r=!0);if(!r&&i){let s=i.find(a=>this._linkAtPosition(a.link,e));s&&(n=!0,this._handleNewLink(s))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let s=0;s<this._activeProviderReplies.size;s++){let a=this._activeProviderReplies.get(s)?.find(o=>this._linkAtPosition(o.link,e));if(a){n=!0,this._handleNewLink(a);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);e&&this._mouseDownLink&&Kfe(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,e){!this._currentLink||!this._lastMouseEvent||(!t||!e||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,yl(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(t.link,e)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let i=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=i&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(i,r),this._lastMouseEvent)){let s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._askForLink(s,!1)}})))}_linkHover(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(n,e.text)}_fireUnderlineEvent(t,e){let n=t.range,i=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-i-1,n.end.x,n.end.y-i-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(n,e.text)}_linkAtPosition(t,e){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,i=t.range.end.y*this._bufferService.cols+t.range.end.x,r=e.y*this._bufferService.cols+e.x;return n<=r&&r<=i}_positionFromMouseEvent(t,e,n){let i=n.getCoords(t,e,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,e,n,i,r){return{x1:t,y1:e,x2:n,y2:i,cols:this._bufferService.cols,fg:r}}};JC=Gt([Ce(1,jQ),Ce(2,ua),Ce(3,ci),Ce(4,U7)],JC);function Kfe(t,e){return t.text===e.text&&t.range.start.x===e.range.start.x&&t.range.start.y===e.range.start.y&&t.range.end.x===e.range.end.x&&t.range.end.y===e.range.end.y}var Jfe=class extends Zfe{constructor(t={}){super(t),this._linkifier=this._register(new su),this.browser=f9,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new su),this._onCursorMove=this._register(new be),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new be),this.onKey=this._onKey.event,this._onRender=this._register(new be),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new be),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new be),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new be),this.onBell=this._onBell.event,this._onFocus=this._register(new be),this._onBlur=this._register(new be),this._onA11yCharEmitter=this._register(new be),this._onA11yTabEmitter=this._register(new be),this._onWillOpen=this._register(new be),this._setup(),this._decorationService=this._instantiationService.createInstance(Hfe),this._instantiationService.setService(bd,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Ihe),this._instantiationService.setService(U7,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(xC)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(e=>this.refresh(e?.start??0,e?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this._register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this._register(Bn.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Bn.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Bn.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Bn.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this._register(qt(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let e of t){let n,i="";switch(e.index){case 256:n="foreground",i="10";break;case 257:n="background",i="11";break;case 258:n="cursor",i="12";break;default:n="ansi",i="4;"+e.index}switch(e.type){case 0:let r=Mt.toColorRGB(n==="ansi"?this._themeService.colors.ansi[e.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${me.ESC}]${i};${Dfe(r)}${u9.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(s=>s.ansi[e.index]=hn.toColor(...e.color));else{let s=n;this._themeService.modifyColors(a=>a[s]=hn.toColor(...e.color))}break;case 2:this._themeService.restoreColor(e.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(_O,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(me.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(me.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,e=this.buffer.lines.get(t);if(!e)return;let n=Math.min(this.buffer.x,this.cols-1),i=this._renderService.dimensions.css.cell.height,r=e.getWidth(n),s=this._renderService.dimensions.css.cell.width*r,a=this.buffer.y*this._renderService.dimensions.css.cell.height,o=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=o+"px",this.textarea.style.top=a+"px",this.textarea.style.width=s+"px",this.textarea.style.height=i+"px",this.textarea.style.lineHeight=i+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(Ie(this.element,"copy",e=>{this.hasSelection()&&iue(e,this._selectionService)}));let t=e=>rue(e,this.textarea,this.coreService,this.optionsService);this._register(Ie(this.textarea,"paste",t)),this._register(Ie(this.element,"paste",t)),d9?this._register(Ie(this.element,"mousedown",e=>{e.button===2&&RM(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(Ie(this.element,"contextmenu",e=>{RM(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),ZQ&&this._register(Ie(this.element,"auxclick",e=>{e.button===1&&D7(e,this.textarea,this.screenElement)}))}_bindKeys(){this._register(Ie(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(Ie(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(Ie(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(Ie(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(Ie(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(Ie(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(Ie(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let e=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),e.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(Ie(this.screenElement,"mousemove",r=>this.updateCursorStyle(r))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),e.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",OC.get()),g9||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(qhe,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(ca,this._coreBrowserService),this._register(Ie(this.textarea,"focus",r=>this._handleTextAreaFocus(r))),this._register(Ie(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(BC,this._document,this._helperContainer),this._instantiationService.setService(s0,this._charSizeService),this._themeService=this._instantiationService.createInstance(VC),this._instantiationService.setService(bu,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(yO),this._instantiationService.setService(W7,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(XC,this.rows,this.screenElement)),this._instantiationService.setService(ua,this._renderService),this._register(this._renderService.onRenderedViewportChange(r=>this._onRender.fire(r))),this.onResize(r=>this._renderService.resize(r.cols,r.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(DC,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(IC),this._instantiationService.setService(jQ,this._mouseService);let i=this._linkifier.value=this._register(this._instantiationService.createInstance(JC,this.screenElement));this.element.appendChild(e);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(jC,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(r=>{super.scrollLines(r,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(ZC,this.element,this.screenElement,i)),this._instantiationService.setService(fue,this._selectionService),this._register(this._selectionService.onRequestScrollLines(r=>this.scrollLines(r.amount,r.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(r=>this._renderService.handleSelectionChanged(r.start,r.end,r.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(r=>{this.textarea.value=r,this.textarea.focus(),this.textarea.select()})),this._register(Bn.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(zC,this.screenElement)),this._register(Ie(this.element,"mousedown",r=>this._selectionService.handleMouseDown(r))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(_O,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",r=>this._handleScreenReaderModeOptionChange(r))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(vO,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",r=>{!this._overviewRulerRenderer&&r&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(vO,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(qC,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,e=this.element;function n(s){let a=t._mouseService.getMouseReportCoords(s,t.screenElement);if(!a)return!1;let o,c;switch(s.overrideType||s.type){case"mousemove":c=32,s.buttons===void 0?(o=3,s.button!==void 0&&(o=s.button<3?s.button:3)):o=s.buttons&1?0:s.buttons&4?1:s.buttons&2?2:3;break;case"mouseup":c=0,o=s.button<3?s.button:3;break;case"mousedown":c=1,o=s.button<3?s.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(s)===!1)return!1;let u=s.deltaY;if(u===0||t.coreMouseService.consumeWheelEvent(s,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;c=u<0?0:1,o=4;break;default:return!1}return c===void 0||o===void 0||o>4?!1:t.coreMouseService.triggerMouseEvent({col:a.col,row:a.row,x:a.x,y:a.y,button:o,action:c,ctrl:s.ctrlKey,alt:s.altKey,shift:s.shiftKey})}let i={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:s=>(n(s),s.buttons||(this._document.removeEventListener("mouseup",i.mouseup),i.mousedrag&&this._document.removeEventListener("mousemove",i.mousedrag)),this.cancel(s)),wheel:s=>(n(s),this.cancel(s,!0)),mousedrag:s=>{s.buttons&&n(s)},mousemove:s=>{s.buttons||n(s)}};this._register(this.coreMouseService.onProtocolChange(s=>{s?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(s)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),s&8?i.mousemove||(e.addEventListener("mousemove",r.mousemove),i.mousemove=r.mousemove):(e.removeEventListener("mousemove",i.mousemove),i.mousemove=null),s&16?i.wheel||(e.addEventListener("wheel",r.wheel,{passive:!1}),i.wheel=r.wheel):(e.removeEventListener("wheel",i.wheel),i.wheel=null),s&2?i.mouseup||(i.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",i.mouseup),i.mouseup=null),s&4?i.mousedrag||(i.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",i.mousedrag),i.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(Ie(e,"mousedown",s=>{if(s.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(s)))return n(s),i.mouseup&&this._document.addEventListener("mouseup",i.mouseup),i.mousedrag&&this._document.addEventListener("mousemove",i.mousedrag),this.cancel(s)})),this._register(Ie(e,"wheel",s=>{if(!i.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(s)===!1)return!1;if(!this.buffer.hasScrollback){if(s.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(s,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(s,!0);let a=me.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(s.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(a,!0),this.cancel(s,!0)}}},{passive:!1}))}refresh(t,e){this._renderService?.refreshRows(t,e)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,e){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,e),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}paste(t){z7(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let e=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),e}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,e,n){this._selectionService.setSelection(t,e,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,e){this._selectionService?.selectLines(t,e)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let e=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!e&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!e&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=Wfe(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let i=this.rows-1;return this.scrollLines(n.type===2?-i:i),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===me.ETX||n.key===me.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,e){let n=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey||t.isWindows&&e.getModifierState("AltGraph");return e.type==="keypress"?n:n&&(!e.keyCode||e.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&(ede(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let e;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)e=t.charCode;else if(t.which===null||t.which===void 0)e=t.keyCode;else if(t.which!==0&&t.charCode!==0)e=t.which;else return!1;return!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(e,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let e=t.data;return this.coreService.triggerDataEvent(e,!0),this.cancel(t),!0}return!1}resize(t,e){if(t===this.cols&&e===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,e)}_afterResize(t,e){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(un));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(me.ESC+"[I"):this.coreService.triggerDataEvent(me.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let e=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${me.ESC}[4;${n};${e}t`);break;case 1:let i=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${me.ESC}[6;${r};${i}t`);break}}cancel(t,e){if(!(!this.options.cancelEvents&&!e))return t.preventDefault(),t.stopPropagation(),!1}};function ede(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var tde=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,e){let n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=()=>this._wrappedAddonDispose(n),e.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let e=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){e=n;break}if(e===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},nde=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,e){if(!(t<0||t>=this._line.length))return e?(this._line.loadCell(t,e),e):this._line.loadCell(t,new vr)}translateToString(t,e,n){return this._line.translateToString(t,e,n)}},Sj=class{constructor(t,e){this._buffer=t,this.type=e}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let e=this._buffer.lines.get(t);if(e)return new nde(e)}getNullCell(){return new vr}},ide=class extends Ge{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new be),this.onBufferChange=this._onBufferChange.event,this._normal=new Sj(this._core.buffers.normal,"normal"),this._alternate=new Sj(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},rde=class{constructor(t){this._core=t}registerCsiHandler(t,e){return this._core.registerCsiHandler(t,n=>e(n.toArray()))}addCsiHandler(t,e){return this.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._core.registerDcsHandler(t,(n,i)=>e(n,i.toArray()))}addDcsHandler(t,e){return this.registerDcsHandler(t,e)}registerEscHandler(t,e){return this._core.registerEscHandler(t,e)}addEscHandler(t,e){return this.registerEscHandler(t,e)}registerOscHandler(t,e){return this._core.registerOscHandler(t,e)}addOscHandler(t,e){return this.registerOscHandler(t,e)}},sde=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},ade=["cols","rows"],Jr=0,ode=class extends Ge{constructor(t){super(),this._core=this._register(new Jfe(t)),this._addonManager=this._register(new tde),this._publicOptions={...this._core.options};let e=i=>this._core.options[i],n=(i,r)=>{this._checkReadonlyOptions(i),this._core.options[i]=r};for(let i in this._core.options){let r={get:e.bind(this,i),set:n.bind(this,i)};Object.defineProperty(this._publicOptions,i,r)}}_checkReadonlyOptions(t){if(ade.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new rde(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new sde(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new ide(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let e in t)this._publicOptions[e]=t[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,e=!0){this._core.input(t,e)}resize(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,e,n){this._verifyIntegers(t,e,n),this._core.select(t,e,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,e){this._core.write(t,e)}writeln(t,e){this._core.write(t),this._core.write(`\r
`,e)}paste(t){this._core.paste(t)}refresh(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return OC.get()},set promptLabel(t){OC.set(t)},get tooMuchOutput(){return vC.get()},set tooMuchOutput(t){vC.set(t)}}}_verifyIntegers(...t){for(Jr of t)if(Jr===1/0||isNaN(Jr)||Jr%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(Jr of t)if(Jr&&(Jr===1/0||isNaN(Jr)||Jr%1!==0||Jr<0))throw new Error("This API only accepts positive integers")}};var lde=2,cde=1,ude=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let e=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(n.getPropertyValue("height")),r=Math.max(0,parseInt(n.getPropertyValue("width"))),s=window.getComputedStyle(this._terminal.element),a={top:parseInt(s.getPropertyValue("padding-top")),bottom:parseInt(s.getPropertyValue("padding-bottom")),right:parseInt(s.getPropertyValue("padding-right")),left:parseInt(s.getPropertyValue("padding-left"))},o=a.top+a.bottom,c=a.right+a.left,u=i-o,f=r-c-e;return{cols:Math.max(lde,Math.floor(f/t.css.cell.width)),rows:Math.max(cde,Math.floor(u/t.css.cell.height))}}};var hde=class{constructor(t,e,n,i={}){this._terminal=t,this._regex=e,this._handler=n,this._options=i}provideLinks(t,e){let n=dde.computeLink(t,this._regex,this._terminal,this._handler);e(this._addCallbacks(n))}_addCallbacks(t){return t.map(e=>(e.leave=this._options.leave,e.hover=(n,i)=>{if(this._options.hover){let{range:r}=e;this._options.hover(n,i,r)}},e))}};function fde(t){try{let e=new URL(t),n=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())}catch{return!1}}var dde=class Cg{static computeLink(e,n,i,r){let s=new RegExp(n.source,(n.flags||"")+"g"),[a,o]=Cg._getWindowedLineStrings(e-1,i),c=a.join(""),u,f=[];for(;u=s.exec(c);){let d=u[0];if(!fde(d))continue;let[m,v]=Cg._mapStrIdx(i,o,0,u.index),[y,x]=Cg._mapStrIdx(i,m,v,d.length);if(m===-1||v===-1||y===-1||x===-1)continue;let S={start:{x:v+1,y:m+1},end:{x,y:y+1}};f.push({range:S,text:d,activate:r})}return f}static _getWindowedLineStrings(e,n){let i,r=e,s=e,a=0,o="",c=[];if(i=n.buffer.active.getLine(e)){let u=i.translateToString(!0);if(i.isWrapped&&u[0]!==" "){for(a=0;(i=n.buffer.active.getLine(--r))&&a<2048&&(o=i.translateToString(!0),a+=o.length,c.push(o),!(!i.isWrapped||o.indexOf(" ")!==-1)););c.reverse()}for(c.push(u),a=0;(i=n.buffer.active.getLine(++s))&&i.isWrapped&&a<2048&&(o=i.translateToString(!0),a+=o.length,c.push(o),o.indexOf(" ")===-1););}return[c,r]}static _mapStrIdx(e,n,i,r){let s=e.buffer.active,a=s.getNullCell(),o=i;for(;r;){let c=s.getLine(n);if(!c)return[-1,-1];for(let u=o;u<c.length;++u){c.getCell(u,a);let f=a.getChars();if(a.getWidth()&&(r-=f.length||1,u===c.length-1&&f==="")){let d=s.getLine(n+1);d&&d.isWrapped&&(d.getCell(0,a),a.getWidth()===2&&(r+=1))}if(r<0)return[n,u]}n++,o=0}return[n,o]}},pde=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function mde(t,e){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var gde=class{constructor(t=mde,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;let e=this._options,n=e.urlRegex||pde;this._linkProvider=this._terminal.registerLinkProvider(new hde(this._terminal,n,this._handler,e))}dispose(){this._linkProvider?.dispose()}};function wd(t=768){const[e,n]=X.useState(()=>typeof window>"u"?!1:window.innerWidth<t);return X.useEffect(()=>{const i=()=>{n(window.innerWidth<t)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[t]),e}function Ode({height:t,onClose:e,onHeightChange:n}){const[i,r]=X.useState([{id:`term-${Date.now()}`,title:"Terminal 1"}]),[s,a]=X.useState(i[0].id),[o,c]=X.useState(!1),[u,f]=X.useState(null),d=X.useRef(!1),m=X.useRef(null),v=X.useRef(2),y=wd(),x=X.useCallback(()=>{const C={id:`term-${Date.now()}`,title:`Terminal ${v.current++}`};r(P=>[...P,C]),a(C.id)},[]),S=X.useCallback((C,P)=>{P.stopPropagation(),r(L=>{const B=L.filter(N=>N.id!==C);if(B.length===0)return e(),L;if(s===C){const N=L.findIndex($=>$.id===C),M=B[Math.max(0,N-1)];a(M.id)}return u===C&&(c(!1),f(null)),B})},[s,u,e]),_=X.useCallback(()=>{if(o)c(!1),f(null);else if(i.length>1){const C=i.find(P=>P.id!==s);C&&(c(!0),f(C.id))}else{const C={id:`term-${Date.now()}`,title:`Terminal ${v.current++}`};r(P=>[...P,C]),c(!0),f(C.id)}},[o,i,s]),Q=C=>{C.preventDefault(),m.current={startY:C.clientY,startHeight:t},document.addEventListener("mousemove",k),document.addEventListener("mouseup",T)},k=C=>{if(!m.current)return;const P=m.current.startY-C.clientY,L=Math.max(100,Math.min(600,m.current.startHeight+P));n(L)},T=()=>{m.current=null,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",T)},E=()=>{d.current=!d.current,n(d.current?500:200)};return g.jsxs("div",{className:"bg-[var(--bg-secondary)] border-t border-[var(--border)] flex flex-col",style:{height:t},children:[g.jsx("div",{className:"h-1 cursor-ns-resize hover:bg-[var(--accent)] transition-colors",onMouseDown:Q}),g.jsxs("div",{className:`flex items-center justify-between border-b border-[var(--border)] flex-shrink-0 ${y?"h-10":"h-8"}`,children:[g.jsxs("div",{className:"flex items-center overflow-x-auto hide-scrollbar",children:[i.map(C=>g.jsxs("button",{onClick:()=>a(C.id),className:`group flex items-center gap-1.5 px-3 py-2 text-xs border-r border-[var(--border)] transition-colors ${s===C.id?"bg-[var(--bg-tertiary)] text-white":"text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsx(AT,{size:y?14:12}),g.jsx("span",{children:C.title}),i.length>1&&g.jsx("button",{onClick:P=>S(C.id,P),className:`hover:text-red-400 transition-opacity ${y?"opacity-100 p-1":"opacity-0 group-hover:opacity-100"}`,children:g.jsx(li,{size:y?14:12})})]},C.id)),g.jsx("button",{onClick:x,className:`text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)] transition-colors ${y?"p-2":"px-2 py-1.5"}`,title:"New terminal",children:g.jsx(vo,{size:y?18:14})})]}),g.jsxs("div",{className:`flex items-center gap-1 flex-shrink-0 ${y?"px-1":"px-2"}`,children:[!y&&g.jsx("button",{onClick:_,className:`p-1.5 hover:bg-[var(--bg-tertiary)] rounded transition-colors ${o?"text-[var(--accent)]":""}`,title:o?"Unsplit":"Split terminal",children:g.jsx(qG,{size:14})}),g.jsx("button",{onClick:E,className:`hover:bg-[var(--bg-tertiary)] rounded transition-colors ${y?"p-2":"p-1.5"}`,title:d.current?"Restore":"Maximize",children:d.current?g.jsx(O6,{size:y?18:14}):g.jsx(lG,{size:y?18:14})}),g.jsx("button",{onClick:e,className:`hover:bg-[var(--bg-tertiary)] rounded transition-colors ${y?"p-2":"p-1.5"}`,title:"Close terminal",children:g.jsx(li,{size:y?18:14})})]})]}),g.jsx("div",{className:"flex-1 overflow-hidden flex",children:o&&u&&!y?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex-1 overflow-hidden border-r border-[var(--border)]",children:g.jsx(db,{terminalId:s,isActive:!0,isMobile:y})}),g.jsx("div",{className:"flex-1 overflow-hidden",children:g.jsx(db,{terminalId:u,isActive:!0,isMobile:y})})]}):i.map(C=>g.jsx("div",{className:`flex-1 overflow-hidden ${C.id===s?"":"hidden"}`,children:g.jsx(db,{terminalId:C.id,isActive:C.id===s,isMobile:y})},C.id))})]})}function db({terminalId:t,isActive:e,isMobile:n=!1}){const i=X.useRef(null),r=X.useRef(null),s=X.useRef(null),a=X.useRef(null);return X.useEffect(()=>{if(!i.current||r.current)return;const o=new ode({cursorBlink:!0,fontSize:n?11:13,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#1a1a1a",foreground:"#e0e0e0",cursor:"#00d9ff",cursorAccent:"#1a1a1a",selectionBackground:"#264f78",black:"#1a1a1a",red:"#f44747",green:"#6a9955",yellow:"#dcdcaa",blue:"#569cd6",magenta:"#c586c0",cyan:"#4ec9b0",white:"#e0e0e0",brightBlack:"#808080",brightRed:"#f44747",brightGreen:"#6a9955",brightYellow:"#dcdcaa",brightBlue:"#569cd6",brightMagenta:"#c586c0",brightCyan:"#4ec9b0",brightWhite:"#ffffff"},allowProposedApi:!0}),c=new ude,u=new gde;o.loadAddon(c),o.loadAddon(u),r.current=o,s.current=c,o.open(i.current),setTimeout(()=>{try{c.fit()}catch{}},0);const f=window.location.protocol==="https:"?"wss:":"ws:",d=new WebSocket(`${f}//${window.location.host}/ws/terminal/${t}`);d.binaryType="arraybuffer",a.current=d,d.onopen=()=>{console.log(`[Terminal] ${t} connected`);const{cols:v,rows:y}=o;d.send(`resize:${v}:${y}`)},d.onmessage=v=>{v.data instanceof ArrayBuffer?o.write(new Uint8Array(v.data)):o.write(v.data)},d.onerror=()=>{o.write(`\r
\x1B[31mWebSocket error\x1B[0m\r
`)},d.onclose=()=>{o.write(`\r
\x1B[33mSession ended\x1B[0m\r
`)},o.onData(v=>{d.readyState===WebSocket.OPEN&&d.send(new TextEncoder().encode(v))});const m=new ResizeObserver(()=>{try{if(c.fit(),d.readyState===WebSocket.OPEN){const{cols:v,rows:y}=o;d.send(`resize:${v}:${y}`)}}catch{}});return m.observe(i.current),e&&o.focus(),()=>{m.disconnect(),d.close(),o.dispose(),r.current=null,s.current=null,a.current=null}},[t]),X.useEffect(()=>{e&&r.current&&r.current.focus()},[e]),g.jsx("div",{ref:i,className:"h-full w-full",style:{padding:"4px"},onClick:()=>r.current?.focus()})}function vde(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const yde=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xde=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bde={};function wj(t,e){return(bde.jsx?xde:yde).test(t)}const _de=/[ \t\n\f\r]/g;function Sde(t){return typeof t=="object"?t.type==="text"?kj(t.value):!1:kj(t)}function kj(t){return t.replace(_de,"")===""}class kd{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}kd.prototype.normal={};kd.prototype.property={};kd.prototype.space=void 0;function C9(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new kd(n,i,e)}function eT(t){return t.toLowerCase()}class Pi{constructor(e,n){this.attribute=n,this.property=e}}Pi.prototype.attribute="";Pi.prototype.booleanish=!1;Pi.prototype.boolean=!1;Pi.prototype.commaOrSpaceSeparated=!1;Pi.prototype.commaSeparated=!1;Pi.prototype.defined=!1;Pi.prototype.mustUseProperty=!1;Pi.prototype.number=!1;Pi.prototype.overloadedBoolean=!1;Pi.prototype.property="";Pi.prototype.spaceSeparated=!1;Pi.prototype.space=void 0;let wde=0;const He=El(),cn=El(),tT=El(),ye=El(),Pt=El(),Vc=El(),Vi=El();function El(){return 2**++wde}const nT=Object.freeze(Object.defineProperty({__proto__:null,boolean:He,booleanish:cn,commaOrSpaceSeparated:Vi,commaSeparated:Vc,number:ye,overloadedBoolean:tT,spaceSeparated:Pt},Symbol.toStringTag,{value:"Module"})),pb=Object.keys(nT);class VQ extends Pi{constructor(e,n,i,r){let s=-1;if(super(e,n),Cj(this,"space",r),typeof i=="number")for(;++s<pb.length;){const a=pb[s];Cj(this,pb[s],(i&nT[a])===nT[a])}}}VQ.prototype.defined=!0;function Cj(t,e,n){n&&(t[e]=n)}function Su(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new VQ(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[eT(i)]=i,n[eT(s.attribute)]=i}return new kd(e,n,t.space)}const T9=Su({properties:{ariaActiveDescendant:null,ariaAtomic:cn,ariaAutoComplete:null,ariaBusy:cn,ariaChecked:cn,ariaColCount:ye,ariaColIndex:ye,ariaColSpan:ye,ariaControls:Pt,ariaCurrent:null,ariaDescribedBy:Pt,ariaDetails:null,ariaDisabled:cn,ariaDropEffect:Pt,ariaErrorMessage:null,ariaExpanded:cn,ariaFlowTo:Pt,ariaGrabbed:cn,ariaHasPopup:null,ariaHidden:cn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pt,ariaLevel:ye,ariaLive:null,ariaModal:cn,ariaMultiLine:cn,ariaMultiSelectable:cn,ariaOrientation:null,ariaOwns:Pt,ariaPlaceholder:null,ariaPosInSet:ye,ariaPressed:cn,ariaReadOnly:cn,ariaRelevant:null,ariaRequired:cn,ariaRoleDescription:Pt,ariaRowCount:ye,ariaRowIndex:ye,ariaRowSpan:ye,ariaSelected:cn,ariaSetSize:ye,ariaSort:null,ariaValueMax:ye,ariaValueMin:ye,ariaValueNow:ye,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Q9(t,e){return e in t?t[e]:e}function E9(t,e){return Q9(t,e.toLowerCase())}const kde=Su({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Vc,acceptCharset:Pt,accessKey:Pt,action:null,allow:null,allowFullScreen:He,allowPaymentRequest:He,allowUserMedia:He,alt:null,as:null,async:He,autoCapitalize:null,autoComplete:Pt,autoFocus:He,autoPlay:He,blocking:Pt,capture:null,charSet:null,checked:He,cite:null,className:Pt,cols:ye,colSpan:null,content:null,contentEditable:cn,controls:He,controlsList:Pt,coords:ye|Vc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:He,defer:He,dir:null,dirName:null,disabled:He,download:tT,draggable:cn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:He,formTarget:null,headers:Pt,height:ye,hidden:tT,high:ye,href:null,hrefLang:null,htmlFor:Pt,httpEquiv:Pt,id:null,imageSizes:null,imageSrcSet:null,inert:He,inputMode:null,integrity:null,is:null,isMap:He,itemId:null,itemProp:Pt,itemRef:Pt,itemScope:He,itemType:Pt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:He,low:ye,manifest:null,max:null,maxLength:ye,media:null,method:null,min:null,minLength:ye,multiple:He,muted:He,name:null,nonce:null,noModule:He,noValidate:He,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:He,optimum:ye,pattern:null,ping:Pt,placeholder:null,playsInline:He,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:He,referrerPolicy:null,rel:Pt,required:He,reversed:He,rows:ye,rowSpan:ye,sandbox:Pt,scope:null,scoped:He,seamless:He,selected:He,shadowRootClonable:He,shadowRootDelegatesFocus:He,shadowRootMode:null,shape:null,size:ye,sizes:null,slot:null,span:ye,spellCheck:cn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ye,step:null,style:null,tabIndex:ye,target:null,title:null,translate:null,type:null,typeMustMatch:He,useMap:null,value:cn,width:ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pt,axis:null,background:null,bgColor:null,border:ye,borderColor:null,bottomMargin:ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:He,declare:He,event:null,face:null,frame:null,frameBorder:null,hSpace:ye,leftMargin:ye,link:null,longDesc:null,lowSrc:null,marginHeight:ye,marginWidth:ye,noResize:He,noHref:He,noShade:He,noWrap:He,object:null,profile:null,prompt:null,rev:null,rightMargin:ye,rules:null,scheme:null,scrolling:cn,standby:null,summary:null,text:null,topMargin:ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:He,disableRemotePlayback:He,prefix:null,property:null,results:ye,security:null,unselectable:null},space:"html",transform:E9}),Cde=Su({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Vi,accentHeight:ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ye,amplitude:ye,arabicForm:null,ascent:ye,attributeName:null,attributeType:null,azimuth:ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ye,by:null,calcMode:null,capHeight:ye,className:Pt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ye,diffuseConstant:ye,direction:null,display:null,dur:null,divisor:ye,dominantBaseline:null,download:He,dx:null,dy:null,edgeMode:null,editable:null,elevation:ye,enableBackground:null,end:null,event:null,exponent:ye,externalResourcesRequired:null,fill:null,fillOpacity:ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Vc,g2:Vc,glyphName:Vc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ye,horizOriginX:ye,horizOriginY:ye,id:null,ideographic:ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ye,k:ye,k1:ye,k2:ye,k3:ye,k4:ye,kernelMatrix:Vi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ye,overlineThickness:ye,paintOrder:null,panose1:null,path:null,pathLength:ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ye,pointsAtY:ye,pointsAtZ:ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vi,rev:Vi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vi,requiredFeatures:Vi,requiredFonts:Vi,requiredFormats:Vi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ye,specularExponent:ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ye,strikethroughThickness:ye,string:null,stroke:null,strokeDashArray:Vi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ye,strokeOpacity:ye,strokeWidth:null,style:null,surfaceScale:ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vi,tabIndex:ye,tableValues:null,target:null,targetX:ye,targetY:ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ye,underlineThickness:ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ye,values:null,vAlphabetic:ye,vMathematical:ye,vectorEffect:null,vHanging:ye,vIdeographic:ye,version:null,vertAdvY:ye,vertOriginX:ye,vertOriginY:ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Q9}),P9=Su({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),A9=Su({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:E9}),R9=Su({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Tde={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Qde=/[A-Z]/g,Tj=/-[a-z]/g,Ede=/^data[-\w.:]+$/i;function Pde(t,e){const n=eT(e);let i=e,r=Pi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Ede.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Tj,Rde);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Tj.test(s)){let a=s.replace(Qde,Ade);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=VQ}return new r(i,e)}function Ade(t){return"-"+t.toLowerCase()}function Rde(t){return t.charAt(1).toUpperCase()}const $de=C9([T9,kde,P9,A9,R9],"html"),WQ=C9([T9,Cde,P9,A9,R9],"svg");function Nde(t){return t.join(" ").trim()}var _c={},mb,Qj;function Mde(){if(Qj)return mb;Qj=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,c=`
`,u="/",f="*",d="",m="comment",v="declaration";function y(S,_){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];_=_||{};var Q=1,k=1;function T(j){var D=j.match(e);D&&(Q+=D.length);var R=j.lastIndexOf(c);k=~R?j.length-R:k+j.length}function E(){var j={line:Q,column:k};return function(D){return D.position=new C(j),B(),D}}function C(j){this.start=j,this.end={line:Q,column:k},this.source=_.source}C.prototype.content=S;function P(j){var D=new Error(_.source+":"+Q+":"+k+": "+j);if(D.reason=j,D.filename=_.source,D.line=Q,D.column=k,D.source=S,!_.silent)throw D}function L(j){var D=j.exec(S);if(D){var R=D[0];return T(R),S=S.slice(R.length),D}}function B(){L(n)}function N(j){var D;for(j=j||[];D=M();)D!==!1&&j.push(D);return j}function M(){var j=E();if(!(u!=S.charAt(0)||f!=S.charAt(1))){for(var D=2;d!=S.charAt(D)&&(f!=S.charAt(D)||u!=S.charAt(D+1));)++D;if(D+=2,d===S.charAt(D-1))return P("End of comment missing");var R=S.slice(2,D-2);return k+=2,T(R),S=S.slice(D),k+=2,j({type:m,comment:R})}}function $(){var j=E(),D=L(i);if(D){if(M(),!L(r))return P("property missing ':'");var R=L(s),W=j({type:v,property:x(D[0].replace(t,d)),value:R?x(R[0].replace(t,d)):d});return L(a),W}}function I(){var j=[];N(j);for(var D;D=$();)D!==!1&&(j.push(D),N(j));return j}return B(),I()}function x(S){return S?S.replace(o,d):d}return mb=y,mb}var Ej;function jde(){if(Ej)return _c;Ej=1;var t=_c&&_c.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_c,"__esModule",{value:!0}),_c.default=n;const e=t(Mde());function n(i,r){let s=null;if(!i||typeof i!="string")return s;const a=(0,e.default)(i),o=typeof r=="function";return a.forEach(c=>{if(c.type!=="declaration")return;const{property:u,value:f}=c;o?r(u,f,c):f&&(s=s||{},s[u]=f)}),s}return _c}var Lh={},Pj;function zde(){if(Pj)return Lh;Pj=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(u){return!u||n.test(u)||t.test(u)},a=function(u,f){return f.toUpperCase()},o=function(u,f){return"".concat(f,"-")},c=function(u,f){return f===void 0&&(f={}),s(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(r,o):u=u.replace(i,o),u.replace(e,a))};return Lh.camelCase=c,Lh}var qh,Aj;function Dde(){if(Aj)return qh;Aj=1;var t=qh&&qh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(jde()),n=zde();function i(r,s){var a={};return!r||typeof r!="string"||(0,e.default)(r,function(o,c){o&&c&&(a[(0,n.camelCase)(o,s)]=c)}),a}return i.default=i,qh=i,qh}var Lde=Dde();const qde=sd(Lde),$9=N9("end"),UQ=N9("start");function N9(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Bde(t){const e=UQ(t),n=$9(t);if(e&&n)return{start:e,end:n}}function Of(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Rj(t.position):"start"in t||"end"in t?Rj(t):"line"in t||"column"in t?iT(t):""}function iT(t){return $j(t&&t.line)+":"+$j(t&&t.column)}function Rj(t){return iT(t&&t.start)+"-"+iT(t&&t.end)}function $j(t){return t&&typeof t=="number"?t:1}class ni extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=o?o.line:void 0,this.name=Of(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ni.prototype.file="";ni.prototype.name="";ni.prototype.reason="";ni.prototype.message="";ni.prototype.stack="";ni.prototype.column=void 0;ni.prototype.line=void 0;ni.prototype.ancestors=void 0;ni.prototype.cause=void 0;ni.prototype.fatal=void 0;ni.prototype.place=void 0;ni.prototype.ruleId=void 0;ni.prototype.source=void 0;const HQ={}.hasOwnProperty,Ide=new Map,Xde=/[A-Z]/g,Zde=new Set(["table","tbody","thead","tfoot","tr"]),Vde=new Set(["td","th"]),M9="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Wde(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=epe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=Jde(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?WQ:$de,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=j9(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function j9(t,e,n){if(e.type==="element")return Ude(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Hde(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Fde(t,e,n);if(e.type==="mdxjsEsm")return Yde(t,e);if(e.type==="root")return Gde(t,e,n);if(e.type==="text")return Kde(t,e)}function Ude(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=WQ,t.schema=r),t.ancestors.push(e);const s=D9(t,e.tagName,!1),a=tpe(t,e);let o=FQ(t,e);return Zde.has(e.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!Sde(c):!0})),z9(t,a,s,e),YQ(a,o),t.ancestors.pop(),t.schema=i,t.create(e,s,a,n)}function Hde(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}Uf(t,e.position)}function Yde(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Uf(t,e.position)}function Fde(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=WQ,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:D9(t,e.name,!0),a=npe(t,e),o=FQ(t,e);return z9(t,a,s,e),YQ(a,o),t.ancestors.pop(),t.schema=i,t.create(e,s,a,n)}function Gde(t,e,n){const i={};return YQ(i,FQ(t,e)),t.create(e,t.Fragment,i,n)}function Kde(t,e){return e.value}function z9(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function YQ(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Jde(t,e,n){return i;function i(r,s,a,o){const u=Array.isArray(a.children)?n:e;return o?u(s,a,o):u(s,a)}}function epe(t,e){return n;function n(i,r,s,a){const o=Array.isArray(s.children),c=UQ(i);return e(r,s,a,o,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function tpe(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&HQ.call(e.properties,r)){const s=ipe(t,r,e.properties[r]);if(s){const[a,o]=s;t.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&Vde.has(e.tagName)?i=o:n[a]=o}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function npe(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,t.evaluater.evaluateExpression(o.argument))}else Uf(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const o=i.value.data.estree.body[0];o.type,s=t.evaluater.evaluateExpression(o.expression)}else Uf(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function FQ(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:Ide;for(;++i<e.children.length;){const s=e.children[i];let a;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=r.get(c)||0;a=c+"-"+u,r.set(c,u+1)}}const o=j9(t,s,a);o!==void 0&&n.push(o)}return n}function ipe(t,e,n){const i=Pde(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?vde(n):Nde(n)),i.property==="style"){let r=typeof n=="object"?n:rpe(t,String(n));return t.stylePropertyNameCase==="css"&&(r=spe(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?Tde[i.property]||i.property:i.attribute,n]}}function rpe(t,e){try{return qde(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new ni("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=M9+"#cannot-parse-style-attribute",r}}function D9(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,a;for(;++s<r.length;){const o=wj(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}i=a}else i=wj(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return HQ.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);Uf(t)}function Uf(t,e){const n=new ni("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=M9+"#cannot-handle-mdx-estrees-without-createevaluater",n}function spe(t){const e={};let n;for(n in t)HQ.call(t,n)&&(e[ape(n)]=t[n]);return e}function ape(t){let e=t.replace(Xde,ope);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function ope(t){return"-"+t.toLowerCase()}const gb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},lpe={};function GQ(t,e){const n=lpe,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return L9(t,i,r)}function L9(t,e,n){if(cpe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Nj(t.children,e,n)}return Array.isArray(t)?Nj(t,e,n):""}function Nj(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=L9(t[r],e,n);return i.join("")}function cpe(t){return!!(t&&typeof t=="object")}const Mj=document.createElement("i");function KQ(t){const e="&"+t+";";Mj.innerHTML=e;const n=Mj.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ki(t,e,n,i){const r=t.length;let s=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<i.length;)a=i.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function fr(t,e){return t.length>0?(Ki(t,t.length,0,e),t):e}const jj={}.hasOwnProperty;function q9(t){const e={};let n=-1;for(;++n<t.length;)upe(e,t[n]);return e}function upe(t,e){let n;for(n in e){const r=(jj.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let a;if(s)for(a in s){jj.call(r,a)||(r[a]=[]);const o=s[a];hpe(r[a],Array.isArray(o)?o:o?[o]:[])}}}function hpe(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Ki(t,0,0,i)}function B9(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Mr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ai=_o(/[A-Za-z]/),Kn=_o(/[\dA-Za-z]/),fpe=_o(/[#-'*+\--9=?A-Z^-~]/);function SO(t){return t!==null&&(t<32||t===127)}const rT=_o(/\d/),dpe=_o(/[\dA-Fa-f]/),ppe=_o(/[!-/:-@[-`{-~]/);function Le(t){return t!==null&&t<-2}function Qt(t){return t!==null&&(t<0||t===32)}function it(t){return t===-2||t===-1||t===32}const l0=_o(new RegExp("\\p{P}|\\p{S}","u")),bl=_o(/\s/);function _o(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function wu(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let a="";if(s===37&&Kn(t.charCodeAt(n+1))&&Kn(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=t.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),r=1):a=""}else a=String.fromCharCode(s);a&&(e.push(t.slice(i,n),encodeURIComponent(a)),i=n+r+1,a=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function ct(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return it(c)?(t.enter(n),o(c)):e(c)}function o(c){return it(c)&&s++<r?(t.consume(c),o):(t.exit(n),e(c))}}const mpe={tokenize:gpe};function gpe(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ct(t,e,"linePrefix")}function r(o){return t.enter("paragraph"),s(o)}function s(o){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(o)}function a(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return Le(o)?(t.consume(o),t.exit("chunkText"),s):(t.consume(o),a)}}const Ope={tokenize:vpe},zj={tokenize:ype};function vpe(t){const e=this,n=[];let i=0,r,s,a;return o;function o(k){if(i<n.length){const T=n[i];return e.containerState=T[1],t.attempt(T[0].continuation,c,u)(k)}return u(k)}function c(k){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&Q();const T=e.events.length;let E=T,C;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){C=e.events[E][1].end;break}_(i);let P=T;for(;P<e.events.length;)e.events[P][1].end={...C},P++;return Ki(e.events,E+1,0,e.events.slice(T)),e.events.length=P,u(k)}return o(k)}function u(k){if(i===n.length){if(!r)return m(k);if(r.currentConstruct&&r.currentConstruct.concrete)return y(k);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(zj,f,d)(k)}function f(k){return r&&Q(),_(i),m(k)}function d(k){return e.parser.lazy[e.now().line]=i!==n.length,a=e.now().offset,y(k)}function m(k){return e.containerState={},t.attempt(zj,v,y)(k)}function v(k){return i++,n.push([e.currentConstruct,e.containerState]),m(k)}function y(k){if(k===null){r&&Q(),_(0),t.consume(k);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),x(k)}function x(k){if(k===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(k);return}return Le(k)?(t.consume(k),S(t.exit("chunkFlow")),i=0,e.interrupt=void 0,o):(t.consume(k),x)}function S(k,T){const E=e.sliceStream(k);if(T&&E.push(null),k.previous=s,s&&(s.next=k),s=k,r.defineSkip(k.start),r.write(E),e.parser.lazy[k.start.line]){let C=r.events.length;for(;C--;)if(r.events[C][1].start.offset<a&&(!r.events[C][1].end||r.events[C][1].end.offset>a))return;const P=e.events.length;let L=P,B,N;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if(B){N=e.events[L][1].end;break}B=!0}for(_(i),C=P;C<e.events.length;)e.events[C][1].end={...N},C++;Ki(e.events,L+1,0,e.events.slice(P)),e.events.length=C}}function _(k){let T=n.length;for(;T-- >k;){const E=n[T];e.containerState=E[1],E[0].exit.call(e,t)}n.length=k}function Q(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function ype(t,e,n){return ct(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function au(t){if(t===null||Qt(t)||bl(t))return 1;if(l0(t))return 2}function c0(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const sT={name:"attention",resolveAll:xpe,tokenize:bpe};function xpe(t,e){let n=-1,i,r,s,a,o,c,u,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[i][1].end},m={...t[n][1].start};Dj(d,-c),Dj(m,c),a={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...t[i][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:c>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},t[i][1].end={...a.start},t[n][1].start={...o.end},u=[],t[i][1].end.offset-t[i][1].start.offset&&(u=fr(u,[["enter",t[i][1],e],["exit",t[i][1],e]])),u=fr(u,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",s,e]]),u=fr(u,c0(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),u=fr(u,[["exit",s,e],["enter",o,e],["exit",o,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,u=fr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Ki(t,i-1,n-i+3,u),n=i+u.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function bpe(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=au(i);let s;return a;function a(c){return s=c,t.enter("attentionSequence"),o(c)}function o(c){if(c===s)return t.consume(c),o;const u=t.exit("attentionSequence"),f=au(c),d=!f||f===2&&r||n.includes(c),m=!r||r===2&&f||n.includes(i);return u._open=!!(s===42?d:d&&(r||!m)),u._close=!!(s===42?m:m&&(f||!d)),e(c)}}function Dj(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const _pe={name:"autolink",tokenize:Spe};function Spe(t,e,n){let i=0;return r;function r(v){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(v){return ai(v)?(t.consume(v),a):v===64?n(v):u(v)}function a(v){return v===43||v===45||v===46||Kn(v)?(i=1,o(v)):u(v)}function o(v){return v===58?(t.consume(v),i=0,c):(v===43||v===45||v===46||Kn(v))&&i++<32?(t.consume(v),o):(i=0,u(v))}function c(v){return v===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):v===null||v===32||v===60||SO(v)?n(v):(t.consume(v),c)}function u(v){return v===64?(t.consume(v),f):fpe(v)?(t.consume(v),u):n(v)}function f(v){return Kn(v)?d(v):n(v)}function d(v){return v===46?(t.consume(v),i=0,f):v===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):m(v)}function m(v){if((v===45||Kn(v))&&i++<63){const y=v===45?m:d;return t.consume(v),y}return n(v)}}const Cd={partial:!0,tokenize:wpe};function wpe(t,e,n){return i;function i(s){return it(s)?ct(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||Le(s)?e(s):n(s)}}const I9={continuation:{tokenize:Cpe},exit:Tpe,name:"blockQuote",tokenize:kpe};function kpe(t,e,n){const i=this;return r;function r(a){if(a===62){const o=i.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return it(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function Cpe(t,e,n){const i=this;return r;function r(a){return it(a)?ct(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(I9,e,n)(a)}}function Tpe(t){t.exit("blockQuote")}const X9={name:"characterEscape",tokenize:Qpe};function Qpe(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return ppe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Z9={name:"characterReference",tokenize:Epe};function Epe(t,e,n){const i=this;let r=0,s,a;return o;function o(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),c}function c(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,a=Kn,f(d))}function u(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=dpe,f):(t.enter("characterReferenceValue"),s=7,a=rT,f(d))}function f(d){if(d===59&&r){const m=t.exit("characterReferenceValue");return a===Kn&&!KQ(i.sliceSerialize(m))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(d)&&r++<s?(t.consume(d),f):n(d)}}const Lj={partial:!0,tokenize:Ape},qj={concrete:!0,name:"codeFenced",tokenize:Ppe};function Ppe(t,e,n){const i=this,r={partial:!0,tokenize:E};let s=0,a=0,o;return c;function c(C){return u(C)}function u(C){const P=i.events[i.events.length-1];return s=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,o=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(C)}function f(C){return C===o?(a++,t.consume(C),f):a<3?n(C):(t.exit("codeFencedFenceSequence"),it(C)?ct(t,d,"whitespace")(C):d(C))}function d(C){return C===null||Le(C)?(t.exit("codeFencedFence"),i.interrupt?e(C):t.check(Lj,x,T)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||Le(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(C)):it(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ct(t,v,"whitespace")(C)):C===96&&C===o?n(C):(t.consume(C),m)}function v(C){return C===null||Le(C)?d(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(C))}function y(C){return C===null||Le(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(C)):C===96&&C===o?n(C):(t.consume(C),y)}function x(C){return t.attempt(r,T,S)(C)}function S(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),_}function _(C){return s>0&&it(C)?ct(t,Q,"linePrefix",s+1)(C):Q(C)}function Q(C){return C===null||Le(C)?t.check(Lj,x,T)(C):(t.enter("codeFlowValue"),k(C))}function k(C){return C===null||Le(C)?(t.exit("codeFlowValue"),Q(C)):(t.consume(C),k)}function T(C){return t.exit("codeFenced"),e(C)}function E(C,P,L){let B=0;return N;function N(D){return C.enter("lineEnding"),C.consume(D),C.exit("lineEnding"),M}function M(D){return C.enter("codeFencedFence"),it(D)?ct(C,$,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):$(D)}function $(D){return D===o?(C.enter("codeFencedFenceSequence"),I(D)):L(D)}function I(D){return D===o?(B++,C.consume(D),I):B>=a?(C.exit("codeFencedFenceSequence"),it(D)?ct(C,j,"whitespace")(D):j(D)):L(D)}function j(D){return D===null||Le(D)?(C.exit("codeFencedFence"),P(D)):L(D)}}}function Ape(t,e,n){const i=this;return r;function r(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}const Ob={name:"codeIndented",tokenize:$pe},Rpe={partial:!0,tokenize:Npe};function $pe(t,e,n){const i=this;return r;function r(u){return t.enter("codeIndented"),ct(t,s,"linePrefix",5)(u)}function s(u){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):Le(u)?t.attempt(Rpe,a,c)(u):(t.enter("codeFlowValue"),o(u))}function o(u){return u===null||Le(u)?(t.exit("codeFlowValue"),a(u)):(t.consume(u),o)}function c(u){return t.exit("codeIndented"),e(u)}}function Npe(t,e,n){const i=this;return r;function r(a){return i.parser.lazy[i.now().line]?n(a):Le(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),r):ct(t,s,"linePrefix",5)(a)}function s(a){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):Le(a)?r(a):n(a)}}const Mpe={name:"codeText",previous:zpe,resolve:jpe,tokenize:Dpe};function jpe(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function zpe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Dpe(t,e,n){let i=0,r,s;return a;function a(d){return t.enter("codeText"),t.enter("codeTextSequence"),o(d)}function o(d){return d===96?(t.consume(d),i++,o):(t.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),c):d===96?(s=t.enter("codeTextSequence"),r=0,f(d)):Le(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||Le(d)?(t.exit("codeTextData"),c(d)):(t.consume(d),u)}function f(d){return d===96?(t.consume(d),r++,f):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",u(d))}}class Lpe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Bh(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Bh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Bh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Bh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Bh(this.left,n.reverse())}}}function Bh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function V9(t){const e={};let n=-1,i,r,s,a,o,c,u;const f=new Lpe(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(i=f.get(n),n&&i[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,qpe(f,n)),n=e[n],u=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(a=f.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(f.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(i[1].end={...f.get(r)[1].start},o=f.slice(r,n),o.unshift(i),f.splice(r,n-r+1,o))}}return Ki(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function qpe(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,c=[],u={};let f,d,m=-1,v=n,y=0,x=0;const S=[x];for(;v;){for(;t.get(++r)[1]!==v;);s.push(r),v._tokenizer||(f=i.sliceStream(v),v.next||f.push(null),d&&a.defineSkip(v.start),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(f),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=v,v=v.next}for(v=n;++m<o.length;)o[m][0]==="exit"&&o[m-1][0]==="enter"&&o[m][1].type===o[m-1][1].type&&o[m][1].start.line!==o[m][1].end.line&&(x=m+1,S.push(x),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(a.events=[],v?(v._tokenizer=void 0,v.previous=void 0):S.pop(),m=S.length;m--;){const _=o.slice(S[m],S[m+1]),Q=s.pop();c.push([Q,Q+_.length-1]),t.splice(Q,2,_)}for(c.reverse(),m=-1;++m<c.length;)u[y+c[m][0]]=y+c[m][1],y+=c[m][1]-c[m][0]-1;return u}const Bpe={resolve:Xpe,tokenize:Zpe},Ipe={partial:!0,tokenize:Vpe};function Xpe(t){return V9(t),t}function Zpe(t,e){let n;return i;function i(o){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?s(o):Le(o)?t.check(Ipe,a,s)(o):(t.consume(o),r)}function s(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function a(o){return t.consume(o),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function Vpe(t,e,n){const i=this;return r;function r(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),ct(t,s,"linePrefix")}function s(a){if(a===null||Le(a))return n(a);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):t.interrupt(i.parser.constructs.flow,n,e)(a)}}function W9(t,e,n,i,r,s,a,o,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(_){return _===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(_),t.exit(s),m):_===null||_===32||_===41||SO(_)?n(_):(t.enter(i),t.enter(a),t.enter(o),t.enter("chunkString",{contentType:"string"}),x(_))}function m(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),v(_))}function v(_){return _===62?(t.exit("chunkString"),t.exit(o),m(_)):_===null||_===60||Le(_)?n(_):(t.consume(_),_===92?y:v)}function y(_){return _===60||_===62||_===92?(t.consume(_),v):v(_)}function x(_){return!f&&(_===null||_===41||Qt(_))?(t.exit("chunkString"),t.exit(o),t.exit(a),t.exit(i),e(_)):f<u&&_===40?(t.consume(_),f++,x):_===41?(t.consume(_),f--,x):_===null||_===32||_===40||SO(_)?n(_):(t.consume(_),_===92?S:x)}function S(_){return _===40||_===41||_===92?(t.consume(_),x):x(_)}}function U9(t,e,n,i,r,s){const a=this;let o=0,c;return u;function u(v){return t.enter(i),t.enter(r),t.consume(v),t.exit(r),t.enter(s),f}function f(v){return o>999||v===null||v===91||v===93&&!c||v===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(v):v===93?(t.exit(s),t.enter(r),t.consume(v),t.exit(r),t.exit(i),e):Le(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),d(v))}function d(v){return v===null||v===91||v===93||Le(v)||o++>999?(t.exit("chunkString"),f(v)):(t.consume(v),c||(c=!it(v)),v===92?m:d)}function m(v){return v===91||v===92||v===93?(t.consume(v),o++,d):d(v)}}function H9(t,e,n,i,r,s){let a;return o;function o(m){return m===34||m===39||m===40?(t.enter(i),t.enter(r),t.consume(m),t.exit(r),a=m===40?41:m,c):n(m)}function c(m){return m===a?(t.enter(r),t.consume(m),t.exit(r),t.exit(i),e):(t.enter(s),u(m))}function u(m){return m===a?(t.exit(s),c(a)):m===null?n(m):Le(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),ct(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===a||m===null||Le(m)?(t.exit("chunkString"),u(m)):(t.consume(m),m===92?d:f)}function d(m){return m===a||m===92?(t.consume(m),f):f(m)}}function vf(t,e){let n;return i;function i(r){return Le(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):it(r)?ct(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const Wpe={name:"definition",tokenize:Hpe},Upe={partial:!0,tokenize:Ype};function Hpe(t,e,n){const i=this;let r;return s;function s(v){return t.enter("definition"),a(v)}function a(v){return U9.call(i,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function o(v){return r=Mr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),c):n(v)}function c(v){return Qt(v)?vf(t,u)(v):u(v)}function u(v){return W9(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function f(v){return t.attempt(Upe,d,d)(v)}function d(v){return it(v)?ct(t,m,"whitespace")(v):m(v)}function m(v){return v===null||Le(v)?(t.exit("definition"),i.parser.defined.push(r),e(v)):n(v)}}function Ype(t,e,n){return i;function i(o){return Qt(o)?vf(t,r)(o):n(o)}function r(o){return H9(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return it(o)?ct(t,a,"whitespace")(o):a(o)}function a(o){return o===null||Le(o)?e(o):n(o)}}const Fpe={name:"hardBreakEscape",tokenize:Gpe};function Gpe(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return Le(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Kpe={name:"headingAtx",resolve:Jpe,tokenize:eme};function Jpe(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Ki(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function eme(t,e,n){let i=0;return r;function r(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),a(f)}function a(f){return f===35&&i++<6?(t.consume(f),a):f===null||Qt(f)?(t.exit("atxHeadingSequence"),o(f)):n(f)}function o(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Le(f)?(t.exit("atxHeading"),e(f)):it(f)?ct(t,o,"whitespace")(f):(t.enter("atxHeadingText"),u(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),o(f))}function u(f){return f===null||f===35||Qt(f)?(t.exit("atxHeadingText"),o(f)):(t.consume(f),u)}}const tme=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Bj=["pre","script","style","textarea"],nme={concrete:!0,name:"htmlFlow",resolveTo:sme,tokenize:ame},ime={partial:!0,tokenize:lme},rme={partial:!0,tokenize:ome};function sme(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ame(t,e,n){const i=this;let r,s,a,o,c;return u;function u(z){return f(z)}function f(z){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(z),d}function d(z){return z===33?(t.consume(z),m):z===47?(t.consume(z),s=!0,x):z===63?(t.consume(z),r=3,i.interrupt?e:q):ai(z)?(t.consume(z),a=String.fromCharCode(z),S):n(z)}function m(z){return z===45?(t.consume(z),r=2,v):z===91?(t.consume(z),r=5,o=0,y):ai(z)?(t.consume(z),r=4,i.interrupt?e:q):n(z)}function v(z){return z===45?(t.consume(z),i.interrupt?e:q):n(z)}function y(z){const H="CDATA[";return z===H.charCodeAt(o++)?(t.consume(z),o===H.length?i.interrupt?e:$:y):n(z)}function x(z){return ai(z)?(t.consume(z),a=String.fromCharCode(z),S):n(z)}function S(z){if(z===null||z===47||z===62||Qt(z)){const H=z===47,K=a.toLowerCase();return!H&&!s&&Bj.includes(K)?(r=1,i.interrupt?e(z):$(z)):tme.includes(a.toLowerCase())?(r=6,H?(t.consume(z),_):i.interrupt?e(z):$(z)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(z):s?Q(z):k(z))}return z===45||Kn(z)?(t.consume(z),a+=String.fromCharCode(z),S):n(z)}function _(z){return z===62?(t.consume(z),i.interrupt?e:$):n(z)}function Q(z){return it(z)?(t.consume(z),Q):N(z)}function k(z){return z===47?(t.consume(z),N):z===58||z===95||ai(z)?(t.consume(z),T):it(z)?(t.consume(z),k):N(z)}function T(z){return z===45||z===46||z===58||z===95||Kn(z)?(t.consume(z),T):E(z)}function E(z){return z===61?(t.consume(z),C):it(z)?(t.consume(z),E):k(z)}function C(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),c=z,P):it(z)?(t.consume(z),C):L(z)}function P(z){return z===c?(t.consume(z),c=null,B):z===null||Le(z)?n(z):(t.consume(z),P)}function L(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||Qt(z)?E(z):(t.consume(z),L)}function B(z){return z===47||z===62||it(z)?k(z):n(z)}function N(z){return z===62?(t.consume(z),M):n(z)}function M(z){return z===null||Le(z)?$(z):it(z)?(t.consume(z),M):n(z)}function $(z){return z===45&&r===2?(t.consume(z),R):z===60&&r===1?(t.consume(z),W):z===62&&r===4?(t.consume(z),V):z===63&&r===3?(t.consume(z),q):z===93&&r===5?(t.consume(z),G):Le(z)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(ime,F,I)(z)):z===null||Le(z)?(t.exit("htmlFlowData"),I(z)):(t.consume(z),$)}function I(z){return t.check(rme,j,F)(z)}function j(z){return t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),D}function D(z){return z===null||Le(z)?I(z):(t.enter("htmlFlowData"),$(z))}function R(z){return z===45?(t.consume(z),q):$(z)}function W(z){return z===47?(t.consume(z),a="",U):$(z)}function U(z){if(z===62){const H=a.toLowerCase();return Bj.includes(H)?(t.consume(z),V):$(z)}return ai(z)&&a.length<8?(t.consume(z),a+=String.fromCharCode(z),U):$(z)}function G(z){return z===93?(t.consume(z),q):$(z)}function q(z){return z===62?(t.consume(z),V):z===45&&r===2?(t.consume(z),q):$(z)}function V(z){return z===null||Le(z)?(t.exit("htmlFlowData"),F(z)):(t.consume(z),V)}function F(z){return t.exit("htmlFlow"),e(z)}}function ome(t,e,n){const i=this;return r;function r(a){return Le(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}function lme(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Cd,e,n)}}const cme={name:"htmlText",tokenize:ume};function ume(t,e,n){const i=this;let r,s,a;return o;function o(q){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(q),c}function c(q){return q===33?(t.consume(q),u):q===47?(t.consume(q),E):q===63?(t.consume(q),k):ai(q)?(t.consume(q),L):n(q)}function u(q){return q===45?(t.consume(q),f):q===91?(t.consume(q),s=0,y):ai(q)?(t.consume(q),Q):n(q)}function f(q){return q===45?(t.consume(q),v):n(q)}function d(q){return q===null?n(q):q===45?(t.consume(q),m):Le(q)?(a=d,W(q)):(t.consume(q),d)}function m(q){return q===45?(t.consume(q),v):d(q)}function v(q){return q===62?R(q):q===45?m(q):d(q)}function y(q){const V="CDATA[";return q===V.charCodeAt(s++)?(t.consume(q),s===V.length?x:y):n(q)}function x(q){return q===null?n(q):q===93?(t.consume(q),S):Le(q)?(a=x,W(q)):(t.consume(q),x)}function S(q){return q===93?(t.consume(q),_):x(q)}function _(q){return q===62?R(q):q===93?(t.consume(q),_):x(q)}function Q(q){return q===null||q===62?R(q):Le(q)?(a=Q,W(q)):(t.consume(q),Q)}function k(q){return q===null?n(q):q===63?(t.consume(q),T):Le(q)?(a=k,W(q)):(t.consume(q),k)}function T(q){return q===62?R(q):k(q)}function E(q){return ai(q)?(t.consume(q),C):n(q)}function C(q){return q===45||Kn(q)?(t.consume(q),C):P(q)}function P(q){return Le(q)?(a=P,W(q)):it(q)?(t.consume(q),P):R(q)}function L(q){return q===45||Kn(q)?(t.consume(q),L):q===47||q===62||Qt(q)?B(q):n(q)}function B(q){return q===47?(t.consume(q),R):q===58||q===95||ai(q)?(t.consume(q),N):Le(q)?(a=B,W(q)):it(q)?(t.consume(q),B):R(q)}function N(q){return q===45||q===46||q===58||q===95||Kn(q)?(t.consume(q),N):M(q)}function M(q){return q===61?(t.consume(q),$):Le(q)?(a=M,W(q)):it(q)?(t.consume(q),M):B(q)}function $(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(t.consume(q),r=q,I):Le(q)?(a=$,W(q)):it(q)?(t.consume(q),$):(t.consume(q),j)}function I(q){return q===r?(t.consume(q),r=void 0,D):q===null?n(q):Le(q)?(a=I,W(q)):(t.consume(q),I)}function j(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||Qt(q)?B(q):(t.consume(q),j)}function D(q){return q===47||q===62||Qt(q)?B(q):n(q)}function R(q){return q===62?(t.consume(q),t.exit("htmlTextData"),t.exit("htmlText"),e):n(q)}function W(q){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),U}function U(q){return it(q)?ct(t,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):G(q)}function G(q){return t.enter("htmlTextData"),a(q)}}const JQ={name:"labelEnd",resolveAll:pme,resolveTo:mme,tokenize:gme},hme={tokenize:Ome},fme={tokenize:vme},dme={tokenize:yme};function pme(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&Ki(t,0,t.length,n),t}function mme(t,e){let n=t.length,i=0,r,s,a,o;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(a=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},f={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[a-2][1].start}};return o=[["enter",c,e],["enter",u,e]],o=fr(o,t.slice(s+1,s+i+3)),o=fr(o,[["enter",f,e]]),o=fr(o,c0(e.parser.constructs.insideSpan.null,t.slice(s+i+4,a-3),e)),o=fr(o,[["exit",f,e],t[a-2],t[a-1],["exit",u,e]]),o=fr(o,t.slice(a+1)),o=fr(o,[["exit",c,e]]),Ki(t,s,t.length,o),t}function gme(t,e,n){const i=this;let r=i.events.length,s,a;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return o;function o(m){return s?s._inactive?d(m):(a=i.parser.defined.includes(Mr(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),c):n(m)}function c(m){return m===40?t.attempt(hme,f,a?f:d)(m):m===91?t.attempt(fme,f,a?u:d)(m):a?f(m):d(m)}function u(m){return t.attempt(dme,f,d)(m)}function f(m){return e(m)}function d(m){return s._balanced=!0,n(m)}}function Ome(t,e,n){return i;function i(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),r}function r(d){return Qt(d)?vf(t,s)(d):s(d)}function s(d){return d===41?f(d):W9(t,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return Qt(d)?vf(t,c)(d):f(d)}function o(d){return n(d)}function c(d){return d===34||d===39||d===40?H9(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function u(d){return Qt(d)?vf(t,f)(d):f(d)}function f(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function vme(t,e,n){const i=this;return r;function r(o){return U9.call(i,t,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return i.parser.defined.includes(Mr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(o):n(o)}function a(o){return n(o)}}function yme(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const xme={name:"labelStartImage",resolveAll:JQ.resolveAll,tokenize:bme};function bme(t,e,n){const i=this;return r;function r(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),s}function s(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const _me={name:"labelStartLink",resolveAll:JQ.resolveAll,tokenize:Sme};function Sme(t,e,n){const i=this;return r;function r(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):e(a)}}const vb={name:"lineEnding",tokenize:wme};function wme(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),ct(t,e,"linePrefix")}}const Tg={name:"thematicBreak",tokenize:kme};function kme(t,e,n){let i=0,r;return s;function s(u){return t.enter("thematicBreak"),a(u)}function a(u){return r=u,o(u)}function o(u){return u===r?(t.enter("thematicBreakSequence"),c(u)):i>=3&&(u===null||Le(u))?(t.exit("thematicBreak"),e(u)):n(u)}function c(u){return u===r?(t.consume(u),i++,c):(t.exit("thematicBreakSequence"),it(u)?ct(t,o,"whitespace")(u):o(u))}}const bi={continuation:{tokenize:Eme},exit:Ame,name:"list",tokenize:Qme},Cme={partial:!0,tokenize:Rme},Tme={partial:!0,tokenize:Pme};function Qme(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return o;function o(v){const y=i.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!i.containerState.marker||v===i.containerState.marker:rT(v)){if(i.containerState.type||(i.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),v===42||v===45?t.check(Tg,n,u)(v):u(v);if(!i.interrupt||v===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(v)}return n(v)}function c(v){return rT(v)&&++a<10?(t.consume(v),c):(!i.interrupt||a<2)&&(i.containerState.marker?v===i.containerState.marker:v===41||v===46)?(t.exit("listItemValue"),u(v)):n(v)}function u(v){return t.enter("listItemMarker"),t.consume(v),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||v,t.check(Cd,i.interrupt?n:f,t.attempt(Cme,m,d))}function f(v){return i.containerState.initialBlankLine=!0,s++,m(v)}function d(v){return it(v)?(t.enter("listItemPrefixWhitespace"),t.consume(v),t.exit("listItemPrefixWhitespace"),m):n(v)}function m(v){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(v)}}function Eme(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Cd,r,s);function r(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ct(t,e,"listItemIndent",i.containerState.size+1)(o)}function s(o){return i.containerState.furtherBlankLines||!it(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(Tme,e,a)(o))}function a(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,ct(t,t.attempt(bi,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Pme(t,e,n){const i=this;return ct(t,r,"listItemIndent",i.containerState.size+1);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?e(s):n(s)}}function Ame(t){t.exit(this.containerState.type)}function Rme(t,e,n){const i=this;return ct(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=i.events[i.events.length-1];return!it(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Ij={name:"setextUnderline",resolveTo:$me,tokenize:Nme};function $me(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",a,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=a,t.push(["exit",a,e]),t}function Nme(t,e,n){const i=this;let r;return s;function s(u){let f=i.events.length,d;for(;f--;)if(i.events[f][1].type!=="lineEnding"&&i.events[f][1].type!=="linePrefix"&&i.events[f][1].type!=="content"){d=i.events[f][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||d)?(t.enter("setextHeadingLine"),r=u,a(u)):n(u)}function a(u){return t.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===r?(t.consume(u),o):(t.exit("setextHeadingLineSequence"),it(u)?ct(t,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Le(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const Mme={tokenize:jme};function jme(t){const e=this,n=t.attempt(Cd,i,t.attempt(this.parser.constructs.flowInitial,r,ct(t,t.attempt(this.parser.constructs.flow,r,t.attempt(Bpe,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const zme={resolveAll:F9()},Dme=Y9("string"),Lme=Y9("text");function Y9(t){return{resolveAll:F9(t==="text"?qme:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,a,o);return a;function a(f){return u(f)?s(f):o(f)}function o(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const d=r[f];let m=-1;if(d)for(;++m<d.length;){const v=d[m];if(!v.previous||v.previous.call(i,i.previous))return!0}return!1}}}function F9(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function qme(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,a=-1,o=0,c;for(;s--;){const u=r[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)c=!0,o++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(o=0),o){const u={type:n===t.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:i.start._bufferIndex+a,_index:i.start._index+s,line:i.end.line,column:i.end.column-o,offset:i.end.offset-o},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const Bme={42:bi,43:bi,45:bi,48:bi,49:bi,50:bi,51:bi,52:bi,53:bi,54:bi,55:bi,56:bi,57:bi,62:I9},Ime={91:Wpe},Xme={[-2]:Ob,[-1]:Ob,32:Ob},Zme={35:Kpe,42:Tg,45:[Ij,Tg],60:nme,61:Ij,95:Tg,96:qj,126:qj},Vme={38:Z9,92:X9},Wme={[-5]:vb,[-4]:vb,[-3]:vb,33:xme,38:Z9,42:sT,60:[_pe,cme],91:_me,92:[Fpe,X9],93:JQ,95:sT,96:Mpe},Ume={null:[sT,zme]},Hme={null:[42,95]},Yme={null:[]},Fme=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Hme,contentInitial:Ime,disable:Yme,document:Bme,flow:Zme,flowInitial:Xme,insideSpan:Ume,string:Vme,text:Wme},Symbol.toStringTag,{value:"Module"}));function Gme(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let a=[],o=[];const c={attempt:P(E),check:P(C),consume:Q,enter:k,exit:T,interrupt:P(C,{interrupt:!0})},u={code:null,containerState:{},defineSkip:x,events:[],now:y,parser:t,previous:null,sliceSerialize:m,sliceStream:v,write:d};let f=e.tokenize.call(u,c);return e.resolveAll&&s.push(e),u;function d(M){return a=fr(a,M),S(),a[a.length-1]!==null?[]:(L(e,0),u.events=c0(s,u.events,u),u.events)}function m(M,$){return Jme(v(M),$)}function v(M){return Kme(a,M)}function y(){const{_bufferIndex:M,_index:$,line:I,column:j,offset:D}=i;return{_bufferIndex:M,_index:$,line:I,column:j,offset:D}}function x(M){r[M.line]=M.column,N()}function S(){let M;for(;i._index<a.length;){const $=a[i._index];if(typeof $=="string")for(M=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===M&&i._bufferIndex<$.length;)_($.charCodeAt(i._bufferIndex));else _($)}}function _(M){f=f(M)}function Q(M){Le(M)?(i.line++,i.column=1,i.offset+=M===-3?2:1,N()):M!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=M}function k(M,$){const I=$||{};return I.type=M,I.start=y(),u.events.push(["enter",I,u]),o.push(I),I}function T(M){const $=o.pop();return $.end=y(),u.events.push(["exit",$,u]),$}function E(M,$){L(M,$.from)}function C(M,$){$.restore()}function P(M,$){return I;function I(j,D,R){let W,U,G,q;return Array.isArray(j)?F(j):"tokenize"in j?F([j]):V(j);function V(ee){return ie;function ie(le){const ae=le!==null&&ee[le],_e=le!==null&&ee.null,ke=[...Array.isArray(ae)?ae:ae?[ae]:[],...Array.isArray(_e)?_e:_e?[_e]:[]];return F(ke)(le)}}function F(ee){return W=ee,U=0,ee.length===0?R:z(ee[U])}function z(ee){return ie;function ie(le){return q=B(),G=ee,ee.partial||(u.currentConstruct=ee),ee.name&&u.parser.constructs.disable.null.includes(ee.name)?K():ee.tokenize.call($?Object.assign(Object.create(u),$):u,c,H,K)(le)}}function H(ee){return M(G,q),D}function K(ee){return q.restore(),++U<W.length?z(W[U]):R}}}function L(M,$){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&Ki(u.events,$,u.events.length-$,M.resolve(u.events.slice($),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function B(){const M=y(),$=u.previous,I=u.currentConstruct,j=u.events.length,D=Array.from(o);return{from:j,restore:R};function R(){i=M,u.previous=$,u.currentConstruct=I,u.events.length=j,o=D,N()}}function N(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function Kme(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let a;if(n===r)a=[t[n].slice(i,s)];else{if(a=t.slice(n,r),i>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(i):a.shift()}s>0&&a.push(t[r].slice(0,s))}return a}function Jme(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,i.push(a)}return i.join("")}function ege(t){const i={constructs:q9([Fme,...(t||{}).extensions||[]]),content:r(mpe),defined:[],document:r(Ope),flow:r(Mme),lazy:{},string:r(Dme),text:r(Lme)};return i;function r(s){return a;function a(o){return Gme(i,s,o)}}}function tge(t){for(;!V9(t););return t}const Xj=/[\0\t\n\r]/g;function nge(){let t=1,e="",n=!0,i;return r;function r(s,a,o){const c=[];let u,f,d,m,v;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(Xj.lastIndex=d,u=Xj.exec(s),m=u&&u.index!==void 0?u.index:s.length,v=s.charCodeAt(m),!u){e=s.slice(d);break}if(v===10&&d===m&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),d<m&&(c.push(s.slice(d,m)),t+=m-d),v){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:i=!0,t=1}d=m+1}return o&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const ige=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rge(t){return t.replace(ige,sge)}function sge(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return B9(n.slice(s?2:1),s?16:10)}return KQ(n)||t}const G9={}.hasOwnProperty;function age(t,e,n){return typeof e!="string"&&(n=e,e=void 0),oge(n)(tge(ege(n).document().write(nge()(t,e,!0))))}function oge(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Zt),autolinkProtocol:B,autolinkEmail:B,atxHeading:s(Ae),blockQuote:s(_e),characterEscape:B,characterReference:B,codeFenced:s(ke),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(ke,a),codeText:s(Ee,a),codeTextData:B,data:B,codeFlowValue:B,definition:s(ge),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s($e),hardBreakEscape:s(Ye),hardBreakTrailing:s(Ye),htmlFlow:s(De,a),htmlFlowData:B,htmlText:s(De,a),htmlTextData:B,image:s(nn),label:a,link:s(Zt),listItem:s(Vn),listItemValue:m,listOrdered:s(Zn,d),listUnordered:s(Zn),paragraph:s(kn),reference:z,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Ae),strong:s(jt),thematicBreak:s(Ai)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:ae,autolinkProtocol:le,blockQuote:c(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:K,characterReferenceMarkerNumeric:K,characterReferenceValue:ee,characterReference:ie,codeFenced:c(S),codeFencedFence:x,codeFencedFenceInfo:v,codeFencedFenceMeta:y,codeFlowValue:N,codeIndented:c(_),codeText:c(D),codeTextData:N,data:N,definition:c(),definitionDestinationString:T,definitionLabelString:Q,definitionTitleString:k,emphasis:c(),hardBreakEscape:c($),hardBreakTrailing:c($),htmlFlow:c(I),htmlFlowData:N,htmlText:c(j),htmlTextData:N,image:c(W),label:G,labelText:U,lineEnding:M,link:c(R),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:H,resourceDestinationString:q,resourceTitleString:V,resource:F,setextHeading:c(L),setextHeadingLineSequence:P,setextHeadingText:C,strong:c(),thematicBreak:c()}};K9(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(ue){let ve={type:"root",children:[]};const Me={stack:[ve],tokenStack:[],config:e,enter:o,exit:u,buffer:a,resume:f,data:n},Ve=[];let Je=-1;for(;++Je<ue.length;)if(ue[Je][1].type==="listOrdered"||ue[Je][1].type==="listUnordered")if(ue[Je][0]==="enter")Ve.push(Je);else{const $n=Ve.pop();Je=r(ue,$n,Je)}for(Je=-1;++Je<ue.length;){const $n=e[ue[Je][0]];G9.call($n,ue[Je][1].type)&&$n[ue[Je][1].type].call(Object.assign({sliceSerialize:ue[Je][2].sliceSerialize},Me),ue[Je][1])}if(Me.tokenStack.length>0){const $n=Me.tokenStack[Me.tokenStack.length-1];($n[1]||Zj).call(Me,void 0,$n[0])}for(ve.position={start:Ua(ue.length>0?ue[0][1].start:{line:1,column:1,offset:0}),end:Ua(ue.length>0?ue[ue.length-2][1].end:{line:1,column:1,offset:0})},Je=-1;++Je<e.transforms.length;)ve=e.transforms[Je](ve)||ve;return ve}function r(ue,ve,Me){let Ve=ve-1,Je=-1,$n=!1,hi,Et,Ot,Wn;for(;++Ve<=Me;){const vt=ue[Ve];switch(vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{vt[0]==="enter"?Je++:Je--,Wn=void 0;break}case"lineEndingBlank":{vt[0]==="enter"&&(hi&&!Wn&&!Je&&!Ot&&(Ot=Ve),Wn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Wn=void 0}if(!Je&&vt[0]==="enter"&&vt[1].type==="listItemPrefix"||Je===-1&&vt[0]==="exit"&&(vt[1].type==="listUnordered"||vt[1].type==="listOrdered")){if(hi){let Xr=Ve;for(Et=void 0;Xr--;){const Ri=ue[Xr];if(Ri[1].type==="lineEnding"||Ri[1].type==="lineEndingBlank"){if(Ri[0]==="exit")continue;Et&&(ue[Et][1].type="lineEndingBlank",$n=!0),Ri[1].type="lineEnding",Et=Xr}else if(!(Ri[1].type==="linePrefix"||Ri[1].type==="blockQuotePrefix"||Ri[1].type==="blockQuotePrefixWhitespace"||Ri[1].type==="blockQuoteMarker"||Ri[1].type==="listItemIndent"))break}Ot&&(!Et||Ot<Et)&&(hi._spread=!0),hi.end=Object.assign({},Et?ue[Et][1].start:vt[1].end),ue.splice(Et||Ve,0,["exit",hi,vt[2]]),Ve++,Me++}if(vt[1].type==="listItemPrefix"){const Xr={type:"listItem",_spread:!1,start:Object.assign({},vt[1].start),end:void 0};hi=Xr,ue.splice(Ve,0,["enter",Xr,vt[2]]),Ve++,Me++,Ot=void 0,Wn=!0}}}return ue[ve][1]._spread=$n,Me}function s(ue,ve){return Me;function Me(Ve){o.call(this,ue(Ve),Ve),ve&&ve.call(this,Ve)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(ue,ve,Me){this.stack[this.stack.length-1].children.push(ue),this.stack.push(ue),this.tokenStack.push([ve,Me||void 0]),ue.position={start:Ua(ve.start),end:void 0}}function c(ue){return ve;function ve(Me){ue&&ue.call(this,Me),u.call(this,Me)}}function u(ue,ve){const Me=this.stack.pop(),Ve=this.tokenStack.pop();if(Ve)Ve[0].type!==ue.type&&(ve?ve.call(this,ue,Ve[0]):(Ve[1]||Zj).call(this,ue,Ve[0]));else throw new Error("Cannot close `"+ue.type+"` ("+Of({start:ue.start,end:ue.end})+"): its not open");Me.position.end=Ua(ue.end)}function f(){return GQ(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(ue){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(ue),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=ue}function y(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=ue}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.value=ue.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.value=ue.replace(/(\r?\n|\r)$/g,"")}function Q(ue){const ve=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ve,Me.identifier=Mr(this.sliceSerialize(ue)).toLowerCase()}function k(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.title=ue}function T(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.url=ue}function E(ue){const ve=this.stack[this.stack.length-1];if(!ve.depth){const Me=this.sliceSerialize(ue).length;ve.depth=Me}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function P(ue){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(ue).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function B(ue){const Me=this.stack[this.stack.length-1].children;let Ve=Me[Me.length-1];(!Ve||Ve.type!=="text")&&(Ve=zt(),Ve.position={start:Ua(ue.start),end:void 0},Me.push(Ve)),this.stack.push(Ve)}function N(ue){const ve=this.stack.pop();ve.value+=this.sliceSerialize(ue),ve.position.end=Ua(ue.end)}function M(ue){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Me=ve.children[ve.children.length-1];Me.position.end=Ua(ue.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ve.type)&&(B.call(this,ue),N.call(this,ue))}function $(){this.data.atHardBreak=!0}function I(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.value=ue}function j(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.value=ue}function D(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.value=ue}function R(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=ve,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function W(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=ve,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function U(ue){const ve=this.sliceSerialize(ue),Me=this.stack[this.stack.length-2];Me.label=rge(ve),Me.identifier=Mr(ve).toLowerCase()}function G(){const ue=this.stack[this.stack.length-1],ve=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const Ve=ue.children;Me.children=Ve}else Me.alt=ve}function q(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.url=ue}function V(){const ue=this.resume(),ve=this.stack[this.stack.length-1];ve.title=ue}function F(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function H(ue){const ve=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ve,Me.identifier=Mr(this.sliceSerialize(ue)).toLowerCase(),this.data.referenceType="full"}function K(ue){this.data.characterReferenceType=ue.type}function ee(ue){const ve=this.sliceSerialize(ue),Me=this.data.characterReferenceType;let Ve;Me?(Ve=B9(ve,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ve=KQ(ve);const Je=this.stack[this.stack.length-1];Je.value+=Ve}function ie(ue){const ve=this.stack.pop();ve.position.end=Ua(ue.end)}function le(ue){N.call(this,ue);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(ue)}function ae(ue){N.call(this,ue);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(ue)}function _e(){return{type:"blockquote",children:[]}}function ke(){return{type:"code",lang:null,meta:null,value:""}}function Ee(){return{type:"inlineCode",value:""}}function ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $e(){return{type:"emphasis",children:[]}}function Ae(){return{type:"heading",depth:0,children:[]}}function Ye(){return{type:"break"}}function De(){return{type:"html",value:""}}function nn(){return{type:"image",title:null,url:"",alt:null}}function Zt(){return{type:"link",title:null,url:"",children:[]}}function Zn(ue){return{type:"list",ordered:ue.type==="listOrdered",start:null,spread:ue._spread,children:[]}}function Vn(ue){return{type:"listItem",spread:ue._spread,checked:null,children:[]}}function kn(){return{type:"paragraph",children:[]}}function jt(){return{type:"strong",children:[]}}function zt(){return{type:"text",value:""}}function Ai(){return{type:"thematicBreak"}}}function Ua(t){return{line:t.line,column:t.column,offset:t.offset}}function K9(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?K9(t,i):lge(t,i)}}function lge(t,e){let n;for(n in e)if(G9.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function Zj(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Of({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Of({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Of({start:e.start,end:e.end})+") is still open")}function cge(t){const e=this;e.parser=n;function n(i){return age(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function uge(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function hge(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function fge(t,e){const n=e.value?e.value+`
`:"",i={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function dge(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pge(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mge(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=wu(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let a,o=t.footnoteCounts.get(i);o===void 0?(o=0,t.footnoteOrder.push(i),a=t.footnoteOrder.length):a=s+1,o+=1,t.footnoteCounts.set(i,o);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,u),t.applyData(e,u)}function gge(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Oge(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function J9(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=i:r.push({type:"text",value:i}),r}function vge(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return J9(t,e);const r={src:wu(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function yge(t,e){const n={src:wu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function xge(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function bge(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return J9(t,e);const r={href:wu(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function _ge(t,e){const n={href:wu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function Sge(t,e,n){const i=t.all(e),r=n?wge(n):eZ(e),s={},a=[];if(typeof e.checked=="boolean"){const f=i[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},i.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const f=i[o];(r||o!==0||f.type!=="element"||f.tagName!=="p")&&a.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!r?a.push(...f.children):a.push(f)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,u),t.applyData(e,u)}function wge(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=eZ(n[i])}return e}function eZ(t){const e=t.spread;return e??t.children.length>1}function kge(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const a=i[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Cge(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Tge(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Qge(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ege(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},o=UQ(e.children[1]),c=$9(e.children[e.children.length-1]);o&&c&&(a.position={start:o,end:c}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function Pge(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:e.children.length;let c=-1;const u=[];for(;++c<o;){const d=e.children[c],m={},v=a?a[c]:void 0;v&&(m.align=v);let y={type:"element",tagName:s,properties:m,children:[]};d&&(y.children=t.all(d),t.patch(d,y),y=t.applyData(d,y)),u.push(y)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,f),t.applyData(e,f)}function Age(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Vj=9,Wj=32;function Rge(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(Uj(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(Uj(e.slice(r),r>0,!1)),s.join("")}function Uj(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===Vj||s===Wj;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===Vj||s===Wj;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function $ge(t,e){const n={type:"text",value:Rge(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Nge(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Mge={blockquote:uge,break:hge,code:fge,delete:dge,emphasis:pge,footnoteReference:mge,heading:gge,html:Oge,imageReference:vge,image:yge,inlineCode:xge,linkReference:bge,link:_ge,listItem:Sge,list:kge,paragraph:Cge,root:Tge,strong:Qge,table:Ege,tableCell:Age,tableRow:Pge,text:$ge,thematicBreak:Nge,toml:qm,yaml:qm,definition:qm,footnoteDefinition:qm};function qm(){}const tZ=-1,u0=0,yf=1,wO=2,eE=3,tE=4,nE=5,iE=6,nZ=7,iZ=8,Hj=typeof self=="object"?self:globalThis,jge=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,a]=e[r];switch(s){case u0:case tZ:return n(a,r);case yf:{const o=n([],r);for(const c of a)o.push(i(c));return o}case wO:{const o=n({},r);for(const[c,u]of a)o[i(c)]=i(u);return o}case eE:return n(new Date(a),r);case tE:{const{source:o,flags:c}=a;return n(new RegExp(o,c),r)}case nE:{const o=n(new Map,r);for(const[c,u]of a)o.set(i(c),i(u));return o}case iE:{const o=n(new Set,r);for(const c of a)o.add(i(c));return o}case nZ:{const{name:o,message:c}=a;return n(new Hj[o](c),r)}case iZ:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new Hj[s](a),r)};return i},Yj=t=>jge(new Map,t)(0),Sc="",{toString:zge}={},{keys:Dge}=Object,Ih=t=>{const e=typeof t;if(e!=="object"||!t)return[u0,e];const n=zge.call(t).slice(8,-1);switch(n){case"Array":return[yf,Sc];case"Object":return[wO,Sc];case"Date":return[eE,Sc];case"RegExp":return[tE,Sc];case"Map":return[nE,Sc];case"Set":return[iE,Sc];case"DataView":return[yf,n]}return n.includes("Array")?[yf,n]:n.includes("Error")?[nZ,n]:[wO,n]},Bm=([t,e])=>t===u0&&(e==="function"||e==="symbol"),Lge=(t,e,n,i)=>{const r=(a,o)=>{const c=i.push(a)-1;return n.set(o,c),c},s=a=>{if(n.has(a))return n.get(a);let[o,c]=Ih(a);switch(o){case u0:{let f=a;switch(c){case"bigint":o=iZ,f=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return r([tZ],a)}return r([o,f],a)}case yf:{if(c){let m=a;return c==="DataView"?m=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(a)),r([c,[...m]],a)}const f=[],d=r([o,f],a);for(const m of a)f.push(s(m));return d}case wO:{if(c)switch(c){case"BigInt":return r([c,a.toString()],a);case"Boolean":case"Number":case"String":return r([c,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const f=[],d=r([o,f],a);for(const m of Dge(a))(t||!Bm(Ih(a[m])))&&f.push([s(m),s(a[m])]);return d}case eE:return r([o,a.toISOString()],a);case tE:{const{source:f,flags:d}=a;return r([o,{source:f,flags:d}],a)}case nE:{const f=[],d=r([o,f],a);for(const[m,v]of a)(t||!(Bm(Ih(m))||Bm(Ih(v))))&&f.push([s(m),s(v)]);return d}case iE:{const f=[],d=r([o,f],a);for(const m of a)(t||!Bm(Ih(m)))&&f.push(s(m));return d}}const{message:u}=a;return r([o,{name:c,message:u}],a)};return s},Fj=(t,{json:e,lossy:n}={})=>{const i=[];return Lge(!(e||n),!!e,new Map,i)(t),i},kO=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Yj(Fj(t,e)):structuredClone(t):(t,e)=>Yj(Fj(t,e));function qge(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Bge(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Ige(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||qge,i=t.options.footnoteBackLabel||Bge,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[c]);if(!u)continue;const f=t.all(u),d=String(u.identifier).toUpperCase(),m=wu(d.toLowerCase());let v=0;const y=[],x=t.footnoteCounts.get(d);for(;x!==void 0&&++v<=x;){y.length>0&&y.push({type:"text",value:" "});let Q=typeof n=="string"?n:n(c,v);typeof Q=="string"&&(Q={type:"text",value:Q}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,v),className:["data-footnote-backref"]},children:Array.isArray(Q)?Q:[Q]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const Q=S.children[S.children.length-1];Q&&Q.type==="text"?Q.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...y)}else f.push(...y);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(f,!0)};t.patch(u,_),o.push(_)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...kO(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const h0=(function(t){if(t==null)return Wge;if(typeof t=="function")return f0(t);if(typeof t=="object")return Array.isArray(t)?Xge(t):Zge(t);if(typeof t=="string")return Vge(t);throw new Error("Expected function, string, or object as test")});function Xge(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=h0(t[n]);return f0(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function Zge(t){const e=t;return f0(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function Vge(t){return f0(e);function e(n){return n&&n.type===t}}function f0(t){return e;function e(n,i,r){return!!(Uge(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function Wge(){return!0}function Uge(t){return t!==null&&typeof t=="object"&&"type"in t}const rZ=[],Hge=!0,aT=!1,Yge="skip";function sZ(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=h0(r),a=i?-1:1;o(t,void 0,[])();function o(c,u,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const v=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(v?"<"+v+">":""))+")"})}return m;function m(){let v=rZ,y,x,S;if((!e||s(c,u,f[f.length-1]||void 0))&&(v=Fge(n(c,f)),v[0]===aT))return v;if("children"in c&&c.children){const _=c;if(_.children&&v[0]!==Yge)for(x=(i?_.children.length:-1)+a,S=f.concat(_);x>-1&&x<_.children.length;){const Q=_.children[x];if(y=o(Q,x,S)(),y[0]===aT)return y;x=typeof y[1]=="number"?y[1]:x+a}}return v}}}function Fge(t){return Array.isArray(t)?t:typeof t=="number"?[Hge,t]:t==null?rZ:[t]}function rE(t,e,n,i){let r,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,r=n):(s=e,a=n,r=i),sZ(t,s,o,r);function o(c,u){const f=u[u.length-1],d=f?f.children.indexOf(c):void 0;return a(c,d,f)}}const oT={}.hasOwnProperty,Gge={};function Kge(t,e){const n=e||Gge,i=new Map,r=new Map,s=new Map,a={...Mge,...n.handlers},o={all:u,applyData:eOe,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:Jge,wrap:nOe};return rE(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?i:r,m=String(f.identifier).toUpperCase();d.has(m)||d.set(m,f)}}),o;function c(f,d){const m=f.type,v=o.handlers[m];if(oT.call(o.handlers,m)&&v)return v(o,f,d);if(o.options.passThrough&&o.options.passThrough.includes(m)){if("children"in f){const{children:x,...S}=f,_=kO(S);return _.children=o.all(f),_}return kO(f)}return(o.options.unknownHandler||tOe)(o,f,d)}function u(f){const d=[];if("children"in f){const m=f.children;let v=-1;for(;++v<m.length;){const y=o.one(m[v],f);if(y){if(v&&m[v-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=Gj(y.value)),!Array.isArray(y)&&y.type==="element")){const x=y.children[0];x&&x.type==="text"&&(x.value=Gj(x.value))}Array.isArray(y)?d.push(...y):d.push(y)}}}return d}}function Jge(t,e){t.position&&(e.position=Bde(t))}function eOe(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,kO(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function tOe(t,e){const n=e.data||{},i="value"in e&&!(oT.call(n,"hProperties")||oT.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function nOe(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Gj(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Kj(t,e){const n=Kge(t,e),i=n.one(t,void 0),r=Ige(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function iOe(t,e){return t&&"run"in t?async function(n,i){const r=Kj(n,{file:i,...e});await t.run(r,i)}:function(n,i){return Kj(n,{file:i,...t||e})}}function Jj(t){if(t)throw t}var yb,e3;function rOe(){if(e3)return yb;e3=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var f=t.call(u,"constructor"),d=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!d)return!1;var m;for(m in u);return typeof m>"u"||t.call(u,m)},a=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},o=function(u,f){if(f==="__proto__")if(t.call(u,f)){if(i)return i(u,f).value}else return;return u[f]};return yb=function c(){var u,f,d,m,v,y,x=arguments[0],S=1,_=arguments.length,Q=!1;for(typeof x=="boolean"&&(Q=x,x=arguments[1]||{},S=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});S<_;++S)if(u=arguments[S],u!=null)for(f in u)d=o(x,f),m=o(u,f),x!==m&&(Q&&m&&(s(m)||(v=r(m)))?(v?(v=!1,y=d&&r(d)?d:[]):y=d&&s(d)?d:{},a(x,{name:f,newValue:c(Q,y,m)})):typeof m<"u"&&a(x,{name:f,newValue:m}));return x},yb}var sOe=rOe();const xb=sd(sOe);function lT(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function aOe(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...r);function o(c,...u){const f=t[++s];let d=-1;if(c){a(c);return}for(;++d<r.length;)(u[d]===null||u[d]===void 0)&&(u[d]=r[d]);r=u,f?oOe(f,o)(...u):a(null,...u)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function oOe(t,e){let n;return i;function i(...a){const o=t.length>a.length;let c;o&&a.push(r);try{c=t.apply(this,a)}catch(u){const f=u;if(o&&n)throw f;return r(f)}o||(c&&c.then&&typeof c.then=="function"?c.then(s,r):c instanceof Error?r(c):s(c))}function r(a,...o){n||(n=!0,e(a,...o))}function s(a){r(null,a)}}const ns={basename:lOe,dirname:cOe,extname:uOe,join:hOe,sep:"/"};function lOe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Td(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let a=-1,o=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else a<0&&(s=!0,a=r+1),o>-1&&(t.codePointAt(r)===e.codePointAt(o--)?o<0&&(i=r):(o=-1,i=a));return n===i?i=a:i<0&&(i=t.length),t.slice(n,i)}function cOe(t){if(Td(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function uOe(t){Td(t);let e=t.length,n=-1,i=0,r=-1,s=0,a;for(;e--;){const o=t.codePointAt(e);if(o===47){if(a){i=e+1;break}continue}n<0&&(a=!0,n=e+1),o===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function hOe(...t){let e=-1,n;for(;++e<t.length;)Td(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":fOe(n)}function fOe(t){Td(t);const e=t.codePointAt(0)===47;let n=dOe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function dOe(t,e){let n="",i=0,r=-1,s=0,a=-1,o,c;for(;++a<=t.length;){if(a<t.length)o=t.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(n.length>0){n="",i=0,r=a,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,a):n=t.slice(r+1,a),i=a-r-1;r=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function Td(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const pOe={cwd:mOe};function mOe(){return"/"}function cT(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function gOe(t){if(typeof t=="string")t=new URL(t);else if(!cT(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return OOe(t)}function OOe(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const bb=["history","path","basename","stem","extname","dirname"];class aZ{constructor(e){let n;e?cT(e)?n={path:e}:typeof e=="string"||vOe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":pOe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<bb.length;){const s=bb[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)bb.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?ns.basename(this.path):void 0}set basename(e){Sb(e,"basename"),_b(e,"basename"),this.path=ns.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ns.dirname(this.path):void 0}set dirname(e){t3(this.basename,"dirname"),this.path=ns.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ns.extname(this.path):void 0}set extname(e){if(_b(e,"extname"),t3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ns.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){cT(e)&&(e=gOe(e)),Sb(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ns.basename(this.path,this.extname):void 0}set stem(e){Sb(e,"stem"),_b(e,"stem"),this.path=ns.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new ni(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function _b(t,e){if(t&&t.includes(ns.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ns.sep+"`")}function Sb(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function t3(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function vOe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yOe=(function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s}),xOe={}.hasOwnProperty;class sE extends yOe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aOe()}copy(){const e=new sE;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(xb(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Cb("data",this.frozen),this.namespace[e]=n,this):xOe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Cb("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Im(e),i=this.parser||this.Parser;return wb("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),wb("process",this.parser||this.Parser),kb("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,a){const o=Im(e),c=i.parse(o);i.run(c,o,function(f,d,m){if(f||!d||!m)return u(f);const v=d,y=i.stringify(v,m);SOe(y)?m.value=y:m.result=y,u(f,m)});function u(f,d){f||!d?a(f):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,i;return this.freeze(),wb("processSync",this.parser||this.Parser),kb("processSync",this.compiler||this.Compiler),this.process(e,r),i3("processSync","process",n),i;function r(s,a){n=!0,Jj(s),i=a}}run(e,n,i){n3(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(a,o){const c=Im(n);r.run(e,c,u);function u(f,d,m){const v=d||e;f?o(f):a?a(v):i(void 0,v,m)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),i3("runSync","run",i),r;function s(a,o){Jj(a),r=o,i=!0}}stringify(e,n){this.freeze();const i=Im(n),r=this.compiler||this.Compiler;return kb("stringify",r),n3(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(Cb("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?o(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...d]=u;c(f,d)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(r.settings=xb(!0,r.settings,u.settings))}function o(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const d=u[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let d=-1,m=-1;for(;++d<i.length;)if(i[d][0]===u){m=d;break}if(m===-1)i.push([u,...f]);else if(f.length>0){let[v,...y]=f;const x=i[m][1];lT(x)&&lT(v)&&(v=xb(!0,x,v)),i[m]=[u,v,...y]}}}}const bOe=new sE().freeze();function wb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function kb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Cb(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function n3(t){if(!lT(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function i3(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Im(t){return _Oe(t)?t:new aZ(t)}function _Oe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function SOe(t){return typeof t=="string"||wOe(t)}function wOe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kOe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",r3=[],s3={allowDangerousHtml:!0},COe=/^(https?|ircs?|mailto|xmpp)$/i,TOe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function QOe(t){const e=EOe(t),n=POe(t);return AOe(e.runSync(e.parse(n),n),t)}function EOe(t){const e=t.rehypePlugins||r3,n=t.remarkPlugins||r3,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...s3}:s3;return bOe().use(cge).use(n).use(iOe,i).use(e)}function POe(t){const e=t.children||"",n=new aZ;return typeof e=="string"&&(n.value=e),n}function AOe(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,a=e.skipHtml,o=e.unwrapDisallowed,c=e.urlTransform||ROe;for(const f of TOe)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+kOe+f.id,void 0);return rE(t,u),Wde(t,{Fragment:g.Fragment,components:r,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function u(f,d,m){if(f.type==="raw"&&m&&typeof d=="number")return a?m.children.splice(d,1):m.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let v;for(v in gb)if(Object.hasOwn(gb,v)&&Object.hasOwn(f.properties,v)){const y=f.properties[v],x=gb[v];(x===null||x.includes(f.tagName))&&(f.properties[v]=c(String(y||""),v,f))}}if(f.type==="element"){let v=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!v&&i&&typeof d=="number"&&(v=!i(f,d,m)),v&&m&&typeof d=="number")return o&&f.children?m.children.splice(d,1,...f.children):m.children.splice(d,1),d}}}function ROe(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||COe.test(t.slice(0,e))?t:""}function a3(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function $Oe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function NOe(t,e,n){const r=h0((n||{}).ignore||[]),s=MOe(e);let a=-1;for(;++a<s.length;)sZ(t,"text",o);function o(u,f){let d=-1,m;for(;++d<f.length;){const v=f[d],y=m?m.children:void 0;if(r(v,y?y.indexOf(v):void 0,m))return;m=v}if(m)return c(u,f)}function c(u,f){const d=f[f.length-1],m=s[a][0],v=s[a][1];let y=0;const S=d.children.indexOf(u);let _=!1,Q=[];m.lastIndex=0;let k=m.exec(u.value);for(;k;){const T=k.index,E={index:k.index,input:k.input,stack:[...f,u]};let C=v(...k,E);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?m.lastIndex=T+1:(y!==T&&Q.push({type:"text",value:u.value.slice(y,T)}),Array.isArray(C)?Q.push(...C):C&&Q.push(C),y=T+k[0].length,_=!0),!m.global)break;k=m.exec(u.value)}return _?(y<u.value.length&&Q.push({type:"text",value:u.value.slice(y)}),d.children.splice(S,1,...Q)):Q=[u],S+Q.length}}function MOe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([jOe(r[0]),zOe(r[1])])}return e}function jOe(t){return typeof t=="string"?new RegExp($Oe(t),"g"):t}function zOe(t){return typeof t=="function"?t:function(){return t}}const Tb="phrasing",Qb=["autolink","link","image","label"];function DOe(){return{transforms:[VOe],enter:{literalAutolink:qOe,literalAutolinkEmail:Eb,literalAutolinkHttp:Eb,literalAutolinkWww:Eb},exit:{literalAutolink:ZOe,literalAutolinkEmail:XOe,literalAutolinkHttp:BOe,literalAutolinkWww:IOe}}}function LOe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Tb,notInConstruct:Qb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Tb,notInConstruct:Qb},{character:":",before:"[ps]",after:"\\/",inConstruct:Tb,notInConstruct:Qb}]}}function qOe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Eb(t){this.config.enter.autolinkProtocol.call(this,t)}function BOe(t){this.config.exit.autolinkProtocol.call(this,t)}function IOe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function XOe(t){this.config.exit.autolinkEmail.call(this,t)}function ZOe(t){this.exit(t)}function VOe(t){NOe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,WOe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),UOe]],{ignore:["link","linkReference"]})}function WOe(t,e,n,i,r){let s="";if(!oZ(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!HOe(n)))return!1;const a=YOe(n+i);if(!a[0])return!1;const o={type:"link",title:null,url:s+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function UOe(t,e,n,i){return!oZ(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function HOe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function YOe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=a3(t,"(");let s=a3(t,")");for(;i!==-1&&r>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function oZ(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||bl(n)||l0(n))&&(!e||n!==47)}lZ.peek=r0e;function FOe(){this.buffer()}function GOe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function KOe(){this.buffer()}function JOe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function e0e(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function t0e(t){this.exit(t)}function n0e(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function i0e(t){this.exit(t)}function r0e(){return"["}function lZ(t,e,n,i){const r=n.createTracker(i);let s=r.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),o(),a(),s+=r.move("]"),s}function s0e(){return{enter:{gfmFootnoteCallString:FOe,gfmFootnoteCall:GOe,gfmFootnoteDefinitionLabelString:KOe,gfmFootnoteDefinition:JOe},exit:{gfmFootnoteCallString:e0e,gfmFootnoteCall:t0e,gfmFootnoteDefinitionLabelString:n0e,gfmFootnoteDefinition:i0e}}}function a0e(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:lZ},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,a){const o=s.createTracker(a);let c=o.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=o.move(s.safe(s.associationId(i),{before:c,after:"]"})),f(),c+=o.move("]:"),i.children&&i.children.length>0&&(o.shift(4),c+=o.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,o.current()),e?cZ:o0e))),u(),c}}function o0e(t,e,n){return e===0?t:cZ(t,e,n)}function cZ(t,e,n){return(n?"":"    ")+t}const l0e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];uZ.peek=d0e;function c0e(){return{canContainEols:["delete"],enter:{strikethrough:h0e},exit:{strikethrough:f0e}}}function u0e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:l0e}],handlers:{delete:uZ}}}function h0e(t){this.enter({type:"delete",children:[]},t)}function f0e(t){this.exit(t)}function uZ(t,e,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(t,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),s(),a}function d0e(){return"~"}function p0e(t){return t.length}function m0e(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||p0e,s=[],a=[],o=[],c=[];let u=0,f=-1;for(;++f<t.length;){const x=[],S=[];let _=-1;for(t[f].length>u&&(u=t[f].length);++_<t[f].length;){const Q=g0e(t[f][_]);if(n.alignDelimiters!==!1){const k=r(Q);S[_]=k,(c[_]===void 0||k>c[_])&&(c[_]=k)}x.push(Q)}a[f]=x,o[f]=S}let d=-1;if(typeof i=="object"&&"length"in i)for(;++d<u;)s[d]=o3(i[d]);else{const x=o3(i);for(;++d<u;)s[d]=x}d=-1;const m=[],v=[];for(;++d<u;){const x=s[d];let S="",_="";x===99?(S=":",_=":"):x===108?S=":":x===114&&(_=":");let Q=n.alignDelimiters===!1?1:Math.max(1,c[d]-S.length-_.length);const k=S+"-".repeat(Q)+_;n.alignDelimiters!==!1&&(Q=S.length+Q+_.length,Q>c[d]&&(c[d]=Q),v[d]=Q),m[d]=k}a.splice(1,0,m),o.splice(1,0,v),f=-1;const y=[];for(;++f<a.length;){const x=a[f],S=o[f];d=-1;const _=[];for(;++d<u;){const Q=x[d]||"";let k="",T="";if(n.alignDelimiters!==!1){const E=c[d]-(S[d]||0),C=s[d];C===114?k=" ".repeat(E):C===99?E%2?(k=" ".repeat(E/2+.5),T=" ".repeat(E/2-.5)):(k=" ".repeat(E/2),T=k):T=" ".repeat(E)}n.delimiterStart!==!1&&!d&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&Q==="")&&(n.delimiterStart!==!1||d)&&_.push(" "),n.alignDelimiters!==!1&&_.push(k),_.push(Q),n.alignDelimiters!==!1&&_.push(T),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&_.push("|")}y.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return y.join(`
`)}function g0e(t){return t==null?"":String(t)}function o3(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function O0e(t,e,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(t,s.current()),v0e);return r(),a}function v0e(t,e,n){return">"+(n?"":" ")+t}function y0e(t,e){return l3(t,e.inConstruct,!0)&&!l3(t,e.notInConstruct,!1)}function l3(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function c3(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&y0e(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function x0e(t,e){const n=String(t);let i=n.indexOf(e),r=i,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>a&&(a=s):s=1,r=i+e.length,i=n.indexOf(e,r);return a}function b0e(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function _0e(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function S0e(t,e,n,i){const r=_0e(n),s=t.value||"",a=r==="`"?"GraveAccent":"Tilde";if(b0e(t,n)){const d=n.enter("codeIndented"),m=n.indentLines(s,w0e);return d(),m}const o=n.createTracker(i),c=r.repeat(Math.max(x0e(s,r)+1,3)),u=n.enter("codeFenced");let f=o.move(c);if(t.lang){const d=n.enter(`codeFencedLang${a}`);f+=o.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...o.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${a}`);f+=o.move(" "),f+=o.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...o.current()})),d()}return f+=o.move(`
`),s&&(f+=o.move(s+`
`)),f+=o.move(c),u(),f}function w0e(t,e,n){return(n?"":"    ")+t}function aE(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function k0e(t,e,n,i){const r=aE(n),s=r==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const c=n.createTracker(i);let u=c.move("[");return u+=c.move(n.safe(n.associationId(t),{before:u,after:"]",...c.current()})),u+=c.move("]: "),o(),!t.url||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(o=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...c.current()}))),o(),t.title&&(o=n.enter(`title${s}`),u+=c.move(" "+r),u+=c.move(n.safe(t.title,{before:u,after:r,...c.current()})),u+=c.move(r),o()),a(),u}function C0e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Hf(t){return"&#x"+t.toString(16).toUpperCase()+";"}function CO(t,e,n){const i=au(t),r=au(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}hZ.peek=T0e;function hZ(t,e,n,i){const r=C0e(n),s=n.enter("emphasis"),a=n.createTracker(i),o=a.move(r);let c=a.move(n.containerPhrasing(t,{after:r,before:o,...a.current()}));const u=c.charCodeAt(0),f=CO(i.before.charCodeAt(i.before.length-1),u,r);f.inside&&(c=Hf(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=CO(i.after.charCodeAt(0),d,r);m.inside&&(c=c.slice(0,-1)+Hf(d));const v=a.move(r);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},o+c+v}function T0e(t,e,n){return n.options.emphasis||"*"}function Q0e(t,e){let n=!1;return rE(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,aT}),!!((!t.depth||t.depth<3)&&GQ(t)&&(e.options.setext||n))}function E0e(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(Q0e(t,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),f(),m+`
`+(r===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const a="#".repeat(r),o=n.enter("headingAtx"),c=n.enter("phrasing");s.move(a+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Hf(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),o(),u}fZ.peek=P0e;function fZ(t){return t.value||""}function P0e(){return"<"}dZ.peek=A0e;function dZ(t,e,n,i){const r=aE(n),s=r==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const c=n.createTracker(i);let u=c.move("![");return u+=c.move(n.safe(t.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),o(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(o=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(t.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(o=n.enter("destinationRaw"),u+=c.move(n.safe(t.url,{before:u,after:t.title?" ":")",...c.current()}))),o(),t.title&&(o=n.enter(`title${s}`),u+=c.move(" "+r),u+=c.move(n.safe(t.title,{before:u,after:r,...c.current()})),u+=c.move(r),o()),u+=c.move(")"),a(),u}function A0e(){return"!"}pZ.peek=R0e;function pZ(t,e,n,i){const r=t.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(i);let c=o.move("![");const u=n.safe(t.alt,{before:c,after:"]",...o.current()});c+=o.move(u+"]["),a();const f=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...o.current()});return a(),n.stack=f,s(),r==="full"||!u||u!==d?c+=o.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function R0e(){return"!"}mZ.peek=$0e;function mZ(t,e,n){let i=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let c;if(a.atBreak)for(;c=o.exec(i);){let u=c.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(c.index+1)}}return r+i+r}function $0e(){return"`"}function gZ(t,e){const n=GQ(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}OZ.peek=N0e;function OZ(t,e,n,i){const r=aE(n),s=r==='"'?"Quote":"Apostrophe",a=n.createTracker(i);let o,c;if(gZ(t,n)){const f=n.stack;n.stack=[],o=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(t,{before:d,after:">",...a.current()})),d+=a.move(">"),o(),n.stack=f,d}o=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(t,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":")",...a.current()}))),c(),t.title&&(c=n.enter(`title${s}`),u+=a.move(" "+r),u+=a.move(n.safe(t.title,{before:u,after:r,...a.current()})),u+=a.move(r),c()),u+=a.move(")"),o(),u}function N0e(t,e,n){return gZ(t,n)?"<":"["}vZ.peek=M0e;function vZ(t,e,n,i){const r=t.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(i);let c=o.move("[");const u=n.containerPhrasing(t,{before:c,after:"]",...o.current()});c+=o.move(u+"]["),a();const f=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...o.current()});return a(),n.stack=f,s(),r==="full"||!u||u!==d?c+=o.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function M0e(){return"["}function oE(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function j0e(t){const e=oE(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function z0e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function yZ(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function D0e(t,e,n,i){const r=n.enter("list"),s=n.bulletCurrent;let a=t.ordered?z0e(n):oE(n);const o=t.ordered?a==="."?")":".":j0e(n);let c=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),yZ(n)===a&&f){let d=-1;for(;++d<t.children.length;){const m=t.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(t,i);return n.bulletLastUsed=a,n.bulletCurrent=s,r(),u}function L0e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function q0e(t,e,n,i){const r=L0e(n);let s=n.bulletCurrent||oE(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(i);o.move(s+" ".repeat(a-s.length)),o.shift(a);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,o.current()),f);return c(),u;function f(d,m,v){return m?(v?"":" ".repeat(a))+d:(v?s:s+" ".repeat(a-s.length))+d}}function B0e(t,e,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(t,i);return s(),r(),a}const I0e=h0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function X0e(t,e,n,i){return(t.children.some(function(a){return I0e(a)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function Z0e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}xZ.peek=V0e;function xZ(t,e,n,i){const r=Z0e(n),s=n.enter("strong"),a=n.createTracker(i),o=a.move(r+r);let c=a.move(n.containerPhrasing(t,{after:r,before:o,...a.current()}));const u=c.charCodeAt(0),f=CO(i.before.charCodeAt(i.before.length-1),u,r);f.inside&&(c=Hf(u)+c.slice(1));const d=c.charCodeAt(c.length-1),m=CO(i.after.charCodeAt(0),d,r);m.inside&&(c=c.slice(0,-1)+Hf(d));const v=a.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},o+c+v}function V0e(t,e,n){return n.options.strong||"*"}function W0e(t,e,n,i){return n.safe(t.value,i)}function U0e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function H0e(t,e,n){const i=(yZ(n)+(n.options.ruleSpaces?" ":"")).repeat(U0e(n));return n.options.ruleSpaces?i.slice(0,-1):i}const bZ={blockquote:O0e,break:c3,code:S0e,definition:k0e,emphasis:hZ,hardBreak:c3,heading:E0e,html:fZ,image:dZ,imageReference:pZ,inlineCode:mZ,link:OZ,linkReference:vZ,list:D0e,listItem:q0e,paragraph:B0e,root:X0e,strong:xZ,text:W0e,thematicBreak:H0e};function Y0e(){return{enter:{table:F0e,tableData:u3,tableHeader:u3,tableRow:K0e},exit:{codeText:J0e,table:G0e,tableData:Pb,tableHeader:Pb,tableRow:Pb}}}function F0e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function G0e(t){this.exit(t),this.data.inTable=void 0}function K0e(t){this.enter({type:"tableRow",children:[]},t)}function Pb(t){this.exit(t)}function u3(t){this.enter({type:"tableCell",children:[]},t)}function J0e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,eve));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function eve(t,e){return e==="|"?e:t}function tve(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:a,tableCell:c,tableRow:o}};function a(v,y,x,S){return u(f(v,x,S),v.align)}function o(v,y,x,S){const _=d(v,x,S),Q=u([_]);return Q.slice(0,Q.indexOf(`
`))}function c(v,y,x,S){const _=x.enter("tableCell"),Q=x.enter("phrasing"),k=x.containerPhrasing(v,{...S,before:s,after:s});return Q(),_(),k}function u(v,y){return m0e(v,{align:y,alignDelimiters:i,padding:n,stringLength:r})}function f(v,y,x){const S=v.children;let _=-1;const Q=[],k=y.enter("table");for(;++_<S.length;)Q[_]=d(S[_],y,x);return k(),Q}function d(v,y,x){const S=v.children;let _=-1;const Q=[],k=y.enter("tableRow");for(;++_<S.length;)Q[_]=c(S[_],v,y,x);return k(),Q}function m(v,y,x){let S=bZ.inlineCode(v,y,x);return x.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function nve(){return{exit:{taskListCheckValueChecked:h3,taskListCheckValueUnchecked:h3,paragraph:rve}}}function ive(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:sve}}}function h3(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function rve(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,a;for(;++s<r.length;){const o=r[s];if(o.type==="paragraph"){a=o;break}}a===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function sve(t,e,n,i){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",o=n.createTracker(i);s&&o.move(a);let c=bZ.listItem(t,e,n,{...i,...o.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+a}}function ave(){return[DOe(),s0e(),c0e(),Y0e(),nve()]}function ove(t){return{extensions:[LOe(),a0e(t),u0e(),tve(t),ive()]}}const lve={tokenize:pve,partial:!0},_Z={tokenize:mve,partial:!0},SZ={tokenize:gve,partial:!0},wZ={tokenize:Ove,partial:!0},cve={tokenize:vve,partial:!0},kZ={name:"wwwAutolink",tokenize:fve,previous:TZ},CZ={name:"protocolAutolink",tokenize:dve,previous:QZ},ha={name:"emailAutolink",tokenize:hve,previous:EZ},vs={};function uve(){return{text:vs}}let Ho=48;for(;Ho<123;)vs[Ho]=ha,Ho++,Ho===58?Ho=65:Ho===91&&(Ho=97);vs[43]=ha;vs[45]=ha;vs[46]=ha;vs[95]=ha;vs[72]=[ha,CZ];vs[104]=[ha,CZ];vs[87]=[ha,kZ];vs[119]=[ha,kZ];function hve(t,e,n){const i=this;let r,s;return a;function a(d){return!uT(d)||!EZ.call(i,i.previous)||lE(i.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),o(d))}function o(d){return uT(d)?(t.consume(d),o):d===64?(t.consume(d),c):n(d)}function c(d){return d===46?t.check(cve,f,u)(d):d===45||d===95||Kn(d)?(s=!0,t.consume(d),c):f(d)}function u(d){return t.consume(d),r=!0,c}function f(d){return s&&r&&ai(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function fve(t,e,n){const i=this;return r;function r(a){return a!==87&&a!==119||!TZ.call(i,i.previous)||lE(i.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(lve,t.attempt(_Z,t.attempt(SZ,s),n),n)(a))}function s(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function dve(t,e,n){const i=this;let r="",s=!1;return a;function a(d){return(d===72||d===104)&&QZ.call(i,i.previous)&&!lE(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(d),t.consume(d),o):n(d)}function o(d){if(ai(d)&&r.length<5)return r+=String.fromCodePoint(d),t.consume(d),o;if(d===58){const m=r.toLowerCase();if(m==="http"||m==="https")return t.consume(d),c}return n(d)}function c(d){return d===47?(t.consume(d),s?u:(s=!0,c)):n(d)}function u(d){return d===null||SO(d)||Qt(d)||bl(d)||l0(d)?n(d):t.attempt(_Z,t.attempt(SZ,f),n)(d)}function f(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function pve(t,e,n){let i=0;return r;function r(a){return(a===87||a===119)&&i<3?(i++,t.consume(a),r):a===46&&i===3?(t.consume(a),s):n(a)}function s(a){return a===null?n(a):e(a)}}function mve(t,e,n){let i,r,s;return a;function a(u){return u===46||u===95?t.check(wZ,c,o)(u):u===null||Qt(u)||bl(u)||u!==45&&l0(u)?c(u):(s=!0,t.consume(u),a)}function o(u){return u===95?i=!0:(r=i,i=void 0),t.consume(u),a}function c(u){return r||i||!s?n(u):e(u)}}function gve(t,e){let n=0,i=0;return r;function r(a){return a===40?(n++,t.consume(a),r):a===41&&i<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(wZ,e,s)(a):a===null||Qt(a)||bl(a)?e(a):(t.consume(a),r)}function s(a){return a===41&&i++,t.consume(a),r}}function Ove(t,e,n){return i;function i(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(t.consume(o),i):o===38?(t.consume(o),s):o===93?(t.consume(o),r):o===60||o===null||Qt(o)||bl(o)?e(o):n(o)}function r(o){return o===null||o===40||o===91||Qt(o)||bl(o)?e(o):i(o)}function s(o){return ai(o)?a(o):n(o)}function a(o){return o===59?(t.consume(o),i):ai(o)?(t.consume(o),a):n(o)}}function vve(t,e,n){return i;function i(s){return t.consume(s),r}function r(s){return Kn(s)?n(s):e(s)}}function TZ(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Qt(t)}function QZ(t){return!ai(t)}function EZ(t){return!(t===47||uT(t))}function uT(t){return t===43||t===45||t===46||t===95||Kn(t)}function lE(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const yve={tokenize:Tve,partial:!0};function xve(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:wve,continuation:{tokenize:kve},exit:Cve}},text:{91:{name:"gfmFootnoteCall",tokenize:Sve},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:bve,resolveTo:_ve}}}}function bve(t,e,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a;for(;r--;){const c=i.events[r][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return o;function o(c){if(!a||!a._balanced)return n(c);const u=Mr(i.sliceSerialize({start:a.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function _ve(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...o),t}function Sve(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,a;return o;function o(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!a||d===null||d===91||Qt(d))return n(d);if(d===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return r.includes(Mr(i.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Qt(d)||(a=!0),s++,t.consume(d),d===92?f:u}function f(d){return d===91||d===92||d===93?(t.consume(d),s++,u):u(d)}}function wve(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,a=0,o;return c;function c(y){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(y){return y===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(y)}function f(y){if(a>999||y===93&&!o||y===null||y===91||Qt(y))return n(y);if(y===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return s=Mr(i.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return Qt(y)||(o=!0),a++,t.consume(y),y===92?d:f}function d(y){return y===91||y===92||y===93?(t.consume(y),a++,f):f(y)}function m(y){return y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),r.includes(s)||r.push(s),ct(t,v,"gfmFootnoteDefinitionWhitespace")):n(y)}function v(y){return e(y)}}function kve(t,e,n){return t.check(Cd,e,t.attempt(yve,e,n))}function Cve(t){t.exit("gfmFootnoteDefinition")}function Tve(t,e,n){const i=this;return ct(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(s):n(s)}}function Qve(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(a,o){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},d={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},m=[["enter",f,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",d,o]],v=o.parser.constructs.insideSpan.null;v&&Ki(m,m.length,0,c0(v,a.slice(u+1,c),o)),Ki(m,m.length,0,[["exit",d,o],["enter",a[c][1],o],["exit",a[c][1],o],["exit",f,o]]),Ki(a,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function s(a,o,c){const u=this.previous,f=this.events;let d=0;return m;function m(y){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(y):(a.enter("strikethroughSequenceTemporary"),v(y))}function v(y){const x=au(u);if(y===126)return d>1?c(y):(a.consume(y),d++,v);if(d<2&&!n)return c(y);const S=a.exit("strikethroughSequenceTemporary"),_=au(y);return S._open=!_||_===2&&!!x,S._close=!x||x===2&&!!_,o(y)}}}class Eve{constructor(){this.map=[]}add(e,n,i){Pve(this,e,n,i)}consume(e){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function Pve(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function Ave(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function Rve(){return{flow:{null:{name:"table",tokenize:$ve,resolveAll:Nve}}}}function $ve(t,e,n){const i=this;let r=0,s=0,a;return o;function o(N){let M=i.events.length-1;for(;M>-1;){const j=i.events[M][1].type;if(j==="lineEnding"||j==="linePrefix")M--;else break}const $=M>-1?i.events[M][1].type:null,I=$==="tableHead"||$==="tableRow"?C:c;return I===C&&i.parser.lazy[i.now().line]?n(N):I(N)}function c(N){return t.enter("tableHead"),t.enter("tableRow"),u(N)}function u(N){return N===124||(a=!0,s+=1),f(N)}function f(N){return N===null?n(N):Le(N)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),v):n(N):it(N)?ct(t,f,"whitespace")(N):(s+=1,a&&(a=!1,r+=1),N===124?(t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),a=!0,f):(t.enter("data"),d(N)))}function d(N){return N===null||N===124||Qt(N)?(t.exit("data"),f(N)):(t.consume(N),N===92?m:d)}function m(N){return N===92||N===124?(t.consume(N),d):d(N)}function v(N){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(N):(t.enter("tableDelimiterRow"),a=!1,it(N)?ct(t,y,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):y(N))}function y(N){return N===45||N===58?S(N):N===124?(a=!0,t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),x):E(N)}function x(N){return it(N)?ct(t,S,"whitespace")(N):S(N)}function S(N){return N===58?(s+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(N),t.exit("tableDelimiterMarker"),_):N===45?(s+=1,_(N)):N===null||Le(N)?T(N):E(N)}function _(N){return N===45?(t.enter("tableDelimiterFiller"),Q(N)):E(N)}function Q(N){return N===45?(t.consume(N),Q):N===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(N),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(N))}function k(N){return it(N)?ct(t,T,"whitespace")(N):T(N)}function T(N){return N===124?y(N):N===null||Le(N)?!a||r!==s?E(N):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(N)):E(N)}function E(N){return n(N)}function C(N){return t.enter("tableRow"),P(N)}function P(N){return N===124?(t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),P):N===null||Le(N)?(t.exit("tableRow"),e(N)):it(N)?ct(t,P,"whitespace")(N):(t.enter("data"),L(N))}function L(N){return N===null||N===124||Qt(N)?(t.exit("data"),P(N)):(t.consume(N),N===92?B:L)}function B(N){return N===92||N===124?(t.consume(N),L):L(N)}}function Nve(t,e){let n=-1,i=!0,r=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,c=0,u,f,d;const m=new Eve;for(;++n<t.length;){const v=t[n],y=v[1];v[0]==="enter"?y.type==="tableHead"?(o=!1,c!==0&&(f3(m,e,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",u,e]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(i=!0,d=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,f={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",f,e]])),r=y.type==="tableDelimiterRow"?2:f?3:1):r&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(i=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],d=Xm(m,e,s,r,void 0,d),s=[0,0,0,0]),a[2]=n)):y.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(a[0]=a[1],d=Xm(m,e,s,r,void 0,d)),s=a,a=[s[1],n,0,0])):y.type==="tableHead"?(o=!0,c=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(c=n,s[1]!==0?(a[0]=a[1],d=Xm(m,e,s,r,n,d)):a[1]!==0&&(d=Xm(m,e,a,r,n,d)),r=0):r&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&f3(m,e,c,u,f),m.consume(e.events),n=-1;++n<e.events.length;){const v=e.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=Ave(e.events,n))}return t}function Xm(t,e,n,i,r,s){const a=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},Qc(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Qc(e.events,n[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Qc(e.events,n[2]),f=Qc(e.events,n[3]),d={type:o,start:Object.assign({},u),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",d,e]]),i!==2){const m=e.events[n[2]],v=e.events[n[3]];if(m[1].end=Object.assign({},v[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,x=n[3]-n[2]-1;t.add(y,x,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return r!==void 0&&(s.end=Object.assign({},Qc(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function f3(t,e,n,i,r){const s=[],a=Qc(e.events,n);r&&(r.end=Object.assign({},a),s.push(["exit",r,e])),i.end=Object.assign({},a),s.push(["exit",i,e]),t.add(n+1,0,s)}function Qc(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const Mve={name:"tasklistCheck",tokenize:zve};function jve(){return{text:{91:Mve}}}function zve(t,e,n){const i=this;return r;function r(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return Qt(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),o):n(c)}function o(c){return Le(c)?e(c):it(c)?t.check({tokenize:Dve},e,n)(c):n(c)}}function Dve(t,e,n){return ct(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function Lve(t){return q9([uve(),xve(),Qve(t),Rve(),jve()])}const qve={};function Bve(t){const e=this,n=t||qve,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),a=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(Lve(n)),s.push(ave()),a.push(ove(n))}const wc="cc-chat-session",d3="cc-chat-agent",p3="cc-chat-mode",Qd=cd((t,e)=>({messages:[],sessions:[],activeSession:localStorage.getItem(wc),isStreaming:!1,currentAgent:localStorage.getItem(d3)||"leader",currentMode:localStorage.getItem(p3)||"normal",ws:null,pendingPermission:null,permissionDenials:[],lastMessage:null,fetchSessions:async n=>{try{const i=n?`/api/sessions/${n}`:"/api/sessions",s=await(await fetch(i)).json();t({sessions:s})}catch{t({sessions:[]})}},loadSession:async n=>{try{const s=(await(await fetch(`/api/session/${n}`)).json()).messages.map(a=>({type:a.type,content:a.content,timestamp:a.timestamp,uuid:a.uuid}));localStorage.setItem(wc,n),t({messages:s,activeSession:n})}catch{t({messages:[]})}},restoreSession:async()=>{const n=e().activeSession;if(n)try{const i=await fetch(`/api/session/${n}`);if(i.ok){const s=(await i.json()).messages.map(a=>({type:a.type,content:a.content,timestamp:a.timestamp,uuid:a.uuid}));t({messages:s})}else localStorage.removeItem(wc),t({activeSession:null,messages:[]})}catch{localStorage.removeItem(wc),t({activeSession:null,messages:[]})}},sendMessage:(n,i=[],r)=>{const s=e();if(s.isStreaming)return;t({lastMessage:n,permissionDenials:[]});const a={type:"user",content:n,timestamp:Date.now()};t(d=>({messages:[...d.messages,a]}));const o=Math.random().toString(36).substring(7),c=window.location.protocol==="https:"?"wss:":"ws:",u=new WebSocket(`${c}//${window.location.host}/ws/chat/${o}`);u.onopen=()=>{t({isStreaming:!0,ws:u});const d={agent:s.currentAgent,message:n,images:i,resume:!0,session_id:s.activeSession,mode:s.currentMode};r&&r.length>0&&(d.allowedTools=r),u.send(JSON.stringify(d))};let f=null;u.onmessage=d=>{const m=JSON.parse(d.data);if(m.session_id&&(f=m.session_id),m.type!=="chat_start"){if(m.type==="permission_request"){t({pendingPermission:{prompt:m.prompt||"Permission requested",tool:m.tool,action:m.action,options:m.options||["Yes","No"]}});return}if(m.type==="permission_response_sent"){t({pendingPermission:null});return}if(m.type==="chat_output"||m.type==="assistant"){let v="";if(m.type==="assistant"&&m.message?.content){const y=m.message.content;Array.isArray(y)&&(v=y.filter(x=>x.type==="text").map(x=>x.text).join(""))}else v=m.content||"";v&&t(y=>{const x=y.messages[y.messages.length-1];return x?.type==="assistant"?{messages:[...y.messages.slice(0,-1),{...x,content:x.content+v}]}:{messages:[...y.messages,{type:"assistant",content:v,timestamp:Date.now()}]}})}else if(m.type==="chat_done"){const y=e().messages.some(x=>x.type==="assistant"&&x.content);f&&y&&(localStorage.setItem(wc,f),t({activeSession:f})),m.permission_denials&&m.permission_denials.length>0&&t({permissionDenials:m.permission_denials}),t({isStreaming:!1,ws:null}),u.close()}else m.type==="error"&&(t(v=>({messages:[...v.messages,{type:"system",content:`Error: ${m.message}`,timestamp:Date.now()}],isStreaming:!1,ws:null})),u.close())}},u.onerror=()=>{t({isStreaming:!1,ws:null})},u.onclose=()=>{t({isStreaming:!1,ws:null})}},stopChat:()=>{const n=e().ws;n&&n.readyState===WebSocket.OPEN&&(n.send(JSON.stringify({type:"stop"})),n.close()),t({isStreaming:!1,ws:null,pendingPermission:null})},sendPermissionResponse:n=>{const i=e().ws;i&&i.readyState===WebSocket.OPEN&&i.send(JSON.stringify({type:"permission_response",response:n})),t({pendingPermission:null})},setAgent:n=>{localStorage.setItem(d3,n),t({currentAgent:n})},setMode:n=>{localStorage.setItem(p3,n),t({currentMode:n})},clearMessages:()=>{localStorage.removeItem(wc),t({messages:[],activeSession:null,permissionDenials:[],lastMessage:null})},clearPermissionDenials:()=>{t({permissionDenials:[]})},rerunWithApprovedTools:n=>{const i=e();i.lastMessage&&(t({permissionDenials:[]}),i.sendMessage(i.lastMessage,[],n))},answerQuestion:n=>{const i=e();let r="";n.custom?r=n.custom:r=Object.entries(n).map(([a,o])=>o).join(", "),t({permissionDenials:[]}),i.sendMessage(r)}})),Ab=[{value:"normal",label:"Normal",icon:fl,description:"Prompts for edit confirmation",tools:"All tools (with prompts)",color:"text-blue-400",bgColor:"bg-blue-500/20"},{value:"plan",label:"Plan",icon:kT,description:"Read-only exploration mode",tools:"Read, Glob, Grep, Task only",color:"text-amber-400",bgColor:"bg-amber-500/20"},{value:"auto",label:"Auto Edit",icon:Hc,description:"Auto-accept file changes",tools:"Edit, Write, Bash, Read, Glob, Grep",color:"text-green-400",bgColor:"bg-green-500/20"},{value:"yolo",label:"YOLO",icon:v6,description:"No permission prompts at all",tools:"All tools (no prompts)",color:"text-red-400",bgColor:"bg-red-500/20"}];function Ive({mode:t,onModeChange:e}){const[n,i]=X.useState(!1),r=Ab.find(a=>a.value===t)||Ab[0],s=r.icon;return g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>i(!n),className:`flex items-center gap-1.5 px-2 py-1 rounded ${r.bgColor} hover:opacity-80 border border-[var(--border)] transition-colors text-xs`,title:r.tools,children:[g.jsx(s,{size:12,className:r.color}),g.jsx("span",{className:r.color,children:r.label}),g.jsx(gu,{size:12,className:`transition-transform ${r.color} ${n?"rotate-180":""}`})]}),n&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),g.jsx("div",{className:"absolute bottom-full left-0 mb-1 w-56 bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-lg z-20 overflow-hidden",children:Ab.map(a=>{const o=a.icon;return g.jsxs("button",{onClick:()=>{e(a.value),i(!1)},className:`w-full flex items-start gap-2 px-3 py-2 text-left hover:bg-[var(--bg-tertiary)] transition-colors ${a.value===t?a.bgColor:""}`,children:[g.jsx(o,{size:14,className:`mt-0.5 flex-shrink-0 ${a.color}`}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:`text-sm font-medium ${a.color}`,children:a.label}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:a.description}),g.jsx("div",{className:"text-[10px] text-[var(--text-secondary)] opacity-70 mt-0.5",children:a.tools})]})]},a.value)})})]})]})}function Xve({agentName:t,currentSessionId:e,onSelectSession:n,onNewSession:i,onClose:r}){const[s,a]=X.useState([]),[o,c]=X.useState([]),[u,f]=X.useState(!0),[d,m]=X.useState("sessions"),[v,y]=X.useState(null),[x,S]=X.useState(""),_=async()=>{try{const M=await(await fetch(`/api/sessions/${t}?_t=${Date.now()}`)).json();a(M)}catch{a([])}finally{f(!1)}},Q=async()=>{try{const M=await(await fetch(`/api/sessions/trash?_t=${Date.now()}`)).json();c(M)}catch{c([])}};X.useEffect(()=>{_(),Q()},[t]);const k=async(N,M)=>{M.stopPropagation();try{await fetch(`/api/session/${N}`,{method:"DELETE"}),a($=>$.filter(I=>I.session_id!==N)),Q()}catch($){console.error("Failed to delete session:",$)}},T=async N=>{try{await fetch(`/api/session/${N}/restore`,{method:"POST"}),c(M=>M.filter($=>$.session_id!==N)),_()}catch(M){console.error("Failed to restore session:",M)}},E=async N=>{try{await fetch(`/api/session/${N}/permanent`,{method:"DELETE"}),c(M=>M.filter($=>$.session_id!==N))}catch(M){console.error("Failed to permanently delete session:",M)}},C=(N,M)=>{M.stopPropagation(),y(N.session_id),S(N.nickname||"")},P=async(N,M)=>{M.stopPropagation();try{await fetch(`/api/session/${N}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:x||null})}),a($=>$.map(I=>I.session_id===N?{...I,nickname:x||null}:I)),y(null)}catch($){console.error("Failed to save nickname:",$)}},L=N=>{if(!N)return"Never";const M=Math.floor((Date.now()-N*1e3)/1e3);if(M<60)return`${M}s ago`;const $=Math.floor(M/60);if($<60)return`${$}m ago`;const I=Math.floor($/60);return I<24?`${I}h ago`:`${Math.floor(I/24)}d ago`},B=N=>{if(!N)return"";const M=new Date(N);return`${Math.ceil((M.getTime()+720*60*60*1e3-Date.now())/(1440*60*1e3))} days left`};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[500px] max-h-[70vh] overflow-hidden",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsxs("h2",{className:"text-lg font-semibold",children:["Sessions - ",t]}),g.jsx("button",{onClick:r,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:g.jsx(li,{size:20})})]}),g.jsxs("div",{className:"flex border-b border-[var(--border)]",children:[g.jsxs("button",{onClick:()=>m("sessions"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${d==="sessions"?"text-[var(--accent)] border-b-2 border-[var(--accent)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:["Sessions (",s.length,")"]}),g.jsxs("button",{onClick:()=>m("trash"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors flex items-center justify-center gap-1 ${d==="trash"?"text-[var(--accent)] border-b-2 border-[var(--accent)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:[g.jsx(q$,{size:14}),"Trash (",o.length,")"]})]}),d==="sessions"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"p-4 border-b border-[var(--border)]",children:g.jsxs("button",{onClick:()=>{i(),r()},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded font-medium transition-opacity",children:[g.jsx(vo,{size:16}),"New Session"]})}),g.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:u?g.jsx("div",{className:"p-8 text-center text-[var(--text-secondary)]",children:"Loading sessions..."}):s.length===0?g.jsx("div",{className:"p-8 text-center text-[var(--text-secondary)]",children:"No sessions yet"}):g.jsx("div",{className:"divide-y divide-[var(--border)]",children:s.map(N=>g.jsxs("div",{onClick:()=>{n(N.session_id),r()},className:`w-full p-4 text-left hover:bg-[var(--bg-tertiary)] transition-colors cursor-pointer ${N.session_id===e?"bg-[var(--accent)]/20":""}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v===N.session_id?g.jsxs("div",{className:"flex items-center gap-2",onClick:M=>M.stopPropagation(),children:[g.jsx("input",{type:"text",value:x,onChange:M=>S(M.target.value),placeholder:"Session nickname",className:"bg-[var(--bg-tertiary)] border border-[var(--border)] rounded px-2 py-1 text-sm w-40",autoFocus:!0,onKeyDown:M=>{M.key==="Enter"?P(N.session_id,M):M.key==="Escape"&&y(null)}}),g.jsx("button",{onClick:M=>P(N.session_id,M),className:"p-1 hover:bg-[var(--accent)] rounded transition-colors",children:g.jsx(_f,{size:14})})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-medium text-sm",children:N.nickname||g.jsxs("span",{className:"font-mono text-[var(--text-secondary)]",children:[N.session_id.slice(0,12),"..."]})}),g.jsx("button",{onClick:M=>C(N,M),className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors text-[var(--text-secondary)]",title:"Edit nickname",children:g.jsx(LO,{size:12})})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs text-[var(--text-secondary)] flex items-center gap-1",children:[g.jsx(ms,{size:12}),L(N.last_timestamp)]}),g.jsx("button",{onClick:M=>k(N.session_id,M),className:"p-1 hover:bg-red-600/20 rounded transition-colors text-[var(--text-secondary)] hover:text-red-400",title:"Move to trash",children:g.jsx(Ji,{size:14})})]})]}),g.jsx("p",{className:"text-sm text-[var(--text-secondary)] truncate mb-2",children:N.last_message_preview||"No messages"}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-[var(--text-secondary)]",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(fl,{size:12}),N.message_count," messages"]}),N.cost_usd>0&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(ld,{size:12}),"$",N.cost_usd.toFixed(4)]})]})]},N.session_id))})})]}),d==="trash"&&g.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:o.length===0?g.jsxs("div",{className:"p-8 text-center text-[var(--text-secondary)]",children:[g.jsx(q$,{size:32,className:"mx-auto mb-2 opacity-50"}),g.jsx("p",{children:"Trash is empty"}),g.jsx("p",{className:"text-xs mt-1",children:"Deleted sessions are kept for 30 days"})]}):g.jsx("div",{className:"divide-y divide-[var(--border)]",children:o.map(N=>g.jsxs("div",{className:"p-4 hover:bg-[var(--bg-tertiary)] transition-colors",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"font-medium text-sm",children:N.nickname||g.jsxs("span",{className:"font-mono text-[var(--text-secondary)]",children:[N.session_id.slice(0,12),"..."]})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs text-orange-400",children:B(N.deleted_at??null)}),g.jsx("button",{onClick:()=>T(N.session_id),className:"p-1 hover:bg-green-600/20 rounded transition-colors text-[var(--text-secondary)] hover:text-green-400",title:"Restore",children:g.jsx(y6,{size:14})}),g.jsx("button",{onClick:()=>E(N.session_id),className:"p-1 hover:bg-red-600/20 rounded transition-colors text-[var(--text-secondary)] hover:text-red-400",title:"Delete permanently",children:g.jsx(Ji,{size:14})})]})]}),g.jsx("p",{className:"text-sm text-[var(--text-secondary)] truncate mb-2",children:N.last_message_preview||"No messages"}),g.jsx("div",{className:"flex items-center gap-4 text-xs text-[var(--text-secondary)]",children:g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(fl,{size:12}),N.message_count," messages"]})})]},N.session_id))})})]})})}function m3({images:t,onImagesChange:e}){const[n,i]=X.useState(!1),r=X.useRef(null),s=f=>{if(!f)return;const d=[...t];Array.from(f).forEach(m=>{if(!m.type.startsWith("image/")||d.length>=4)return;const v=new FileReader;v.onload=y=>{const x=y.target?.result;d.push(x),e([...d])},v.readAsDataURL(m)})},a=f=>{f.preventDefault(),i(!1),s(f.dataTransfer.files)},o=f=>{f.preventDefault(),i(!0)},c=()=>{i(!1)},u=f=>{const d=t.filter((m,v)=>v!==f);e(d)};return g.jsxs("div",{className:"space-y-2",children:[t.length>0&&g.jsx("div",{className:"flex gap-2 flex-wrap",children:t.map((f,d)=>g.jsxs("div",{className:"relative group",children:[g.jsx("img",{src:f,alt:`Attachment ${d+1}`,className:"w-16 h-16 object-cover rounded border border-[var(--border)]"}),g.jsx("button",{onClick:()=>u(d),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(li,{size:12})})]},d))}),t.length<4&&g.jsxs("div",{onDrop:a,onDragOver:o,onDragLeave:c,className:`flex items-center gap-2 ${n?"opacity-70":""}`,children:[g.jsxs("button",{onClick:()=>r.current?.click(),className:"flex items-center gap-1.5 px-2 py-1 rounded bg-[var(--bg-tertiary)] hover:bg-[var(--bg-primary)] border border-[var(--border)] transition-colors text-xs",children:[g.jsx(YF,{size:12}),g.jsx("span",{children:n?"Drop here":"Add Image"})]}),g.jsx("input",{ref:r,type:"file",accept:"image/*",multiple:!0,onChange:f=>s(f.target.files),className:"hidden"}),g.jsxs("span",{className:"text-xs text-[var(--text-secondary)]",children:[4-t.length," remaining"]})]})]})}const Zve=[{name:"/status",description:"Show agent status",icon:ET,action:"status"},{name:"/git-log",description:"Show recent commits",icon:m6,action:"git-log"},{name:"/clear",description:"Clear conversation",icon:Ji,action:"clear"},{name:"/cost",description:"Show session cost",icon:ld,action:"cost"},{name:"/help",description:"Show available commands",icon:sF,action:"help"},{name:"/compact",description:"Compact conversation",icon:O6,action:"compact"},{name:"/resume",description:"Resume previous session",icon:oo,action:"resume"},{name:"/plan",description:"Enter plan mode",icon:p6,action:"plan"},{name:"/auto",description:"Enter auto mode",icon:Hc,action:"auto"},{name:"/yolo",description:"Enter YOLO mode",icon:v6,action:"yolo"},{name:"/review",description:"Review changes",icon:kT,action:"review"}];function Vve({query:t,onSelect:e,onClose:n}){const[i,r]=X.useState(0),s=X.useRef(null),a=Zve.filter(o=>o.name.toLowerCase().includes(t.toLowerCase())||o.description.toLowerCase().includes(t.toLowerCase()));return X.useEffect(()=>{r(0)},[t]),X.useEffect(()=>{const o=c=>{switch(c.key){case"ArrowDown":c.preventDefault(),r(u=>Math.min(u+1,a.length-1));break;case"ArrowUp":c.preventDefault(),r(u=>Math.max(u-1,0));break;case"Enter":c.preventDefault(),a[i]&&e(a[i].name);break;case"Escape":c.preventDefault(),n();break}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[a,i,e,n]),X.useEffect(()=>{const c=s.current?.children[i];c&&c.scrollIntoView({block:"nearest"})},[i]),a.length===0?g.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-1 bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-lg p-3",children:g.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"No commands found"})}):g.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-1 bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-lg overflow-hidden",children:[g.jsx("div",{ref:s,className:"max-h-[300px] overflow-y-auto",children:a.map((o,c)=>{const u=o.icon;return g.jsxs("button",{onClick:()=>e(o.name),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition-colors ${c===i?"bg-[var(--accent)]/20":"hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsx(u,{size:16,className:"text-[var(--text-secondary)] flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-mono",children:o.name}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)] truncate",children:o.description})]})]},o.name)})}),g.jsxs("div",{className:"px-3 py-2 border-t border-[var(--border)] text-xs text-[var(--text-secondary)]",children:[g.jsx("kbd",{className:"px-1 bg-[var(--bg-tertiary)] rounded",children:""})," navigate",g.jsx("kbd",{className:"px-1 bg-[var(--bg-tertiary)] rounded ml-2",children:"Enter"})," select",g.jsx("kbd",{className:"px-1 bg-[var(--bg-tertiary)] rounded ml-2",children:"Esc"})," close"]})]})}function Wve({prompt:t,tool:e,action:n,options:i,onRespond:r}){return g.jsx("div",{className:"bg-amber-900/30 border border-amber-600/50 rounded-lg p-4 mx-3 mb-3",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center flex-shrink-0",children:g.jsx(MG,{size:18})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx(od,{size:16,className:"text-amber-400"}),g.jsx("span",{className:"font-medium text-amber-200",children:"Permission Required"})]}),e&&g.jsxs("div",{className:"text-sm text-amber-100 mb-2",children:[g.jsx("span",{className:"font-medium",children:e}),n&&g.jsxs("span",{className:"text-amber-300",children:[" wants to ",n]})]}),g.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3 break-words whitespace-pre-wrap",children:t}),g.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>g.jsx("button",{onClick:()=>r(s),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${s.toLowerCase()==="yes"||s.toLowerCase()==="y"||s==="Continue"?"bg-green-600 hover:bg-green-500 text-white":s.toLowerCase()==="no"||s.toLowerCase()==="n"?"bg-red-600/50 hover:bg-red-500/50 text-red-200":"bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] border border-[var(--border)]"}`,children:s},s))})]})]})})}function g3({width:t}){const[e,n]=X.useState(""),[i,r]=X.useState([]),[s,a]=X.useState(!1),[o,c]=X.useState(!1),u=X.useRef(null),f=X.useRef(null),{messages:d,isStreaming:m,currentAgent:v,activeSession:y,pendingPermission:x,permissionDenials:S,currentMode:_,sendMessage:Q,sendPermissionResponse:k,stopChat:T,setAgent:E,setMode:C,loadSession:P,clearMessages:L,restoreSession:B,clearPermissionDenials:N,rerunWithApprovedTools:M,answerQuestion:$}=Qd(),{agents:I}=Ei();X.useEffect(()=>{B()},[B]),X.useEffect(()=>{if(I.length>0){if(!I.map(q=>q.name).includes(v)){const q=I.find(V=>V.is_leader);E(q?.name||I[0].name)}}else v!=="leader"&&E("leader")},[I,v,E]),X.useEffect(()=>{u.current?.scrollIntoView({behavior:"smooth"})},[d]),X.useEffect(()=>{e.startsWith("/")?c(!0):c(!1)},[e]);const j=()=>{if(!(!e.trim()||m)){if(e.startsWith("/")){D(e.trim()),n("");return}Q(e.trim(),i),n(""),r([])}},D=G=>{switch(G){case"/clear":L();break;case"/plan":C("plan");break;case"/auto":C("auto");break;case"/yolo":C("yolo");break;default:Q(G)}c(!1)},R=G=>{n(G+" "),c(!1),f.current?.focus()},W=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),o||j())},U=()=>{L()};return g.jsxs("aside",{className:"bg-[var(--bg-secondary)] border-l border-[var(--border)] flex flex-col h-full overflow-hidden",style:{width:typeof t=="number"?`${t}px`:t},children:[g.jsxs("div",{className:"h-10 flex items-center justify-between px-3 border-b border-[var(--border)] flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g.jsx("span",{className:"text-sm font-medium",children:"Chat"}),y&&g.jsx("span",{className:"text-xs text-[var(--text-secondary)] font-mono truncate",children:y.slice(0,8)})]}),g.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[g.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-[var(--bg-tertiary)] rounded transition-colors",title:"Session history",children:g.jsx(VF,{size:16})}),g.jsxs("select",{value:v,onChange:G=>E(G.target.value),className:"text-xs bg-[var(--bg-tertiary)] border border-[var(--border)] rounded px-2 py-1.5 max-w-[100px]",children:[I.map(G=>g.jsx("option",{value:G.name,children:G.name},G.id)),I.length===0&&g.jsx("option",{value:"leader",children:"leader"})]})]})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 space-y-3 min-h-0",children:[d.length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-sm py-8",children:"Start a conversation with the agent"}):d.map((G,q)=>g.jsx(Kve,{message:G},q)),m&&g.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)] text-sm",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),g.jsx("span",{children:"Agent is typing..."})]}),g.jsx("div",{ref:u})]}),x&&g.jsx(Wve,{prompt:x.prompt,tool:x.tool,action:x.action,options:x.options,onRespond:k}),S.length>0&&!m&&g.jsx(Uve,{denials:S,onApproveAll:()=>{const G=[...new Set(S.map(q=>q.tool_name))];M(G)},onDismiss:N,onAnswerQuestion:$}),g.jsxs("div",{className:"p-3 border-t border-[var(--border)] space-y-2 flex-shrink-0",children:[i.length>0&&g.jsx(m3,{images:i,onImagesChange:r}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(Ive,{mode:_,onModeChange:C}),g.jsx("div",{className:"flex items-center gap-1",children:g.jsx(m3,{images:i,onImagesChange:r})})]}),g.jsxs("div",{className:"relative",children:[o&&g.jsx(Vve,{query:e,onSelect:R,onClose:()=>c(!1)}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("textarea",{ref:f,value:e,onChange:G=>n(G.target.value),onKeyDown:W,placeholder:"Type a message or / for commands...",rows:2,className:"flex-1 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:border-[var(--accent)]"}),m?g.jsx("button",{onClick:T,className:"px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:g.jsx(jg,{size:18})}):g.jsx("button",{onClick:j,disabled:!e.trim(),className:"px-3 py-2 bg-[var(--accent)] hover:opacity-90 rounded-lg transition-colors disabled:opacity-50",children:g.jsx(x6,{size:18})})]})]})]}),s&&g.jsx(Xve,{agentName:v,currentSessionId:y,onSelectSession:P,onNewSession:U,onClose:()=>a(!1)})]})}function Uve({denials:t,onApproveAll:e,onDismiss:n,onAnswerQuestion:i}){const[r,s]=X.useState(""),[a,o]=X.useState({}),c=[...new Set(t.map(v=>v.tool_name))],f=t.find(v=>v.tool_name==="AskUserQuestion")?.tool_input,d=(v,y)=>{o(x=>({...x,[`q${v}`]:y}))},m=()=>{i&&(r.trim()?i({custom:r.trim()}):i(a))};return f?.questions&&f.questions.length>0?g.jsx("div",{className:"mx-3 mb-2 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(h2,{size:18,className:"text-blue-400 flex-shrink-0 mt-0.5"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium text-blue-200 mb-2",children:"Agent is asking a question"}),f.questions.map((v,y)=>g.jsxs("div",{className:"mb-3",children:[g.jsx("div",{className:"text-sm text-white mb-2",children:v.question}),g.jsx("div",{className:"flex flex-wrap gap-2",children:v.options.map((x,S)=>g.jsx("button",{onClick:()=>d(y,x.label),className:`px-3 py-1.5 text-xs rounded transition-colors ${a[`q${y}`]===x.label?"bg-blue-600 text-white":"bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] text-[var(--text-secondary)]"}`,title:x.description,children:x.label},S))})]},y)),g.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-700/30",children:[g.jsx("div",{className:"text-xs text-blue-300/80 mb-1",children:"Or type a custom response:"}),g.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),placeholder:"Type your answer...",className:"w-full px-2 py-1.5 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-xs focus:outline-none focus:border-blue-500",onKeyDown:v=>{v.key==="Enter"&&(r.trim()||Object.keys(a).length>0)&&m()}})]}),g.jsxs("div",{className:"flex gap-2 mt-3",children:[g.jsxs("button",{onClick:m,disabled:!r.trim()&&Object.keys(a).length===0,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white text-xs rounded transition-colors",children:[g.jsx(x6,{size:12}),"Submit Answer"]}),g.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-2 py-1 bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] text-xs rounded transition-colors",children:[g.jsx(li,{size:12}),"Dismiss"]})]})]})]})}):g.jsx("div",{className:"mx-3 mb-2 p-3 bg-amber-900/30 border border-amber-700/50 rounded-lg",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(h2,{size:18,className:"text-amber-400 flex-shrink-0 mt-0.5"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"text-sm font-medium text-amber-200",children:[t.length," permission",t.length>1?"s":""," denied"]}),g.jsxs("div",{className:"text-xs text-amber-300/80 mt-1",children:["Tools blocked: ",c.join(", ")]}),g.jsxs("div",{className:"flex gap-2 mt-2",children:[g.jsxs("button",{onClick:e,className:"flex items-center gap-1 px-2 py-1 bg-amber-600 hover:bg-amber-500 text-white text-xs rounded transition-colors",children:[g.jsx(Ti,{size:12}),"Approve & Re-run"]}),g.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-2 py-1 bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] text-xs rounded transition-colors",children:[g.jsx(li,{size:12}),"Dismiss"]})]})]})]})})}function Hve(t){const e=t.match(/<task-notification>[\s\S]*?<task-id>([^<]+)<\/task-id>[\s\S]*?<status>([^<]+)<\/status>[\s\S]*?<summary>([^<]+)<\/summary>[\s\S]*?<\/task-notification>/);return e?{isNotification:!0,taskId:e[1],status:e[2],summary:e[3]}:null}function Yve(t){const e=t.match(/^\[Tool:\s*(\w+)\]\s*([\s\S]*)/);if(e)return{type:"tool_use",name:e[1],body:e[2].trim()};const n=t.match(/^\[Result\]\s*([\s\S]*)/);return n?{type:"tool_result",name:"Result",body:n[1].trim()}:{type:null,name:"",body:t}}function Fve({taskId:t,status:e,summary:n}){const i=e==="completed";return g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${i?"bg-blue-600":"bg-orange-600"}`,children:g.jsx(AT,{size:14})}),g.jsxs("div",{className:`flex-1 min-w-0 max-w-[85%] rounded-lg px-3 py-2 text-xs ${i?"bg-blue-900/30 border border-blue-800/50":"bg-orange-900/30 border border-orange-800/50"}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:`font-medium ${i?"text-blue-300":"text-orange-300"}`,children:["Task ",e]}),g.jsx("span",{className:"text-[var(--text-secondary)] font-mono",children:t.slice(0,7)})]}),g.jsx("div",{className:"text-[var(--text-secondary)] mt-1",children:n})]})]})}function Gve({toolType:t,name:e,body:n}){const[i,r]=X.useState(!1),s=t==="tool_use",a=n.split(`
`)[0].slice(0,60)+(n.length>60?"...":"");return g.jsxs("div",{className:"flex gap-2 w-full",children:[g.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${s?"bg-purple-600":"bg-green-600"}`,children:s?g.jsx(AT,{size:14}):g.jsx(Sf,{size:14})}),g.jsxs("div",{className:`flex-1 min-w-0 max-w-[85%] rounded-lg text-sm overflow-hidden ${s?"bg-purple-900/30 border border-purple-800/50":"bg-green-900/30 border border-green-800/50"}`,children:[g.jsxs("button",{onClick:()=>r(!i),className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-white/5 transition-colors text-left",children:[i?g.jsx(gu,{size:14,className:"flex-shrink-0 text-[var(--text-secondary)]"}):g.jsx(Cl,{size:14,className:"flex-shrink-0 text-[var(--text-secondary)]"}),g.jsx("span",{className:`font-medium ${s?"text-purple-300":"text-green-300"}`,children:s?`Tool: ${e}`:"Result"}),!i&&g.jsx("span",{className:"text-xs text-[var(--text-secondary)] truncate flex-1",children:a})]}),i&&g.jsx("div",{className:"px-3 pb-2 border-t border-white/10",children:g.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs break-words mt-2 text-[var(--text-secondary)]",children:n})})]})]})}function Kve({message:t}){if(!t.content||!t.content.trim())return null;const e=Hve(t.content);if(e)return g.jsx(Fve,{taskId:e.taskId,status:e.status,summary:e.summary});const n=Yve(t.content);if(n.type)return g.jsx(Gve,{toolType:n.type,name:n.name,body:n.body});const i=t.type==="user",r=t.type==="system";return g.jsxs("div",{className:`flex gap-2 ${i?"justify-end":""}`,children:[!i&&g.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${r?"bg-yellow-600":"bg-[var(--accent)]"}`,children:r?g.jsx(iK,{size:14}):g.jsx(ZY,{size:14})}),g.jsx("div",{className:`
          max-w-[85%] rounded-lg px-3 py-2 text-sm overflow-hidden break-words
          ${i?"bg-[var(--accent)] text-white":r?"bg-yellow-900/30 border border-yellow-800/50 text-yellow-200":"bg-[var(--bg-tertiary)]"}
        `,children:i?g.jsx("pre",{className:"whitespace-pre-wrap font-sans break-words overflow-hidden",children:t.content}):g.jsx("div",{className:"prose prose-sm prose-invert max-w-none prose-p:my-1 prose-pre:my-2 prose-pre:bg-black/30 prose-pre:p-2 prose-pre:overflow-x-auto prose-code:text-[var(--accent)] prose-code:before:content-none prose-code:after:content-none prose-headings:my-2 prose-ul:my-1 prose-ol:my-1 prose-li:my-0 [&_*]:break-words",children:g.jsx(QOe,{remarkPlugins:[Bve],children:t.content})})}),i&&g.jsx("div",{className:"w-6 h-6 rounded-full bg-[var(--bg-tertiary)] flex items-center justify-center flex-shrink-0",children:g.jsx($T,{size:14})})]})}function Jve({project:t,agentCount:e,onEnter:n,onDelete:i}){return g.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg p-4 hover:border-[var(--accent)] transition-colors",children:[g.jsxs("div",{className:"flex items-start justify-between mb-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(hl,{size:20,className:"text-yellow-500"}),g.jsx("h3",{className:"font-semibold text-lg",children:t.name})]}),i&&g.jsx("button",{onClick:r=>{r.stopPropagation(),i()},className:"p-1 text-[var(--text-secondary)] hover:text-red-400 transition-colors",title:"Delete project",children:g.jsx(Ji,{size:16})})]}),g.jsx("p",{className:"text-xs text-[var(--text-secondary)] truncate mb-2",title:t.root_path,children:t.root_path}),t.description&&g.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3 line-clamp-2",children:t.description}),g.jsxs("div",{className:"flex items-center justify-between mt-4",children:[g.jsxs("div",{className:"flex items-center gap-1 text-sm text-[var(--text-secondary)]",children:[g.jsx(tK,{size:14}),g.jsxs("span",{children:[e," agent",e!==1?"s":""]})]}),g.jsx("button",{onClick:n,className:"px-4 py-1.5 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium transition-opacity",children:"Enter IDE"})]})]})}function PZ({value:t,onChange:e,onClose:n,requireGitRepo:i=!0}){const[r,s]=X.useState(t||""),[a,o]=X.useState([]),[c,u]=X.useState(null),[f,d]=X.useState(!1),[m,v]=X.useState(!1),[y,x]=X.useState(""),[S,_]=X.useState(!1),[Q,k]=X.useState(!1),[T,E]=X.useState(""),[C,P]=X.useState(!1),L=async(D,R)=>{v(!0),x("");try{const W=R??S;let U=D?`/api/files/browse?path=${encodeURIComponent(D)}`:"/api/files/browse";U+=`${D?"&":"?"}show_hidden=${W}`;const G=await fetch(U);if(!G.ok){const V=await G.json();throw new Error(V.detail||"Failed to browse directory")}const q=await G.json();s(q.current_path),u(q.parent),o(q.directories),d(q.is_git_repo)}catch(W){x(W.message||"Failed to browse directory")}finally{v(!1)}};X.useEffect(()=>{L(t||void 0)},[]);const B=()=>{const D=!S;_(D),L(r,D)},N=async()=>{if(T.trim()){P(!0);try{const D=`${r}/${T.trim()}`,R=await fetch("/api/files/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:D,is_dir:!0})});if(!R.ok){const W=await R.json();throw new Error(W.detail||"Failed to create folder")}k(!1),E(""),await L(D)}catch(D){x(D.message||"Failed to create folder")}finally{P(!1)}}},M=D=>{L(D.path)},$=()=>{c&&L(c)},I=()=>{L()},j=()=>{e(r,f),n()};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"relative bg-[var(--bg-secondary)] rounded-lg w-[600px] max-w-[95vw] max-h-[80vh] flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Select Directory"}),g.jsx("button",{onClick:n,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:g.jsx(li,{size:20})})]}),g.jsxs("div",{className:"px-4 py-2 bg-[var(--bg-tertiary)] border-b border-[var(--border)] flex items-center gap-2",children:[g.jsx("button",{onClick:I,className:"p-1.5 hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Go to home directory",children:g.jsx(UF,{size:16})}),g.jsx("button",{onClick:$,disabled:!c,className:"p-1.5 hover:bg-[var(--bg-secondary)] rounded transition-colors disabled:opacity-50",title:"Go up",children:g.jsx(KY,{size:16})}),g.jsx("code",{className:"text-sm flex-1 truncate text-[var(--text-secondary)]",children:r}),g.jsx("button",{onClick:()=>k(!0),className:"p-1.5 hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Create new folder",children:g.jsx(DO,{size:16})}),g.jsx("button",{onClick:B,className:`p-1.5 hover:bg-[var(--bg-secondary)] rounded transition-colors ${S?"text-[var(--accent)]":""}`,title:S?"Hide hidden files":"Show hidden files",children:S?g.jsx(kT,{size:16}):g.jsx(SF,{size:16})})]}),y&&g.jsx("div",{className:"px-4 py-2 bg-red-900/30 text-red-200 text-sm",children:y}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2 min-h-[200px]",children:m?g.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"Loading..."}):a.length===0?g.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"No subdirectories"}):g.jsx("div",{className:"space-y-0.5",children:a.map(D=>g.jsxs("button",{onClick:()=>M(D),className:"w-full flex items-center gap-2 px-3 py-2 rounded hover:bg-[var(--bg-tertiary)] transition-colors text-left",children:[D.is_git_repo?g.jsx(Ng,{size:18,className:"text-orange-400 flex-shrink-0"}):g.jsx(QT,{size:18,className:"text-yellow-500 flex-shrink-0"}),g.jsx("span",{className:"truncate",children:D.name}),D.is_git_repo&&g.jsx("span",{className:"ml-auto text-xs text-orange-400 flex-shrink-0",children:"git"})]},D.path))})}),g.jsxs("div",{className:"p-4 border-t border-[var(--border)] flex items-center justify-between",children:[g.jsx("div",{className:"text-sm",children:f?g.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[g.jsx(Ng,{size:14}),"Git repository"]}):g.jsx("span",{className:"text-yellow-500",children:"Not a git repository"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:n,className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium transition-opacity",children:[g.jsx(_f,{size:16}),"Select This Directory"]})]})]}),Q&&g.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[300px] p-4 border border-[var(--border)]",children:[g.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Create New Folder"}),g.jsx("input",{type:"text",value:T,onChange:D=>E(D.target.value),placeholder:"Folder name...",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm mb-3 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",autoFocus:!0,onKeyDown:D=>{D.key==="Enter"&&T.trim()&&N(),D.key==="Escape"&&(k(!1),E(""))}}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>{k(!1),E("")},className:"px-3 py-1.5 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsx("button",{onClick:N,disabled:!T.trim()||C,className:"px-3 py-1.5 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium disabled:opacity-50 transition-opacity",children:C?"Creating...":"Create"})]})]})})]})})}function eye({onClose:t,onCreate:e}){const[n,i]=X.useState(""),[r,s]=X.useState(""),[a,o]=X.useState(""),[c,u]=X.useState(!1),[f,d]=X.useState(!0),[m,v]=X.useState(""),[y,x]=X.useState(!1),[S,_]=X.useState(!1),Q=async k=>{if(k.preventDefault(),!n.trim()||!r.trim()){v("Name and path are required");return}if(!c&&!f){v('Please enable "Initialize git repository" or select a git repository');return}x(!0),v("");try{await e(n.trim(),r.trim(),a.trim(),!c&&f),t()}catch(T){v(T.message||"Failed to create project")}finally{x(!1)}};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[500px] max-w-[90vw]",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(DO,{size:20,className:"text-[var(--accent)]"}),g.jsx("h2",{className:"text-lg font-semibold",children:"New Project"})]}),g.jsx("button",{onClick:t,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:g.jsx(li,{size:20})})]}),g.jsxs("form",{onSubmit:Q,className:"p-4 space-y-4",children:[m&&g.jsx("div",{className:"p-3 bg-red-900/30 border border-red-800 rounded text-red-200 text-sm",children:m}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Project Name"}),g.jsx("input",{type:"text",value:n,onChange:k=>i(k.target.value),placeholder:"my-project",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)]",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Project Path"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:"flex-1 px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm truncate flex items-center gap-2",children:r?g.jsxs(g.Fragment,{children:[c&&g.jsx(Ng,{size:14,className:"text-orange-400 flex-shrink-0"}),g.jsx("span",{className:"truncate",children:r})]}):g.jsx("span",{className:"text-[var(--text-secondary)]",children:"No directory selected"})}),g.jsxs("button",{type:"button",onClick:()=>_(!0),className:"flex items-center gap-2 px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded hover:bg-[var(--bg-secondary)] transition-colors",children:[g.jsx(hl,{size:16}),"Browse"]})]}),r&&!c&&g.jsxs("div",{className:"mt-2",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:f,onChange:k=>d(k.target.checked),className:"w-4 h-4 rounded border-[var(--border)] bg-[var(--bg-tertiary)]"}),g.jsx("span",{className:"text-sm",children:"Initialize git repository"})]}),g.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1 ml-6",children:"This folder is not a git repository. Enable to run `git init`."})]}),r&&c&&g.jsxs("p",{className:"text-xs text-green-400 mt-1 flex items-center gap-1",children:[g.jsx(Ng,{size:12}),"Git repository detected"]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description (optional)"}),g.jsx("textarea",{value:a,onChange:k=>o(k.target.value),placeholder:"What is this project about?",rows:2,className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)] resize-none"})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:y||!n.trim()||!r.trim(),className:"px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium disabled:opacity-50 transition-opacity",children:y?"Creating...":"Create Project"})]})]}),S&&g.jsx(PZ,{value:r,onChange:(k,T)=>{if(s(k),u(T),!n.trim()){const E=k.split("/").pop()||"";i(E)}},onClose:()=>_(!1),requireGitRepo:!1})]})})}function tye({onEnterProject:t}){const[e,n]=X.useState(!1),[i,r]=X.useState(!1),[s,a]=X.useState({}),{projects:o,fetchProjects:c,createProject:u,deleteProject:f,loading:d}=Ei();X.useEffect(()=>{c()},[c]),X.useEffect(()=>{const x=async()=>{const S={};for(const _ of o)try{const k=await(await fetch(`/api/projects/${_.id}/agents`)).json();S[_.id]=k.length}catch{S[_.id]=0}a(S)};o.length>0&&x()},[o]);const m=async(x,S,_,Q)=>{const k=await u(x,S,_,Q);t(k.id)},v=async x=>{confirm("Are you sure you want to delete this project? This will not delete any files.")&&await f(x)},y=async(x,S)=>{const _=x.split("/").pop()||"project";try{const Q=await u(_,x,"",!S);r(!1),t(Q.id)}catch(Q){alert(Q.message||"Failed to open project")}};return g.jsxs("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[g.jsxs("header",{className:"h-14 bg-[var(--bg-secondary)] border-b border-[var(--border)] flex items-center justify-between px-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(hl,{size:24,className:"text-[var(--accent)]"}),g.jsx("h1",{className:"text-xl font-semibold",children:"Claude Code IDE"})]}),g.jsxs("div",{className:"text-sm text-[var(--text-secondary)]",children:[o.length," project",o.length!==1?"s":""]})]}),g.jsxs("main",{className:"p-6 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold",children:"Projects"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] border border-[var(--border)] rounded font-medium transition-colors",children:[g.jsx(MF,{size:18}),"Open Existing"]}),g.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded font-medium transition-opacity",children:[g.jsx(vo,{size:18}),"New Project"]})]})]}),d?g.jsx("div",{className:"text-center py-12 text-[var(--text-secondary)]",children:"Loading projects..."}):o.length===0?g.jsxs("div",{className:"text-center py-12",children:[g.jsx(hl,{size:48,className:"mx-auto mb-4 text-[var(--text-secondary)]"}),g.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects yet"}),g.jsx("p",{className:"text-[var(--text-secondary)] mb-4",children:"Create a new project to get started"}),g.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded font-medium transition-opacity",children:"Create Your First Project"})]}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(x=>g.jsx(Jve,{project:x,agentCount:s[x.id]||0,onEnter:()=>t(x.id),onDelete:()=>v(x.id)},x.id))})]}),e&&g.jsx(eye,{onClose:()=>n(!1),onCreate:m}),i&&g.jsx(PZ,{value:"",onChange:y,onClose:()=>r(!1),requireGitRepo:!1})]})}const nye={idle:"border-gray-500",running:"border-green-500 animate-pulse",waiting:"border-yellow-500",error:"border-red-500"},iye={idle:Mg,running:oo,waiting:Mg,error:od};function rye({agent:t,isSelected:e,onClick:n,onSetLeader:i,onRemove:r,onUpdateNickname:s}){const a=iye[t.state]||Mg,[o,c]=X.useState(null),[u,f]=X.useState(!1),[d,m]=X.useState(!1),[v,y]=X.useState(!0),[x,S]=X.useState(t.nickname||""),[_,Q]=X.useState(null),k=X.useRef(null),{activeProject:T}=Ei();X.useEffect(()=>{if(!t.id||!T)return;const M=async()=>{try{const I=await fetch(`/api/projects/${T.id}/agents/${t.id}/git-status`);if(I.ok){const j=await I.json();Q(j)}}catch{}};M();const $=setInterval(M,3e4);return()=>clearInterval($)},[t.id,T]),X.useEffect(()=>{const M=$=>{k.current&&!k.current.contains($.target)&&c(null)};if(o)return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[o]);const E=M=>{M.preventDefault(),c({x:M.clientX,y:M.clientY})},C=()=>{c(null),i?.()},P=()=>{c(null),f(!0)},L=()=>{f(!1),r?.(v)},B=()=>{c(null),S(t.nickname||""),m(!0)},N=()=>{m(!1),s?.(x.trim())};return g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:n,onContextMenu:E,className:`p-4 rounded-lg border-2 transition-all text-left ${nye[t.state]} ${e?"bg-[var(--accent)]/20 ring-2 ring-[var(--accent)]":"bg-[var(--bg-secondary)] hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"font-semibold",children:t.nickname||t.agent}),t.nickname&&g.jsx("span",{className:"text-[10px] text-[var(--text-secondary)]",children:t.agent})]}),t.is_leader&&g.jsx(ng,{size:14,className:"text-yellow-500"})]}),g.jsx(a,{size:16,className:t.state==="running"?"text-green-500":"text-[var(--text-secondary)]"})]}),g.jsxs("div",{className:"text-xs text-[var(--text-secondary)] space-y-1",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Status"}),g.jsx("span",{className:`capitalize ${t.state==="running"?"text-green-400":""}`,children:t.state})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Runs"}),g.jsx("span",{children:t.run_count||0})]}),_&&!_.error&&g.jsxs("div",{className:"mt-2 pt-2 border-t border-[var(--border)]",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(m6,{size:10}),g.jsx("span",{className:"font-mono text-[10px]",children:_.branch})]}),(_.ahead>0||_.behind>0)&&g.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[_.ahead>0&&g.jsxs("span",{className:"flex items-center text-green-400",children:[g.jsx(c6,{size:10}),_.ahead]}),_.behind>0&&g.jsxs("span",{className:"flex items-center text-orange-400",children:[g.jsx(o6,{size:10}),_.behind]})]})]}),!_.clean&&g.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[_.modified>0&&g.jsxs("span",{className:"flex items-center gap-0.5 text-yellow-400",title:"Modified",children:[g.jsx(p6,{size:10}),_.modified]}),_.added+_.untracked>0&&g.jsxs("span",{className:"flex items-center gap-0.5 text-green-400",title:"Added/New",children:[g.jsx(TF,{size:10}),_.added+_.untracked]}),_.deleted>0&&g.jsxs("span",{className:"flex items-center gap-0.5 text-red-400",title:"Deleted",children:[g.jsx(PF,{size:10}),_.deleted]})]}),_.clean&&g.jsx("span",{className:"text-[10px] text-green-400",children:"Clean"})]}),t.current_task&&g.jsx("div",{className:"mt-2 truncate text-[var(--text-primary)]",children:t.current_task})]})]}),o&&g.jsx("div",{ref:k,className:"fixed z-50 bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-xl py-1 min-w-[160px]",style:{left:o.x,top:o.y},children:!i&&!r?g.jsx("div",{className:"px-3 py-2 text-sm text-[var(--text-secondary)]",children:"Agent not registered in DB"}):g.jsxs(g.Fragment,{children:[!t.is_leader&&i&&g.jsxs("button",{onClick:C,className:"w-full px-3 py-2 text-left text-sm flex items-center gap-2 hover:bg-[var(--bg-tertiary)] transition-colors",children:[g.jsx(ng,{size:14,className:"text-yellow-500"}),"Set as Leader"]}),t.is_leader&&g.jsxs("div",{className:"px-3 py-2 text-sm text-[var(--text-secondary)] flex items-center gap-2",children:[g.jsx(ng,{size:14,className:"text-yellow-500"}),"Current Leader"]}),s&&g.jsxs("button",{onClick:B,className:"w-full px-3 py-2 text-left text-sm flex items-center gap-2 hover:bg-[var(--bg-tertiary)] transition-colors",children:[g.jsx(LO,{size:14}),t.nickname?"Edit Nickname":"Set Nickname"]}),g.jsx("div",{className:"border-t border-[var(--border)] my-1"}),g.jsxs("button",{onClick:P,disabled:t.is_leader||!r,className:`w-full px-3 py-2 text-left text-sm flex items-center gap-2 transition-colors ${t.is_leader||!r?"text-[var(--text-secondary)] cursor-not-allowed":"text-red-400 hover:bg-red-900/20"}`,children:[g.jsx(Ji,{size:14}),"Remove Agent"]})]})}),u&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[400px] p-4",children:[g.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Remove Agent"}),g.jsxs("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:["Are you sure you want to remove ",g.jsx("strong",{children:t.agent}),"?"]}),g.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:v,onChange:M=>y(M.target.checked),className:"w-4 h-4 rounded border-[var(--border)] bg-[var(--bg-tertiary)]"}),g.jsx("span",{className:"text-sm",children:"Also remove git worktree"})]}),!v&&g.jsx("p",{className:"text-xs text-yellow-500 mb-4",children:"The worktree will remain on disk and can be re-imported later."}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded text-sm font-medium transition-colors",children:"Remove"})]})]})}),d&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[350px] p-4",children:[g.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Set Nickname"}),g.jsxs("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:["Give ",g.jsx("strong",{children:t.agent})," a friendly name (display only)"]}),g.jsx("input",{type:"text",value:x,onChange:M=>S(M.target.value),placeholder:"Enter nickname...",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm mb-4 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&N(),M.key==="Escape"&&m(!1)}}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsx("button",{onClick:N,className:"px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium transition-colors",children:"Save"})]})]})})]})}function sye({projectId:t,value:e,onChange:n,onClose:i}){const[r,s]=X.useState([]),[a,o]=X.useState(e),[c,u]=X.useState(""),[f,d]=X.useState(!1),[m,v]=X.useState(""),y=async T=>{d(!0),v("");try{const E=T?`?subpath=${encodeURIComponent(T)}`:"",C=await fetch(`/api/projects/${t}/modules${E}`);if(!C.ok){const L=await C.json();throw new Error(L.detail||"Failed to load modules")}const P=await C.json();s(P.modules),u(P.current_path||"")}catch(E){v(E.message||"Failed to load modules")}finally{d(!1)}};X.useEffect(()=>{y("")},[t]);const x=T=>{y(T)},S=()=>{if(!c)return;const T=c.split("/");T.pop();const E=T.join("/");y(E)},_=T=>{o(T)},Q=()=>{n(a),i()},k=()=>{c&&o(c)};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[500px] max-w-[95vw] max-h-[70vh] flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Select Module/Domain"}),g.jsx("button",{onClick:i,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:g.jsx(li,{size:20})})]}),g.jsx("div",{className:"px-4 py-2 border-b border-[var(--border)] flex items-center gap-2 text-sm",children:c?g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:S,className:"flex items-center gap-1 px-2 py-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors text-[var(--text-secondary)]",children:[g.jsx(l6,{size:16}),"Back"]}),g.jsx("span",{className:"text-[var(--text-secondary)]",children:"/"}),g.jsx("span",{className:"text-[var(--accent)] font-medium truncate",children:c}),g.jsxs("button",{onClick:k,className:"ml-auto flex items-center gap-1 px-2 py-1 bg-[var(--accent)]/20 hover:bg-[var(--accent)]/30 rounded text-[var(--accent)] text-xs",title:"Select this folder",children:[g.jsx(hl,{size:14}),"Select this folder"]})]}):g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Project root"})}),m&&g.jsx("div",{className:"px-4 py-2 bg-red-900/30 text-red-200 text-sm",children:m}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2 min-h-[200px]",children:f?g.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"Loading..."}):r.length===0?g.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"No subdirectories in this folder"}):g.jsx("div",{className:"space-y-0.5",children:r.map(T=>g.jsxs("div",{className:`flex items-center gap-2 rounded transition-colors ${a===T.relative_path?"bg-[var(--accent)]/20 border border-[var(--accent)]":"hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsxs("button",{onClick:()=>_(T.relative_path),className:"flex-1 flex items-center gap-3 px-3 py-2.5 text-left min-w-0",children:[g.jsx(QT,{size:18,className:"text-yellow-500 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"font-medium truncate",children:T.name}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)] truncate",children:T.relative_path})]}),a===T.relative_path&&g.jsx(_f,{size:16,className:"text-[var(--accent)] flex-shrink-0"})]}),g.jsx("button",{onClick:()=>x(T.relative_path),className:"p-2 hover:bg-[var(--bg-tertiary)] rounded transition-colors text-[var(--text-secondary)] hover:text-white",title:"Open folder",children:g.jsx(Cl,{size:18})})]},T.path))})}),g.jsxs("div",{className:"p-4 border-t border-[var(--border)] flex items-center justify-between",children:[g.jsx("div",{className:"text-sm text-[var(--text-secondary)] min-w-0 flex-1",children:a?g.jsxs("span",{className:"truncate block",children:["Selected: ",g.jsx("code",{className:"bg-[var(--bg-tertiary)] px-1 rounded",children:a})]}):g.jsx("span",{children:"Click a folder to select, or use arrow to browse into it"})}),g.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[g.jsx("button",{onClick:i,className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsxs("button",{onClick:Q,disabled:!a,className:"flex items-center gap-2 px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium disabled:opacity-50 transition-opacity",children:[g.jsx(_f,{size:16}),"Select"]})]})]})]})})}function aye({onAgentSelect:t,selectedAgent:e}){const[n,i]=X.useState(!1),[r,s]=X.useState(!1),[a,o]=X.useState(null),{agentStates:c}=Ou(),{agents:u,activeProject:f,createAgent:d,syncWorktrees:m,setLeader:v,deleteAgent:y,updateAgent:x}=Ei(),S=async()=>{if(!(!f||r)){s(!0),o(null);try{const C=await m(f.id);C.created>0?o(`Imported ${C.created} worktree(s)`):o("No new worktrees found"),setTimeout(()=>o(null),3e3)}catch(C){o(C.message||"Sync failed")}finally{s(!1)}}},_=u.map(C=>({id:C.id,agent:C.name,state:c[C.name]?.state||"idle",run_count:c[C.name]?.run_count||0,current_task:c[C.name]?.current_task,is_leader:C.is_leader,nickname:C.nickname}));Object.values(c).forEach(C=>{C.agent&&!_.find(P=>P.agent===C.agent)&&_.push({...C,id:void 0})});const Q=async(C,P)=>{f&&(await d(f.id,C,P),i(!1))},k=async C=>{if(f)try{await v(f.id,C)}catch(P){console.error("Failed to set leader:",P.message)}},T=async(C,P)=>{if(f)try{await y(f.id,C,P)}catch(L){console.error("Failed to remove agent:",L.message)}},E=async(C,P)=>{if(f)try{await x(f.id,C,{nickname:P||void 0})}catch(L){console.error("Failed to update nickname:",L.message)}};return g.jsxs("div",{className:"p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-sm font-medium text-[var(--text-secondary)]",children:"Agents"}),g.jsxs("div",{className:"flex items-center gap-2",children:[a&&g.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:a}),g.jsxs("button",{onClick:S,disabled:r||!f,className:"flex items-center gap-1 px-2 py-1 text-xs text-[var(--text-secondary)] hover:text-[var(--accent)] hover:bg-[var(--bg-tertiary)] rounded transition-colors disabled:opacity-50",title:"Import existing git worktrees as agents",children:[g.jsx(Ti,{size:14,className:r?"animate-spin":""}),"Sync Worktrees"]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:[_.map(C=>g.jsx(rye,{agent:C,isSelected:e===C.agent,onClick:()=>t(C.agent),onSetLeader:C.id?()=>k(C.id):void 0,onRemove:C.id?P=>T(C.id,P):void 0,onUpdateNickname:C.id?P=>E(C.id,P):void 0},C.agent)),g.jsxs("button",{onClick:()=>i(!0),className:"p-4 rounded-lg border-2 border-dashed border-[var(--border)] hover:border-[var(--accent)] transition-colors flex flex-col items-center justify-center gap-2 text-[var(--text-secondary)] hover:text-[var(--accent)]",children:[g.jsx(vo,{size:24}),g.jsx("span",{className:"text-sm",children:"Add Agent"})]})]}),n&&f&&g.jsx(oye,{onClose:()=>i(!1),onAdd:Q,projectId:f.id})]})}function oye({onClose:t,onAdd:e,projectId:n}){const[i,r]=X.useState(""),[s,a]=X.useState(""),[o,c]=X.useState(!1),[u,f]=X.useState(!1),[d,m]=X.useState(""),v=async y=>{if(y.preventDefault(),!i.trim()){m("Name is required");return}if(!s.trim()){m("Domain is required - select a module folder");return}f(!0),m("");try{await e(i.trim(),s.trim())}catch(x){m(x.message||"Failed to create agent")}finally{f(!1)}};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[400px]",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(KG,{size:20,className:"text-[var(--accent)]"}),g.jsx("h2",{className:"text-lg font-semibold",children:"Add Agent"})]}),g.jsx("button",{onClick:t,className:"text-[var(--text-secondary)] hover:text-white text-xl",children:""})]}),g.jsxs("form",{onSubmit:v,className:"p-4 space-y-4",children:[d&&g.jsx("div",{className:"p-3 bg-red-900/30 border border-red-800 rounded text-red-200 text-sm",children:d}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Agent Name"}),g.jsx("input",{type:"text",value:i,onChange:y=>r(y.target.value),placeholder:"e.g., api, frontend, mobile",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)]",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Domain Module"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("div",{className:"flex-1 px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm truncate",children:s||g.jsx("span",{className:"text-[var(--text-secondary)]",children:"No module selected"})}),g.jsxs("button",{type:"button",onClick:()=>c(!0),className:"flex items-center gap-2 px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded hover:bg-[var(--bg-secondary)] transition-colors",children:[g.jsx(hl,{size:16}),"Browse"]})]}),g.jsx("p",{className:"text-xs text-[var(--text-secondary)] mt-1",children:"Select the module folder this agent will be responsible for"})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:u||!i.trim()||!s.trim(),className:"px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium disabled:opacity-50 transition-opacity",children:u?"Creating...":"Add Agent"})]})]}),o&&g.jsx(sye,{projectId:n,value:s,onChange:y=>{a(y),i.trim()||r(y)},onClose:()=>c(!1)})]})})}function pn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=pn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var lye={value:()=>{}};function d0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Qg(n)}function Qg(t){this._=t}function cye(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Qg.prototype=d0.prototype={constructor:Qg,on:function(t,e){var n=this._,i=cye(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=uye(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=O3(n[r],t.name,e);else if(e==null)for(r in n)n[r]=O3(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Qg(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function uye(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function O3(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=lye,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var hT="http://www.w3.org/1999/xhtml";const v3={svg:"http://www.w3.org/2000/svg",xhtml:hT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function p0(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),v3.hasOwnProperty(e)?{space:v3[e],local:t}:t}function hye(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hT&&e.documentElement.namespaceURI===hT?e.createElement(t):e.createElementNS(n,t)}}function fye(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function AZ(t){var e=p0(t);return(e.local?fye:hye)(e)}function dye(){}function cE(t){return t==null?dye:function(){return this.querySelector(t)}}function pye(t){typeof t!="function"&&(t=cE(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,o=i[r]=new Array(a),c,u,f=0;f<a;++f)(c=s[f])&&(u=t.call(c,c.__data__,f,s))&&("__data__"in c&&(u.__data__=c.__data__),o[f]=u);return new er(i,this._parents)}function mye(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function gye(){return[]}function RZ(t){return t==null?gye:function(){return this.querySelectorAll(t)}}function Oye(t){return function(){return mye(t.apply(this,arguments))}}function vye(t){typeof t=="function"?t=Oye(t):t=RZ(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&(i.push(t.call(c,c.__data__,u,a)),r.push(c));return new er(i,r)}function $Z(t){return function(){return this.matches(t)}}function NZ(t){return function(e){return e.matches(t)}}var yye=Array.prototype.find;function xye(t){return function(){return yye.call(this.children,t)}}function bye(){return this.firstElementChild}function _ye(t){return this.select(t==null?bye:xye(typeof t=="function"?t:NZ(t)))}var Sye=Array.prototype.filter;function wye(){return Array.from(this.children)}function kye(t){return function(){return Sye.call(this.children,t)}}function Cye(t){return this.selectAll(t==null?wye:kye(typeof t=="function"?t:NZ(t)))}function Tye(t){typeof t!="function"&&(t=$Z(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,o=i[r]=[],c,u=0;u<a;++u)(c=s[u])&&t.call(c,c.__data__,u,s)&&o.push(c);return new er(i,this._parents)}function MZ(t){return new Array(t.length)}function Qye(){return new er(this._enter||this._groups.map(MZ),this._parents)}function TO(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}TO.prototype={constructor:TO,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Eye(t){return function(){return t}}function Pye(t,e,n,i,r,s){for(var a=0,o,c=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):n[a]=new TO(t,s[a]);for(;a<c;++a)(o=e[a])&&(r[a]=o)}function Aye(t,e,n,i,r,s,a){var o,c,u=new Map,f=e.length,d=s.length,m=new Array(f),v;for(o=0;o<f;++o)(c=e[o])&&(m[o]=v=a.call(c,c.__data__,o,e)+"",u.has(v)?r[o]=c:u.set(v,c));for(o=0;o<d;++o)v=a.call(t,s[o],o,s)+"",(c=u.get(v))?(i[o]=c,c.__data__=s[o],u.delete(v)):n[o]=new TO(t,s[o]);for(o=0;o<f;++o)(c=e[o])&&u.get(m[o])===c&&(r[o]=c)}function Rye(t){return t.__data__}function $ye(t,e){if(!arguments.length)return Array.from(this,Rye);var n=e?Aye:Pye,i=this._parents,r=this._groups;typeof t!="function"&&(t=Eye(t));for(var s=r.length,a=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var f=i[u],d=r[u],m=d.length,v=Nye(t.call(f,f&&f.__data__,u,i)),y=v.length,x=o[u]=new Array(y),S=a[u]=new Array(y),_=c[u]=new Array(m);n(f,d,x,S,_,v,e);for(var Q=0,k=0,T,E;Q<y;++Q)if(T=x[Q]){for(Q>=k&&(k=Q+1);!(E=S[k])&&++k<y;);T._next=E||null}}return a=new er(a,i),a._enter=o,a._exit=c,a}function Nye(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mye(){return new er(this._exit||this._groups.map(MZ),this._parents)}function jye(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function zye(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var u=n[c],f=i[c],d=u.length,m=o[c]=new Array(d),v,y=0;y<d;++y)(v=u[y]||f[y])&&(m[y]=v);for(;c<r;++c)o[c]=n[c];return new er(o,this._parents)}function Dye(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Lye(t){t||(t=qye);function e(d,m){return d&&m?t(d.__data__,m.__data__):!d-!m}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,c=r[s]=new Array(o),u,f=0;f<o;++f)(u=a[f])&&(c[f]=u);c.sort(e)}return new er(r,this._parents).order()}function qye(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Bye(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Iye(){return Array.from(this)}function Xye(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function Zye(){let t=0;for(const e of this)++t;return t}function Vye(){return!this.node()}function Wye(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,o;s<a;++s)(o=r[s])&&t.call(o,o.__data__,s,r);return this}function Uye(t){return function(){this.removeAttribute(t)}}function Hye(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yye(t,e){return function(){this.setAttribute(t,e)}}function Fye(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Gye(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Kye(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Jye(t,e){var n=p0(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Hye:Uye:typeof e=="function"?n.local?Kye:Gye:n.local?Fye:Yye)(n,e))}function jZ(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function exe(t){return function(){this.style.removeProperty(t)}}function txe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function nxe(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function ixe(t,e,n){return arguments.length>1?this.each((e==null?exe:typeof e=="function"?nxe:txe)(t,e,n??"")):ou(this.node(),t)}function ou(t,e){return t.style.getPropertyValue(e)||jZ(t).getComputedStyle(t,null).getPropertyValue(e)}function rxe(t){return function(){delete this[t]}}function sxe(t,e){return function(){this[t]=e}}function axe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function oxe(t,e){return arguments.length>1?this.each((e==null?rxe:typeof e=="function"?axe:sxe)(t,e)):this.node()[t]}function zZ(t){return t.trim().split(/^|\s+/)}function uE(t){return t.classList||new DZ(t)}function DZ(t){this._node=t,this._names=zZ(t.getAttribute("class")||"")}DZ.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function LZ(t,e){for(var n=uE(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function qZ(t,e){for(var n=uE(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function lxe(t){return function(){LZ(this,t)}}function cxe(t){return function(){qZ(this,t)}}function uxe(t,e){return function(){(e.apply(this,arguments)?LZ:qZ)(this,t)}}function hxe(t,e){var n=zZ(t+"");if(arguments.length<2){for(var i=uE(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?uxe:e?lxe:cxe)(n,e))}function fxe(){this.textContent=""}function dxe(t){return function(){this.textContent=t}}function pxe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function mxe(t){return arguments.length?this.each(t==null?fxe:(typeof t=="function"?pxe:dxe)(t)):this.node().textContent}function gxe(){this.innerHTML=""}function Oxe(t){return function(){this.innerHTML=t}}function vxe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function yxe(t){return arguments.length?this.each(t==null?gxe:(typeof t=="function"?vxe:Oxe)(t)):this.node().innerHTML}function xxe(){this.nextSibling&&this.parentNode.appendChild(this)}function bxe(){return this.each(xxe)}function _xe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sxe(){return this.each(_xe)}function wxe(t){var e=typeof t=="function"?t:AZ(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kxe(){return null}function Cxe(t,e){var n=typeof t=="function"?t:AZ(t),i=e==null?kxe:typeof e=="function"?e:cE(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Txe(){var t=this.parentNode;t&&t.removeChild(this)}function Qxe(){return this.each(Txe)}function Exe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Pxe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Axe(t){return this.select(t?Pxe:Exe)}function Rxe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $xe(t){return function(e){t.call(this,e,this.__data__)}}function Nxe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Mxe(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function jxe(t,e,n){return function(){var i=this.__on,r,s=$xe(e);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function zxe(t,e,n){var i=Nxe(t+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,f;c<u;++c)for(r=0,f=o[c];r<s;++r)if((a=i[r]).type===f.type&&a.name===f.name)return f.value}return}for(o=e?jxe:Mxe,r=0;r<s;++r)this.each(o(i[r],e,n));return this}function BZ(t,e,n){var i=jZ(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Dxe(t,e){return function(){return BZ(this,t,e)}}function Lxe(t,e){return function(){return BZ(this,t,e.apply(this,arguments))}}function qxe(t,e){return this.each((typeof e=="function"?Lxe:Dxe)(t,e))}function*Bxe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var IZ=[null];function er(t,e){this._groups=t,this._parents=e}function Ed(){return new er([[document.documentElement]],IZ)}function Ixe(){return this}er.prototype=Ed.prototype={constructor:er,select:pye,selectAll:vye,selectChild:_ye,selectChildren:Cye,filter:Tye,data:$ye,enter:Qye,exit:Mye,join:jye,merge:zye,selection:Ixe,order:Dye,sort:Lye,call:Bye,nodes:Iye,node:Xye,size:Zye,empty:Vye,each:Wye,attr:Jye,style:ixe,property:oxe,classed:hxe,text:mxe,html:yxe,raise:bxe,lower:Sxe,append:wxe,insert:Cxe,remove:Qxe,clone:Axe,datum:Rxe,on:zxe,dispatch:qxe,[Symbol.iterator]:Bxe};function Fi(t){return typeof t=="string"?new er([[document.querySelector(t)]],[document.documentElement]):new er([[t]],IZ)}function Xxe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Er(t,e){if(t=Xxe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Zxe={passive:!1},Yf={capture:!0,passive:!1};function Rb(t){t.stopImmediatePropagation()}function Wc(t){t.preventDefault(),t.stopImmediatePropagation()}function XZ(t){var e=t.document.documentElement,n=Fi(t).on("dragstart.drag",Wc,Yf);"onselectstart"in e?n.on("selectstart.drag",Wc,Yf):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ZZ(t,e){var n=t.document.documentElement,i=Fi(t).on("dragstart.drag",null);e&&(i.on("click.drag",Wc,Yf),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Zm=t=>()=>t;function fT(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:s,x:a,y:o,dx:c,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}fT.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Vxe(t){return!t.ctrlKey&&!t.button}function Wxe(){return this.parentNode}function Uxe(t,e){return e??{x:t.x,y:t.y}}function Hxe(){return navigator.maxTouchPoints||"ontouchstart"in this}function VZ(){var t=Vxe,e=Wxe,n=Uxe,i=Hxe,r={},s=d0("start","drag","end"),a=0,o,c,u,f,d=0;function m(T){T.on("mousedown.drag",v).filter(i).on("touchstart.drag",S).on("touchmove.drag",_,Zxe).on("touchend.drag touchcancel.drag",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(T,E){if(!(f||!t.call(this,T,E))){var C=k(this,e.call(this,T,E),T,E,"mouse");C&&(Fi(T.view).on("mousemove.drag",y,Yf).on("mouseup.drag",x,Yf),XZ(T.view),Rb(T),u=!1,o=T.clientX,c=T.clientY,C("start",T))}}function y(T){if(Wc(T),!u){var E=T.clientX-o,C=T.clientY-c;u=E*E+C*C>d}r.mouse("drag",T)}function x(T){Fi(T.view).on("mousemove.drag mouseup.drag",null),ZZ(T.view,u),Wc(T),r.mouse("end",T)}function S(T,E){if(t.call(this,T,E)){var C=T.changedTouches,P=e.call(this,T,E),L=C.length,B,N;for(B=0;B<L;++B)(N=k(this,P,T,E,C[B].identifier,C[B]))&&(Rb(T),N("start",T,C[B]))}}function _(T){var E=T.changedTouches,C=E.length,P,L;for(P=0;P<C;++P)(L=r[E[P].identifier])&&(Wc(T),L("drag",T,E[P]))}function Q(T){var E=T.changedTouches,C=E.length,P,L;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),P=0;P<C;++P)(L=r[E[P].identifier])&&(Rb(T),L("end",T,E[P]))}function k(T,E,C,P,L,B){var N=s.copy(),M=Er(B||C,E),$,I,j;if((j=n.call(T,new fT("beforestart",{sourceEvent:C,target:m,identifier:L,active:a,x:M[0],y:M[1],dx:0,dy:0,dispatch:N}),P))!=null)return $=j.x-M[0]||0,I=j.y-M[1]||0,function D(R,W,U){var G=M,q;switch(R){case"start":r[L]=D,q=a++;break;case"end":delete r[L],--a;case"drag":M=Er(U||W,E),q=a;break}N.call(R,T,new fT(R,{sourceEvent:W,subject:j,target:m,identifier:L,active:q,x:M[0]+$,y:M[1]+I,dx:M[0]-G[0],dy:M[1]-G[1],dispatch:N}),P)}}return m.filter=function(T){return arguments.length?(t=typeof T=="function"?T:Zm(!!T),m):t},m.container=function(T){return arguments.length?(e=typeof T=="function"?T:Zm(T),m):e},m.subject=function(T){return arguments.length?(n=typeof T=="function"?T:Zm(T),m):n},m.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:Zm(!!T),m):i},m.on=function(){var T=s.on.apply(s,arguments);return T===s?m:T},m.clickDistance=function(T){return arguments.length?(d=(T=+T)*T,m):Math.sqrt(d)},m}function hE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function WZ(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Pd(){}var Ff=.7,QO=1/Ff,Uc="\\s*([+-]?\\d+)\\s*",Gf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yxe=/^#([0-9a-f]{3,8})$/,Fxe=new RegExp(`^rgb\\(${Uc},${Uc},${Uc}\\)$`),Gxe=new RegExp(`^rgb\\(${ps},${ps},${ps}\\)$`),Kxe=new RegExp(`^rgba\\(${Uc},${Uc},${Uc},${Gf}\\)$`),Jxe=new RegExp(`^rgba\\(${ps},${ps},${ps},${Gf}\\)$`),ebe=new RegExp(`^hsl\\(${Gf},${ps},${ps}\\)$`),tbe=new RegExp(`^hsla\\(${Gf},${ps},${ps},${Gf}\\)$`),y3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hE(Pd,_l,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:x3,formatHex:x3,formatHex8:nbe,formatHsl:ibe,formatRgb:b3,toString:b3});function x3(){return this.rgb().formatHex()}function nbe(){return this.rgb().formatHex8()}function ibe(){return UZ(this).formatHsl()}function b3(){return this.rgb().formatRgb()}function _l(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Yxe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_3(e):n===3?new Ci(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Vm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Vm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Fxe.exec(t))?new Ci(e[1],e[2],e[3],1):(e=Gxe.exec(t))?new Ci(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Kxe.exec(t))?Vm(e[1],e[2],e[3],e[4]):(e=Jxe.exec(t))?Vm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ebe.exec(t))?k3(e[1],e[2]/100,e[3]/100,1):(e=tbe.exec(t))?k3(e[1],e[2]/100,e[3]/100,e[4]):y3.hasOwnProperty(t)?_3(y3[t]):t==="transparent"?new Ci(NaN,NaN,NaN,0):null}function _3(t){return new Ci(t>>16&255,t>>8&255,t&255,1)}function Vm(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ci(t,e,n,i)}function rbe(t){return t instanceof Pd||(t=_l(t)),t?(t=t.rgb(),new Ci(t.r,t.g,t.b,t.opacity)):new Ci}function dT(t,e,n,i){return arguments.length===1?rbe(t):new Ci(t,e,n,i??1)}function Ci(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}hE(Ci,dT,WZ(Pd,{brighter(t){return t=t==null?QO:Math.pow(QO,t),new Ci(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ff:Math.pow(Ff,t),new Ci(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ci(cl(this.r),cl(this.g),cl(this.b),EO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S3,formatHex:S3,formatHex8:sbe,formatRgb:w3,toString:w3}));function S3(){return`#${al(this.r)}${al(this.g)}${al(this.b)}`}function sbe(){return`#${al(this.r)}${al(this.g)}${al(this.b)}${al((isNaN(this.opacity)?1:this.opacity)*255)}`}function w3(){const t=EO(this.opacity);return`${t===1?"rgb(":"rgba("}${cl(this.r)}, ${cl(this.g)}, ${cl(this.b)}${t===1?")":`, ${t})`}`}function EO(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function al(t){return t=cl(t),(t<16?"0":"")+t.toString(16)}function k3(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ar(t,e,n,i)}function UZ(t){if(t instanceof Ar)return new Ar(t.h,t.s,t.l,t.opacity);if(t instanceof Pd||(t=_l(t)),!t)return new Ar;if(t instanceof Ar)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,c=(s+r)/2;return o?(e===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-e)/o+2:a=(e-n)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new Ar(a,o,c,t.opacity)}function abe(t,e,n,i){return arguments.length===1?UZ(t):new Ar(t,e,n,i??1)}function Ar(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}hE(Ar,abe,WZ(Pd,{brighter(t){return t=t==null?QO:Math.pow(QO,t),new Ar(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ff:Math.pow(Ff,t),new Ar(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ci($b(t>=240?t-240:t+120,r,i),$b(t,r,i),$b(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ar(C3(this.h),Wm(this.s),Wm(this.l),EO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=EO(this.opacity);return`${t===1?"hsl(":"hsla("}${C3(this.h)}, ${Wm(this.s)*100}%, ${Wm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function C3(t){return t=(t||0)%360,t<0?t+360:t}function Wm(t){return Math.max(0,Math.min(1,t||0))}function $b(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fE=t=>()=>t;function obe(t,e){return function(n){return t+n*e}}function lbe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function cbe(t){return(t=+t)==1?HZ:function(e,n){return n-e?lbe(e,n,t):fE(isNaN(e)?n:e)}}function HZ(t,e){var n=e-t;return n?obe(t,n):fE(isNaN(t)?e:t)}const PO=(function t(e){var n=cbe(e);function i(r,s){var a=n((r=dT(r)).r,(s=dT(s)).r),o=n(r.g,s.g),c=n(r.b,s.b),u=HZ(r.opacity,s.opacity);return function(f){return r.r=a(f),r.g=o(f),r.b=c(f),r.opacity=u(f),r+""}}return i.gamma=t,i})(1);function ube(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function hbe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fbe(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=xf(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<i;++a)s[a]=r[a](o);return s}}function dbe(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function is(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pbe(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=xf(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var pT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nb=new RegExp(pT.source,"g");function mbe(t){return function(){return t}}function gbe(t){return function(e){return t(e)+""}}function YZ(t,e){var n=pT.lastIndex=Nb.lastIndex=0,i,r,s,a=-1,o=[],c=[];for(t=t+"",e=e+"";(i=pT.exec(t))&&(r=Nb.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,c.push({i:a,x:is(i,r)})),n=Nb.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?gbe(c[0].x):mbe(e):(e=c.length,function(u){for(var f=0,d;f<e;++f)o[(d=c[f]).i]=d.x(u);return o.join("")})}function xf(t,e){var n=typeof e,i;return e==null||n==="boolean"?fE(e):(n==="number"?is:n==="string"?(i=_l(e))?(e=i,PO):YZ:e instanceof _l?PO:e instanceof Date?dbe:hbe(e)?ube:Array.isArray(e)?fbe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pbe:is)(t,e)}var T3=180/Math.PI,mT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function FZ(t,e,n,i,r,s){var a,o,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,c/=o),t*i<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*T3,skewX:Math.atan(c)*T3,scaleX:a,scaleY:o}}var Um;function Obe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?mT:FZ(e.a,e.b,e.c,e.d,e.e,e.f)}function vbe(t){return t==null||(Um||(Um=document.createElementNS("http://www.w3.org/2000/svg","g")),Um.setAttribute("transform",t),!(t=Um.transform.baseVal.consolidate()))?mT:(t=t.matrix,FZ(t.a,t.b,t.c,t.d,t.e,t.f))}function GZ(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,f,d,m,v,y){if(u!==d||f!==m){var x=v.push("translate(",null,e,null,n);y.push({i:x-4,x:is(u,d)},{i:x-2,x:is(f,m)})}else(d||m)&&v.push("translate("+d+e+m+n)}function a(u,f,d,m){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),m.push({i:d.push(r(d)+"rotate(",null,i)-2,x:is(u,f)})):f&&d.push(r(d)+"rotate("+f+i)}function o(u,f,d,m){u!==f?m.push({i:d.push(r(d)+"skewX(",null,i)-2,x:is(u,f)}):f&&d.push(r(d)+"skewX("+f+i)}function c(u,f,d,m,v,y){if(u!==d||f!==m){var x=v.push(r(v)+"scale(",null,",",null,")");y.push({i:x-4,x:is(u,d)},{i:x-2,x:is(f,m)})}else(d!==1||m!==1)&&v.push(r(v)+"scale("+d+","+m+")")}return function(u,f){var d=[],m=[];return u=t(u),f=t(f),s(u.translateX,u.translateY,f.translateX,f.translateY,d,m),a(u.rotate,f.rotate,d,m),o(u.skewX,f.skewX,d,m),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,m),u=f=null,function(v){for(var y=-1,x=m.length,S;++y<x;)d[(S=m[y]).i]=S.x(v);return d.join("")}}}var ybe=GZ(Obe,"px, ","px)","deg)"),xbe=GZ(vbe,", ",")",")"),bbe=1e-12;function Q3(t){return((t=Math.exp(t))+1/t)/2}function _be(t){return((t=Math.exp(t))-1/t)/2}function Sbe(t){return((t=Math.exp(2*t))-1)/(t+1)}const Eg=(function t(e,n,i){function r(s,a){var o=s[0],c=s[1],u=s[2],f=a[0],d=a[1],m=a[2],v=f-o,y=d-c,x=v*v+y*y,S,_;if(x<bbe)_=Math.log(m/u)/e,S=function(P){return[o+P*v,c+P*y,u*Math.exp(e*P*_)]};else{var Q=Math.sqrt(x),k=(m*m-u*u+i*x)/(2*u*n*Q),T=(m*m-u*u-i*x)/(2*m*n*Q),E=Math.log(Math.sqrt(k*k+1)-k),C=Math.log(Math.sqrt(T*T+1)-T);_=(C-E)/e,S=function(P){var L=P*_,B=Q3(E),N=u/(n*Q)*(B*Sbe(e*L+E)-_be(E));return[o+N*v,c+N*y,u*B/Q3(e*L+E)]}}return S.duration=_*1e3*e/Math.SQRT2,S}return r.rho=function(s){var a=Math.max(.001,+s),o=a*a,c=o*o;return t(a,o,c)},r})(Math.SQRT2,2,4);var lu=0,nf=0,Xh=0,KZ=1e3,AO,rf,RO=0,Sl=0,m0=0,Kf=typeof performance=="object"&&performance.now?performance:Date,JZ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dE(){return Sl||(JZ(wbe),Sl=Kf.now()+m0)}function wbe(){Sl=0}function $O(){this._call=this._time=this._next=null}$O.prototype=eV.prototype={constructor:$O,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?dE():+n)+(e==null?0:+e),!this._next&&rf!==this&&(rf?rf._next=this:AO=this,rf=this),this._call=t,this._time=n,gT()},stop:function(){this._call&&(this._call=null,this._time=1/0,gT())}};function eV(t,e,n){var i=new $O;return i.restart(t,e,n),i}function kbe(){dE(),++lu;for(var t=AO,e;t;)(e=Sl-t._time)>=0&&t._call.call(void 0,e),t=t._next;--lu}function E3(){Sl=(RO=Kf.now())+m0,lu=nf=0;try{kbe()}finally{lu=0,Tbe(),Sl=0}}function Cbe(){var t=Kf.now(),e=t-RO;e>KZ&&(m0-=e,RO=t)}function Tbe(){for(var t,e=AO,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:AO=n);rf=t,gT(i)}function gT(t){if(!lu){nf&&(nf=clearTimeout(nf));var e=t-Sl;e>24?(t<1/0&&(nf=setTimeout(E3,t-Kf.now()-m0)),Xh&&(Xh=clearInterval(Xh))):(Xh||(RO=Kf.now(),Xh=setInterval(Cbe,KZ)),lu=1,JZ(E3))}}function P3(t,e,n){var i=new $O;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Qbe=d0("start","end","cancel","interrupt"),Ebe=[],tV=0,A3=1,OT=2,Pg=3,R3=4,vT=5,Ag=6;function g0(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Pbe(t,n,{name:e,index:i,group:r,on:Qbe,tween:Ebe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:tV})}function pE(t,e){var n=Br(t,e);if(n.state>tV)throw new Error("too late; already scheduled");return n}function ys(t,e){var n=Br(t,e);if(n.state>Pg)throw new Error("too late; already running");return n}function Br(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pbe(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=eV(s,0,n.time);function s(u){n.state=A3,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,d,m,v;if(n.state!==A3)return c();for(f in i)if(v=i[f],v.name===n.name){if(v.state===Pg)return P3(a);v.state===R3?(v.state=Ag,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete i[f]):+f<e&&(v.state=Ag,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete i[f])}if(P3(function(){n.state===Pg&&(n.state=R3,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=OT,n.on.call("start",t,t.__data__,n.index,n.group),n.state===OT){for(n.state=Pg,r=new Array(m=n.tween.length),f=0,d=-1;f<m;++f)(v=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=v);r.length=d+1}}function o(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=vT,1),d=-1,m=r.length;++d<m;)r[d].call(t,f);n.state===vT&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ag,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Rg(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>OT&&i.state<vT,i.state=Ag,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function Abe(t){return this.each(function(){Rg(this,t)})}function Rbe(t,e){var n,i;return function(){var r=ys(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function $be(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=ys(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:e,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===e){r[c]=o;break}c===u&&r.push(o)}s.tween=r}}function Nbe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Br(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Rbe:$be)(n,t,e))}function mE(t,e,n){var i=t._id;return t.each(function(){var r=ys(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Br(r,i).value[e]}}function nV(t,e){var n;return(typeof e=="number"?is:e instanceof _l?PO:(n=_l(e))?(e=n,PO):YZ)(t,e)}function Mbe(t){return function(){this.removeAttribute(t)}}function jbe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zbe(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function Dbe(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function Lbe(t,e,n){var i,r,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,o)))}}function qbe(t,e,n){var i,r,s;return function(){var a,o=n(this),c;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,o)))}}function Bbe(t,e){var n=p0(t),i=n==="transform"?xbe:nV;return this.attrTween(t,typeof e=="function"?(n.local?qbe:Lbe)(n,i,mE(this,"attr."+t,e)):e==null?(n.local?jbe:Mbe)(n):(n.local?Dbe:zbe)(n,i,e))}function Ibe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Xbe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Zbe(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&Xbe(t,s)),n}return r._value=e,r}function Vbe(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&Ibe(t,s)),n}return r._value=e,r}function Wbe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=p0(t);return this.tween(n,(i.local?Zbe:Vbe)(i,e))}function Ube(t,e){return function(){pE(this,t).delay=+e.apply(this,arguments)}}function Hbe(t,e){return e=+e,function(){pE(this,t).delay=e}}function Ybe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ube:Hbe)(e,t)):Br(this.node(),e).delay}function Fbe(t,e){return function(){ys(this,t).duration=+e.apply(this,arguments)}}function Gbe(t,e){return e=+e,function(){ys(this,t).duration=e}}function Kbe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fbe:Gbe)(e,t)):Br(this.node(),e).duration}function Jbe(t,e){if(typeof e!="function")throw new Error;return function(){ys(this,t).ease=e}}function e1e(t){var e=this._id;return arguments.length?this.each(Jbe(e,t)):Br(this.node(),e).ease}function t1e(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ys(this,t).ease=n}}function n1e(t){if(typeof t!="function")throw new Error;return this.each(t1e(this._id,t))}function i1e(t){typeof t!="function"&&(t=$Z(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,o=i[r]=[],c,u=0;u<a;++u)(c=s[u])&&t.call(c,c.__data__,u,s)&&o.push(c);return new ra(i,this._parents,this._name,this._id)}function r1e(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var c=e[o],u=n[o],f=c.length,d=a[o]=new Array(f),m,v=0;v<f;++v)(m=c[v]||u[v])&&(d[v]=m);for(;o<i;++o)a[o]=e[o];return new ra(a,this._parents,this._name,this._id)}function s1e(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function a1e(t,e,n){var i,r,s=s1e(e)?pE:ys;return function(){var a=s(this,t),o=a.on;o!==i&&(r=(i=o).copy()).on(e,n),a.on=r}}function o1e(t,e){var n=this._id;return arguments.length<2?Br(this.node(),n).on.on(t):this.each(a1e(n,t,e))}function l1e(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function c1e(){return this.on("end.remove",l1e(this._id))}function u1e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=cE(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],c=o.length,u=s[a]=new Array(c),f,d,m=0;m<c;++m)(f=o[m])&&(d=t.call(f,f.__data__,m,o))&&("__data__"in f&&(d.__data__=f.__data__),u[m]=d,g0(u[m],e,n,m,u,Br(f,n)));return new ra(s,this._parents,e,n)}function h1e(t){var e=this._name,n=this._id;typeof t!="function"&&(t=RZ(t));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var c=i[o],u=c.length,f,d=0;d<u;++d)if(f=c[d]){for(var m=t.call(f,f.__data__,d,c),v,y=Br(f,n),x=0,S=m.length;x<S;++x)(v=m[x])&&g0(v,e,n,x,m,y);s.push(m),a.push(f)}return new ra(s,a,e,n)}var f1e=Ed.prototype.constructor;function d1e(){return new f1e(this._groups,this._parents)}function p1e(t,e){var n,i,r;return function(){var s=ou(this,t),a=(this.style.removeProperty(t),ou(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function iV(t){return function(){this.style.removeProperty(t)}}function m1e(t,e,n){var i,r=n+"",s;return function(){var a=ou(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function g1e(t,e,n){var i,r,s;return function(){var a=ou(this,t),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(t),ou(this,t))),a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,o))}}function O1e(t,e){var n,i,r,s="style."+e,a="end."+s,o;return function(){var c=ys(this,t),u=c.on,f=c.value[s]==null?o||(o=iV(e)):void 0;(u!==n||r!==f)&&(i=(n=u).copy()).on(a,r=f),c.on=i}}function v1e(t,e,n){var i=(t+="")=="transform"?ybe:nV;return e==null?this.styleTween(t,p1e(t,i)).on("end.style."+t,iV(t)):typeof e=="function"?this.styleTween(t,g1e(t,i,mE(this,"style."+t,e))).each(O1e(this._id,t)):this.styleTween(t,m1e(t,i,e),n).on("end.style."+t,null)}function y1e(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function x1e(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&y1e(t,a,n)),i}return s._value=e,s}function b1e(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,x1e(t,e,n??""))}function _1e(t){return function(){this.textContent=t}}function S1e(t){return function(){var e=t(this);this.textContent=e??""}}function w1e(t){return this.tween("text",typeof t=="function"?S1e(mE(this,"text",t)):_1e(t==null?"":t+""))}function k1e(t){return function(e){this.textContent=t.call(this,e)}}function C1e(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&k1e(r)),e}return i._value=t,i}function T1e(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,C1e(t))}function Q1e(){for(var t=this._name,e=this._id,n=rV(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,u=0;u<o;++u)if(c=a[u]){var f=Br(c,e);g0(c,t,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ra(i,this._parents,t,n)}function E1e(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--r===0&&s()}};n.each(function(){var u=ys(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),u.on=e}),r===0&&s()})}var P1e=0;function ra(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function rV(){return++P1e}var Zs=Ed.prototype;ra.prototype={constructor:ra,select:u1e,selectAll:h1e,selectChild:Zs.selectChild,selectChildren:Zs.selectChildren,filter:i1e,merge:r1e,selection:d1e,transition:Q1e,call:Zs.call,nodes:Zs.nodes,node:Zs.node,size:Zs.size,empty:Zs.empty,each:Zs.each,on:o1e,attr:Bbe,attrTween:Wbe,style:v1e,styleTween:b1e,text:w1e,textTween:T1e,remove:c1e,tween:Nbe,delay:Ybe,duration:Kbe,ease:e1e,easeVarying:n1e,end:E1e,[Symbol.iterator]:Zs[Symbol.iterator]};function A1e(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var R1e={time:null,delay:0,duration:250,ease:A1e};function $1e(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function N1e(t){var e,n;t instanceof ra?(e=t._id,t=t._name):(e=rV(),(n=R1e).time=dE(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,u=0;u<o;++u)(c=a[u])&&g0(c,t,e,u,a,n||$1e(c,e));return new ra(i,this._parents,t,e)}Ed.prototype.interrupt=Abe;Ed.prototype.transition=N1e;const Hm=t=>()=>t;function M1e(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function ea(t,e,n){this.k=t,this.x=e,this.y=n}ea.prototype={constructor:ea,scale:function(t){return t===1?this:new ea(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ea(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var O0=new ea(1,0,0);sV.prototype=ea.prototype;function sV(t){for(;!t.__zoom;)if(!(t=t.parentNode))return O0;return t.__zoom}function Mb(t){t.stopImmediatePropagation()}function Zh(t){t.preventDefault(),t.stopImmediatePropagation()}function j1e(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function z1e(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function $3(){return this.__zoom||O0}function D1e(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function L1e(){return navigator.maxTouchPoints||"ontouchstart"in this}function q1e(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function aV(){var t=j1e,e=z1e,n=q1e,i=D1e,r=L1e,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,c=Eg,u=d0("start","zoom","end"),f,d,m,v=500,y=150,x=0,S=10;function _(j){j.property("__zoom",$3).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",N).filter(r).on("touchstart.zoom",M).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(j,D,R,W){var U=j.selection?j.selection():j;U.property("__zoom",$3),j!==U?E(j,D,R,W):U.interrupt().each(function(){C(this,arguments).event(W).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},_.scaleBy=function(j,D,R,W){_.scaleTo(j,function(){var U=this.__zoom.k,G=typeof D=="function"?D.apply(this,arguments):D;return U*G},R,W)},_.scaleTo=function(j,D,R,W){_.transform(j,function(){var U=e.apply(this,arguments),G=this.__zoom,q=R==null?T(U):typeof R=="function"?R.apply(this,arguments):R,V=G.invert(q),F=typeof D=="function"?D.apply(this,arguments):D;return n(k(Q(G,F),q,V),U,a)},R,W)},_.translateBy=function(j,D,R,W){_.transform(j,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof R=="function"?R.apply(this,arguments):R),e.apply(this,arguments),a)},null,W)},_.translateTo=function(j,D,R,W,U){_.transform(j,function(){var G=e.apply(this,arguments),q=this.__zoom,V=W==null?T(G):typeof W=="function"?W.apply(this,arguments):W;return n(O0.translate(V[0],V[1]).scale(q.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof R=="function"?-R.apply(this,arguments):-R),G,a)},W,U)};function Q(j,D){return D=Math.max(s[0],Math.min(s[1],D)),D===j.k?j:new ea(D,j.x,j.y)}function k(j,D,R){var W=D[0]-R[0]*j.k,U=D[1]-R[1]*j.k;return W===j.x&&U===j.y?j:new ea(j.k,W,U)}function T(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function E(j,D,R,W){j.on("start.zoom",function(){C(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(W).end()}).tween("zoom",function(){var U=this,G=arguments,q=C(U,G).event(W),V=e.apply(U,G),F=R==null?T(V):typeof R=="function"?R.apply(U,G):R,z=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),H=U.__zoom,K=typeof D=="function"?D.apply(U,G):D,ee=c(H.invert(F).concat(z/H.k),K.invert(F).concat(z/K.k));return function(ie){if(ie===1)ie=K;else{var le=ee(ie),ae=z/le[2];ie=new ea(ae,F[0]-le[0]*ae,F[1]-le[1]*ae)}q.zoom(null,ie)}})}function C(j,D,R){return!R&&j.__zooming||new P(j,D)}function P(j,D){this.that=j,this.args=D,this.active=0,this.sourceEvent=null,this.extent=e.apply(j,D),this.taps=0}P.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,D){return this.mouse&&j!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var D=Fi(this.that).datum();u.call(j,this.that,new M1e(j,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:u}),D)}};function L(j,...D){if(!t.apply(this,arguments))return;var R=C(this,D).event(j),W=this.__zoom,U=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,i.apply(this,arguments)))),G=Er(j);if(R.wheel)(R.mouse[0][0]!==G[0]||R.mouse[0][1]!==G[1])&&(R.mouse[1]=W.invert(R.mouse[0]=G)),clearTimeout(R.wheel);else{if(W.k===U)return;R.mouse=[G,W.invert(G)],Rg(this),R.start()}Zh(j),R.wheel=setTimeout(q,y),R.zoom("mouse",n(k(Q(W,U),R.mouse[0],R.mouse[1]),R.extent,a));function q(){R.wheel=null,R.end()}}function B(j,...D){if(m||!t.apply(this,arguments))return;var R=j.currentTarget,W=C(this,D,!0).event(j),U=Fi(j.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",z,!0),G=Er(j,R),q=j.clientX,V=j.clientY;XZ(j.view),Mb(j),W.mouse=[G,this.__zoom.invert(G)],Rg(this),W.start();function F(H){if(Zh(H),!W.moved){var K=H.clientX-q,ee=H.clientY-V;W.moved=K*K+ee*ee>x}W.event(H).zoom("mouse",n(k(W.that.__zoom,W.mouse[0]=Er(H,R),W.mouse[1]),W.extent,a))}function z(H){U.on("mousemove.zoom mouseup.zoom",null),ZZ(H.view,W.moved),Zh(H),W.event(H).end()}}function N(j,...D){if(t.apply(this,arguments)){var R=this.__zoom,W=Er(j.changedTouches?j.changedTouches[0]:j,this),U=R.invert(W),G=R.k*(j.shiftKey?.5:2),q=n(k(Q(R,G),W,U),e.apply(this,D),a);Zh(j),o>0?Fi(this).transition().duration(o).call(E,q,W,j):Fi(this).call(_.transform,q,W,j)}}function M(j,...D){if(t.apply(this,arguments)){var R=j.touches,W=R.length,U=C(this,D,j.changedTouches.length===W).event(j),G,q,V,F;for(Mb(j),q=0;q<W;++q)V=R[q],F=Er(V,this),F=[F,this.__zoom.invert(F),V.identifier],U.touch0?!U.touch1&&U.touch0[2]!==F[2]&&(U.touch1=F,U.taps=0):(U.touch0=F,G=!0,U.taps=1+!!f);f&&(f=clearTimeout(f)),G&&(U.taps<2&&(d=F[0],f=setTimeout(function(){f=null},v)),Rg(this),U.start())}}function $(j,...D){if(this.__zooming){var R=C(this,D).event(j),W=j.changedTouches,U=W.length,G,q,V,F;for(Zh(j),G=0;G<U;++G)q=W[G],V=Er(q,this),R.touch0&&R.touch0[2]===q.identifier?R.touch0[0]=V:R.touch1&&R.touch1[2]===q.identifier&&(R.touch1[0]=V);if(q=R.that.__zoom,R.touch1){var z=R.touch0[0],H=R.touch0[1],K=R.touch1[0],ee=R.touch1[1],ie=(ie=K[0]-z[0])*ie+(ie=K[1]-z[1])*ie,le=(le=ee[0]-H[0])*le+(le=ee[1]-H[1])*le;q=Q(q,Math.sqrt(ie/le)),V=[(z[0]+K[0])/2,(z[1]+K[1])/2],F=[(H[0]+ee[0])/2,(H[1]+ee[1])/2]}else if(R.touch0)V=R.touch0[0],F=R.touch0[1];else return;R.zoom("touch",n(k(q,V,F),R.extent,a))}}function I(j,...D){if(this.__zooming){var R=C(this,D).event(j),W=j.changedTouches,U=W.length,G,q;for(Mb(j),m&&clearTimeout(m),m=setTimeout(function(){m=null},v),G=0;G<U;++G)q=W[G],R.touch0&&R.touch0[2]===q.identifier?delete R.touch0:R.touch1&&R.touch1[2]===q.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(q=Er(q,this),Math.hypot(d[0]-q[0],d[1]-q[1])<S)){var V=Fi(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return _.wheelDelta=function(j){return arguments.length?(i=typeof j=="function"?j:Hm(+j),_):i},_.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Hm(!!j),_):t},_.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:Hm(!!j),_):r},_.extent=function(j){return arguments.length?(e=typeof j=="function"?j:Hm([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),_):e},_.scaleExtent=function(j){return arguments.length?(s[0]=+j[0],s[1]=+j[1],_):[s[0],s[1]]},_.translateExtent=function(j){return arguments.length?(a[0][0]=+j[0][0],a[1][0]=+j[1][0],a[0][1]=+j[0][1],a[1][1]=+j[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(j){return arguments.length?(n=j,_):n},_.duration=function(j){return arguments.length?(o=+j,_):o},_.interpolate=function(j){return arguments.length?(c=j,_):c},_.on=function(){var j=u.on.apply(u,arguments);return j===u?_:j},_.clickDistance=function(j){return arguments.length?(x=(j=+j)*j,_):Math.sqrt(x)},_.tapDistance=function(j){return arguments.length?(S=+j,_):S},_}const Os={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Jf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],oV=["Enter"," ","Escape"],lV={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var cu;(function(t){t.Strict="strict",t.Loose="loose"})(cu||(cu={}));var ul;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ul||(ul={}));var ed;(function(t){t.Partial="partial",t.Full="full"})(ed||(ed={}));const cV={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var eo;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(eo||(eo={}));var td;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(td||(td={}));var je;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(je||(je={}));const N3={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top};function uV(t){return t===null?null:t?"valid":"invalid"}const hV=t=>"id"in t&&"source"in t&&"target"in t,B1e=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),gE=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Ad=(t,e=[0,0])=>{const{width:n,height:i}=fa(t),r=t.origin??e,s=n*r[0],a=i*r[1];return{x:t.position.x-s,y:t.position.y-a}},I1e=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,r)=>{const s=typeof r=="string";let a=!e.nodeLookup&&!s?r:void 0;e.nodeLookup&&(a=s?e.nodeLookup.get(r):gE(r)?r:e.nodeLookup.get(r.id));const o=a?NO(a,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return v0(i,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return y0(n)},Rd=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(r=>{(e.filter===void 0||e.filter(r))&&(n=v0(n,NO(r)),i=!0)}),i?y0(n):{x:0,y:0,width:0,height:0}},OE=(t,e,[n,i,r]=[0,0,1],s=!1,a=!1)=>{const o={...Nd(e,[n,i,r]),width:e.width/r,height:e.height/r},c=[];for(const u of t.values()){const{measured:f,selectable:d=!0,hidden:m=!1}=u;if(a&&!d||m)continue;const v=f.width??u.width??u.initialWidth??null,y=f.height??u.height??u.initialHeight??null,x=nd(o,hu(u)),S=(v??0)*(y??0),_=s&&x>0;(!u.internals.handleBounds||_||x>=S||u.dragging)&&c.push(u)}return c},X1e=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function Z1e(t,e){const n=new Map,i=e?.nodes?new Set(e.nodes.map(r=>r.id)):null;return t.forEach(r=>{r.measured.width&&r.measured.height&&(e?.includeHiddenNodes||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function V1e({nodes:t,width:e,height:n,panZoom:i,minZoom:r,maxZoom:s},a){if(t.size===0)return Promise.resolve(!0);const o=Z1e(t,a),c=Rd(o),u=vE(c,e,n,a?.minZoom??r,a?.maxZoom??s,a?.padding??.1);return await i.setViewport(u,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function fV({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:s}){const a=n.get(t),o=a.parentId?n.get(a.parentId):void 0,{x:c,y:u}=o?o.internals.positionAbsolute:{x:0,y:0},f=a.origin??i;let d=a.extent||r;if(a.extent==="parent"&&!a.expandParent)if(!o)s?.("005",Os.error005());else{const v=o.measured.width,y=o.measured.height;v&&y&&(d=[[c,u],[c+v,u+y]])}else o&&fu(a.extent)&&(d=[[a.extent[0][0]+c,a.extent[0][1]+u],[a.extent[1][0]+c,a.extent[1][1]+u]]);const m=fu(d)?wl(e,d,a.measured):e;return(a.measured.width===void 0||a.measured.height===void 0)&&s?.("015",Os.error015()),{position:{x:m.x-c+(a.measured.width??0)*f[0],y:m.y-u+(a.measured.height??0)*f[1]},positionAbsolute:m}}async function W1e({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:r}){const s=new Set(t.map(m=>m.id)),a=[];for(const m of n){if(m.deletable===!1)continue;const v=s.has(m.id),y=!v&&m.parentId&&a.find(x=>x.id===m.parentId);(v||y)&&a.push(m)}const o=new Set(e.map(m=>m.id)),c=i.filter(m=>m.deletable!==!1),f=X1e(a,c);for(const m of c)o.has(m.id)&&!f.find(y=>y.id===m.id)&&f.push(m);if(!r)return{edges:f,nodes:a};const d=await r({nodes:a,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:a}:{edges:[],nodes:[]}:d}const uu=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),wl=(t={x:0,y:0},e,n)=>({x:uu(t.x,e[0][0],e[1][0]-(n?.width??0)),y:uu(t.y,e[0][1],e[1][1]-(n?.height??0))});function dV(t,e,n){const{width:i,height:r}=fa(n),{x:s,y:a}=n.internals.positionAbsolute;return wl(t,[[s,a],[s+i,a+r]],e)}const M3=(t,e,n)=>t<e?uu(Math.abs(t-e),1,e)/e:t>n?-uu(Math.abs(t-n),1,e)/e:0,pV=(t,e,n=15,i=40)=>{const r=M3(t.x,i,e.width-i)*n,s=M3(t.y,i,e.height-i)*n;return[r,s]},v0=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),yT=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),y0=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),hu=(t,e=[0,0])=>{const{x:n,y:i}=gE(t)?t.internals.positionAbsolute:Ad(t,e);return{x:n,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},NO=(t,e=[0,0])=>{const{x:n,y:i}=gE(t)?t.internals.positionAbsolute:Ad(t,e);return{x:n,y:i,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},mV=(t,e)=>y0(v0(yT(t),yT(e))),nd=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},j3=t=>$r(t.width)&&$r(t.height)&&$r(t.x)&&$r(t.y),$r=t=>!isNaN(t)&&isFinite(t),U1e=(t,e)=>{},$d=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Nd=({x:t,y:e},[n,i,r],s=!1,a=[1,1])=>{const o={x:(t-n)/r,y:(e-i)/r};return s?$d(o,a):o},MO=({x:t,y:e},[n,i,r])=>({x:t*r+n,y:e*r+i});function kc(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function H1e(t,e,n){if(typeof t=="string"||typeof t=="number"){const i=kc(t,n),r=kc(t,e);return{top:i,right:r,bottom:i,left:r,x:r*2,y:i*2}}if(typeof t=="object"){const i=kc(t.top??t.y??0,n),r=kc(t.bottom??t.y??0,n),s=kc(t.left??t.x??0,e),a=kc(t.right??t.x??0,e);return{top:i,right:a,bottom:r,left:s,x:s+a,y:i+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Y1e(t,e,n,i,r,s){const{x:a,y:o}=MO(t,[e,n,i]),{x:c,y:u}=MO({x:t.x+t.width,y:t.y+t.height},[e,n,i]),f=r-c,d=s-u;return{left:Math.floor(a),top:Math.floor(o),right:Math.floor(f),bottom:Math.floor(d)}}const vE=(t,e,n,i,r,s)=>{const a=H1e(s,e,n),o=(e-a.x)/t.width,c=(n-a.y)/t.height,u=Math.min(o,c),f=uu(u,i,r),d=t.x+t.width/2,m=t.y+t.height/2,v=e/2-d*f,y=n/2-m*f,x=Y1e(t,v,y,f,e,n),S={left:Math.min(x.left-a.left,0),top:Math.min(x.top-a.top,0),right:Math.min(x.right-a.right,0),bottom:Math.min(x.bottom-a.bottom,0)};return{x:v-S.left+S.right,y:y-S.top+S.bottom,zoom:f}},id=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function fu(t){return t!=null&&t!=="parent"}function fa(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function gV(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function OV(t,e={width:0,height:0},n,i,r){const s={...t},a=i.get(n);if(a){const o=a.origin||r;s.x+=a.internals.positionAbsolute.x-(e.width??0)*o[0],s.y+=a.internals.positionAbsolute.y-(e.height??0)*o[1]}return s}function z3(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function F1e(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),resolve:t,reject:e}}function G1e(t){return{...lV,...t||{}}}function bf(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:s,y:a}=Nr(t),o=Nd({x:s-(r?.left??0),y:a-(r?.top??0)},i),{x:c,y:u}=n?$d(o,e):o;return{xSnapped:c,ySnapped:u,...o}}const yE=t=>({width:t.offsetWidth,height:t.offsetHeight}),vV=t=>t?.getRootNode?.()||window?.document,K1e=["INPUT","SELECT","TEXTAREA"];function yV(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:K1e.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const xV=t=>"clientX"in t,Nr=(t,e)=>{const n=xV(t),i=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:r-(e?.top??0)}},D3=(t,e,n,i,r)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(a=>{const o=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:t,nodeId:r,position:a.getAttribute("data-handlepos"),x:(o.left-n.left)/i,y:(o.top-n.top)/i,...yE(a)}})};function bV({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:a,targetControlY:o}){const c=t*.125+r*.375+a*.375+n*.125,u=e*.125+s*.375+o*.375+i*.125,f=Math.abs(c-t),d=Math.abs(u-e);return[c,u,f,d]}function Ym(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function L3({pos:t,x1:e,y1:n,x2:i,y2:r,c:s}){switch(t){case je.Left:return[e-Ym(e-i,s),n];case je.Right:return[e+Ym(i-e,s),n];case je.Top:return[e,n-Ym(n-r,s)];case je.Bottom:return[e,n+Ym(r-n,s)]}}function _V({sourceX:t,sourceY:e,sourcePosition:n=je.Bottom,targetX:i,targetY:r,targetPosition:s=je.Top,curvature:a=.25}){const[o,c]=L3({pos:n,x1:t,y1:e,x2:i,y2:r,c:a}),[u,f]=L3({pos:s,x1:i,y1:r,x2:t,y2:e,c:a}),[d,m,v,y]=bV({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:f});return[`M${t},${e} C${o},${c} ${u},${f} ${i},${r}`,d,m,v,y]}function SV({sourceX:t,sourceY:e,targetX:n,targetY:i}){const r=Math.abs(n-t)/2,s=n<t?n+r:n-r,a=Math.abs(i-e)/2,o=i<e?i+a:i-a;return[s,o,r,a]}function J1e({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1,zIndexMode:s="basic"}){if(s==="manual")return i;const a=r&&n?i+1e3:i,o=Math.max(t.parentId||r&&t.selected?t.internals.z:0,e.parentId||r&&e.selected?e.internals.z:0);return a+o}function e_e({sourceNode:t,targetNode:e,width:n,height:i,transform:r}){const s=v0(NO(t),NO(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return nd(a,y0(s))>0}const t_e=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,n_e=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),i_e=(t,e,n={})=>{if(!t.source||!t.target)return e;const i=n.getEdgeId||t_e;let r;return hV(t)?r={...t}:r={...t,id:i(t)},n_e(r,e)?e:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,e.concat(r))};function wV({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[r,s,a,o]=SV({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,r,s,a,o]}const q3={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},r_e=({source:t,sourcePosition:e=je.Bottom,target:n})=>e===je.Left||e===je.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},B3=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function s_e({source:t,sourcePosition:e=je.Bottom,target:n,targetPosition:i=je.Top,center:r,offset:s,stepPosition:a}){const o=q3[e],c=q3[i],u={x:t.x+o.x*s,y:t.y+o.y*s},f={x:n.x+c.x*s,y:n.y+c.y*s},d=r_e({source:u,sourcePosition:e,target:f}),m=d.x!==0?"x":"y",v=d[m];let y=[],x,S;const _={x:0,y:0},Q={x:0,y:0},[,,k,T]=SV({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[m]*c[m]===-1){m==="x"?(x=r.x??u.x+(f.x-u.x)*a,S=r.y??(u.y+f.y)/2):(x=r.x??(u.x+f.x)/2,S=r.y??u.y+(f.y-u.y)*a);const C=[{x,y:u.y},{x,y:f.y}],P=[{x:u.x,y:S},{x:f.x,y:S}];o[m]===v?y=m==="x"?C:P:y=m==="x"?P:C}else{const C=[{x:u.x,y:f.y}],P=[{x:f.x,y:u.y}];if(m==="x"?y=o.x===v?P:C:y=o.y===v?C:P,e===i){const $=Math.abs(t[m]-n[m]);if($<=s){const I=Math.min(s-1,s-$);o[m]===v?_[m]=(u[m]>t[m]?-1:1)*I:Q[m]=(f[m]>n[m]?-1:1)*I}}if(e!==i){const $=m==="x"?"y":"x",I=o[m]===c[$],j=u[$]>f[$],D=u[$]<f[$];(o[m]===1&&(!I&&j||I&&D)||o[m]!==1&&(!I&&D||I&&j))&&(y=m==="x"?C:P)}const L={x:u.x+_.x,y:u.y+_.y},B={x:f.x+Q.x,y:f.y+Q.y},N=Math.max(Math.abs(L.x-y[0].x),Math.abs(B.x-y[0].x)),M=Math.max(Math.abs(L.y-y[0].y),Math.abs(B.y-y[0].y));N>=M?(x=(L.x+B.x)/2,S=y[0].y):(x=y[0].x,S=(L.y+B.y)/2)}return[[t,{x:u.x+_.x,y:u.y+_.y},...y,{x:f.x+Q.x,y:f.y+Q.y},n],x,S,k,T]}function a_e(t,e,n,i){const r=Math.min(B3(t,e)/2,B3(e,n)/2,i),{x:s,y:a}=e;if(t.x===s&&s===n.x||t.y===a&&a===n.y)return`L${s} ${a}`;if(t.y===a){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${s+r*u},${a}Q ${s},${a} ${s},${a+r*f}`}const o=t.x<n.x?1:-1,c=t.y<n.y?-1:1;return`L ${s},${a+r*c}Q ${s},${a} ${s+r*o},${a}`}function xT({sourceX:t,sourceY:e,sourcePosition:n=je.Bottom,targetX:i,targetY:r,targetPosition:s=je.Top,borderRadius:a=5,centerX:o,centerY:c,offset:u=20,stepPosition:f=.5}){const[d,m,v,y,x]=s_e({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:r},targetPosition:s,center:{x:o,y:c},offset:u,stepPosition:f});return[d.reduce((_,Q,k)=>{let T="";return k>0&&k<d.length-1?T=a_e(d[k-1],Q,d[k+1],a):T=`${k===0?"M":"L"}${Q.x} ${Q.y}`,_+=T,_},""),m,v,y,x]}function I3(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function o_e(t){const{sourceNode:e,targetNode:n}=t;if(!I3(e)||!I3(n))return null;const i=e.internals.handleBounds||X3(e.handles),r=n.internals.handleBounds||X3(n.handles),s=Z3(i?.source??[],t.sourceHandle),a=Z3(t.connectionMode===cu.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),t.targetHandle);if(!s||!a)return t.onError?.("008",Os.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const o=s?.position||je.Bottom,c=a?.position||je.Top,u=kl(e,s,o),f=kl(n,a,c);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:o,targetPosition:c}}function X3(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function kl(t,e,n=je.Left,i=!1){const r=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:a,height:o}=e??fa(t);if(i)return{x:r+a/2,y:s+o/2};switch(e?.position??n){case je.Top:return{x:r+a/2,y:s};case je.Right:return{x:r+a,y:s+o/2};case je.Bottom:return{x:r+a/2,y:s+o};case je.Left:return{x:r,y:s+o/2}}}function Z3(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function bT(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function l_e(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const s=new Set;return t.reduce((a,o)=>([o.markerStart||i,o.markerEnd||r].forEach(c=>{if(c&&typeof c=="object"){const u=bT(c,e);s.has(u)||(a.push({id:u,color:c.color||n,...c}),s.add(u))}}),a),[]).sort((a,o)=>a.id.localeCompare(o.id))}const kV=1e3,c_e=10,xE={nodeOrigin:[0,0],nodeExtent:Jf,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},u_e={...xE,checkEquality:!0};function bE(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function h_e(t,e,n){const i=bE(xE,n);for(const r of t.values())if(r.parentId)SE(r,t,e,i);else{const s=Ad(r,i.nodeOrigin),a=fu(r.extent)?r.extent:i.nodeExtent,o=wl(s,a,fa(r));r.internals.positionAbsolute=o}}function f_e(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],i=[];for(const r of t.handles){const s={id:r.id,width:r.width??1,height:r.height??1,nodeId:t.id,x:r.x,y:r.y,position:r.position,type:r.type};r.type==="source"?n.push(s):r.type==="target"&&i.push(s)}return{source:n,target:i}}function _E(t){return t==="manual"}function _T(t,e,n,i={}){const r=bE(u_e,i),s={i:0},a=new Map(e),o=r?.elevateNodesOnSelect&&!_E(r.zIndexMode)?kV:0;let c=t.length>0;e.clear(),n.clear();for(const u of t){let f=a.get(u.id);if(r.checkEquality&&u===f?.internals.userNode)e.set(u.id,f);else{const d=Ad(u,r.nodeOrigin),m=fu(u.extent)?u.extent:r.nodeExtent,v=wl(d,m,fa(u));f={...r.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:v,handleBounds:f_e(u,f),z:CV(u,o,r.zIndexMode),userNode:u}},e.set(u.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(c=!1),u.parentId&&SE(f,e,n,i,s)}return c}function d_e(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function SE(t,e,n,i,r){const{elevateNodesOnSelect:s,nodeOrigin:a,nodeExtent:o,zIndexMode:c}=bE(xE,i),u=t.parentId,f=e.get(u);if(!f){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}d_e(t,n),r&&!f.parentId&&f.internals.rootParentIndex===void 0&&c==="auto"&&(f.internals.rootParentIndex=++r.i,f.internals.z=f.internals.z+r.i*c_e),r&&f.internals.rootParentIndex!==void 0&&(r.i=f.internals.rootParentIndex);const d=s&&!_E(c)?kV:0,{x:m,y:v,z:y}=p_e(t,f,a,o,d,c),{positionAbsolute:x}=t.internals,S=m!==x.x||v!==x.y;(S||y!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:S?{x:m,y:v}:x,z:y}})}function CV(t,e,n){const i=$r(t.zIndex)?t.zIndex:0;return _E(n)?i:i+(t.selected?e:0)}function p_e(t,e,n,i,r,s){const{x:a,y:o}=e.internals.positionAbsolute,c=fa(t),u=Ad(t,n),f=fu(t.extent)?wl(u,t.extent,c):u;let d=wl({x:a+f.x,y:o+f.y},i,c);t.extent==="parent"&&(d=dV(d,c,e));const m=CV(t,r,s),v=e.internals.z??0;return{x:d.x,y:d.y,z:v>=m?v+1:m}}function wE(t,e,n,i=[0,0]){const r=[],s=new Map;for(const a of t){const o=e.get(a.parentId);if(!o)continue;const c=s.get(a.parentId)?.expandedRect??hu(o),u=mV(c,a.rect);s.set(a.parentId,{expandedRect:u,parent:o})}return s.size>0&&s.forEach(({expandedRect:a,parent:o},c)=>{const u=o.internals.positionAbsolute,f=fa(o),d=o.origin??i,m=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,v=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,y=Math.max(f.width,Math.round(a.width)),x=Math.max(f.height,Math.round(a.height)),S=(y-f.width)*d[0],_=(x-f.height)*d[1];(m>0||v>0||S||_)&&(r.push({id:c,type:"position",position:{x:o.position.x-m+S,y:o.position.y-v+_}}),n.get(c)?.forEach(Q=>{t.some(k=>k.id===Q.id)||r.push({id:Q.id,type:"position",position:{x:Q.position.x+m,y:Q.position.y+v}})})),(f.width<a.width||f.height<a.height||m||v)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:y+(m?d[0]*m-S:0),height:x+(v?d[1]*v-_:0)}})}),r}function m_e(t,e,n,i,r,s,a){const o=i?.querySelector(".xyflow__viewport");let c=!1;if(!o)return{changes:[],updatedInternals:c};const u=[],f=window.getComputedStyle(o),{m22:d}=new window.DOMMatrixReadOnly(f.transform),m=[];for(const v of t.values()){const y=e.get(v.id);if(!y)continue;if(y.hidden){e.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),c=!0;continue}const x=yE(v.nodeElement),S=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!y.internals.handleBounds||v.force))){const Q=v.nodeElement.getBoundingClientRect(),k=fu(y.extent)?y.extent:s;let{positionAbsolute:T}=y.internals;y.parentId&&y.extent==="parent"?T=dV(T,x,e.get(y.parentId)):k&&(T=wl(T,k,x));const E={...y,measured:x,internals:{...y.internals,positionAbsolute:T,handleBounds:{source:D3("source",v.nodeElement,Q,d,y.id),target:D3("target",v.nodeElement,Q,d,y.id)}}};e.set(y.id,E),y.parentId&&SE(E,e,n,{nodeOrigin:r,zIndexMode:a}),c=!0,S&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&m.push({id:y.id,parentId:y.parentId,rect:hu(E,r)}))}}if(m.length>0){const v=wE(m,e,n,r);u.push(...v)}return{changes:u,updatedInternals:c}}async function g_e({delta:t,panZoom:e,transform:n,translateExtent:i,width:r,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const a=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,s]],i),o=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(o)}function V3(t,e,n,i,r,s){let a=r;const o=i.get(a)||new Map;i.set(a,o.set(n,e)),a=`${r}-${t}`;const c=i.get(a)||new Map;if(i.set(a,c.set(n,e)),s){a=`${r}-${t}-${s}`;const u=i.get(a)||new Map;i.set(a,u.set(n,e))}}function TV(t,e,n){t.clear(),e.clear();for(const i of n){const{source:r,target:s,sourceHandle:a=null,targetHandle:o=null}=i,c={edgeId:i.id,source:r,target:s,sourceHandle:a,targetHandle:o},u=`${r}-${a}--${s}-${o}`,f=`${s}-${o}--${r}-${a}`;V3("source",c,f,t,r,a),V3("target",c,u,t,s,o),e.set(i.id,i)}}function QV(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:QV(n,e):!1}function W3(t,e,n){let i=t;do{if(i?.matches?.(e))return!0;if(i===n)return!1;i=i?.parentElement}while(i);return!1}function O_e(t,e,n,i){const r=new Map;for(const[s,a]of t)if((a.selected||a.id===i)&&(!a.parentId||!QV(a,t))&&(a.draggable||e&&typeof a.draggable>"u")){const o=t.get(s);o&&r.set(s,{id:s,position:o.position||{x:0,y:0},distance:{x:n.x-o.internals.positionAbsolute.x,y:n.y-o.internals.positionAbsolute.y},extent:o.extent,parentId:o.parentId,origin:o.origin,expandParent:o.expandParent,internals:{positionAbsolute:o.internals.positionAbsolute||{x:0,y:0}},measured:{width:o.measured.width??0,height:o.measured.height??0}})}return r}function jb({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){const r=[];for(const[a,o]of e){const c=n.get(a)?.internals.userNode;c&&r.push({...c,position:o.position,dragging:i})}if(!t)return[r[0],r];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:i}:r[0],r]}function v_e({dragItems:t,snapGrid:e,x:n,y:i}){const r=t.values().next().value;if(!r)return null;const s={x:n-r.distance.x,y:i-r.distance.y},a=$d(s,e);return{x:a.x-s.x,y:a.y-s.y}}function y_e({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:r}){let s={x:null,y:null},a=0,o=new Map,c=!1,u={x:0,y:0},f=null,d=!1,m=null,v=!1,y=!1,x=null;function S({noDragClassName:Q,handleSelector:k,domNode:T,isSelectable:E,nodeId:C,nodeClickDistance:P=0}){m=Fi(T);function L({x:$,y:I}){const{nodeLookup:j,nodeExtent:D,snapGrid:R,snapToGrid:W,nodeOrigin:U,onNodeDrag:G,onSelectionDrag:q,onError:V,updateNodePositions:F}=e();s={x:$,y:I};let z=!1;const H=o.size>1,K=H&&D?yT(Rd(o)):null,ee=H&&W?v_e({dragItems:o,snapGrid:R,x:$,y:I}):null;for(const[ie,le]of o){if(!j.has(ie))continue;let ae={x:$-le.distance.x,y:I-le.distance.y};W&&(ae=ee?{x:Math.round(ae.x+ee.x),y:Math.round(ae.y+ee.y)}:$d(ae,R));let _e=null;if(H&&D&&!le.extent&&K){const{positionAbsolute:ge}=le.internals,$e=ge.x-K.x+D[0][0],Ae=ge.x+le.measured.width-K.x2+D[1][0],Ye=ge.y-K.y+D[0][1],De=ge.y+le.measured.height-K.y2+D[1][1];_e=[[$e,Ye],[Ae,De]]}const{position:ke,positionAbsolute:Ee}=fV({nodeId:ie,nextPosition:ae,nodeLookup:j,nodeExtent:_e||D,nodeOrigin:U,onError:V});z=z||le.position.x!==ke.x||le.position.y!==ke.y,le.position=ke,le.internals.positionAbsolute=Ee}if(y=y||z,!!z&&(F(o,!0),x&&(i||G||!C&&q))){const[ie,le]=jb({nodeId:C,dragItems:o,nodeLookup:j});i?.(x,o,ie,le),G?.(x,ie,le),C||q?.(x,le)}}async function B(){if(!f)return;const{transform:$,panBy:I,autoPanSpeed:j,autoPanOnNodeDrag:D}=e();if(!D){c=!1,cancelAnimationFrame(a);return}const[R,W]=pV(u,f,j);(R!==0||W!==0)&&(s.x=(s.x??0)-R/$[2],s.y=(s.y??0)-W/$[2],await I({x:R,y:W})&&L(s)),a=requestAnimationFrame(B)}function N($){const{nodeLookup:I,multiSelectionActive:j,nodesDraggable:D,transform:R,snapGrid:W,snapToGrid:U,selectNodesOnDrag:G,onNodeDragStart:q,onSelectionDragStart:V,unselectNodesAndEdges:F}=e();d=!0,(!G||!E)&&!j&&C&&(I.get(C)?.selected||F()),E&&G&&C&&t?.(C);const z=bf($.sourceEvent,{transform:R,snapGrid:W,snapToGrid:U,containerBounds:f});if(s=z,o=O_e(I,D,z,C),o.size>0&&(n||q||!C&&V)){const[H,K]=jb({nodeId:C,dragItems:o,nodeLookup:I});n?.($.sourceEvent,o,H,K),q?.($.sourceEvent,H,K),C||V?.($.sourceEvent,K)}}const M=VZ().clickDistance(P).on("start",$=>{const{domNode:I,nodeDragThreshold:j,transform:D,snapGrid:R,snapToGrid:W}=e();f=I?.getBoundingClientRect()||null,v=!1,y=!1,x=$.sourceEvent,j===0&&N($),s=bf($.sourceEvent,{transform:D,snapGrid:R,snapToGrid:W,containerBounds:f}),u=Nr($.sourceEvent,f)}).on("drag",$=>{const{autoPanOnNodeDrag:I,transform:j,snapGrid:D,snapToGrid:R,nodeDragThreshold:W,nodeLookup:U}=e(),G=bf($.sourceEvent,{transform:j,snapGrid:D,snapToGrid:R,containerBounds:f});if(x=$.sourceEvent,($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1||C&&!U.has(C))&&(v=!0),!v){if(!c&&I&&d&&(c=!0,B()),!d){const q=Nr($.sourceEvent,f),V=q.x-u.x,F=q.y-u.y;Math.sqrt(V*V+F*F)>W&&N($)}(s.x!==G.xSnapped||s.y!==G.ySnapped)&&o&&d&&(u=Nr($.sourceEvent,f),L(G))}}).on("end",$=>{if(!(!d||v)&&(c=!1,d=!1,cancelAnimationFrame(a),o.size>0)){const{nodeLookup:I,updateNodePositions:j,onNodeDragStop:D,onSelectionDragStop:R}=e();if(y&&(j(o,!1),y=!1),r||D||!C&&R){const[W,U]=jb({nodeId:C,dragItems:o,nodeLookup:I,dragging:!1});r?.($.sourceEvent,o,W,U),D?.($.sourceEvent,W,U),C||R?.($.sourceEvent,U)}}}).filter($=>{const I=$.target;return!$.button&&(!Q||!W3(I,`.${Q}`,T))&&(!k||W3(I,k,T))});m.call(M)}function _(){m?.on(".drag",null)}return{update:S,destroy:_}}function x_e(t,e,n){const i=[],r={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())nd(r,hu(s))>0&&i.push(s);return i}const b_e=250;function __e(t,e,n,i){let r=[],s=1/0;const a=x_e(t,n,e+b_e);for(const o of a){const c=[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]];for(const u of c){if(i.nodeId===u.nodeId&&i.type===u.type&&i.id===u.id)continue;const{x:f,y:d}=kl(o,u,u.position,!0),m=Math.sqrt(Math.pow(f-t.x,2)+Math.pow(d-t.y,2));m>e||(m<s?(r=[{...u,x:f,y:d}],s=m):m===s&&r.push({...u,x:f,y:d}))}}if(!r.length)return null;if(r.length>1){const o=i.type==="source"?"target":"source";return r.find(c=>c.type===o)??r[0]}return r[0]}function EV(t,e,n,i,r,s=!1){const a=i.get(t);if(!a)return null;const o=r==="strict"?a.internals.handleBounds?.[e]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],c=(n?o?.find(u=>u.id===n):o?.[0])??null;return c&&s?{...c,...kl(a,c,c.position,!0)}:c}function PV(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function S_e(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const AV=()=>!0;function w_e(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:s,isTarget:a,domNode:o,nodeLookup:c,lib:u,autoPanOnConnect:f,flowId:d,panBy:m,cancelConnection:v,onConnectStart:y,onConnect:x,onConnectEnd:S,isValidConnection:_=AV,onReconnectEnd:Q,updateConnection:k,getTransform:T,getFromHandle:E,autoPanSpeed:C,dragThreshold:P=1,handleDomNode:L}){const B=vV(t.target);let N=0,M;const{x:$,y:I}=Nr(t),j=PV(s,L),D=o?.getBoundingClientRect();let R=!1;if(!D||!j)return;const W=EV(r,j,i,c,e);if(!W)return;let U=Nr(t,D),G=!1,q=null,V=!1,F=null;function z(){if(!f||!D)return;const[ke,Ee]=pV(U,D,C);m({x:ke,y:Ee}),N=requestAnimationFrame(z)}const H={...W,nodeId:r,type:j,position:W.position},K=c.get(r);let ie={inProgress:!0,isValid:null,from:kl(K,H,je.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:K,to:U,toHandle:null,toPosition:N3[H.position],toNode:null,pointer:U};function le(){R=!0,k(ie),y?.(t,{nodeId:r,handleId:i,handleType:j})}P===0&&le();function ae(ke){if(!R){const{x:De,y:nn}=Nr(ke),Zt=De-$,Zn=nn-I;if(!(Zt*Zt+Zn*Zn>P*P))return;le()}if(!E()||!H){_e(ke);return}const Ee=T();U=Nr(ke,D),M=__e(Nd(U,Ee,!1,[1,1]),n,c,H),G||(z(),G=!0);const ge=RV(ke,{handle:M,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:a?"target":"source",isValidConnection:_,doc:B,lib:u,flowId:d,nodeLookup:c});F=ge.handleDomNode,q=ge.connection,V=S_e(!!M,ge.isValid);const $e=c.get(r),Ae=$e?kl($e,H,je.Left,!0):ie.from,Ye={...ie,from:Ae,isValid:V,to:ge.toHandle&&V?MO({x:ge.toHandle.x,y:ge.toHandle.y},Ee):U,toHandle:ge.toHandle,toPosition:V&&ge.toHandle?ge.toHandle.position:N3[H.position],toNode:ge.toHandle?c.get(ge.toHandle.nodeId):null,pointer:U};k(Ye),ie=Ye}function _e(ke){if(!("touches"in ke&&ke.touches.length>0)){if(R){(M||F)&&q&&V&&x?.(q);const{inProgress:Ee,...ge}=ie,$e={...ge,toPosition:ie.toHandle?ie.toPosition:null};S?.(ke,$e),s&&Q?.(ke,$e)}v(),cancelAnimationFrame(N),G=!1,V=!1,q=null,F=null,B.removeEventListener("mousemove",ae),B.removeEventListener("mouseup",_e),B.removeEventListener("touchmove",ae),B.removeEventListener("touchend",_e)}}B.addEventListener("mousemove",ae),B.addEventListener("mouseup",_e),B.addEventListener("touchmove",ae),B.addEventListener("touchend",_e)}function RV(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:s,doc:a,lib:o,flowId:c,isValidConnection:u=AV,nodeLookup:f}){const d=s==="target",m=e?a.querySelector(`.${o}-flow__handle[data-id="${c}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:v,y}=Nr(t),x=a.elementFromPoint(v,y),S=x?.classList.contains(`${o}-flow__handle`)?x:m,_={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const Q=PV(void 0,S),k=S.getAttribute("data-nodeid"),T=S.getAttribute("data-handleid"),E=S.classList.contains("connectable"),C=S.classList.contains("connectableend");if(!k||!Q)return _;const P={source:d?k:i,sourceHandle:d?T:r,target:d?i:k,targetHandle:d?r:T};_.connection=P;const B=E&&C&&(n===cu.Strict?d&&Q==="source"||!d&&Q==="target":k!==i||T!==r);_.isValid=B&&u(P),_.toHandle=EV(k,Q,T,f,n,!0)}return _}const ST={onPointerDown:w_e,isValid:RV};function k_e({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const r=Fi(t);function s({translateExtent:o,width:c,height:u,zoomStep:f=1,pannable:d=!0,zoomable:m=!0,inversePan:v=!1}){const y=k=>{if(k.sourceEvent.type!=="wheel"||!e)return;const T=n(),E=k.sourceEvent.ctrlKey&&id()?10:1,C=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*f,P=T[2]*Math.pow(2,C*E);e.scaleTo(P)};let x=[0,0];const S=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(x=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},_=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!e)return;const E=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],C=[E[0]-x[0],E[1]-x[1]];x=E;const P=i()*Math.max(T[2],Math.log(T[2]))*(v?-1:1),L={x:T[0]-C[0]*P,y:T[1]-C[1]*P},B=[[0,0],[c,u]];e.setViewportConstrained({x:L.x,y:L.y,zoom:T[2]},B,o)},Q=aV().on("start",S).on("zoom",d?_:null).on("zoom.wheel",m?y:null);r.call(Q,{})}function a(){r.on("zoom",null)}return{update:s,destroy:a,pointer:Er}}const x0=t=>({x:t.x,y:t.y,zoom:t.k}),zb=({x:t,y:e,zoom:n})=>O0.translate(t,e).scale(n),Nc=(t,e)=>t.target.closest(`.${e}`),$V=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),C_e=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Db=(t,e=0,n=C_e,i=()=>{})=>{const r=typeof e=="number"&&e>0;return r||i(),r?t.transition().duration(e).ease(n).on("end",i):t},NV=t=>{const e=t.ctrlKey&&id()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function T_e({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:a,onPanZoomStart:o,onPanZoom:c,onPanZoomEnd:u}){return f=>{if(Nc(f,e))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&a){const S=Er(f),_=NV(f),Q=d*Math.pow(2,_);i.scaleTo(n,Q,S,f);return}const m=f.deltaMode===1?20:1;let v=r===ul.Vertical?0:f.deltaX*m,y=r===ul.Horizontal?0:f.deltaY*m;!id()&&f.shiftKey&&r!==ul.Vertical&&(v=f.deltaY*m,y=0),i.translateBy(n,-(v/d)*s,-(y/d)*s,{internal:!0});const x=x0(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(c?.(f,x),t.panScrollTimeout=setTimeout(()=>{u?.(f,x),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,o?.(f,x))}}function Q_e({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,r){const s=i.type==="wheel",a=!e&&s&&!i.ctrlKey,o=Nc(i,t);if(i.ctrlKey&&s&&o&&i.preventDefault(),a||o)return null;i.preventDefault(),n.call(this,i,r)}}function E_e({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{if(i.sourceEvent?.internal)return;const r=x0(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=r,i.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(i.sourceEvent,r)}}function P_e({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return s=>{t.usedRightMouseButton=!!(n&&$V(e,t.mouseButton??0)),s.sourceEvent?.sync||i([s.transform.x,s.transform.y,s.transform.k]),r&&!s.sourceEvent?.internal&&r?.(s.sourceEvent,x0(s.transform))}}function A_e({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:s}){return a=>{if(!a.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&$V(e,t.mouseButton??0)&&!t.usedRightMouseButton&&a.sourceEvent&&s(a.sourceEvent),t.usedRightMouseButton=!1,i(!1),r)){const o=x0(a.transform);t.prevViewport=o,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r?.(a.sourceEvent,o)},n?150:0)}}}function R_e({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:a,noWheelClassName:o,noPanClassName:c,lib:u,connectionInProgress:f}){return d=>{const m=t||e,v=n&&d.ctrlKey,y=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Nc(d,`${u}-flow__node`)||Nc(d,`${u}-flow__edge`)))return!0;if(!i&&!m&&!r&&!s&&!n||a||f&&!y||Nc(d,o)&&y||Nc(d,c)&&(!y||r&&y&&!t)||!n&&d.ctrlKey&&y)return!1;if(!n&&d.type==="touchstart"&&d.touches?.length>1)return d.preventDefault(),!1;if(!m&&!r&&!v&&y||!i&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(i)&&!i.includes(d.button)&&d.type==="mousedown")return!1;const x=Array.isArray(i)&&i.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||y)&&x}}function $_e({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:r,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:o,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),d=aV().scaleExtent([e,n]).translateExtent(i),m=Fi(t).call(d);Q({x:r.x,y:r.y,zoom:uu(r.zoom,e,n)},[[0,0],[f.width,f.height]],i);const v=m.on("wheel.zoom"),y=m.on("dblclick.zoom");d.wheelDelta(NV);function x(M,$){return m?new Promise(I=>{d?.interpolate($?.interpolate==="linear"?xf:Eg).transform(Db(m,$?.duration,$?.ease,()=>I(!0)),M)}):Promise.resolve(!1)}function S({noWheelClassName:M,noPanClassName:$,onPaneContextMenu:I,userSelectionActive:j,panOnScroll:D,panOnDrag:R,panOnScrollMode:W,panOnScrollSpeed:U,preventScrolling:G,zoomOnPinch:q,zoomOnScroll:V,zoomOnDoubleClick:F,zoomActivationKeyPressed:z,lib:H,onTransformChange:K,connectionInProgress:ee,paneClickDistance:ie,selectionOnDrag:le}){j&&!u.isZoomingOrPanning&&_();const ae=D&&!z&&!j;d.clickDistance(le?1/0:!$r(ie)||ie<0?0:ie);const _e=ae?T_e({zoomPanValues:u,noWheelClassName:M,d3Selection:m,d3Zoom:d,panOnScrollMode:W,panOnScrollSpeed:U,zoomOnPinch:q,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:o}):Q_e({noWheelClassName:M,preventScrolling:G,d3ZoomHandler:v});if(m.on("wheel.zoom",_e,{passive:!1}),!j){const Ee=E_e({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});d.on("start",Ee);const ge=P_e({zoomPanValues:u,panOnDrag:R,onPaneContextMenu:!!I,onPanZoom:s,onTransformChange:K});d.on("zoom",ge);const $e=A_e({zoomPanValues:u,panOnDrag:R,panOnScroll:D,onPaneContextMenu:I,onPanZoomEnd:o,onDraggingChange:c});d.on("end",$e)}const ke=R_e({zoomActivationKeyPressed:z,panOnDrag:R,zoomOnScroll:V,panOnScroll:D,zoomOnDoubleClick:F,zoomOnPinch:q,userSelectionActive:j,noPanClassName:$,noWheelClassName:M,lib:H,connectionInProgress:ee});d.filter(ke),F?m.on("dblclick.zoom",y):m.on("dblclick.zoom",null)}function _(){d.on("zoom",null)}async function Q(M,$,I){const j=zb(M),D=d?.constrain()(j,$,I);return D&&await x(D),new Promise(R=>R(D))}async function k(M,$){const I=zb(M);return await x(I,$),new Promise(j=>j(I))}function T(M){if(m){const $=zb(M),I=m.property("__zoom");(I.k!==M.zoom||I.x!==M.x||I.y!==M.y)&&d?.transform(m,$,null,{sync:!0})}}function E(){const M=m?sV(m.node()):{x:0,y:0,k:1};return{x:M.x,y:M.y,zoom:M.k}}function C(M,$){return m?new Promise(I=>{d?.interpolate($?.interpolate==="linear"?xf:Eg).scaleTo(Db(m,$?.duration,$?.ease,()=>I(!0)),M)}):Promise.resolve(!1)}function P(M,$){return m?new Promise(I=>{d?.interpolate($?.interpolate==="linear"?xf:Eg).scaleBy(Db(m,$?.duration,$?.ease,()=>I(!0)),M)}):Promise.resolve(!1)}function L(M){d?.scaleExtent(M)}function B(M){d?.translateExtent(M)}function N(M){const $=!$r(M)||M<0?0:M;d?.clickDistance($)}return{update:S,destroy:_,setViewport:k,setViewportConstrained:Q,getViewport:E,scaleTo:C,scaleBy:P,setScaleExtent:L,setTranslateExtent:B,syncViewport:T,setClickDistance:N}}var du;(function(t){t.Line="line",t.Handle="handle"})(du||(du={}));function N_e({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:r,affectsY:s}){const a=t-e,o=n-i,c=[a>0?1:a<0?-1:0,o>0?1:o<0?-1:0];return a&&r&&(c[0]=c[0]*-1),o&&s&&(c[1]=c[1]*-1),c}function U3(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),r=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:r}}function Ha(t,e){return Math.max(0,e-t)}function Ya(t,e){return Math.max(0,t-e)}function Fm(t,e,n){return Math.max(0,e-t,t-n)}function H3(t,e){return t?!e:e}function M_e(t,e,n,i,r,s,a,o){let{affectsX:c,affectsY:u}=e;const{isHorizontal:f,isVertical:d}=e,m=f&&d,{xSnapped:v,ySnapped:y}=n,{minWidth:x,maxWidth:S,minHeight:_,maxHeight:Q}=i,{x:k,y:T,width:E,height:C,aspectRatio:P}=t;let L=Math.floor(f?v-t.pointerX:0),B=Math.floor(d?y-t.pointerY:0);const N=E+(c?-L:L),M=C+(u?-B:B),$=-s[0]*E,I=-s[1]*C;let j=Fm(N,x,S),D=Fm(M,_,Q);if(a){let U=0,G=0;c&&L<0?U=Ha(k+L+$,a[0][0]):!c&&L>0&&(U=Ya(k+N+$,a[1][0])),u&&B<0?G=Ha(T+B+I,a[0][1]):!u&&B>0&&(G=Ya(T+M+I,a[1][1])),j=Math.max(j,U),D=Math.max(D,G)}if(o){let U=0,G=0;c&&L>0?U=Ya(k+L,o[0][0]):!c&&L<0&&(U=Ha(k+N,o[1][0])),u&&B>0?G=Ya(T+B,o[0][1]):!u&&B<0&&(G=Ha(T+M,o[1][1])),j=Math.max(j,U),D=Math.max(D,G)}if(r){if(f){const U=Fm(N/P,_,Q)*P;if(j=Math.max(j,U),a){let G=0;!c&&!u||c&&!u&&m?G=Ya(T+I+N/P,a[1][1])*P:G=Ha(T+I+(c?L:-L)/P,a[0][1])*P,j=Math.max(j,G)}if(o){let G=0;!c&&!u||c&&!u&&m?G=Ha(T+N/P,o[1][1])*P:G=Ya(T+(c?L:-L)/P,o[0][1])*P,j=Math.max(j,G)}}if(d){const U=Fm(M*P,x,S)/P;if(D=Math.max(D,U),a){let G=0;!c&&!u||u&&!c&&m?G=Ya(k+M*P+$,a[1][0])/P:G=Ha(k+(u?B:-B)*P+$,a[0][0])/P,D=Math.max(D,G)}if(o){let G=0;!c&&!u||u&&!c&&m?G=Ha(k+M*P,o[1][0])/P:G=Ya(k+(u?B:-B)*P,o[0][0])/P,D=Math.max(D,G)}}}B=B+(B<0?D:-D),L=L+(L<0?j:-j),r&&(m?N>M*P?B=(H3(c,u)?-L:L)/P:L=(H3(c,u)?-B:B)*P:f?(B=L/P,u=c):(L=B*P,c=u));const R=c?k+L:k,W=u?T+B:T;return{width:E+(c?-L:L),height:C+(u?-B:B),x:s[0]*L*(c?-1:1)+R,y:s[1]*B*(u?-1:1)+W}}const MV={width:0,height:0,x:0,y:0},j_e={...MV,pointerX:0,pointerY:0,aspectRatio:1};function z_e(t){return[[0,0],[t.measured.width,t.measured.height]]}function D_e(t,e,n){const i=e.position.x+t.position.x,r=e.position.y+t.position.y,s=t.measured.width??0,a=t.measured.height??0,o=n[0]*s,c=n[1]*a;return[[i-o,r-c],[i+s-o,r+a-c]]}function L_e({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:r}){const s=Fi(t);let a={controlDirection:U3("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function o({controlPosition:u,boundaries:f,keepAspectRatio:d,resizeDirection:m,onResizeStart:v,onResize:y,onResizeEnd:x,shouldResize:S}){let _={...MV},Q={...j_e};a={boundaries:f,resizeDirection:m,keepAspectRatio:d,controlDirection:U3(u)};let k,T=null,E=[],C,P,L,B=!1;const N=VZ().on("start",M=>{const{nodeLookup:$,transform:I,snapGrid:j,snapToGrid:D,nodeOrigin:R,paneDomNode:W}=n();if(k=$.get(e),!k)return;T=W?.getBoundingClientRect()??null;const{xSnapped:U,ySnapped:G}=bf(M.sourceEvent,{transform:I,snapGrid:j,snapToGrid:D,containerBounds:T});_={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},Q={..._,pointerX:U,pointerY:G,aspectRatio:_.width/_.height},C=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(C=$.get(k.parentId),P=C&&k.extent==="parent"?z_e(C):void 0),E=[],L=void 0;for(const[q,V]of $)if(V.parentId===e&&(E.push({id:q,position:{...V.position},extent:V.extent}),V.extent==="parent"||V.expandParent)){const F=D_e(V,k,V.origin??R);L?L=[[Math.min(F[0][0],L[0][0]),Math.min(F[0][1],L[0][1])],[Math.max(F[1][0],L[1][0]),Math.max(F[1][1],L[1][1])]]:L=F}v?.(M,{..._})}).on("drag",M=>{const{transform:$,snapGrid:I,snapToGrid:j,nodeOrigin:D}=n(),R=bf(M.sourceEvent,{transform:$,snapGrid:I,snapToGrid:j,containerBounds:T}),W=[];if(!k)return;const{x:U,y:G,width:q,height:V}=_,F={},z=k.origin??D,{width:H,height:K,x:ee,y:ie}=M_e(Q,a.controlDirection,R,a.boundaries,a.keepAspectRatio,z,P,L),le=H!==q,ae=K!==V,_e=ee!==U&&le,ke=ie!==G&&ae;if(!_e&&!ke&&!le&&!ae)return;if((_e||ke||z[0]===1||z[1]===1)&&(F.x=_e?ee:_.x,F.y=ke?ie:_.y,_.x=F.x,_.y=F.y,E.length>0)){const Ae=ee-U,Ye=ie-G;for(const De of E)De.position={x:De.position.x-Ae+z[0]*(H-q),y:De.position.y-Ye+z[1]*(K-V)},W.push(De)}if((le||ae)&&(F.width=le&&(!a.resizeDirection||a.resizeDirection==="horizontal")?H:_.width,F.height=ae&&(!a.resizeDirection||a.resizeDirection==="vertical")?K:_.height,_.width=F.width,_.height=F.height),C&&k.expandParent){const Ae=z[0]*(F.width??0);F.x&&F.x<Ae&&(_.x=Ae,Q.x=Q.x-(F.x-Ae));const Ye=z[1]*(F.height??0);F.y&&F.y<Ye&&(_.y=Ye,Q.y=Q.y-(F.y-Ye))}const Ee=N_e({width:_.width,prevWidth:q,height:_.height,prevHeight:V,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),ge={..._,direction:Ee};S?.(M,ge)!==!1&&(B=!0,y?.(M,ge),i(F,W))}).on("end",M=>{B&&(x?.(M,{..._}),r?.({..._}),B=!1)});s.call(N)}function c(){s.on(".drag",null)}return{update:o,destroy:c}}var Lb={exports:{}},qb={},Bb={exports:{}},Ib={};var Y3;function q_e(){if(Y3)return Ib;Y3=1;var t=ad();function e(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function o(d,m){var v=m(),y=i({inst:{value:v,getSnapshot:m}}),x=y[0].inst,S=y[1];return s(function(){x.value=v,x.getSnapshot=m,c(x)&&S({inst:x})},[d,v,m]),r(function(){return c(x)&&S({inst:x}),d(function(){c(x)&&S({inst:x})})},[d]),a(v),v}function c(d){var m=d.getSnapshot;d=d.value;try{var v=m();return!n(d,v)}catch{return!0}}function u(d,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Ib.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Ib}var F3;function B_e(){return F3||(F3=1,Bb.exports=q_e()),Bb.exports}var G3;function I_e(){if(G3)return qb;G3=1;var t=ad(),e=B_e();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,o=t.useMemo,c=t.useDebugValue;return qb.useSyncExternalStoreWithSelector=function(u,f,d,m,v){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=o(function(){function _(C){if(!Q){if(Q=!0,k=C,C=m(C),v!==void 0&&x.hasValue){var P=x.value;if(v(P,C))return T=P}return T=C}if(P=T,i(k,C))return P;var L=m(C);return v!==void 0&&v(P,L)?(k=C,P):(k=C,T=L)}var Q=!1,k,T,E=d===void 0?null:d;return[function(){return _(f())},E===null?void 0:function(){return _(E())}]},[f,d,m,v]);var S=r(u,y[0],y[1]);return a(function(){x.hasValue=!0,x.value=S},[S]),c(S),S},qb}var K3;function X_e(){return K3||(K3=1,Lb.exports=I_e()),Lb.exports}var Z_e=X_e();const V_e=sd(Z_e),W_e={},J3=t=>{let e;const n=new Set,i=(f,d)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const v=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,v))}},r=()=>e,c={setState:i,getState:r,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(W_e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(i,r,c);return c},U_e=t=>t?J3(t):J3,{useDebugValue:H_e}=Vh,{useSyncExternalStoreWithSelector:Y_e}=V_e,F_e=t=>t;function jV(t,e=F_e,n){const i=Y_e(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return H_e(i),i}const ez=(t,e)=>{const n=U_e(t),i=(r,s=e)=>jV(n,r,s);return Object.assign(i,n),i},G_e=(t,e)=>t?ez(t,e):ez;function Bt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,r]of t)if(!Object.is(r,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}s6();const b0=X.createContext(null),K_e=b0.Provider,zV=Os.error001();function ut(t,e){const n=X.useContext(b0);if(n===null)throw new Error(zV);return jV(n,t,e)}function It(){const t=X.useContext(b0);if(t===null)throw new Error(zV);return X.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const tz={display:"none"},J_e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},DV="react-flow__node-desc",LV="react-flow__edge-desc",eSe="react-flow__aria-live",tSe=t=>t.ariaLiveMessage,nSe=t=>t.ariaLabelConfig;function iSe({rfId:t}){const e=ut(tSe);return g.jsx("div",{id:`${eSe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:J_e,children:e})}function rSe({rfId:t,disableKeyboardA11y:e}){const n=ut(nSe);return g.jsxs(g.Fragment,{children:[g.jsx("div",{id:`${DV}-${t}`,style:tz,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),g.jsx("div",{id:`${LV}-${t}`,style:tz,children:n["edge.a11yDescription.default"]}),!e&&g.jsx(iSe,{rfId:t})]})}const pu=X.forwardRef(({position:t="top-left",children:e,className:n,style:i,...r},s)=>{const a=`${t}`.split("-");return g.jsx("div",{className:pn(["react-flow__panel",n,...a]),style:i,ref:s,...r,children:e})});pu.displayName="Panel";function sSe({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:g.jsx(pu,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const aSe=t=>{const e=[],n=[];for(const[,i]of t.nodeLookup)i.selected&&e.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&n.push(i);return{selectedNodes:e,selectedEdges:n}},Gm=t=>t.id;function oSe(t,e){return Bt(t.selectedNodes.map(Gm),e.selectedNodes.map(Gm))&&Bt(t.selectedEdges.map(Gm),e.selectedEdges.map(Gm))}function lSe({onSelectionChange:t}){const e=It(),{selectedNodes:n,selectedEdges:i}=ut(aSe,oSe);return X.useEffect(()=>{const r={nodes:n,edges:i};t?.(r),e.getState().onSelectionChangeHandlers.forEach(s=>s(r))},[n,i,t]),null}const cSe=t=>!!t.onSelectionChangeHandlers;function uSe({onSelectionChange:t}){const e=ut(cSe);return t||e?g.jsx(lSe,{onSelectionChange:t}):null}const qV=[0,0],hSe={x:0,y:0,zoom:1},fSe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],nz=[...fSe,"rfId"],dSe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),iz={translateExtent:Jf,nodeOrigin:qV,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function pSe(t){const{setNodes:e,setEdges:n,setMinZoom:i,setMaxZoom:r,setTranslateExtent:s,setNodeExtent:a,reset:o,setDefaultNodesAndEdges:c}=ut(dSe,Bt),u=It();X.useEffect(()=>(c(t.defaultNodes,t.defaultEdges),()=>{f.current=iz,o()}),[]);const f=X.useRef(iz);return X.useEffect(()=>{for(const d of nz){const m=t[d],v=f.current[d];m!==v&&(typeof t[d]>"u"||(d==="nodes"?e(m):d==="edges"?n(m):d==="minZoom"?i(m):d==="maxZoom"?r(m):d==="translateExtent"?s(m):d==="nodeExtent"?a(m):d==="ariaLabelConfig"?u.setState({ariaLabelConfig:G1e(m)}):d==="fitView"?u.setState({fitViewQueued:m}):d==="fitViewOptions"?u.setState({fitViewOptions:m}):u.setState({[d]:m})))}f.current=t},nz.map(d=>t[d])),null}function rz(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function mSe(t){const[e,n]=X.useState(t==="system"?null:t);return X.useEffect(()=>{if(t!=="system"){n(t);return}const i=rz(),r=()=>n(i?.matches?"dark":"light");return r(),i?.addEventListener("change",r),()=>{i?.removeEventListener("change",r)}},[t]),e!==null?e:rz()?.matches?"dark":"light"}const sz=typeof document<"u"?document:null;function rd(t=null,e={target:sz,actInsideInputWithModifier:!0}){const[n,i]=X.useState(!1),r=X.useRef(!1),s=X.useRef(new Set([])),[a,o]=X.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=u.reduce((d,m)=>d.concat(...m),[]);return[u,f]}return[[],[]]},[t]);return X.useEffect(()=>{const c=e?.target??sz,u=e?.actInsideInputWithModifier??!0;if(t!==null){const f=v=>{if(r.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!r.current||r.current&&!u)&&yV(v))return!1;const x=oz(v.code,o);if(s.current.add(v[x]),az(a,s.current,!1)){const S=v.composedPath?.()?.[0]||v.target,_=S?.nodeName==="BUTTON"||S?.nodeName==="A";e.preventDefault!==!1&&(r.current||!_)&&v.preventDefault(),i(!0)}},d=v=>{const y=oz(v.code,o);az(a,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(v[y]),v.key==="Meta"&&s.current.clear(),r.current=!1},m=()=>{s.current.clear(),i(!1)};return c?.addEventListener("keydown",f),c?.addEventListener("keyup",d),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{c?.removeEventListener("keydown",f),c?.removeEventListener("keyup",d),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[t,i]),n}function az(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(r=>e.has(r)))}function oz(t,e){return e.includes(t)?"code":"key"}const gSe=()=>{const t=It();return X.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[i,r,s],panZoom:a}=t.getState();return a?(await a.setViewport({x:e.x??i,y:e.y??r,zoom:e.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,i]=t.getState().transform;return{x:e,y:n,zoom:i}},setCenter:async(e,n,i)=>t.getState().setCenter(e,n,i),fitBounds:async(e,n)=>{const{width:i,height:r,minZoom:s,maxZoom:a,panZoom:o}=t.getState(),c=vE(e,i,r,s,a,n?.padding??.1);return o?(await o.setViewport(c,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:i,snapGrid:r,snapToGrid:s,domNode:a}=t.getState();if(!a)return e;const{x:o,y:c}=a.getBoundingClientRect(),u={x:e.x-o,y:e.y-c},f=n.snapGrid??r,d=n.snapToGrid??s;return Nd(u,i,d,f)},flowToScreenPosition:e=>{const{transform:n,domNode:i}=t.getState();if(!i)return e;const{x:r,y:s}=i.getBoundingClientRect(),a=MO(e,n);return{x:a.x+r,y:a.y+s}}}),[])};function BV(t,e){const n=[],i=new Map,r=[];for(const s of t)if(s.type==="add"){r.push(s);continue}else if(s.type==="remove"||s.type==="replace")i.set(s.id,[s]);else{const a=i.get(s.id);a?a.push(s):i.set(s.id,[s])}for(const s of e){const a=i.get(s.id);if(!a){n.push(s);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const o={...s};for(const c of a)OSe(c,o);n.push(o)}return r.length&&r.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function OSe(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function IV(t,e){return BV(t,e)}function XV(t,e){return BV(t,e)}function Ko(t,e){return{id:t,type:"select",selected:e}}function Mc(t,e=new Set,n=!1){const i=[];for(const[r,s]of t){const a=e.has(r);!(s.selected===void 0&&!a)&&s.selected!==a&&(n&&(s.selected=a),i.push(Ko(s.id,a)))}return i}function lz({items:t=[],lookup:e}){const n=[],i=new Map(t.map(r=>[r.id,r]));for(const[r,s]of t.entries()){const a=e.get(s.id),o=a?.internals?.userNode??a;o!==void 0&&o!==s&&n.push({id:s.id,item:s,type:"replace"}),o===void 0&&n.push({item:s,type:"add",index:r})}for(const[r]of e)i.get(r)===void 0&&n.push({id:r,type:"remove"});return n}function cz(t){return{id:t.id,type:"remove"}}const uz=t=>B1e(t),vSe=t=>hV(t);function ZV(t){return X.forwardRef(t)}const ySe=typeof window<"u"?X.useLayoutEffect:X.useEffect;function hz(t){const[e,n]=X.useState(BigInt(0)),[i]=X.useState(()=>xSe(()=>n(r=>r+BigInt(1))));return ySe(()=>{const r=i.get();r.length&&(t(r),i.reset())},[e]),i}function xSe(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const VV=X.createContext(null);function bSe({children:t}){const e=It(),n=X.useCallback(o=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:f,onNodesChange:d,nodeLookup:m,fitViewQueued:v,onNodesChangeMiddlewareMap:y}=e.getState();let x=c;for(const _ of o)x=typeof _=="function"?_(x):_;let S=lz({items:x,lookup:m});for(const _ of y.values())S=_(S);f&&u(x),S.length>0?d?.(S):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:_,nodes:Q,setNodes:k}=e.getState();_&&k(Q)})},[]),i=hz(n),r=X.useCallback(o=>{const{edges:c=[],setEdges:u,hasDefaultEdges:f,onEdgesChange:d,edgeLookup:m}=e.getState();let v=c;for(const y of o)v=typeof y=="function"?y(v):y;f?u(v):d&&d(lz({items:v,lookup:m}))},[]),s=hz(r),a=X.useMemo(()=>({nodeQueue:i,edgeQueue:s}),[]);return g.jsx(VV.Provider,{value:a,children:t})}function _Se(){const t=X.useContext(VV);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const SSe=t=>!!t.panZoom;function kE(){const t=gSe(),e=It(),n=_Se(),i=ut(SSe),r=X.useMemo(()=>{const s=d=>e.getState().nodeLookup.get(d),a=d=>{n.nodeQueue.push(d)},o=d=>{n.edgeQueue.push(d)},c=d=>{const{nodeLookup:m,nodeOrigin:v}=e.getState(),y=uz(d)?d:m.get(d.id),x=y.parentId?OV(y.position,y.measured,y.parentId,m,v):y.position,S={...y,position:x,width:y.measured?.width??y.width,height:y.measured?.height??y.height};return hu(S)},u=(d,m,v={replace:!1})=>{a(y=>y.map(x=>{if(x.id===d){const S=typeof m=="function"?m(x):m;return v.replace&&uz(S)?S:{...x,...S}}return x}))},f=(d,m,v={replace:!1})=>{o(y=>y.map(x=>{if(x.id===d){const S=typeof m=="function"?m(x):m;return v.replace&&vSe(S)?S:{...x,...S}}return x}))};return{getNodes:()=>e.getState().nodes.map(d=>({...d})),getNode:d=>s(d)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:d=[]}=e.getState();return d.map(m=>({...m}))},getEdge:d=>e.getState().edgeLookup.get(d),setNodes:a,setEdges:o,addNodes:d=>{const m=Array.isArray(d)?d:[d];n.nodeQueue.push(v=>[...v,...m])},addEdges:d=>{const m=Array.isArray(d)?d:[d];n.edgeQueue.push(v=>[...v,...m])},toObject:()=>{const{nodes:d=[],edges:m=[],transform:v}=e.getState(),[y,x,S]=v;return{nodes:d.map(_=>({..._})),edges:m.map(_=>({..._})),viewport:{x:y,y:x,zoom:S}}},deleteElements:async({nodes:d=[],edges:m=[]})=>{const{nodes:v,edges:y,onNodesDelete:x,onEdgesDelete:S,triggerNodeChanges:_,triggerEdgeChanges:Q,onDelete:k,onBeforeDelete:T}=e.getState(),{nodes:E,edges:C}=await W1e({nodesToRemove:d,edgesToRemove:m,nodes:v,edges:y,onBeforeDelete:T}),P=C.length>0,L=E.length>0;if(P){const B=C.map(cz);S?.(C),Q(B)}if(L){const B=E.map(cz);x?.(E),_(B)}return(L||P)&&k?.({nodes:E,edges:C}),{deletedNodes:E,deletedEdges:C}},getIntersectingNodes:(d,m=!0,v)=>{const y=j3(d),x=y?d:c(d),S=v!==void 0;return x?(v||e.getState().nodes).filter(_=>{const Q=e.getState().nodeLookup.get(_.id);if(Q&&!y&&(_.id===d.id||!Q.internals.positionAbsolute))return!1;const k=hu(S?_:Q),T=nd(k,x);return m&&T>0||T>=k.width*k.height||T>=x.width*x.height}):[]},isNodeIntersecting:(d,m,v=!0)=>{const x=j3(d)?d:c(d);if(!x)return!1;const S=nd(x,m);return v&&S>0||S>=m.width*m.height||S>=x.width*x.height},updateNode:u,updateNodeData:(d,m,v={replace:!1})=>{u(d,y=>{const x=typeof m=="function"?m(y):m;return v.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},v)},updateEdge:f,updateEdgeData:(d,m,v={replace:!1})=>{f(d,y=>{const x=typeof m=="function"?m(y):m;return v.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},v)},getNodesBounds:d=>{const{nodeLookup:m,nodeOrigin:v}=e.getState();return I1e(d,{nodeLookup:m,nodeOrigin:v})},getHandleConnections:({type:d,id:m,nodeId:v})=>Array.from(e.getState().connectionLookup.get(`${v}-${d}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:d,handleId:m,nodeId:v})=>Array.from(e.getState().connectionLookup.get(`${v}${d?m?`-${d}-${m}`:`-${d}`:""}`)?.values()??[]),fitView:async d=>{const m=e.getState().fitViewResolver??F1e();return e.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:m}),n.nodeQueue.push(v=>[...v]),m.promise}}},[]);return X.useMemo(()=>({...r,...t,viewportInitialized:i}),[i])}const fz=t=>t.selected,wSe=typeof window<"u"?window:void 0;function kSe({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=It(),{deleteElements:i}=kE(),r=rd(t,{actInsideInputWithModifier:!1}),s=rd(e,{target:wSe});X.useEffect(()=>{if(r){const{edges:a,nodes:o}=n.getState();i({nodes:o.filter(fz),edges:a.filter(fz)}),n.setState({nodesSelectionActive:!1})}},[r]),X.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function CSe(t){const e=It();X.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=yE(t.current);(i.height===0||i.width===0)&&e.getState().onError?.("004",Os.error004()),e.setState({width:i.width||500,height:i.height||500})};if(t.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(t.current),()=>{window.removeEventListener("resize",n),i&&t.current&&i.unobserve(t.current)}}},[])}const _0={position:"absolute",width:"100%",height:"100%",top:0,left:0},TSe=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function QSe({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:r=.5,panOnScrollMode:s=ul.Free,zoomOnDoubleClick:a=!0,panOnDrag:o=!0,defaultViewport:c,translateExtent:u,minZoom:f,maxZoom:d,zoomActivationKeyCode:m,preventScrolling:v=!0,children:y,noWheelClassName:x,noPanClassName:S,onViewportChange:_,isControlledViewport:Q,paneClickDistance:k,selectionOnDrag:T}){const E=It(),C=X.useRef(null),{userSelectionActive:P,lib:L,connectionInProgress:B}=ut(TSe,Bt),N=rd(m),M=X.useRef();CSe(C);const $=X.useCallback(I=>{_?.({x:I[0],y:I[1],zoom:I[2]}),Q||E.setState({transform:I})},[_,Q]);return X.useEffect(()=>{if(C.current){M.current=$_e({domNode:C.current,minZoom:f,maxZoom:d,translateExtent:u,viewport:c,onDraggingChange:R=>E.setState({paneDragging:R}),onPanZoomStart:(R,W)=>{const{onViewportChangeStart:U,onMoveStart:G}=E.getState();G?.(R,W),U?.(W)},onPanZoom:(R,W)=>{const{onViewportChange:U,onMove:G}=E.getState();G?.(R,W),U?.(W)},onPanZoomEnd:(R,W)=>{const{onViewportChangeEnd:U,onMoveEnd:G}=E.getState();G?.(R,W),U?.(W)}});const{x:I,y:j,zoom:D}=M.current.getViewport();return E.setState({panZoom:M.current,transform:[I,j,D],domNode:C.current.closest(".react-flow")}),()=>{M.current?.destroy()}}},[]),X.useEffect(()=>{M.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:r,panOnScrollMode:s,zoomOnDoubleClick:a,panOnDrag:o,zoomActivationKeyPressed:N,preventScrolling:v,noPanClassName:S,userSelectionActive:P,noWheelClassName:x,lib:L,onTransformChange:$,connectionInProgress:B,selectionOnDrag:T,paneClickDistance:k})},[t,e,n,i,r,s,a,o,N,v,S,P,x,L,$,B,T,k]),g.jsx("div",{className:"react-flow__renderer",ref:C,style:_0,children:y})}const ESe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function PSe(){const{userSelectionActive:t,userSelectionRect:e}=ut(ESe,Bt);return t&&e?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const Xb=(t,e)=>n=>{n.target===e.current&&t?.(n)},ASe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function RSe({isSelecting:t,selectionKeyPressed:e,selectionMode:n=ed.Full,panOnDrag:i,paneClickDistance:r,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:o,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:d,onPaneMouseMove:m,onPaneMouseLeave:v,children:y}){const x=It(),{userSelectionActive:S,elementsSelectable:_,dragging:Q,connectionInProgress:k}=ut(ASe,Bt),T=_&&(t||S),E=X.useRef(null),C=X.useRef(),P=X.useRef(new Set),L=X.useRef(new Set),B=X.useRef(!1),N=U=>{if(B.current||k){B.current=!1;return}c?.(U),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},M=U=>{if(Array.isArray(i)&&i?.includes(2)){U.preventDefault();return}u?.(U)},$=f?U=>f(U):void 0,I=U=>{B.current&&(U.stopPropagation(),B.current=!1)},j=U=>{const{domNode:G}=x.getState();if(C.current=G?.getBoundingClientRect(),!C.current)return;const q=U.target===E.current;if(!q&&!!U.target.closest(".nokey")||!t||!(s&&q||e)||U.button!==0||!U.isPrimary)return;U.target?.setPointerCapture?.(U.pointerId),B.current=!1;const{x:z,y:H}=Nr(U.nativeEvent,C.current);x.setState({userSelectionRect:{width:0,height:0,startX:z,startY:H,x:z,y:H}}),q||(U.stopPropagation(),U.preventDefault())},D=U=>{const{userSelectionRect:G,transform:q,nodeLookup:V,edgeLookup:F,connectionLookup:z,triggerNodeChanges:H,triggerEdgeChanges:K,defaultEdgeOptions:ee,resetSelectedElements:ie}=x.getState();if(!C.current||!G)return;const{x:le,y:ae}=Nr(U.nativeEvent,C.current),{startX:_e,startY:ke}=G;if(!B.current){const Ye=e?0:r;if(Math.hypot(le-_e,ae-ke)<=Ye)return;ie(),a?.(U)}B.current=!0;const Ee={startX:_e,startY:ke,x:le<_e?le:_e,y:ae<ke?ae:ke,width:Math.abs(le-_e),height:Math.abs(ae-ke)},ge=P.current,$e=L.current;P.current=new Set(OE(V,Ee,q,n===ed.Partial,!0).map(Ye=>Ye.id)),L.current=new Set;const Ae=ee?.selectable??!0;for(const Ye of P.current){const De=z.get(Ye);if(De)for(const{edgeId:nn}of De.values()){const Zt=F.get(nn);Zt&&(Zt.selectable??Ae)&&L.current.add(nn)}}if(!z3(ge,P.current)){const Ye=Mc(V,P.current,!0);H(Ye)}if(!z3($e,L.current)){const Ye=Mc(F,L.current);K(Ye)}x.setState({userSelectionRect:Ee,userSelectionActive:!0,nodesSelectionActive:!1})},R=U=>{U.button===0&&(U.target?.releasePointerCapture?.(U.pointerId),!S&&U.target===E.current&&x.getState().userSelectionRect&&N?.(U),x.setState({userSelectionActive:!1,userSelectionRect:null}),B.current&&(o?.(U),x.setState({nodesSelectionActive:P.current.size>0})))},W=i===!0||Array.isArray(i)&&i.includes(0);return g.jsxs("div",{className:pn(["react-flow__pane",{draggable:W,dragging:Q,selection:t}]),onClick:T?void 0:Xb(N,E),onContextMenu:Xb(M,E),onWheel:Xb($,E),onPointerEnter:T?void 0:d,onPointerMove:T?D:m,onPointerUp:T?R:void 0,onPointerDownCapture:T?j:void 0,onClickCapture:T?I:void 0,onPointerLeave:v,ref:E,style:_0,children:[y,g.jsx(PSe,{})]})}function wT({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:o,onError:c}=e.getState(),u=o.get(t);if(!u){c?.("012",Os.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):r([t])}function WV({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:r,isSelectable:s,nodeClickDistance:a}){const o=It(),[c,u]=X.useState(!1),f=X.useRef();return X.useEffect(()=>{f.current=y_e({getStoreItems:()=>o.getState(),onNodeMouseDown:d=>{wT({id:d,store:o,nodeRef:t})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),X.useEffect(()=>{if(e)f.current?.destroy();else if(t.current)return f.current?.update({noDragClassName:n,handleSelector:i,domNode:t.current,isSelectable:s,nodeId:r,nodeClickDistance:a}),()=>{f.current?.destroy()}},[n,i,e,s,t,r]),c}const $Se=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function UV(){const t=It();return X.useCallback(n=>{const{nodeExtent:i,snapToGrid:r,snapGrid:s,nodesDraggable:a,onError:o,updateNodePositions:c,nodeLookup:u,nodeOrigin:f}=t.getState(),d=new Map,m=$Se(a),v=r?s[0]:5,y=r?s[1]:5,x=n.direction.x*v*n.factor,S=n.direction.y*y*n.factor;for(const[,_]of u){if(!m(_))continue;let Q={x:_.internals.positionAbsolute.x+x,y:_.internals.positionAbsolute.y+S};r&&(Q=$d(Q,s));const{position:k,positionAbsolute:T}=fV({nodeId:_.id,nextPosition:Q,nodeLookup:u,nodeExtent:i,nodeOrigin:f,onError:o});_.position=k,_.internals.positionAbsolute=T,d.set(_.id,_)}c(d)},[])}const CE=X.createContext(null),NSe=CE.Provider;CE.Consumer;const HV=()=>X.useContext(CE),MSe=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),jSe=(t,e,n)=>i=>{const{connectionClickStartHandle:r,connectionMode:s,connection:a}=i,{fromHandle:o,toHandle:c,isValid:u}=a,f=c?.nodeId===t&&c?.id===e&&c?.type===n;return{connectingFrom:o?.nodeId===t&&o?.id===e&&o?.type===n,connectingTo:f,clickConnecting:r?.nodeId===t&&r?.id===e&&r?.type===n,isPossibleEndHandle:s===cu.Strict?o?.type!==n:t!==o?.nodeId||e!==o?.id,connectionInProcess:!!o,clickConnectionInProcess:!!r,valid:f&&u}};function zSe({type:t="source",position:e=je.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:a,onConnect:o,children:c,className:u,onMouseDown:f,onTouchStart:d,...m},v){const y=a||null,x=t==="target",S=It(),_=HV(),{connectOnClick:Q,noPanClassName:k,rfId:T}=ut(MSe,Bt),{connectingFrom:E,connectingTo:C,clickConnecting:P,isPossibleEndHandle:L,connectionInProcess:B,clickConnectionInProcess:N,valid:M}=ut(jSe(_,y,t),Bt);_||S.getState().onError?.("010",Os.error010());const $=D=>{const{defaultEdgeOptions:R,onConnect:W,hasDefaultEdges:U}=S.getState(),G={...R,...D};if(U){const{edges:q,setEdges:V}=S.getState();V(i_e(G,q))}W?.(G),o?.(G)},I=D=>{if(!_)return;const R=xV(D.nativeEvent);if(r&&(R&&D.button===0||!R)){const W=S.getState();ST.onPointerDown(D.nativeEvent,{handleDomNode:D.currentTarget,autoPanOnConnect:W.autoPanOnConnect,connectionMode:W.connectionMode,connectionRadius:W.connectionRadius,domNode:W.domNode,nodeLookup:W.nodeLookup,lib:W.lib,isTarget:x,handleId:y,nodeId:_,flowId:W.rfId,panBy:W.panBy,cancelConnection:W.cancelConnection,onConnectStart:W.onConnectStart,onConnectEnd:W.onConnectEnd,updateConnection:W.updateConnection,onConnect:$,isValidConnection:n||W.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:W.autoPanSpeed,dragThreshold:W.connectionDragThreshold})}R?f?.(D):d?.(D)},j=D=>{const{onClickConnectStart:R,onClickConnectEnd:W,connectionClickStartHandle:U,connectionMode:G,isValidConnection:q,lib:V,rfId:F,nodeLookup:z,connection:H}=S.getState();if(!_||!U&&!r)return;if(!U){R?.(D.nativeEvent,{nodeId:_,handleId:y,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:_,type:t,id:y}});return}const K=vV(D.target),ee=n||q,{connection:ie,isValid:le}=ST.isValid(D.nativeEvent,{handle:{nodeId:_,id:y,type:t},connectionMode:G,fromNodeId:U.nodeId,fromHandleId:U.id||null,fromType:U.type,isValidConnection:ee,flowId:F,doc:K,lib:V,nodeLookup:z});le&&ie&&$(ie);const ae=structuredClone(H);delete ae.inProgress,ae.toPosition=ae.toHandle?ae.toHandle.position:null,W?.(D,ae),S.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":y,"data-nodeid":_,"data-handlepos":e,"data-id":`${T}-${_}-${y}-${t}`,className:pn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",k,u,{source:!x,target:x,connectable:i,connectablestart:r,connectableend:s,clickconnecting:P,connectingfrom:E,connectingto:C,valid:M,connectionindicator:i&&(!B||L)&&(B||N?s:r)}]),onMouseDown:I,onTouchStart:I,onClick:Q?j:void 0,ref:v,...m,children:c})}const mu=X.memo(ZV(zSe));function DSe({data:t,isConnectable:e,sourcePosition:n=je.Bottom}){return g.jsxs(g.Fragment,{children:[t?.label,g.jsx(mu,{type:"source",position:n,isConnectable:e})]})}function LSe({data:t,isConnectable:e,targetPosition:n=je.Top,sourcePosition:i=je.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(mu,{type:"target",position:n,isConnectable:e}),t?.label,g.jsx(mu,{type:"source",position:i,isConnectable:e})]})}function qSe(){return null}function BSe({data:t,isConnectable:e,targetPosition:n=je.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(mu,{type:"target",position:n,isConnectable:e}),t?.label]})}const jO={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},dz={input:DSe,default:LSe,output:BSe,group:qSe};function ISe(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const XSe=t=>{const{width:e,height:n,x:i,y:r}=Rd(t.nodeLookup,{filter:s=>!!s.selected});return{width:$r(e)?e:null,height:$r(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${r}px)`}};function ZSe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=It(),{width:r,height:s,transformString:a,userSelectionActive:o}=ut(XSe,Bt),c=UV(),u=X.useRef(null);if(X.useEffect(()=>{n||u.current?.focus({preventScroll:!0})},[n]),WV({nodeRef:u}),o||!r||!s)return null;const f=t?m=>{const v=i.getState().nodes.filter(y=>y.selected);t(m,v)}:void 0,d=m=>{Object.prototype.hasOwnProperty.call(jO,m.key)&&(m.preventDefault(),c({direction:jO[m.key],factor:m.shiftKey?4:1}))};return g.jsx("div",{className:pn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:a},children:g.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:r,height:s}})})}const pz=typeof window<"u"?window:void 0,VSe=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function YV({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:a,paneClickDistance:o,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:f,selectionMode:d,onSelectionStart:m,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:S,elementsSelectable:_,zoomOnScroll:Q,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:E,panOnScrollMode:C,zoomOnDoubleClick:P,panOnDrag:L,defaultViewport:B,translateExtent:N,minZoom:M,maxZoom:$,preventScrolling:I,onSelectionContextMenu:j,noWheelClassName:D,noPanClassName:R,disableKeyboardA11y:W,onViewportChange:U,isControlledViewport:G}){const{nodesSelectionActive:q,userSelectionActive:V}=ut(VSe,Bt),F=rd(u,{target:pz}),z=rd(x,{target:pz}),H=z||L,K=z||T,ee=f&&H!==!0,ie=F||V||ee;return kSe({deleteKeyCode:c,multiSelectionKeyCode:y}),g.jsx(QSe,{onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:Q,zoomOnPinch:k,panOnScroll:K,panOnScrollSpeed:E,panOnScrollMode:C,zoomOnDoubleClick:P,panOnDrag:!F&&H,defaultViewport:B,translateExtent:N,minZoom:M,maxZoom:$,zoomActivationKeyCode:S,preventScrolling:I,noWheelClassName:D,noPanClassName:R,onViewportChange:U,isControlledViewport:G,paneClickDistance:o,selectionOnDrag:ee,children:g.jsxs(RSe,{onSelectionStart:m,onSelectionEnd:v,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:H,isSelecting:!!ie,selectionMode:d,selectionKeyPressed:F,paneClickDistance:o,selectionOnDrag:ee,children:[t,q&&g.jsx(ZSe,{onSelectionContextMenu:j,noPanClassName:R,disableKeyboardA11y:W})]})})}YV.displayName="FlowRenderer";const WSe=X.memo(YV),USe=t=>e=>t?OE(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function HSe(t){return ut(X.useCallback(USe(t),[t]),Bt)}const YSe=t=>t.updateNodeInternals;function FSe(){const t=ut(YSe),[e]=X.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(r=>{const s=r.target.getAttribute("data-id");i.set(s,{id:s,nodeElement:r.target,force:!0})}),t(i)}));return X.useEffect(()=>()=>{e?.disconnect()},[e]),e}function GSe({node:t,nodeType:e,hasDimensions:n,resizeObserver:i}){const r=It(),s=X.useRef(null),a=X.useRef(null),o=X.useRef(t.sourcePosition),c=X.useRef(t.targetPosition),u=X.useRef(e),f=n&&!!t.internals.handleBounds;return X.useEffect(()=>{s.current&&!t.hidden&&(!f||a.current!==s.current)&&(a.current&&i?.unobserve(a.current),i?.observe(s.current),a.current=s.current)},[f,t.hidden]),X.useEffect(()=>()=>{a.current&&(i?.unobserve(a.current),a.current=null)},[]),X.useEffect(()=>{if(s.current){const d=u.current!==e,m=o.current!==t.sourcePosition,v=c.current!==t.targetPosition;(d||m||v)&&(u.current=e,o.current=t.sourcePosition,c.current=t.targetPosition,r.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function KSe({id:t,onClick:e,onMouseEnter:n,onMouseMove:i,onMouseLeave:r,onContextMenu:s,onDoubleClick:a,nodesDraggable:o,elementsSelectable:c,nodesConnectable:u,nodesFocusable:f,resizeObserver:d,noDragClassName:m,noPanClassName:v,disableKeyboardA11y:y,rfId:x,nodeTypes:S,nodeClickDistance:_,onError:Q}){const{node:k,internals:T,isParent:E}=ut(le=>{const ae=le.nodeLookup.get(t),_e=le.parentLookup.has(t);return{node:ae,internals:ae.internals,isParent:_e}},Bt);let C=k.type||"default",P=S?.[C]||dz[C];P===void 0&&(Q?.("003",Os.error003(C)),C="default",P=S?.default||dz.default);const L=!!(k.draggable||o&&typeof k.draggable>"u"),B=!!(k.selectable||c&&typeof k.selectable>"u"),N=!!(k.connectable||u&&typeof k.connectable>"u"),M=!!(k.focusable||f&&typeof k.focusable>"u"),$=It(),I=gV(k),j=GSe({node:k,nodeType:C,hasDimensions:I,resizeObserver:d}),D=WV({nodeRef:j,disabled:k.hidden||!L,noDragClassName:m,handleSelector:k.dragHandle,nodeId:t,isSelectable:B,nodeClickDistance:_}),R=UV();if(k.hidden)return null;const W=fa(k),U=ISe(k),G=B||L||e||n||i||r,q=n?le=>n(le,{...T.userNode}):void 0,V=i?le=>i(le,{...T.userNode}):void 0,F=r?le=>r(le,{...T.userNode}):void 0,z=s?le=>s(le,{...T.userNode}):void 0,H=a?le=>a(le,{...T.userNode}):void 0,K=le=>{const{selectNodesOnDrag:ae,nodeDragThreshold:_e}=$.getState();B&&(!ae||!L||_e>0)&&wT({id:t,store:$,nodeRef:j}),e&&e(le,{...T.userNode})},ee=le=>{if(!(yV(le.nativeEvent)||y)){if(oV.includes(le.key)&&B){const ae=le.key==="Escape";wT({id:t,store:$,unselect:ae,nodeRef:j})}else if(L&&k.selected&&Object.prototype.hasOwnProperty.call(jO,le.key)){le.preventDefault();const{ariaLabelConfig:ae}=$.getState();$.setState({ariaLiveMessage:ae["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),R({direction:jO[le.key],factor:le.shiftKey?4:1})}}},ie=()=>{if(y||!j.current?.matches(":focus-visible"))return;const{transform:le,width:ae,height:_e,autoPanOnNodeFocus:ke,setCenter:Ee}=$.getState();if(!ke)return;OE(new Map([[t,k]]),{x:0,y:0,width:ae,height:_e},le,!0).length>0||Ee(k.position.x+W.width/2,k.position.y+W.height/2,{zoom:le[2]})};return g.jsx("div",{className:pn(["react-flow__node",`react-flow__node-${C}`,{[v]:L},k.className,{selected:k.selected,selectable:B,parent:E,draggable:L,dragging:D}]),ref:j,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:G?"all":"none",visibility:I?"visible":"hidden",...k.style,...U},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:q,onMouseMove:V,onMouseLeave:F,onContextMenu:z,onClick:K,onDoubleClick:H,onKeyDown:M?ee:void 0,tabIndex:M?0:void 0,onFocus:M?ie:void 0,role:k.ariaRole??(M?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${DV}-${x}`,"aria-label":k.ariaLabel,...k.domAttributes,children:g.jsx(NSe,{value:t,children:g.jsx(P,{id:t,data:k.data,type:C,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:B,draggable:L,deletable:k.deletable??!0,isConnectable:N,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:D,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...W})})})}var JSe=X.memo(KSe);const ewe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function FV(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,onError:s}=ut(ewe,Bt),a=HSe(t.onlyRenderVisibleElements),o=FSe();return g.jsx("div",{className:"react-flow__nodes",style:_0,children:a.map(c=>g.jsx(JSe,{id:c,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:o,nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,nodeClickDistance:t.nodeClickDistance,onError:s},c))})}FV.displayName="NodeRenderer";const twe=X.memo(FV);function nwe(t){return ut(X.useCallback(n=>{if(!t)return n.edges.map(r=>r.id);const i=[];if(n.width&&n.height)for(const r of n.edges){const s=n.nodeLookup.get(r.source),a=n.nodeLookup.get(r.target);s&&a&&e_e({sourceNode:s,targetNode:a,width:n.width,height:n.height,transform:n.transform})&&i.push(r.id)}return i},[t]),Bt)}const iwe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return g.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},rwe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return g.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},mz={[td.Arrow]:iwe,[td.ArrowClosed]:rwe};function swe(t){const e=It();return X.useMemo(()=>Object.prototype.hasOwnProperty.call(mz,t)?mz[t]:(e.getState().onError?.("009",Os.error009(t)),null),[t])}const awe=({id:t,type:e,color:n,width:i=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:o="auto-start-reverse"})=>{const c=swe(e);return c?g.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0",children:g.jsx(c,{color:n,strokeWidth:a})}):null},GV=({defaultColor:t,rfId:e})=>{const n=ut(s=>s.edges),i=ut(s=>s.defaultEdgeOptions),r=X.useMemo(()=>l_e(n,{id:e,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[n,i,e,t]);return r.length?g.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:g.jsx("defs",{children:r.map(s=>g.jsx(awe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};GV.displayName="MarkerDefinitions";var owe=X.memo(GV);function KV({x:t,y:e,label:n,labelStyle:i,labelShowBg:r=!0,labelBgStyle:s,labelBgPadding:a=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...f}){const[d,m]=X.useState({x:1,y:0,width:0,height:0}),v=pn(["react-flow__edge-textwrapper",u]),y=X.useRef(null);return X.useEffect(()=>{if(y.current){const x=y.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?g.jsxs("g",{transform:`translate(${t-d.width/2} ${e-d.height/2})`,className:v,visibility:d.width?"visible":"hidden",...f,children:[r&&g.jsx("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),g.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:i,children:n}),c]}):null}KV.displayName="EdgeText";const lwe=X.memo(KV);function S0({path:t,labelX:e,labelY:n,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:a,labelBgPadding:o,labelBgBorderRadius:c,interactionWidth:u=20,...f}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...f,d:t,fill:"none",className:pn(["react-flow__edge-path",f.className])}),u?g.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,i&&$r(e)&&$r(n)?g.jsx(lwe,{x:e,y:n,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:a,labelBgPadding:o,labelBgBorderRadius:c}):null]})}function gz({pos:t,x1:e,y1:n,x2:i,y2:r}){return t===je.Left||t===je.Right?[.5*(e+i),n]:[e,.5*(n+r)]}function JV({sourceX:t,sourceY:e,sourcePosition:n=je.Bottom,targetX:i,targetY:r,targetPosition:s=je.Top}){const[a,o]=gz({pos:n,x1:t,y1:e,x2:i,y2:r}),[c,u]=gz({pos:s,x1:i,y1:r,x2:t,y2:e}),[f,d,m,v]=bV({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:a,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${t},${e} C${a},${o} ${c},${u} ${i},${r}`,f,d,m,v]}function eW(t){return X.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:s,sourcePosition:a,targetPosition:o,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:S,interactionWidth:_})=>{const[Q,k,T]=JV({sourceX:n,sourceY:i,sourcePosition:a,targetX:r,targetY:s,targetPosition:o}),E=t.isInternal?void 0:e;return g.jsx(S0,{id:E,path:Q,labelX:k,labelY:T,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:S,interactionWidth:_})})}const cwe=eW({isInternal:!1}),tW=eW({isInternal:!0});cwe.displayName="SimpleBezierEdge";tW.displayName="SimpleBezierEdgeInternal";function nW(t){return X.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:s,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:m,sourcePosition:v=je.Bottom,targetPosition:y=je.Top,markerEnd:x,markerStart:S,pathOptions:_,interactionWidth:Q})=>{const[k,T,E]=xT({sourceX:n,sourceY:i,sourcePosition:v,targetX:r,targetY:s,targetPosition:y,borderRadius:_?.borderRadius,offset:_?.offset,stepPosition:_?.stepPosition}),C=t.isInternal?void 0:e;return g.jsx(S0,{id:C,path:k,labelX:T,labelY:E,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:x,markerStart:S,interactionWidth:Q})})}const iW=nW({isInternal:!1}),rW=nW({isInternal:!0});iW.displayName="SmoothStepEdge";rW.displayName="SmoothStepEdgeInternal";function sW(t){return X.memo(({id:e,...n})=>{const i=t.isInternal?void 0:e;return g.jsx(iW,{...n,id:i,pathOptions:X.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const uwe=sW({isInternal:!1}),aW=sW({isInternal:!0});uwe.displayName="StepEdge";aW.displayName="StepEdgeInternal";function oW(t){return X.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:s,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:v,markerStart:y,interactionWidth:x})=>{const[S,_,Q]=wV({sourceX:n,sourceY:i,targetX:r,targetY:s}),k=t.isInternal?void 0:e;return g.jsx(S0,{id:k,path:S,labelX:_,labelY:Q,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:m,markerEnd:v,markerStart:y,interactionWidth:x})})}const hwe=oW({isInternal:!1}),lW=oW({isInternal:!0});hwe.displayName="StraightEdge";lW.displayName="StraightEdgeInternal";function cW(t){return X.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:s,sourcePosition:a=je.Bottom,targetPosition:o=je.Top,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:S,pathOptions:_,interactionWidth:Q})=>{const[k,T,E]=_V({sourceX:n,sourceY:i,sourcePosition:a,targetX:r,targetY:s,targetPosition:o,curvature:_?.curvature}),C=t.isInternal?void 0:e;return g.jsx(S0,{id:C,path:k,labelX:T,labelY:E,label:c,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:S,interactionWidth:Q})})}const fwe=cW({isInternal:!1}),uW=cW({isInternal:!0});fwe.displayName="BezierEdge";uW.displayName="BezierEdgeInternal";const Oz={default:uW,straight:lW,step:aW,smoothstep:rW,simplebezier:tW},vz={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},dwe=(t,e,n)=>n===je.Left?t-e:n===je.Right?t+e:t,pwe=(t,e,n)=>n===je.Top?t-e:n===je.Bottom?t+e:t,yz="react-flow__edgeupdater";function xz({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:a,type:o}){return g.jsx("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:a,className:pn([yz,`${yz}-${o}`]),cx:dwe(e,i,t),cy:pwe(n,i,t),r:i,stroke:"transparent",fill:"transparent"})}function mwe({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:i,sourceY:r,targetX:s,targetY:a,sourcePosition:o,targetPosition:c,onReconnect:u,onReconnectStart:f,onReconnectEnd:d,setReconnecting:m,setUpdateHover:v}){const y=It(),x=(T,E)=>{if(T.button!==0)return;const{autoPanOnConnect:C,domNode:P,isValidConnection:L,connectionMode:B,connectionRadius:N,lib:M,onConnectStart:$,onConnectEnd:I,cancelConnection:j,nodeLookup:D,rfId:R,panBy:W,updateConnection:U}=y.getState(),G=E.type==="target",q=(z,H)=>{m(!1),d?.(z,n,E.type,H)},V=z=>u?.(n,z),F=(z,H)=>{m(!0),f?.(T,n,E.type),$?.(z,H)};ST.onPointerDown(T.nativeEvent,{autoPanOnConnect:C,connectionMode:B,connectionRadius:N,domNode:P,handleId:E.id,nodeId:E.nodeId,nodeLookup:D,isTarget:G,edgeUpdaterType:E.type,lib:M,flowId:R,cancelConnection:j,panBy:W,isValidConnection:L,onConnect:V,onConnectStart:F,onConnectEnd:I,onReconnectEnd:q,updateConnection:U,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},S=T=>x(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),_=T=>x(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),Q=()=>v(!0),k=()=>v(!1);return g.jsxs(g.Fragment,{children:[(t===!0||t==="source")&&g.jsx(xz,{position:o,centerX:i,centerY:r,radius:e,onMouseDown:S,onMouseEnter:Q,onMouseOut:k,type:"source"}),(t===!0||t==="target")&&g.jsx(xz,{position:c,centerX:s,centerY:a,radius:e,onMouseDown:_,onMouseEnter:Q,onMouseOut:k,type:"target"})]})}function gwe({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:i,onClick:r,onDoubleClick:s,onContextMenu:a,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,reconnectRadius:f,onReconnect:d,onReconnectStart:m,onReconnectEnd:v,rfId:y,edgeTypes:x,noPanClassName:S,onError:_,disableKeyboardA11y:Q}){let k=ut(Ee=>Ee.edgeLookup.get(t));const T=ut(Ee=>Ee.defaultEdgeOptions);k=T?{...T,...k}:k;let E=k.type||"default",C=x?.[E]||Oz[E];C===void 0&&(_?.("011",Os.error011(E)),E="default",C=x?.default||Oz.default);const P=!!(k.focusable||e&&typeof k.focusable>"u"),L=typeof d<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),B=!!(k.selectable||i&&typeof k.selectable>"u"),N=X.useRef(null),[M,$]=X.useState(!1),[I,j]=X.useState(!1),D=It(),{zIndex:R,sourceX:W,sourceY:U,targetX:G,targetY:q,sourcePosition:V,targetPosition:F}=ut(X.useCallback(Ee=>{const ge=Ee.nodeLookup.get(k.source),$e=Ee.nodeLookup.get(k.target);if(!ge||!$e)return{zIndex:k.zIndex,...vz};const Ae=o_e({id:t,sourceNode:ge,targetNode:$e,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:Ee.connectionMode,onError:_});return{zIndex:J1e({selected:k.selected,zIndex:k.zIndex,sourceNode:ge,targetNode:$e,elevateOnSelect:Ee.elevateEdgesOnSelect,zIndexMode:Ee.zIndexMode}),...Ae||vz}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Bt),z=X.useMemo(()=>k.markerStart?`url('#${bT(k.markerStart,y)}')`:void 0,[k.markerStart,y]),H=X.useMemo(()=>k.markerEnd?`url('#${bT(k.markerEnd,y)}')`:void 0,[k.markerEnd,y]);if(k.hidden||W===null||U===null||G===null||q===null)return null;const K=Ee=>{const{addSelectedEdges:ge,unselectNodesAndEdges:$e,multiSelectionActive:Ae}=D.getState();B&&(D.setState({nodesSelectionActive:!1}),k.selected&&Ae?($e({nodes:[],edges:[k]}),N.current?.blur()):ge([t])),r&&r(Ee,k)},ee=s?Ee=>{s(Ee,{...k})}:void 0,ie=a?Ee=>{a(Ee,{...k})}:void 0,le=o?Ee=>{o(Ee,{...k})}:void 0,ae=c?Ee=>{c(Ee,{...k})}:void 0,_e=u?Ee=>{u(Ee,{...k})}:void 0,ke=Ee=>{if(!Q&&oV.includes(Ee.key)&&B){const{unselectNodesAndEdges:ge,addSelectedEdges:$e}=D.getState();Ee.key==="Escape"?(N.current?.blur(),ge({edges:[k]})):$e([t])}};return g.jsx("svg",{style:{zIndex:R},children:g.jsxs("g",{className:pn(["react-flow__edge",`react-flow__edge-${E}`,k.className,S,{selected:k.selected,animated:k.animated,inactive:!B&&!r,updating:M,selectable:B}]),onClick:K,onDoubleClick:ee,onContextMenu:ie,onMouseEnter:le,onMouseMove:ae,onMouseLeave:_e,onKeyDown:P?ke:void 0,tabIndex:P?0:void 0,role:k.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":P?`${LV}-${y}`:void 0,ref:N,...k.domAttributes,children:[!I&&g.jsx(C,{id:t,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:B,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:W,sourceY:U,targetX:G,targetY:q,sourcePosition:V,targetPosition:F,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:z,markerEnd:H,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),L&&g.jsx(mwe,{edge:k,isReconnectable:L,reconnectRadius:f,onReconnect:d,onReconnectStart:m,onReconnectEnd:v,sourceX:W,sourceY:U,targetX:G,targetY:q,sourcePosition:V,targetPosition:F,setUpdateHover:$,setReconnecting:j})]})})}var Owe=X.memo(gwe);const vwe=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function hW({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:i,noPanClassName:r,onReconnect:s,onEdgeContextMenu:a,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:f,reconnectRadius:d,onEdgeDoubleClick:m,onReconnectStart:v,onReconnectEnd:y,disableKeyboardA11y:x}){const{edgesFocusable:S,edgesReconnectable:_,elementsSelectable:Q,onError:k}=ut(vwe,Bt),T=nwe(e);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(owe,{defaultColor:t,rfId:n}),T.map(E=>g.jsx(Owe,{id:E,edgesFocusable:S,edgesReconnectable:_,elementsSelectable:Q,noPanClassName:r,onReconnect:s,onContextMenu:a,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:f,reconnectRadius:d,onDoubleClick:m,onReconnectStart:v,onReconnectEnd:y,rfId:n,onError:k,edgeTypes:i,disableKeyboardA11y:x},E))]})}hW.displayName="EdgeRenderer";const ywe=X.memo(hW),xwe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function bwe({children:t}){const e=ut(xwe);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function _we(t){const e=kE(),n=X.useRef(!1);X.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Swe=t=>t.panZoom?.syncViewport;function wwe(t){const e=ut(Swe),n=It();return X.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function kwe(t){return t.connection.inProgress?{...t.connection,to:Nd(t.connection.to,t.transform)}:{...t.connection}}function Cwe(t){return kwe}function Twe(t){const e=Cwe();return ut(e,Bt)}const Qwe=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function Ewe({containerStyle:t,style:e,type:n,component:i}){const{nodesConnectable:r,width:s,height:a,isValid:o,inProgress:c}=ut(Qwe,Bt);return!(s&&r&&c)?null:g.jsx("svg",{style:t,width:s,height:a,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:pn(["react-flow__connection",uV(o)]),children:g.jsx(fW,{style:e,type:n,CustomComponent:i,isValid:o})})})}const fW=({style:t,type:e=eo.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:r,from:s,fromNode:a,fromHandle:o,fromPosition:c,to:u,toNode:f,toHandle:d,toPosition:m,pointer:v}=Twe();if(!r)return;if(n)return g.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:a,fromHandle:o,fromX:s.x,fromY:s.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:m,connectionStatus:uV(i),toNode:f,toHandle:d,pointer:v});let y="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:m};switch(e){case eo.Bezier:[y]=_V(x);break;case eo.SimpleBezier:[y]=JV(x);break;case eo.Step:[y]=xT({...x,borderRadius:0});break;case eo.SmoothStep:[y]=xT(x);break;default:[y]=wV(x)}return g.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:t})};fW.displayName="ConnectionLine";const Pwe={};function bz(t=Pwe){X.useRef(t),It(),X.useEffect(()=>{},[t])}function Awe(){It(),X.useRef(!1),X.useEffect(()=>{},[])}function dW({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:i,onEdgeClick:r,onNodeDoubleClick:s,onEdgeDoubleClick:a,onNodeMouseEnter:o,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:f,onSelectionContextMenu:d,onSelectionStart:m,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:x,connectionLineComponent:S,connectionLineContainerStyle:_,selectionKeyCode:Q,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:P,deleteKeyCode:L,onlyRenderVisibleElements:B,elementsSelectable:N,defaultViewport:M,translateExtent:$,minZoom:I,maxZoom:j,preventScrolling:D,defaultMarkerColor:R,zoomOnScroll:W,zoomOnPinch:U,panOnScroll:G,panOnScrollSpeed:q,panOnScrollMode:V,zoomOnDoubleClick:F,panOnDrag:z,onPaneClick:H,onPaneMouseEnter:K,onPaneMouseMove:ee,onPaneMouseLeave:ie,onPaneScroll:le,onPaneContextMenu:ae,paneClickDistance:_e,nodeClickDistance:ke,onEdgeContextMenu:Ee,onEdgeMouseEnter:ge,onEdgeMouseMove:$e,onEdgeMouseLeave:Ae,reconnectRadius:Ye,onReconnect:De,onReconnectStart:nn,onReconnectEnd:Zt,noDragClassName:Zn,noWheelClassName:Vn,noPanClassName:kn,disableKeyboardA11y:jt,nodeExtent:zt,rfId:Ai,viewport:ue,onViewportChange:ve}){return bz(t),bz(e),Awe(),_we(n),wwe(ue),g.jsx(WSe,{onPaneClick:H,onPaneMouseEnter:K,onPaneMouseMove:ee,onPaneMouseLeave:ie,onPaneContextMenu:ae,onPaneScroll:le,paneClickDistance:_e,deleteKeyCode:L,selectionKeyCode:Q,selectionOnDrag:k,selectionMode:T,onSelectionStart:m,onSelectionEnd:v,multiSelectionKeyCode:E,panActivationKeyCode:C,zoomActivationKeyCode:P,elementsSelectable:N,zoomOnScroll:W,zoomOnPinch:U,zoomOnDoubleClick:F,panOnScroll:G,panOnScrollSpeed:q,panOnScrollMode:V,panOnDrag:z,defaultViewport:M,translateExtent:$,minZoom:I,maxZoom:j,onSelectionContextMenu:d,preventScrolling:D,noDragClassName:Zn,noWheelClassName:Vn,noPanClassName:kn,disableKeyboardA11y:jt,onViewportChange:ve,isControlledViewport:!!ue,children:g.jsxs(bwe,{children:[g.jsx(ywe,{edgeTypes:e,onEdgeClick:r,onEdgeDoubleClick:a,onReconnect:De,onReconnectStart:nn,onReconnectEnd:Zt,onlyRenderVisibleElements:B,onEdgeContextMenu:Ee,onEdgeMouseEnter:ge,onEdgeMouseMove:$e,onEdgeMouseLeave:Ae,reconnectRadius:Ye,defaultMarkerColor:R,noPanClassName:kn,disableKeyboardA11y:jt,rfId:Ai}),g.jsx(Ewe,{style:x,type:y,component:S,containerStyle:_}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(twe,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:o,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:f,nodeClickDistance:ke,onlyRenderVisibleElements:B,noPanClassName:kn,noDragClassName:Zn,disableKeyboardA11y:jt,nodeExtent:zt,rfId:Ai}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}dW.displayName="GraphView";const Rwe=X.memo(dW),_z=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:r,height:s,fitView:a,fitViewOptions:o,minZoom:c=.5,maxZoom:u=2,nodeOrigin:f,nodeExtent:d,zIndexMode:m="basic"}={})=>{const v=new Map,y=new Map,x=new Map,S=new Map,_=i??e??[],Q=n??t??[],k=f??[0,0],T=d??Jf;TV(x,S,_);const E=_T(Q,v,y,{nodeOrigin:k,nodeExtent:T,zIndexMode:m});let C=[0,0,1];if(a&&r&&s){const P=Rd(v,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:L,y:B,zoom:N}=vE(P,r,s,c,u,o?.padding??.1);C=[L,B,N]}return{rfId:"1",width:r??0,height:s??0,transform:C,nodes:Q,nodesInitialized:E,nodeLookup:v,parentLookup:y,edges:_,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:c,maxZoom:u,translateExtent:Jf,nodeExtent:T,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:cu.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:o,fitViewResolver:null,connection:{...cV},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:U1e,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:lV,zIndexMode:m,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},$we=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:r,height:s,fitView:a,fitViewOptions:o,minZoom:c,maxZoom:u,nodeOrigin:f,nodeExtent:d,zIndexMode:m})=>G_e((v,y)=>{async function x(){const{nodeLookup:S,panZoom:_,fitViewOptions:Q,fitViewResolver:k,width:T,height:E,minZoom:C,maxZoom:P}=y();_&&(await V1e({nodes:S,width:T,height:E,panZoom:_,minZoom:C,maxZoom:P},Q),k?.resolve(!0),v({fitViewResolver:null}))}return{..._z({nodes:t,edges:e,width:r,height:s,fitView:a,fitViewOptions:o,minZoom:c,maxZoom:u,nodeOrigin:f,nodeExtent:d,defaultNodes:n,defaultEdges:i,zIndexMode:m}),setNodes:S=>{const{nodeLookup:_,parentLookup:Q,nodeOrigin:k,elevateNodesOnSelect:T,fitViewQueued:E,zIndexMode:C}=y(),P=_T(S,_,Q,{nodeOrigin:k,nodeExtent:d,elevateNodesOnSelect:T,checkEquality:!0,zIndexMode:C});E&&P?(x(),v({nodes:S,nodesInitialized:P,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:S,nodesInitialized:P})},setEdges:S=>{const{connectionLookup:_,edgeLookup:Q}=y();TV(_,Q,S),v({edges:S})},setDefaultNodesAndEdges:(S,_)=>{if(S){const{setNodes:Q}=y();Q(S),v({hasDefaultNodes:!0})}if(_){const{setEdges:Q}=y();Q(_),v({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:_,nodeLookup:Q,parentLookup:k,domNode:T,nodeOrigin:E,nodeExtent:C,debug:P,fitViewQueued:L,zIndexMode:B}=y(),{changes:N,updatedInternals:M}=m_e(S,Q,k,T,E,C,B);M&&(h_e(Q,k,{nodeOrigin:E,nodeExtent:C,zIndexMode:B}),L?(x(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),N?.length>0&&(P&&console.log("React Flow: trigger node changes",N),_?.(N)))},updateNodePositions:(S,_=!1)=>{const Q=[];let k=[];const{nodeLookup:T,triggerNodeChanges:E,connection:C,updateConnection:P,onNodesChangeMiddlewareMap:L}=y();for(const[B,N]of S){const M=T.get(B),$=!!(M?.expandParent&&M?.parentId&&N?.position),I={id:B,type:"position",position:$?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:_};if(M&&C.inProgress&&C.fromNode.id===M.id){const j=kl(M,C.fromHandle,je.Left,!0);P({...C,from:j})}$&&M.parentId&&Q.push({id:B,parentId:M.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width??0,height:N.measured.height??0}}),k.push(I)}if(Q.length>0){const{parentLookup:B,nodeOrigin:N}=y(),M=wE(Q,T,B,N);k.push(...M)}for(const B of L.values())k=B(k);E(k)},triggerNodeChanges:S=>{const{onNodesChange:_,setNodes:Q,nodes:k,hasDefaultNodes:T,debug:E}=y();if(S?.length){if(T){const C=IV(S,k);Q(C)}E&&console.log("React Flow: trigger node changes",S),_?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:_,setEdges:Q,edges:k,hasDefaultEdges:T,debug:E}=y();if(S?.length){if(T){const C=XV(S,k);Q(C)}E&&console.log("React Flow: trigger edge changes",S),_?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:_,edgeLookup:Q,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:E}=y();if(_){const C=S.map(P=>Ko(P,!0));T(C);return}T(Mc(k,new Set([...S]),!0)),E(Mc(Q))},addSelectedEdges:S=>{const{multiSelectionActive:_,edgeLookup:Q,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:E}=y();if(_){const C=S.map(P=>Ko(P,!0));E(C);return}E(Mc(Q,new Set([...S]))),T(Mc(k,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:_}={})=>{const{edges:Q,nodes:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:C}=y(),P=S||k,L=_||Q,B=P.map(M=>{const $=T.get(M.id);return $&&($.selected=!1),Ko(M.id,!1)}),N=L.map(M=>Ko(M.id,!1));E(B),C(N)},setMinZoom:S=>{const{panZoom:_,maxZoom:Q}=y();_?.setScaleExtent([S,Q]),v({minZoom:S})},setMaxZoom:S=>{const{panZoom:_,minZoom:Q}=y();_?.setScaleExtent([Q,S]),v({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),v({translateExtent:S})},resetSelectedElements:()=>{const{edges:S,nodes:_,triggerNodeChanges:Q,triggerEdgeChanges:k,elementsSelectable:T}=y();if(!T)return;const E=_.reduce((P,L)=>L.selected?[...P,Ko(L.id,!1)]:P,[]),C=S.reduce((P,L)=>L.selected?[...P,Ko(L.id,!1)]:P,[]);Q(E),k(C)},setNodeExtent:S=>{const{nodes:_,nodeLookup:Q,parentLookup:k,nodeOrigin:T,elevateNodesOnSelect:E,nodeExtent:C,zIndexMode:P}=y();S[0][0]===C[0][0]&&S[0][1]===C[0][1]&&S[1][0]===C[1][0]&&S[1][1]===C[1][1]||(_T(_,Q,k,{nodeOrigin:T,nodeExtent:S,elevateNodesOnSelect:E,checkEquality:!1,zIndexMode:P}),v({nodeExtent:S}))},panBy:S=>{const{transform:_,width:Q,height:k,panZoom:T,translateExtent:E}=y();return g_e({delta:S,panZoom:T,transform:_,translateExtent:E,width:Q,height:k})},setCenter:async(S,_,Q)=>{const{width:k,height:T,maxZoom:E,panZoom:C}=y();if(!C)return Promise.resolve(!1);const P=typeof Q?.zoom<"u"?Q.zoom:E;return await C.setViewport({x:k/2-S*P,y:T/2-_*P,zoom:P},{duration:Q?.duration,ease:Q?.ease,interpolate:Q?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...cV}})},updateConnection:S=>{v({connection:S})},reset:()=>v({..._z()})}},Object.is);function Nwe({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:i,initialWidth:r,initialHeight:s,initialMinZoom:a,initialMaxZoom:o,initialFitViewOptions:c,fitView:u,nodeOrigin:f,nodeExtent:d,zIndexMode:m,children:v}){const[y]=X.useState(()=>$we({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:r,height:s,fitView:u,minZoom:a,maxZoom:o,fitViewOptions:c,nodeOrigin:f,nodeExtent:d,zIndexMode:m}));return g.jsx(K_e,{value:y,children:g.jsx(bSe,{children:v})})}function Mwe({children:t,nodes:e,edges:n,defaultNodes:i,defaultEdges:r,width:s,height:a,fitView:o,fitViewOptions:c,minZoom:u,maxZoom:f,nodeOrigin:d,nodeExtent:m,zIndexMode:v}){return X.useContext(b0)?g.jsx(g.Fragment,{children:t}):g.jsx(Nwe,{initialNodes:e,initialEdges:n,defaultNodes:i,defaultEdges:r,initialWidth:s,initialHeight:a,fitView:o,initialFitViewOptions:c,initialMinZoom:u,initialMaxZoom:f,nodeOrigin:d,nodeExtent:m,zIndexMode:v,children:t})}const jwe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function zwe({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:r,nodeTypes:s,edgeTypes:a,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:f,onMoveStart:d,onMoveEnd:m,onConnect:v,onConnectStart:y,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:_,onNodeMouseEnter:Q,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:E,onNodeDoubleClick:C,onNodeDragStart:P,onNodeDrag:L,onNodeDragStop:B,onNodesDelete:N,onEdgesDelete:M,onDelete:$,onSelectionChange:I,onSelectionDragStart:j,onSelectionDrag:D,onSelectionDragStop:R,onSelectionContextMenu:W,onSelectionStart:U,onSelectionEnd:G,onBeforeDelete:q,connectionMode:V,connectionLineType:F=eo.Bezier,connectionLineStyle:z,connectionLineComponent:H,connectionLineContainerStyle:K,deleteKeyCode:ee="Backspace",selectionKeyCode:ie="Shift",selectionOnDrag:le=!1,selectionMode:ae=ed.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:ke=id()?"Meta":"Control",zoomActivationKeyCode:Ee=id()?"Meta":"Control",snapToGrid:ge,snapGrid:$e,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Ye,nodesDraggable:De,autoPanOnNodeFocus:nn,nodesConnectable:Zt,nodesFocusable:Zn,nodeOrigin:Vn=qV,edgesFocusable:kn,edgesReconnectable:jt,elementsSelectable:zt=!0,defaultViewport:Ai=hSe,minZoom:ue=.5,maxZoom:ve=2,translateExtent:Me=Jf,preventScrolling:Ve=!0,nodeExtent:Je,defaultMarkerColor:$n="#b1b1b7",zoomOnScroll:hi=!0,zoomOnPinch:Et=!0,panOnScroll:Ot=!1,panOnScrollSpeed:Wn=.5,panOnScrollMode:vt=ul.Free,zoomOnDoubleClick:Xr=!0,panOnDrag:Ri=!0,onPaneClick:B0,onPaneMouseEnter:Nl,onPaneMouseMove:Ml,onPaneMouseLeave:jl,onPaneScroll:bs,onPaneContextMenu:zl,paneClickDistance:wo=1,nodeClickDistance:I0=0,children:qd,onReconnect:Pu,onReconnectStart:ko,onReconnectEnd:X0,onEdgeContextMenu:Bd,onEdgeDoubleClick:Id,onEdgeMouseEnter:Xd,onEdgeMouseMove:Au,onEdgeMouseLeave:Ru,reconnectRadius:Zd=10,onNodesChange:Vd,onEdgesChange:Zr,noDragClassName:gn="nodrag",noWheelClassName:Un="nowheel",noPanClassName:_s="nopan",fitView:Dl,fitViewOptions:Wd,connectOnClick:Z0,attributionPosition:Ud,proOptions:Co,defaultEdgeOptions:$u,elevateNodesOnSelect:ma=!0,elevateEdgesOnSelect:ga=!1,disableKeyboardA11y:Oa=!1,autoPanOnConnect:va,autoPanOnNodeDrag:rn,autoPanSpeed:Hd,connectionRadius:Yd,isValidConnection:Ss,onError:ya,style:V0,id:Nu,nodeDragThreshold:Fd,connectionDragThreshold:W0,viewport:Ll,onViewportChange:ql,width:wr,height:fi,colorMode:Gd="light",debug:U0,onScroll:Bl,ariaLabelConfig:Kd,zIndexMode:To="basic",...H0},di){const Qo=Nu||"1",Jd=mSe(Gd),Mu=X.useCallback(ws=>{ws.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Bl?.(ws)},[Bl]);return g.jsx("div",{"data-testid":"rf__wrapper",...H0,onScroll:Mu,style:{...V0,...jwe},ref:di,className:pn(["react-flow",r,Jd]),id:Nu,role:"application",children:g.jsxs(Mwe,{nodes:t,edges:e,width:wr,height:fi,fitView:Dl,fitViewOptions:Wd,minZoom:ue,maxZoom:ve,nodeOrigin:Vn,nodeExtent:Je,zIndexMode:To,children:[g.jsx(Rwe,{onInit:u,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:Q,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:E,onNodeDoubleClick:C,nodeTypes:s,edgeTypes:a,connectionLineType:F,connectionLineStyle:z,connectionLineComponent:H,connectionLineContainerStyle:K,selectionKeyCode:ie,selectionOnDrag:le,selectionMode:ae,deleteKeyCode:ee,multiSelectionKeyCode:ke,panActivationKeyCode:_e,zoomActivationKeyCode:Ee,onlyRenderVisibleElements:Ae,defaultViewport:Ai,translateExtent:Me,minZoom:ue,maxZoom:ve,preventScrolling:Ve,zoomOnScroll:hi,zoomOnPinch:Et,zoomOnDoubleClick:Xr,panOnScroll:Ot,panOnScrollSpeed:Wn,panOnScrollMode:vt,panOnDrag:Ri,onPaneClick:B0,onPaneMouseEnter:Nl,onPaneMouseMove:Ml,onPaneMouseLeave:jl,onPaneScroll:bs,onPaneContextMenu:zl,paneClickDistance:wo,nodeClickDistance:I0,onSelectionContextMenu:W,onSelectionStart:U,onSelectionEnd:G,onReconnect:Pu,onReconnectStart:ko,onReconnectEnd:X0,onEdgeContextMenu:Bd,onEdgeDoubleClick:Id,onEdgeMouseEnter:Xd,onEdgeMouseMove:Au,onEdgeMouseLeave:Ru,reconnectRadius:Zd,defaultMarkerColor:$n,noDragClassName:gn,noWheelClassName:Un,noPanClassName:_s,rfId:Qo,disableKeyboardA11y:Oa,nodeExtent:Je,viewport:Ll,onViewportChange:ql}),g.jsx(pSe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:v,onConnectStart:y,onConnectEnd:x,onClickConnectStart:S,onClickConnectEnd:_,nodesDraggable:De,autoPanOnNodeFocus:nn,nodesConnectable:Zt,nodesFocusable:Zn,edgesFocusable:kn,edgesReconnectable:jt,elementsSelectable:zt,elevateNodesOnSelect:ma,elevateEdgesOnSelect:ga,minZoom:ue,maxZoom:ve,nodeExtent:Je,onNodesChange:Vd,onEdgesChange:Zr,snapToGrid:ge,snapGrid:$e,connectionMode:V,translateExtent:Me,connectOnClick:Z0,defaultEdgeOptions:$u,fitView:Dl,fitViewOptions:Wd,onNodesDelete:N,onEdgesDelete:M,onDelete:$,onNodeDragStart:P,onNodeDrag:L,onNodeDragStop:B,onSelectionDrag:D,onSelectionDragStart:j,onSelectionDragStop:R,onMove:f,onMoveStart:d,onMoveEnd:m,noPanClassName:_s,nodeOrigin:Vn,rfId:Qo,autoPanOnConnect:va,autoPanOnNodeDrag:rn,autoPanSpeed:Hd,onError:ya,connectionRadius:Yd,isValidConnection:Ss,selectNodesOnDrag:Ye,nodeDragThreshold:Fd,connectionDragThreshold:W0,onBeforeDelete:q,debug:U0,ariaLabelConfig:Kd,zIndexMode:To}),g.jsx(uSe,{onSelectionChange:I}),qd,g.jsx(sSe,{proOptions:Co,position:Ud}),g.jsx(rSe,{rfId:Qo,disableKeyboardA11y:Oa})]})})}var Dwe=ZV(zwe);function Lwe(t){const[e,n]=X.useState(t),i=X.useCallback(r=>n(s=>IV(r,s)),[]);return[e,n,i]}function qwe(t){const[e,n]=X.useState(t),i=X.useCallback(r=>n(s=>XV(r,s)),[]);return[e,n,i]}function Bwe({dimensions:t,lineWidth:e,variant:n,className:i}){return g.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:pn(["react-flow__background-pattern",n,i])})}function Iwe({radius:t,className:e}){return g.jsx("circle",{cx:t,cy:t,r:t,className:pn(["react-flow__background-pattern","dots",e])})}var ao;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ao||(ao={}));const Xwe={[ao.Dots]:1,[ao.Lines]:1,[ao.Cross]:6},Zwe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function pW({id:t,variant:e=ao.Dots,gap:n=20,size:i,lineWidth:r=1,offset:s=0,color:a,bgColor:o,style:c,className:u,patternClassName:f}){const d=X.useRef(null),{transform:m,patternId:v}=ut(Zwe,Bt),y=i||Xwe[e],x=e===ao.Dots,S=e===ao.Cross,_=Array.isArray(n)?n:[n,n],Q=[_[0]*m[2]||1,_[1]*m[2]||1],k=y*m[2],T=Array.isArray(s)?s:[s,s],E=S?[k,k]:Q,C=[T[0]*m[2]||1+E[0]/2,T[1]*m[2]||1+E[1]/2],P=`${v}${t||""}`;return g.jsxs("svg",{className:pn(["react-flow__background",u]),style:{...c,..._0,"--xy-background-color-props":o,"--xy-background-pattern-color-props":a},ref:d,"data-testid":"rf__background",children:[g.jsx("pattern",{id:P,x:m[0]%Q[0],y:m[1]%Q[1],width:Q[0],height:Q[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:x?g.jsx(Iwe,{radius:k/2,className:f}):g.jsx(Bwe,{dimensions:E,lineWidth:r,variant:e,className:f})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}pW.displayName="Background";const Vwe=X.memo(pW);function Wwe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Uwe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Hwe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ywe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Fwe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Km({children:t,className:e,...n}){return g.jsx("button",{type:"button",className:pn(["react-flow__controls-button",e]),...n,children:t})}const Gwe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function mW({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:a,onFitView:o,onInteractiveChange:c,className:u,children:f,position:d="bottom-left",orientation:m="vertical","aria-label":v}){const y=It(),{isInteractive:x,minZoomReached:S,maxZoomReached:_,ariaLabelConfig:Q}=ut(Gwe,Bt),{zoomIn:k,zoomOut:T,fitView:E}=kE(),C=()=>{k(),s?.()},P=()=>{T(),a?.()},L=()=>{E(r),o?.()},B=()=>{y.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c?.(!x)},N=m==="horizontal"?"horizontal":"vertical";return g.jsxs(pu,{className:pn(["react-flow__controls",N,u]),position:d,style:t,"data-testid":"rf__controls","aria-label":v??Q["controls.ariaLabel"],children:[e&&g.jsxs(g.Fragment,{children:[g.jsx(Km,{onClick:C,className:"react-flow__controls-zoomin",title:Q["controls.zoomIn.ariaLabel"],"aria-label":Q["controls.zoomIn.ariaLabel"],disabled:_,children:g.jsx(Wwe,{})}),g.jsx(Km,{onClick:P,className:"react-flow__controls-zoomout",title:Q["controls.zoomOut.ariaLabel"],"aria-label":Q["controls.zoomOut.ariaLabel"],disabled:S,children:g.jsx(Uwe,{})})]}),n&&g.jsx(Km,{className:"react-flow__controls-fitview",onClick:L,title:Q["controls.fitView.ariaLabel"],"aria-label":Q["controls.fitView.ariaLabel"],children:g.jsx(Hwe,{})}),i&&g.jsx(Km,{className:"react-flow__controls-interactive",onClick:B,title:Q["controls.interactive.ariaLabel"],"aria-label":Q["controls.interactive.ariaLabel"],children:x?g.jsx(Fwe,{}):g.jsx(Ywe,{})}),f]})}mW.displayName="Controls";const Kwe=X.memo(mW);function Jwe({id:t,x:e,y:n,width:i,height:r,style:s,color:a,strokeColor:o,strokeWidth:c,className:u,borderRadius:f,shapeRendering:d,selected:m,onClick:v}){const{background:y,backgroundColor:x}=s||{},S=a||y||x;return g.jsx("rect",{className:pn(["react-flow__minimap-node",{selected:m},u]),x:e,y:n,rx:f,ry:f,width:i,height:r,style:{fill:S,stroke:o,strokeWidth:c},shapeRendering:d,onClick:v?_=>v(_,t):void 0})}const eke=X.memo(Jwe),tke=t=>t.nodes.map(e=>e.id),Zb=t=>t instanceof Function?t:()=>t;function nke({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:r,nodeComponent:s=eke,onClick:a}){const o=ut(tke,Bt),c=Zb(e),u=Zb(t),f=Zb(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:o.map(m=>g.jsx(rke,{id:m,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:f,nodeBorderRadius:i,nodeStrokeWidth:r,NodeComponent:s,onClick:a,shapeRendering:d},m))})}function ike({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:r,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:o,onClick:c}){const{node:u,x:f,y:d,width:m,height:v}=ut(y=>{const{internals:x}=y.nodeLookup.get(t),S=x.userNode,{x:_,y:Q}=x.positionAbsolute,{width:k,height:T}=fa(S);return{node:S,x:_,y:Q,width:k,height:T}},Bt);return!u||u.hidden||!gV(u)?null:g.jsx(o,{x:f,y:d,width:m,height:v,style:u.style,selected:!!u.selected,className:i(u),color:e(u),borderRadius:r,strokeColor:n(u),strokeWidth:s,shapeRendering:a,onClick:c,id:u.id})}const rke=X.memo(ike);var ske=X.memo(nke);const ake=200,oke=150,lke=t=>!t.hidden,cke=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?mV(Rd(t.nodeLookup,{filter:lke}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},uke="react-flow__minimap-desc";function gW({style:t,className:e,nodeStrokeColor:n,nodeColor:i,nodeClassName:r="",nodeBorderRadius:s=5,nodeStrokeWidth:a,nodeComponent:o,bgColor:c,maskColor:u,maskStrokeColor:f,maskStrokeWidth:d,position:m="bottom-right",onClick:v,onNodeClick:y,pannable:x=!1,zoomable:S=!1,ariaLabel:_,inversePan:Q,zoomStep:k=1,offsetScale:T=5}){const E=It(),C=X.useRef(null),{boundingRect:P,viewBB:L,rfId:B,panZoom:N,translateExtent:M,flowWidth:$,flowHeight:I,ariaLabelConfig:j}=ut(cke,Bt),D=t?.width??ake,R=t?.height??oke,W=P.width/D,U=P.height/R,G=Math.max(W,U),q=G*D,V=G*R,F=T*G,z=P.x-(q-P.width)/2-F,H=P.y-(V-P.height)/2-F,K=q+F*2,ee=V+F*2,ie=`${uke}-${B}`,le=X.useRef(0),ae=X.useRef();le.current=G,X.useEffect(()=>{if(C.current&&N)return ae.current=k_e({domNode:C.current,panZoom:N,getTransform:()=>E.getState().transform,getViewScale:()=>le.current}),()=>{ae.current?.destroy()}},[N]),X.useEffect(()=>{ae.current?.update({translateExtent:M,width:$,height:I,inversePan:Q,pannable:x,zoomStep:k,zoomable:S})},[x,S,Q,k,M,$,I]);const _e=v?ge=>{const[$e,Ae]=ae.current?.pointer(ge)||[0,0];v(ge,{x:$e,y:Ae})}:void 0,ke=y?X.useCallback((ge,$e)=>{const Ae=E.getState().nodeLookup.get($e).internals.userNode;y(ge,Ae)},[]):void 0,Ee=_??j["minimap.ariaLabel"];return g.jsx(pu,{position:m,style:{...t,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*G:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="number"?a:void 0},className:pn(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:D,height:R,viewBox:`${z} ${H} ${K} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ie,ref:C,onClick:_e,children:[Ee&&g.jsx("title",{id:ie,children:Ee}),g.jsx(ske,{onClick:ke,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:a,nodeComponent:o}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${z-F},${H-F}h${K+F*2}v${ee+F*2}h${-K-F*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}gW.displayName="MiniMap";const hke=X.memo(gW),fke=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,dke={[du.Line]:"right",[du.Handle]:"bottom-right"};function pke({nodeId:t,position:e,variant:n=du.Handle,className:i,style:r=void 0,children:s,color:a,minWidth:o=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:m,autoScale:v=!0,shouldResize:y,onResizeStart:x,onResize:S,onResizeEnd:_}){const Q=HV(),k=typeof t=="string"?t:Q,T=It(),E=X.useRef(null),C=n===du.Handle,P=ut(X.useCallback(fke(C&&v),[C,v]),Bt),L=X.useRef(null),B=e??dke[n];X.useEffect(()=>{if(!(!E.current||!k))return L.current||(L.current=L_e({domNode:E.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:M,transform:$,snapGrid:I,snapToGrid:j,nodeOrigin:D,domNode:R}=T.getState();return{nodeLookup:M,transform:$,snapGrid:I,snapToGrid:j,nodeOrigin:D,paneDomNode:R}},onChange:(M,$)=>{const{triggerNodeChanges:I,nodeLookup:j,parentLookup:D,nodeOrigin:R}=T.getState(),W=[],U={x:M.x,y:M.y},G=j.get(k);if(G&&G.expandParent&&G.parentId){const q=G.origin??R,V=M.width??G.measured.width??0,F=M.height??G.measured.height??0,z={id:G.id,parentId:G.parentId,rect:{width:V,height:F,...OV({x:M.x??G.position.x,y:M.y??G.position.y},{width:V,height:F},G.parentId,j,q)}},H=wE([z],j,D,R);W.push(...H),U.x=M.x?Math.max(q[0]*V,M.x):void 0,U.y=M.y?Math.max(q[1]*F,M.y):void 0}if(U.x!==void 0&&U.y!==void 0){const q={id:k,type:"position",position:{...U}};W.push(q)}if(M.width!==void 0&&M.height!==void 0){const V={id:k,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:M.width,height:M.height}};W.push(V)}for(const q of $){const V={...q,type:"position"};W.push(V)}I(W)},onEnd:({width:M,height:$})=>{const I={id:k,type:"dimensions",resizing:!1,dimensions:{width:M,height:$}};T.getState().triggerNodeChanges([I])}})),L.current.update({controlPosition:B,boundaries:{minWidth:o,minHeight:c,maxWidth:u,maxHeight:f},keepAspectRatio:d,resizeDirection:m,onResizeStart:x,onResize:S,onResizeEnd:_,shouldResize:y}),()=>{L.current?.destroy()}},[B,o,c,u,f,d,x,S,_,y]);const N=B.split("-");return g.jsx("div",{className:pn(["react-flow__resize-control","nodrag",...N,n,i]),ref:E,style:{...r,scale:P,...a&&{[C?"backgroundColor":"borderColor"]:a}},children:s})}X.memo(pke);function TE(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vb,Sz;function mke(){if(Sz)return Vb;Sz=1;function t(){this.__data__=[],this.size=0}return Vb=t,Vb}var Wb,wz;function ku(){if(wz)return Wb;wz=1;function t(e,n){return e===n||e!==e&&n!==n}return Wb=t,Wb}var Ub,kz;function w0(){if(kz)return Ub;kz=1;var t=ku();function e(n,i){for(var r=n.length;r--;)if(t(n[r][0],i))return r;return-1}return Ub=e,Ub}var Hb,Cz;function gke(){if(Cz)return Hb;Cz=1;var t=w0(),e=Array.prototype,n=e.splice;function i(r){var s=this.__data__,a=t(s,r);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return Hb=i,Hb}var Yb,Tz;function Oke(){if(Tz)return Yb;Tz=1;var t=w0();function e(n){var i=this.__data__,r=t(i,n);return r<0?void 0:i[r][1]}return Yb=e,Yb}var Fb,Qz;function vke(){if(Qz)return Fb;Qz=1;var t=w0();function e(n){return t(this.__data__,n)>-1}return Fb=e,Fb}var Gb,Ez;function yke(){if(Ez)return Gb;Ez=1;var t=w0();function e(n,i){var r=this.__data__,s=t(r,n);return s<0?(++this.size,r.push([n,i])):r[s][1]=i,this}return Gb=e,Gb}var Kb,Pz;function k0(){if(Pz)return Kb;Pz=1;var t=mke(),e=gke(),n=Oke(),i=vke(),r=yke();function s(a){var o=-1,c=a==null?0:a.length;for(this.clear();++o<c;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=i,s.prototype.set=r,Kb=s,Kb}var Jb,Az;function xke(){if(Az)return Jb;Az=1;var t=k0();function e(){this.__data__=new t,this.size=0}return Jb=e,Jb}var e1,Rz;function bke(){if(Rz)return e1;Rz=1;function t(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}return e1=t,e1}var t1,$z;function _ke(){if($z)return t1;$z=1;function t(e){return this.__data__.get(e)}return t1=t,t1}var n1,Nz;function Ske(){if(Nz)return n1;Nz=1;function t(e){return this.__data__.has(e)}return n1=t,n1}var i1,Mz;function OW(){if(Mz)return i1;Mz=1;var t=typeof cm=="object"&&cm&&cm.Object===Object&&cm;return i1=t,i1}var r1,jz;function Ir(){if(jz)return r1;jz=1;var t=OW(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return r1=n,r1}var s1,zz;function Cu(){if(zz)return s1;zz=1;var t=Ir(),e=t.Symbol;return s1=e,s1}var a1,Dz;function wke(){if(Dz)return a1;Dz=1;var t=Cu(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,r=t?t.toStringTag:void 0;function s(a){var o=n.call(a,r),c=a[r];try{a[r]=void 0;var u=!0}catch{}var f=i.call(a);return u&&(o?a[r]=c:delete a[r]),f}return a1=s,a1}var o1,Lz;function kke(){if(Lz)return o1;Lz=1;var t=Object.prototype,e=t.toString;function n(i){return e.call(i)}return o1=n,o1}var l1,qz;function Pl(){if(qz)return l1;qz=1;var t=Cu(),e=wke(),n=kke(),i="[object Null]",r="[object Undefined]",s=t?t.toStringTag:void 0;function a(o){return o==null?o===void 0?r:i:s&&s in Object(o)?e(o):n(o)}return l1=a,l1}var c1,Bz;function _r(){if(Bz)return c1;Bz=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return c1=t,c1}var u1,Iz;function Md(){if(Iz)return u1;Iz=1;var t=Pl(),e=_r(),n="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var c=t(o);return c==i||c==r||c==n||c==s}return u1=a,u1}var h1,Xz;function Cke(){if(Xz)return h1;Xz=1;var t=Ir(),e=t["__core-js_shared__"];return h1=e,h1}var f1,Zz;function Tke(){if(Zz)return f1;Zz=1;var t=Cke(),e=(function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!e&&e in i}return f1=n,f1}var d1,Vz;function vW(){if(Vz)return d1;Vz=1;var t=Function.prototype,e=t.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return d1=n,d1}var p1,Wz;function Qke(){if(Wz)return p1;Wz=1;var t=Md(),e=Tke(),n=_r(),i=vW(),r=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,c=a.toString,u=o.hasOwnProperty,f=RegExp("^"+c.call(u).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(m){if(!n(m)||e(m))return!1;var v=t(m)?f:s;return v.test(i(m))}return p1=d,p1}var m1,Uz;function Eke(){if(Uz)return m1;Uz=1;function t(e,n){return e?.[n]}return m1=t,m1}var g1,Hz;function Al(){if(Hz)return g1;Hz=1;var t=Qke(),e=Eke();function n(i,r){var s=e(i,r);return t(s)?s:void 0}return g1=n,g1}var O1,Yz;function QE(){if(Yz)return O1;Yz=1;var t=Al(),e=Ir(),n=t(e,"Map");return O1=n,O1}var v1,Fz;function C0(){if(Fz)return v1;Fz=1;var t=Al(),e=t(Object,"create");return v1=e,v1}var y1,Gz;function Pke(){if(Gz)return y1;Gz=1;var t=C0();function e(){this.__data__=t?t(null):{},this.size=0}return y1=e,y1}var x1,Kz;function Ake(){if(Kz)return x1;Kz=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return x1=t,x1}var b1,Jz;function Rke(){if(Jz)return b1;Jz=1;var t=C0(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function r(s){var a=this.__data__;if(t){var o=a[s];return o===e?void 0:o}return i.call(a,s)?a[s]:void 0}return b1=r,b1}var _1,e4;function $ke(){if(e4)return _1;e4=1;var t=C0(),e=Object.prototype,n=e.hasOwnProperty;function i(r){var s=this.__data__;return t?s[r]!==void 0:n.call(s,r)}return _1=i,_1}var S1,t4;function Nke(){if(t4)return S1;t4=1;var t=C0(),e="__lodash_hash_undefined__";function n(i,r){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=t&&r===void 0?e:r,this}return S1=n,S1}var w1,n4;function Mke(){if(n4)return w1;n4=1;var t=Pke(),e=Ake(),n=Rke(),i=$ke(),r=Nke();function s(a){var o=-1,c=a==null?0:a.length;for(this.clear();++o<c;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=i,s.prototype.set=r,w1=s,w1}var k1,i4;function jke(){if(i4)return k1;i4=1;var t=Mke(),e=k0(),n=QE();function i(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return k1=i,k1}var C1,r4;function zke(){if(r4)return C1;r4=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return C1=t,C1}var T1,s4;function T0(){if(s4)return T1;s4=1;var t=zke();function e(n,i){var r=n.__data__;return t(i)?r[typeof i=="string"?"string":"hash"]:r.map}return T1=e,T1}var Q1,a4;function Dke(){if(a4)return Q1;a4=1;var t=T0();function e(n){var i=t(this,n).delete(n);return this.size-=i?1:0,i}return Q1=e,Q1}var E1,o4;function Lke(){if(o4)return E1;o4=1;var t=T0();function e(n){return t(this,n).get(n)}return E1=e,E1}var P1,l4;function qke(){if(l4)return P1;l4=1;var t=T0();function e(n){return t(this,n).has(n)}return P1=e,P1}var A1,c4;function Bke(){if(c4)return A1;c4=1;var t=T0();function e(n,i){var r=t(this,n),s=r.size;return r.set(n,i),this.size+=r.size==s?0:1,this}return A1=e,A1}var R1,u4;function EE(){if(u4)return R1;u4=1;var t=jke(),e=Dke(),n=Lke(),i=qke(),r=Bke();function s(a){var o=-1,c=a==null?0:a.length;for(this.clear();++o<c;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=i,s.prototype.set=r,R1=s,R1}var $1,h4;function Ike(){if(h4)return $1;h4=1;var t=k0(),e=QE(),n=EE(),i=200;function r(s,a){var o=this.__data__;if(o instanceof t){var c=o.__data__;if(!e||c.length<i-1)return c.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(s,a),this.size=o.size,this}return $1=r,$1}var N1,f4;function Q0(){if(f4)return N1;f4=1;var t=k0(),e=xke(),n=bke(),i=_ke(),r=Ske(),s=Ike();function a(o){var c=this.__data__=new t(o);this.size=c.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=i,a.prototype.has=r,a.prototype.set=s,N1=a,N1}var M1,d4;function PE(){if(d4)return M1;d4=1;function t(e,n){for(var i=-1,r=e==null?0:e.length;++i<r&&n(e[i],i,e)!==!1;);return e}return M1=t,M1}var j1,p4;function yW(){if(p4)return j1;p4=1;var t=Al(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return j1=e,j1}var z1,m4;function E0(){if(m4)return z1;m4=1;var t=yW();function e(n,i,r){i=="__proto__"&&t?t(n,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[i]=r}return z1=e,z1}var D1,g4;function P0(){if(g4)return D1;g4=1;var t=E0(),e=ku(),n=Object.prototype,i=n.hasOwnProperty;function r(s,a,o){var c=s[a];(!(i.call(s,a)&&e(c,o))||o===void 0&&!(a in s))&&t(s,a,o)}return D1=r,D1}var L1,O4;function jd(){if(O4)return L1;O4=1;var t=P0(),e=E0();function n(i,r,s,a){var o=!s;s||(s={});for(var c=-1,u=r.length;++c<u;){var f=r[c],d=a?a(s[f],i[f],f,s,i):void 0;d===void 0&&(d=i[f]),o?e(s,f,d):t(s,f,d)}return s}return L1=n,L1}var q1,v4;function Xke(){if(v4)return q1;v4=1;function t(e,n){for(var i=-1,r=Array(e);++i<e;)r[i]=n(i);return r}return q1=t,q1}var B1,y4;function xs(){if(y4)return B1;y4=1;function t(e){return e!=null&&typeof e=="object"}return B1=t,B1}var I1,x4;function Zke(){if(x4)return I1;x4=1;var t=Pl(),e=xs(),n="[object Arguments]";function i(r){return e(r)&&t(r)==n}return I1=i,I1}var X1,b4;function zd(){if(b4)return X1;b4=1;var t=Zke(),e=xs(),n=Object.prototype,i=n.hasOwnProperty,r=n.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(a){return e(a)&&i.call(a,"callee")&&!r.call(a,"callee")};return X1=s,X1}var Z1,_4;function mn(){if(_4)return Z1;_4=1;var t=Array.isArray;return Z1=t,Z1}var sf={exports:{}},V1,S4;function Vke(){if(S4)return V1;S4=1;function t(){return!1}return V1=t,V1}sf.exports;var w4;function Tu(){return w4||(w4=1,(function(t,e){var n=Ir(),i=Vke(),r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===r,o=a?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||i;t.exports=u})(sf,sf.exports)),sf.exports}var W1,k4;function A0(){if(k4)return W1;k4=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(i,r){var s=typeof i;return r=r??t,!!r&&(s=="number"||s!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return W1=n,W1}var U1,C4;function AE(){if(C4)return U1;C4=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return U1=e,U1}var H1,T4;function Wke(){if(T4)return H1;T4=1;var t=Pl(),e=AE(),n=xs(),i="[object Arguments]",r="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",d="[object Object]",m="[object RegExp]",v="[object Set]",y="[object String]",x="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",Q="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",P="[object Uint8Array]",L="[object Uint8ClampedArray]",B="[object Uint16Array]",N="[object Uint32Array]",M={};M[Q]=M[k]=M[T]=M[E]=M[C]=M[P]=M[L]=M[B]=M[N]=!0,M[i]=M[r]=M[S]=M[s]=M[_]=M[a]=M[o]=M[c]=M[u]=M[f]=M[d]=M[m]=M[v]=M[y]=M[x]=!1;function $(I){return n(I)&&e(I.length)&&!!M[t(I)]}return H1=$,H1}var Y1,Q4;function R0(){if(Q4)return Y1;Q4=1;function t(e){return function(n){return e(n)}}return Y1=t,Y1}var af={exports:{}};af.exports;var E4;function RE(){return E4||(E4=1,(function(t,e){var n=OW(),i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,a=s&&n.process,o=(function(){try{var c=r&&r.require&&r.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}})();t.exports=o})(af,af.exports)),af.exports}var F1,P4;function Dd(){if(P4)return F1;P4=1;var t=Wke(),e=R0(),n=RE(),i=n&&n.isTypedArray,r=i?e(i):t;return F1=r,F1}var G1,A4;function xW(){if(A4)return G1;A4=1;var t=Xke(),e=zd(),n=mn(),i=Tu(),r=A0(),s=Dd(),a=Object.prototype,o=a.hasOwnProperty;function c(u,f){var d=n(u),m=!d&&e(u),v=!d&&!m&&i(u),y=!d&&!m&&!v&&s(u),x=d||m||v||y,S=x?t(u.length,String):[],_=S.length;for(var Q in u)(f||o.call(u,Q))&&!(x&&(Q=="length"||v&&(Q=="offset"||Q=="parent")||y&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||r(Q,_)))&&S.push(Q);return S}return G1=c,G1}var K1,R4;function $0(){if(R4)return K1;R4=1;var t=Object.prototype;function e(n){var i=n&&n.constructor,r=typeof i=="function"&&i.prototype||t;return n===r}return K1=e,K1}var J1,$4;function bW(){if($4)return J1;$4=1;function t(e,n){return function(i){return e(n(i))}}return J1=t,J1}var e_,N4;function Uke(){if(N4)return e_;N4=1;var t=bW(),e=t(Object.keys,Object);return e_=e,e_}var t_,M4;function $E(){if(M4)return t_;M4=1;var t=$0(),e=Uke(),n=Object.prototype,i=n.hasOwnProperty;function r(s){if(!t(s))return e(s);var a=[];for(var o in Object(s))i.call(s,o)&&o!="constructor"&&a.push(o);return a}return t_=r,t_}var n_,j4;function da(){if(j4)return n_;j4=1;var t=Md(),e=AE();function n(i){return i!=null&&e(i.length)&&!t(i)}return n_=n,n_}var i_,z4;function So(){if(z4)return i_;z4=1;var t=xW(),e=$E(),n=da();function i(r){return n(r)?t(r):e(r)}return i_=i,i_}var r_,D4;function Hke(){if(D4)return r_;D4=1;var t=jd(),e=So();function n(i,r){return i&&t(r,e(r),i)}return r_=n,r_}var s_,L4;function Yke(){if(L4)return s_;L4=1;function t(e){var n=[];if(e!=null)for(var i in Object(e))n.push(i);return n}return s_=t,s_}var a_,q4;function Fke(){if(q4)return a_;q4=1;var t=_r(),e=$0(),n=Yke(),i=Object.prototype,r=i.hasOwnProperty;function s(a){if(!t(a))return n(a);var o=e(a),c=[];for(var u in a)u=="constructor"&&(o||!r.call(a,u))||c.push(u);return c}return a_=s,a_}var o_,B4;function Rl(){if(B4)return o_;B4=1;var t=xW(),e=Fke(),n=da();function i(r){return n(r)?t(r,!0):e(r)}return o_=i,o_}var l_,I4;function Gke(){if(I4)return l_;I4=1;var t=jd(),e=Rl();function n(i,r){return i&&t(r,e(r),i)}return l_=n,l_}var of={exports:{}};of.exports;var X4;function _W(){return X4||(X4=1,(function(t,e){var n=Ir(),i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(u,f){if(f)return u.slice();var d=u.length,m=o?o(d):new u.constructor(d);return u.copy(m),m}t.exports=c})(of,of.exports)),of.exports}var c_,Z4;function SW(){if(Z4)return c_;Z4=1;function t(e,n){var i=-1,r=e.length;for(n||(n=Array(r));++i<r;)n[i]=e[i];return n}return c_=t,c_}var u_,V4;function wW(){if(V4)return u_;V4=1;function t(e,n){for(var i=-1,r=e==null?0:e.length,s=0,a=[];++i<r;){var o=e[i];n(o,i,e)&&(a[s++]=o)}return a}return u_=t,u_}var h_,W4;function kW(){if(W4)return h_;W4=1;function t(){return[]}return h_=t,h_}var f_,U4;function NE(){if(U4)return f_;U4=1;var t=wW(),e=kW(),n=Object.prototype,i=n.propertyIsEnumerable,r=Object.getOwnPropertySymbols,s=r?function(a){return a==null?[]:(a=Object(a),t(r(a),function(o){return i.call(a,o)}))}:e;return f_=s,f_}var d_,H4;function Kke(){if(H4)return d_;H4=1;var t=jd(),e=NE();function n(i,r){return t(i,e(i),r)}return d_=n,d_}var p_,Y4;function ME(){if(Y4)return p_;Y4=1;function t(e,n){for(var i=-1,r=n.length,s=e.length;++i<r;)e[s+i]=n[i];return e}return p_=t,p_}var m_,F4;function N0(){if(F4)return m_;F4=1;var t=bW(),e=t(Object.getPrototypeOf,Object);return m_=e,m_}var g_,G4;function CW(){if(G4)return g_;G4=1;var t=ME(),e=N0(),n=NE(),i=kW(),r=Object.getOwnPropertySymbols,s=r?function(a){for(var o=[];a;)t(o,n(a)),a=e(a);return o}:i;return g_=s,g_}var O_,K4;function Jke(){if(K4)return O_;K4=1;var t=jd(),e=CW();function n(i,r){return t(i,e(i),r)}return O_=n,O_}var v_,J4;function TW(){if(J4)return v_;J4=1;var t=ME(),e=mn();function n(i,r,s){var a=r(i);return e(i)?a:t(a,s(i))}return v_=n,v_}var y_,eD;function QW(){if(eD)return y_;eD=1;var t=TW(),e=NE(),n=So();function i(r){return t(r,n,e)}return y_=i,y_}var x_,tD;function e2e(){if(tD)return x_;tD=1;var t=TW(),e=CW(),n=Rl();function i(r){return t(r,n,e)}return x_=i,x_}var b_,nD;function t2e(){if(nD)return b_;nD=1;var t=Al(),e=Ir(),n=t(e,"DataView");return b_=n,b_}var __,iD;function n2e(){if(iD)return __;iD=1;var t=Al(),e=Ir(),n=t(e,"Promise");return __=n,__}var S_,rD;function EW(){if(rD)return S_;rD=1;var t=Al(),e=Ir(),n=t(e,"Set");return S_=n,S_}var w_,sD;function i2e(){if(sD)return w_;sD=1;var t=Al(),e=Ir(),n=t(e,"WeakMap");return w_=n,w_}var k_,aD;function Qu(){if(aD)return k_;aD=1;var t=t2e(),e=QE(),n=n2e(),i=EW(),r=i2e(),s=Pl(),a=vW(),o="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",d="[object WeakMap]",m="[object DataView]",v=a(t),y=a(e),x=a(n),S=a(i),_=a(r),Q=s;return(t&&Q(new t(new ArrayBuffer(1)))!=m||e&&Q(new e)!=o||n&&Q(n.resolve())!=u||i&&Q(new i)!=f||r&&Q(new r)!=d)&&(Q=function(k){var T=s(k),E=T==c?k.constructor:void 0,C=E?a(E):"";if(C)switch(C){case v:return m;case y:return o;case x:return u;case S:return f;case _:return d}return T}),k_=Q,k_}var C_,oD;function r2e(){if(oD)return C_;oD=1;var t=Object.prototype,e=t.hasOwnProperty;function n(i){var r=i.length,s=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(s.index=i.index,s.input=i.input),s}return C_=n,C_}var T_,lD;function PW(){if(lD)return T_;lD=1;var t=Ir(),e=t.Uint8Array;return T_=e,T_}var Q_,cD;function jE(){if(cD)return Q_;cD=1;var t=PW();function e(n){var i=new n.constructor(n.byteLength);return new t(i).set(new t(n)),i}return Q_=e,Q_}var E_,uD;function s2e(){if(uD)return E_;uD=1;var t=jE();function e(n,i){var r=i?t(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}return E_=e,E_}var P_,hD;function a2e(){if(hD)return P_;hD=1;var t=/\w*$/;function e(n){var i=new n.constructor(n.source,t.exec(n));return i.lastIndex=n.lastIndex,i}return P_=e,P_}var A_,fD;function o2e(){if(fD)return A_;fD=1;var t=Cu(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function i(r){return n?Object(n.call(r)):{}}return A_=i,A_}var R_,dD;function AW(){if(dD)return R_;dD=1;var t=jE();function e(n,i){var r=i?t(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}return R_=e,R_}var $_,pD;function l2e(){if(pD)return $_;pD=1;var t=jE(),e=s2e(),n=a2e(),i=o2e(),r=AW(),s="[object Boolean]",a="[object Date]",o="[object Map]",c="[object Number]",u="[object RegExp]",f="[object Set]",d="[object String]",m="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",x="[object Float32Array]",S="[object Float64Array]",_="[object Int8Array]",Q="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",P="[object Uint32Array]";function L(B,N,M){var $=B.constructor;switch(N){case v:return t(B);case s:case a:return new $(+B);case y:return e(B,M);case x:case S:case _:case Q:case k:case T:case E:case C:case P:return r(B,M);case o:return new $;case c:case d:return new $(B);case u:return n(B);case f:return new $;case m:return i(B)}}return $_=L,$_}var N_,mD;function RW(){if(mD)return N_;mD=1;var t=_r(),e=Object.create,n=(function(){function i(){}return function(r){if(!t(r))return{};if(e)return e(r);i.prototype=r;var s=new i;return i.prototype=void 0,s}})();return N_=n,N_}var M_,gD;function $W(){if(gD)return M_;gD=1;var t=RW(),e=N0(),n=$0();function i(r){return typeof r.constructor=="function"&&!n(r)?t(e(r)):{}}return M_=i,M_}var j_,OD;function c2e(){if(OD)return j_;OD=1;var t=Qu(),e=xs(),n="[object Map]";function i(r){return e(r)&&t(r)==n}return j_=i,j_}var z_,vD;function u2e(){if(vD)return z_;vD=1;var t=c2e(),e=R0(),n=RE(),i=n&&n.isMap,r=i?e(i):t;return z_=r,z_}var D_,yD;function h2e(){if(yD)return D_;yD=1;var t=Qu(),e=xs(),n="[object Set]";function i(r){return e(r)&&t(r)==n}return D_=i,D_}var L_,xD;function f2e(){if(xD)return L_;xD=1;var t=h2e(),e=R0(),n=RE(),i=n&&n.isSet,r=i?e(i):t;return L_=r,L_}var q_,bD;function NW(){if(bD)return q_;bD=1;var t=Q0(),e=PE(),n=P0(),i=Hke(),r=Gke(),s=_W(),a=SW(),o=Kke(),c=Jke(),u=QW(),f=e2e(),d=Qu(),m=r2e(),v=l2e(),y=$W(),x=mn(),S=Tu(),_=u2e(),Q=_r(),k=f2e(),T=So(),E=Rl(),C=1,P=2,L=4,B="[object Arguments]",N="[object Array]",M="[object Boolean]",$="[object Date]",I="[object Error]",j="[object Function]",D="[object GeneratorFunction]",R="[object Map]",W="[object Number]",U="[object Object]",G="[object RegExp]",q="[object Set]",V="[object String]",F="[object Symbol]",z="[object WeakMap]",H="[object ArrayBuffer]",K="[object DataView]",ee="[object Float32Array]",ie="[object Float64Array]",le="[object Int8Array]",ae="[object Int16Array]",_e="[object Int32Array]",ke="[object Uint8Array]",Ee="[object Uint8ClampedArray]",ge="[object Uint16Array]",$e="[object Uint32Array]",Ae={};Ae[B]=Ae[N]=Ae[H]=Ae[K]=Ae[M]=Ae[$]=Ae[ee]=Ae[ie]=Ae[le]=Ae[ae]=Ae[_e]=Ae[R]=Ae[W]=Ae[U]=Ae[G]=Ae[q]=Ae[V]=Ae[F]=Ae[ke]=Ae[Ee]=Ae[ge]=Ae[$e]=!0,Ae[I]=Ae[j]=Ae[z]=!1;function Ye(De,nn,Zt,Zn,Vn,kn){var jt,zt=nn&C,Ai=nn&P,ue=nn&L;if(Zt&&(jt=Vn?Zt(De,Zn,Vn,kn):Zt(De)),jt!==void 0)return jt;if(!Q(De))return De;var ve=x(De);if(ve){if(jt=m(De),!zt)return a(De,jt)}else{var Me=d(De),Ve=Me==j||Me==D;if(S(De))return s(De,zt);if(Me==U||Me==B||Ve&&!Vn){if(jt=Ai||Ve?{}:y(De),!zt)return Ai?c(De,r(jt,De)):o(De,i(jt,De))}else{if(!Ae[Me])return Vn?De:{};jt=v(De,Me,zt)}}kn||(kn=new t);var Je=kn.get(De);if(Je)return Je;kn.set(De,jt),k(De)?De.forEach(function(Et){jt.add(Ye(Et,nn,Zt,Et,De,kn))}):_(De)&&De.forEach(function(Et,Ot){jt.set(Ot,Ye(Et,nn,Zt,Ot,De,kn))});var $n=ue?Ai?f:u:Ai?E:T,hi=ve?void 0:$n(De);return e(hi||De,function(Et,Ot){hi&&(Ot=Et,Et=De[Ot]),n(jt,Ot,Ye(Et,nn,Zt,Ot,De,kn))}),jt}return q_=Ye,q_}var B_,_D;function d2e(){if(_D)return B_;_D=1;var t=NW(),e=4;function n(i){return t(i,e)}return B_=n,B_}var I_,SD;function zE(){if(SD)return I_;SD=1;function t(e){return function(){return e}}return I_=t,I_}var X_,wD;function p2e(){if(wD)return X_;wD=1;function t(e){return function(n,i,r){for(var s=-1,a=Object(n),o=r(n),c=o.length;c--;){var u=o[e?c:++s];if(i(a[u],u,a)===!1)break}return n}}return X_=t,X_}var Z_,kD;function DE(){if(kD)return Z_;kD=1;var t=p2e(),e=t();return Z_=e,Z_}var V_,CD;function LE(){if(CD)return V_;CD=1;var t=DE(),e=So();function n(i,r){return i&&t(i,r,e)}return V_=n,V_}var W_,TD;function m2e(){if(TD)return W_;TD=1;var t=da();function e(n,i){return function(r,s){if(r==null)return r;if(!t(r))return n(r,s);for(var a=r.length,o=i?a:-1,c=Object(r);(i?o--:++o<a)&&s(c[o],o,c)!==!1;);return r}}return W_=e,W_}var U_,QD;function M0(){if(QD)return U_;QD=1;var t=LE(),e=m2e(),n=e(t);return U_=n,U_}var H_,ED;function $l(){if(ED)return H_;ED=1;function t(e){return e}return H_=t,H_}var Y_,PD;function MW(){if(PD)return Y_;PD=1;var t=$l();function e(n){return typeof n=="function"?n:t}return Y_=e,Y_}var F_,AD;function jW(){if(AD)return F_;AD=1;var t=PE(),e=M0(),n=MW(),i=mn();function r(s,a){var o=i(s)?t:e;return o(s,n(a))}return F_=r,F_}var G_,RD;function zW(){return RD||(RD=1,G_=jW()),G_}var K_,$D;function g2e(){if($D)return K_;$D=1;var t=M0();function e(n,i){var r=[];return t(n,function(s,a,o){i(s,a,o)&&r.push(s)}),r}return K_=e,K_}var J_,ND;function O2e(){if(ND)return J_;ND=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return J_=e,J_}var eS,MD;function v2e(){if(MD)return eS;MD=1;function t(e){return this.__data__.has(e)}return eS=t,eS}var tS,jD;function DW(){if(jD)return tS;jD=1;var t=EE(),e=O2e(),n=v2e();function i(r){var s=-1,a=r==null?0:r.length;for(this.__data__=new t;++s<a;)this.add(r[s])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,tS=i,tS}var nS,zD;function y2e(){if(zD)return nS;zD=1;function t(e,n){for(var i=-1,r=e==null?0:e.length;++i<r;)if(n(e[i],i,e))return!0;return!1}return nS=t,nS}var iS,DD;function LW(){if(DD)return iS;DD=1;function t(e,n){return e.has(n)}return iS=t,iS}var rS,LD;function qW(){if(LD)return rS;LD=1;var t=DW(),e=y2e(),n=LW(),i=1,r=2;function s(a,o,c,u,f,d){var m=c&i,v=a.length,y=o.length;if(v!=y&&!(m&&y>v))return!1;var x=d.get(a),S=d.get(o);if(x&&S)return x==o&&S==a;var _=-1,Q=!0,k=c&r?new t:void 0;for(d.set(a,o),d.set(o,a);++_<v;){var T=a[_],E=o[_];if(u)var C=m?u(E,T,_,o,a,d):u(T,E,_,a,o,d);if(C!==void 0){if(C)continue;Q=!1;break}if(k){if(!e(o,function(P,L){if(!n(k,L)&&(T===P||f(T,P,c,u,d)))return k.push(L)})){Q=!1;break}}else if(!(T===E||f(T,E,c,u,d))){Q=!1;break}}return d.delete(a),d.delete(o),Q}return rS=s,rS}var sS,qD;function x2e(){if(qD)return sS;qD=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(r,s){i[++n]=[s,r]}),i}return sS=t,sS}var aS,BD;function qE(){if(BD)return aS;BD=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(r){i[++n]=r}),i}return aS=t,aS}var oS,ID;function b2e(){if(ID)return oS;ID=1;var t=Cu(),e=PW(),n=ku(),i=qW(),r=x2e(),s=qE(),a=1,o=2,c="[object Boolean]",u="[object Date]",f="[object Error]",d="[object Map]",m="[object Number]",v="[object RegExp]",y="[object Set]",x="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",Q="[object DataView]",k=t?t.prototype:void 0,T=k?k.valueOf:void 0;function E(C,P,L,B,N,M,$){switch(L){case Q:if(C.byteLength!=P.byteLength||C.byteOffset!=P.byteOffset)return!1;C=C.buffer,P=P.buffer;case _:return!(C.byteLength!=P.byteLength||!M(new e(C),new e(P)));case c:case u:case m:return n(+C,+P);case f:return C.name==P.name&&C.message==P.message;case v:case x:return C==P+"";case d:var I=r;case y:var j=B&a;if(I||(I=s),C.size!=P.size&&!j)return!1;var D=$.get(C);if(D)return D==P;B|=o,$.set(C,P);var R=i(I(C),I(P),B,N,M,$);return $.delete(C),R;case S:if(T)return T.call(C)==T.call(P)}return!1}return oS=E,oS}var lS,XD;function _2e(){if(XD)return lS;XD=1;var t=QW(),e=1,n=Object.prototype,i=n.hasOwnProperty;function r(s,a,o,c,u,f){var d=o&e,m=t(s),v=m.length,y=t(a),x=y.length;if(v!=x&&!d)return!1;for(var S=v;S--;){var _=m[S];if(!(d?_ in a:i.call(a,_)))return!1}var Q=f.get(s),k=f.get(a);if(Q&&k)return Q==a&&k==s;var T=!0;f.set(s,a),f.set(a,s);for(var E=d;++S<v;){_=m[S];var C=s[_],P=a[_];if(c)var L=d?c(P,C,_,a,s,f):c(C,P,_,s,a,f);if(!(L===void 0?C===P||u(C,P,o,c,f):L)){T=!1;break}E||(E=_=="constructor")}if(T&&!E){var B=s.constructor,N=a.constructor;B!=N&&"constructor"in s&&"constructor"in a&&!(typeof B=="function"&&B instanceof B&&typeof N=="function"&&N instanceof N)&&(T=!1)}return f.delete(s),f.delete(a),T}return lS=r,lS}var cS,ZD;function S2e(){if(ZD)return cS;ZD=1;var t=Q0(),e=qW(),n=b2e(),i=_2e(),r=Qu(),s=mn(),a=Tu(),o=Dd(),c=1,u="[object Arguments]",f="[object Array]",d="[object Object]",m=Object.prototype,v=m.hasOwnProperty;function y(x,S,_,Q,k,T){var E=s(x),C=s(S),P=E?f:r(x),L=C?f:r(S);P=P==u?d:P,L=L==u?d:L;var B=P==d,N=L==d,M=P==L;if(M&&a(x)){if(!a(S))return!1;E=!0,B=!1}if(M&&!B)return T||(T=new t),E||o(x)?e(x,S,_,Q,k,T):n(x,S,P,_,Q,k,T);if(!(_&c)){var $=B&&v.call(x,"__wrapped__"),I=N&&v.call(S,"__wrapped__");if($||I){var j=$?x.value():x,D=I?S.value():S;return T||(T=new t),k(j,D,_,Q,T)}}return M?(T||(T=new t),i(x,S,_,Q,k,T)):!1}return cS=y,cS}var uS,VD;function BW(){if(VD)return uS;VD=1;var t=S2e(),e=xs();function n(i,r,s,a,o){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:t(i,r,s,a,n,o)}return uS=n,uS}var hS,WD;function w2e(){if(WD)return hS;WD=1;var t=Q0(),e=BW(),n=1,i=2;function r(s,a,o,c){var u=o.length,f=u,d=!c;if(s==null)return!f;for(s=Object(s);u--;){var m=o[u];if(d&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++u<f;){m=o[u];var v=m[0],y=s[v],x=m[1];if(d&&m[2]){if(y===void 0&&!(v in s))return!1}else{var S=new t;if(c)var _=c(y,x,v,s,a,S);if(!(_===void 0?e(x,y,n|i,c,S):_))return!1}}return!0}return hS=r,hS}var fS,UD;function IW(){if(UD)return fS;UD=1;var t=_r();function e(n){return n===n&&!t(n)}return fS=e,fS}var dS,HD;function k2e(){if(HD)return dS;HD=1;var t=IW(),e=So();function n(i){for(var r=e(i),s=r.length;s--;){var a=r[s],o=i[a];r[s]=[a,o,t(o)]}return r}return dS=n,dS}var pS,YD;function XW(){if(YD)return pS;YD=1;function t(e,n){return function(i){return i==null?!1:i[e]===n&&(n!==void 0||e in Object(i))}}return pS=t,pS}var mS,FD;function C2e(){if(FD)return mS;FD=1;var t=w2e(),e=k2e(),n=XW();function i(r){var s=e(r);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===r||t(a,r,s)}}return mS=i,mS}var gS,GD;function Eu(){if(GD)return gS;GD=1;var t=Pl(),e=xs(),n="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&t(r)==n}return gS=i,gS}var OS,KD;function BE(){if(KD)return OS;KD=1;var t=mn(),e=Eu(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,a){if(t(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:i.test(s)||!n.test(s)||a!=null&&s in Object(a)}return OS=r,OS}var vS,JD;function T2e(){if(JD)return vS;JD=1;var t=EE(),e="Expected a function";function n(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var s=function(){var a=arguments,o=r?r.apply(this,a):a[0],c=s.cache;if(c.has(o))return c.get(o);var u=i.apply(this,a);return s.cache=c.set(o,u)||c,u};return s.cache=new(n.Cache||t),s}return n.Cache=t,vS=n,vS}var yS,eL;function Q2e(){if(eL)return yS;eL=1;var t=T2e(),e=500;function n(i){var r=t(i,function(a){return s.size===e&&s.clear(),a}),s=r.cache;return r}return yS=n,yS}var xS,tL;function E2e(){if(tL)return xS;tL=1;var t=Q2e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=t(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(e,function(a,o,c,u){s.push(c?u.replace(n,"$1"):o||a)}),s});return xS=i,xS}var bS,nL;function j0(){if(nL)return bS;nL=1;function t(e,n){for(var i=-1,r=e==null?0:e.length,s=Array(r);++i<r;)s[i]=n(e[i],i,e);return s}return bS=t,bS}var _S,iL;function P2e(){if(iL)return _S;iL=1;var t=Cu(),e=j0(),n=mn(),i=Eu(),r=t?t.prototype:void 0,s=r?r.toString:void 0;function a(o){if(typeof o=="string")return o;if(n(o))return e(o,a)+"";if(i(o))return s?s.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return _S=a,_S}var SS,rL;function ZW(){if(rL)return SS;rL=1;var t=P2e();function e(n){return n==null?"":t(n)}return SS=e,SS}var wS,sL;function z0(){if(sL)return wS;sL=1;var t=mn(),e=BE(),n=E2e(),i=ZW();function r(s,a){return t(s)?s:e(s,a)?[s]:n(i(s))}return wS=r,wS}var kS,aL;function Ld(){if(aL)return kS;aL=1;var t=Eu();function e(n){if(typeof n=="string"||t(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return kS=e,kS}var CS,oL;function D0(){if(oL)return CS;oL=1;var t=z0(),e=Ld();function n(i,r){r=t(r,i);for(var s=0,a=r.length;i!=null&&s<a;)i=i[e(r[s++])];return s&&s==a?i:void 0}return CS=n,CS}var TS,lL;function A2e(){if(lL)return TS;lL=1;var t=D0();function e(n,i,r){var s=n==null?void 0:t(n,i);return s===void 0?r:s}return TS=e,TS}var QS,cL;function R2e(){if(cL)return QS;cL=1;function t(e,n){return e!=null&&n in Object(e)}return QS=t,QS}var ES,uL;function VW(){if(uL)return ES;uL=1;var t=z0(),e=zd(),n=mn(),i=A0(),r=AE(),s=Ld();function a(o,c,u){c=t(c,o);for(var f=-1,d=c.length,m=!1;++f<d;){var v=s(c[f]);if(!(m=o!=null&&u(o,v)))break;o=o[v]}return m||++f!=d?m:(d=o==null?0:o.length,!!d&&r(d)&&i(v,d)&&(n(o)||e(o)))}return ES=a,ES}var PS,hL;function WW(){if(hL)return PS;hL=1;var t=R2e(),e=VW();function n(i,r){return i!=null&&e(i,r,t)}return PS=n,PS}var AS,fL;function $2e(){if(fL)return AS;fL=1;var t=BW(),e=A2e(),n=WW(),i=BE(),r=IW(),s=XW(),a=Ld(),o=1,c=2;function u(f,d){return i(f)&&r(d)?s(a(f),d):function(m){var v=e(m,f);return v===void 0&&v===d?n(m,f):t(d,v,o|c)}}return AS=u,AS}var RS,dL;function UW(){if(dL)return RS;dL=1;function t(e){return function(n){return n?.[e]}}return RS=t,RS}var $S,pL;function N2e(){if(pL)return $S;pL=1;var t=D0();function e(n){return function(i){return t(i,n)}}return $S=e,$S}var NS,mL;function M2e(){if(mL)return NS;mL=1;var t=UW(),e=N2e(),n=BE(),i=Ld();function r(s){return n(s)?t(i(s)):e(s)}return NS=r,NS}var MS,gL;function pa(){if(gL)return MS;gL=1;var t=C2e(),e=$2e(),n=$l(),i=mn(),r=M2e();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?i(a)?e(a[0],a[1]):t(a):r(a)}return MS=s,MS}var jS,OL;function HW(){if(OL)return jS;OL=1;var t=wW(),e=g2e(),n=pa(),i=mn();function r(s,a){var o=i(s)?t:e;return o(s,n(a,3))}return jS=r,jS}var zS,vL;function j2e(){if(vL)return zS;vL=1;var t=Object.prototype,e=t.hasOwnProperty;function n(i,r){return i!=null&&e.call(i,r)}return zS=n,zS}var DS,yL;function YW(){if(yL)return DS;yL=1;var t=j2e(),e=VW();function n(i,r){return i!=null&&e(i,r,t)}return DS=n,DS}var LS,xL;function z2e(){if(xL)return LS;xL=1;var t=$E(),e=Qu(),n=zd(),i=mn(),r=da(),s=Tu(),a=$0(),o=Dd(),c="[object Map]",u="[object Set]",f=Object.prototype,d=f.hasOwnProperty;function m(v){if(v==null)return!0;if(r(v)&&(i(v)||typeof v=="string"||typeof v.splice=="function"||s(v)||o(v)||n(v)))return!v.length;var y=e(v);if(y==c||y==u)return!v.size;if(a(v))return!t(v).length;for(var x in v)if(d.call(v,x))return!1;return!0}return LS=m,LS}var qS,bL;function FW(){if(bL)return qS;bL=1;function t(e){return e===void 0}return qS=t,qS}var BS,_L;function GW(){if(_L)return BS;_L=1;var t=M0(),e=da();function n(i,r){var s=-1,a=e(i)?Array(i.length):[];return t(i,function(o,c,u){a[++s]=r(o,c,u)}),a}return BS=n,BS}var IS,SL;function KW(){if(SL)return IS;SL=1;var t=j0(),e=pa(),n=GW(),i=mn();function r(s,a){var o=i(s)?t:n;return o(s,e(a,3))}return IS=r,IS}var XS,wL;function D2e(){if(wL)return XS;wL=1;function t(e,n,i,r){var s=-1,a=e==null?0:e.length;for(r&&a&&(i=e[++s]);++s<a;)i=n(i,e[s],s,e);return i}return XS=t,XS}var ZS,kL;function L2e(){if(kL)return ZS;kL=1;function t(e,n,i,r,s){return s(e,function(a,o,c){i=r?(r=!1,a):n(i,a,o,c)}),i}return ZS=t,ZS}var VS,CL;function JW(){if(CL)return VS;CL=1;var t=D2e(),e=M0(),n=pa(),i=L2e(),r=mn();function s(a,o,c){var u=r(a)?t:i,f=arguments.length<3;return u(a,n(o,4),c,f,e)}return VS=s,VS}var WS,TL;function q2e(){if(TL)return WS;TL=1;var t=Pl(),e=mn(),n=xs(),i="[object String]";function r(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==i}return WS=r,WS}var US,QL;function B2e(){if(QL)return US;QL=1;var t=UW(),e=t("length");return US=e,US}var HS,EL;function I2e(){if(EL)return HS;EL=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",r=e+n+i,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+t+r+s+"]");function c(u){return o.test(u)}return HS=c,HS}var YS,PL;function X2e(){if(PL)return YS;PL=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",r=e+n+i,s="\\ufe0e\\ufe0f",a="["+t+"]",o="["+r+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",f="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",y=u+"?",x="["+s+"]?",S="(?:"+v+"(?:"+[f,d,m].join("|")+")"+x+y+")*",_=x+y+S,Q="(?:"+[f+o+"?",o,d,m,a].join("|")+")",k=RegExp(c+"(?="+c+")|"+Q+_,"g");function T(E){for(var C=k.lastIndex=0;k.test(E);)++C;return C}return YS=T,YS}var FS,AL;function Z2e(){if(AL)return FS;AL=1;var t=B2e(),e=I2e(),n=X2e();function i(r){return e(r)?n(r):t(r)}return FS=i,FS}var GS,RL;function V2e(){if(RL)return GS;RL=1;var t=$E(),e=Qu(),n=da(),i=q2e(),r=Z2e(),s="[object Map]",a="[object Set]";function o(c){if(c==null)return 0;if(n(c))return i(c)?r(c):c.length;var u=e(c);return u==s||u==a?c.size:t(c).length}return GS=o,GS}var KS,$L;function W2e(){if($L)return KS;$L=1;var t=PE(),e=RW(),n=LE(),i=pa(),r=N0(),s=mn(),a=Tu(),o=Md(),c=_r(),u=Dd();function f(d,m,v){var y=s(d),x=y||a(d)||u(d);if(m=i(m,4),v==null){var S=d&&d.constructor;x?v=y?new S:[]:c(d)?v=o(S)?e(r(d)):{}:v={}}return(x?t:n)(d,function(_,Q,k){return m(v,_,Q,k)}),v}return KS=f,KS}var JS,NL;function U2e(){if(NL)return JS;NL=1;var t=Cu(),e=zd(),n=mn(),i=t?t.isConcatSpreadable:void 0;function r(s){return n(s)||e(s)||!!(i&&s&&s[i])}return JS=r,JS}var ew,ML;function IE(){if(ML)return ew;ML=1;var t=ME(),e=U2e();function n(i,r,s,a,o){var c=-1,u=i.length;for(s||(s=e),o||(o=[]);++c<u;){var f=i[c];r>0&&s(f)?r>1?n(f,r-1,s,a,o):t(o,f):a||(o[o.length]=f)}return o}return ew=n,ew}var tw,jL;function H2e(){if(jL)return tw;jL=1;function t(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}return tw=t,tw}var nw,zL;function eU(){if(zL)return nw;zL=1;var t=H2e(),e=Math.max;function n(i,r,s){return r=e(r===void 0?i.length-1:r,0),function(){for(var a=arguments,o=-1,c=e(a.length-r,0),u=Array(c);++o<c;)u[o]=a[r+o];o=-1;for(var f=Array(r+1);++o<r;)f[o]=a[o];return f[r]=s(u),t(i,this,f)}}return nw=n,nw}var iw,DL;function Y2e(){if(DL)return iw;DL=1;var t=zE(),e=yW(),n=$l(),i=e?function(r,s){return e(r,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return iw=i,iw}var rw,LL;function F2e(){if(LL)return rw;LL=1;var t=800,e=16,n=Date.now;function i(r){var s=0,a=0;return function(){var o=n(),c=e-(o-a);if(a=o,c>0){if(++s>=t)return arguments[0]}else s=0;return r.apply(void 0,arguments)}}return rw=i,rw}var sw,qL;function tU(){if(qL)return sw;qL=1;var t=Y2e(),e=F2e(),n=e(t);return sw=n,sw}var aw,BL;function L0(){if(BL)return aw;BL=1;var t=$l(),e=eU(),n=tU();function i(r,s){return n(e(r,s,t),r+"")}return aw=i,aw}var ow,IL;function nU(){if(IL)return ow;IL=1;function t(e,n,i,r){for(var s=e.length,a=i+(r?1:-1);r?a--:++a<s;)if(n(e[a],a,e))return a;return-1}return ow=t,ow}var lw,XL;function G2e(){if(XL)return lw;XL=1;function t(e){return e!==e}return lw=t,lw}var cw,ZL;function K2e(){if(ZL)return cw;ZL=1;function t(e,n,i){for(var r=i-1,s=e.length;++r<s;)if(e[r]===n)return r;return-1}return cw=t,cw}var uw,VL;function J2e(){if(VL)return uw;VL=1;var t=nU(),e=G2e(),n=K2e();function i(r,s,a){return s===s?n(r,s,a):t(r,e,a)}return uw=i,uw}var hw,WL;function eCe(){if(WL)return hw;WL=1;var t=J2e();function e(n,i){var r=n==null?0:n.length;return!!r&&t(n,i,0)>-1}return hw=e,hw}var fw,UL;function tCe(){if(UL)return fw;UL=1;function t(e,n,i){for(var r=-1,s=e==null?0:e.length;++r<s;)if(i(n,e[r]))return!0;return!1}return fw=t,fw}var dw,HL;function nCe(){if(HL)return dw;HL=1;function t(){}return dw=t,dw}var pw,YL;function iCe(){if(YL)return pw;YL=1;var t=EW(),e=nCe(),n=qE(),i=1/0,r=t&&1/n(new t([,-0]))[1]==i?function(s){return new t(s)}:e;return pw=r,pw}var mw,FL;function rCe(){if(FL)return mw;FL=1;var t=DW(),e=eCe(),n=tCe(),i=LW(),r=iCe(),s=qE(),a=200;function o(c,u,f){var d=-1,m=e,v=c.length,y=!0,x=[],S=x;if(f)y=!1,m=n;else if(v>=a){var _=u?null:r(c);if(_)return s(_);y=!1,m=i,S=new t}else S=u?[]:x;e:for(;++d<v;){var Q=c[d],k=u?u(Q):Q;if(Q=f||Q!==0?Q:0,y&&k===k){for(var T=S.length;T--;)if(S[T]===k)continue e;u&&S.push(k),x.push(Q)}else m(S,k,f)||(S!==x&&S.push(k),x.push(Q))}return x}return mw=o,mw}var gw,GL;function iU(){if(GL)return gw;GL=1;var t=da(),e=xs();function n(i){return e(i)&&t(i)}return gw=n,gw}var Ow,KL;function sCe(){if(KL)return Ow;KL=1;var t=IE(),e=L0(),n=rCe(),i=iU(),r=e(function(s){return n(t(s,1,i,!0))});return Ow=r,Ow}var vw,JL;function aCe(){if(JL)return vw;JL=1;var t=j0();function e(n,i){return t(i,function(r){return n[r]})}return vw=e,vw}var yw,eq;function rU(){if(eq)return yw;eq=1;var t=aCe(),e=So();function n(i){return i==null?[]:t(i,e(i))}return yw=n,yw}var xw,tq;function Sr(){if(tq)return xw;tq=1;var t;if(typeof TE=="function")try{t={clone:d2e(),constant:zE(),each:zW(),filter:HW(),has:YW(),isArray:mn(),isEmpty:z2e(),isFunction:Md(),isUndefined:FW(),keys:So(),map:KW(),reduce:JW(),size:V2e(),transform:W2e(),union:sCe(),values:rU()}}catch{}return t||(t=window._),xw=t,xw}var bw,nq;function XE(){if(nq)return bw;nq=1;var t=Sr();bw=r;var e="\0",n="\0",i="";function r(f){this._isDirected=t.has(f,"directed")?f.directed:!0,this._isMultigraph=t.has(f,"multigraph")?f.multigraph:!1,this._isCompound=t.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(f){return this._label=f,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultNodeLabelFn=f,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return t.keys(this._nodes)},r.prototype.sources=function(){var f=this;return t.filter(this.nodes(),function(d){return t.isEmpty(f._in[d])})},r.prototype.sinks=function(){var f=this;return t.filter(this.nodes(),function(d){return t.isEmpty(f._out[d])})},r.prototype.setNodes=function(f,d){var m=arguments,v=this;return t.each(f,function(y){m.length>1?v.setNode(y,d):v.setNode(y)}),this},r.prototype.setNode=function(f,d){return t.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=d),this):(this._nodes[f]=arguments.length>1?d:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},r.prototype.node=function(f){return this._nodes[f]},r.prototype.hasNode=function(f){return t.has(this._nodes,f)},r.prototype.removeNode=function(f){var d=this;if(t.has(this._nodes,f)){var m=function(v){d.removeEdge(d._edgeObjs[v])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],t.each(this.children(f),function(v){d.setParent(v)}),delete this._children[f]),t.each(t.keys(this._in[f]),m),delete this._in[f],delete this._preds[f],t.each(t.keys(this._out[f]),m),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},r.prototype.setParent=function(f,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(d))d=n;else{d+="";for(var m=d;!t.isUndefined(m);m=this.parent(m))if(m===f)throw new Error("Setting "+d+" as parent of "+f+" would create a cycle");this.setNode(d)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=d,this._children[d][f]=!0,this},r.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},r.prototype.parent=function(f){if(this._isCompound){var d=this._parent[f];if(d!==n)return d}},r.prototype.children=function(f){if(t.isUndefined(f)&&(f=n),this._isCompound){var d=this._children[f];if(d)return t.keys(d)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},r.prototype.predecessors=function(f){var d=this._preds[f];if(d)return t.keys(d)},r.prototype.successors=function(f){var d=this._sucs[f];if(d)return t.keys(d)},r.prototype.neighbors=function(f){var d=this.predecessors(f);if(d)return t.union(d,this.successors(f))},r.prototype.isLeaf=function(f){var d;return this.isDirected()?d=this.successors(f):d=this.neighbors(f),d.length===0},r.prototype.filterNodes=function(f){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var m=this;t.each(this._nodes,function(x,S){f(S)&&d.setNode(S,x)}),t.each(this._edgeObjs,function(x){d.hasNode(x.v)&&d.hasNode(x.w)&&d.setEdge(x,m.edge(x))});var v={};function y(x){var S=m.parent(x);return S===void 0||d.hasNode(S)?(v[x]=S,S):S in v?v[S]:y(S)}return this._isCompound&&t.each(d.nodes(),function(x){d.setParent(x,y(x))}),d},r.prototype.setDefaultEdgeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultEdgeLabelFn=f,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return t.values(this._edgeObjs)},r.prototype.setPath=function(f,d){var m=this,v=arguments;return t.reduce(f,function(y,x){return v.length>1?m.setEdge(y,x,d):m.setEdge(y,x),x}),this},r.prototype.setEdge=function(){var f,d,m,v,y=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(f=x.v,d=x.w,m=x.name,arguments.length===2&&(v=arguments[1],y=!0)):(f=x,d=arguments[1],m=arguments[3],arguments.length>2&&(v=arguments[2],y=!0)),f=""+f,d=""+d,t.isUndefined(m)||(m=""+m);var S=o(this._isDirected,f,d,m);if(t.has(this._edgeLabels,S))return y&&(this._edgeLabels[S]=v),this;if(!t.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(d),this._edgeLabels[S]=y?v:this._defaultEdgeLabelFn(f,d,m);var _=c(this._isDirected,f,d,m);return f=_.v,d=_.w,Object.freeze(_),this._edgeObjs[S]=_,s(this._preds[d],f),s(this._sucs[f],d),this._in[d][S]=_,this._out[f][S]=_,this._edgeCount++,this},r.prototype.edge=function(f,d,m){var v=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,f,d,m);return this._edgeLabels[v]},r.prototype.hasEdge=function(f,d,m){var v=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,f,d,m);return t.has(this._edgeLabels,v)},r.prototype.removeEdge=function(f,d,m){var v=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,f,d,m),y=this._edgeObjs[v];return y&&(f=y.v,d=y.w,delete this._edgeLabels[v],delete this._edgeObjs[v],a(this._preds[d],f),a(this._sucs[f],d),delete this._in[d][v],delete this._out[f][v],this._edgeCount--),this},r.prototype.inEdges=function(f,d){var m=this._in[f];if(m){var v=t.values(m);return d?t.filter(v,function(y){return y.v===d}):v}},r.prototype.outEdges=function(f,d){var m=this._out[f];if(m){var v=t.values(m);return d?t.filter(v,function(y){return y.w===d}):v}},r.prototype.nodeEdges=function(f,d){var m=this.inEdges(f,d);if(m)return m.concat(this.outEdges(f,d))};function s(f,d){f[d]?f[d]++:f[d]=1}function a(f,d){--f[d]||delete f[d]}function o(f,d,m,v){var y=""+d,x=""+m;if(!f&&y>x){var S=y;y=x,x=S}return y+i+x+i+(t.isUndefined(v)?e:v)}function c(f,d,m,v){var y=""+d,x=""+m;if(!f&&y>x){var S=y;y=x,x=S}var _={v:y,w:x};return v&&(_.name=v),_}function u(f,d){return o(f,d.v,d.w,d.name)}return bw}var _w,iq;function oCe(){return iq||(iq=1,_w="2.1.8"),_w}var Sw,rq;function lCe(){return rq||(rq=1,Sw={Graph:XE(),version:oCe()}),Sw}var ww,sq;function cCe(){if(sq)return ww;sq=1;var t=Sr(),e=XE();ww={write:n,read:s};function n(a){var o={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:i(a),edges:r(a)};return t.isUndefined(a.graph())||(o.value=t.clone(a.graph())),o}function i(a){return t.map(a.nodes(),function(o){var c=a.node(o),u=a.parent(o),f={v:o};return t.isUndefined(c)||(f.value=c),t.isUndefined(u)||(f.parent=u),f})}function r(a){return t.map(a.edges(),function(o){var c=a.edge(o),u={v:o.v,w:o.w};return t.isUndefined(o.name)||(u.name=o.name),t.isUndefined(c)||(u.value=c),u})}function s(a){var o=new e(a.options).setGraph(a.value);return t.each(a.nodes,function(c){o.setNode(c.v,c.value),c.parent&&o.setParent(c.v,c.parent)}),t.each(a.edges,function(c){o.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),o}return ww}var kw,aq;function uCe(){if(aq)return kw;aq=1;var t=Sr();kw=e;function e(n){var i={},r=[],s;function a(o){t.has(i,o)||(i[o]=!0,s.push(o),t.each(n.successors(o),a),t.each(n.predecessors(o),a))}return t.each(n.nodes(),function(o){s=[],a(o),s.length&&r.push(s)}),r}return kw}var Cw,oq;function sU(){if(oq)return Cw;oq=1;var t=Sr();Cw=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,i){var r=this._keyIndices;if(n=String(n),!t.has(r,n)){var s=this._arr,a=s.length;return r[n]=a,s.push({key:n,priority:i}),this._decrease(a),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,i){var r=this._keyIndices[n];if(i>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[r].priority+" New: "+i);this._arr[r].priority=i,this._decrease(r)},e.prototype._heapify=function(n){var i=this._arr,r=2*n,s=r+1,a=n;r<i.length&&(a=i[r].priority<i[a].priority?r:a,s<i.length&&(a=i[s].priority<i[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},e.prototype._decrease=function(n){for(var i=this._arr,r=i[n].priority,s;n!==0&&(s=n>>1,!(i[s].priority<r));)this._swap(n,s),n=s},e.prototype._swap=function(n,i){var r=this._arr,s=this._keyIndices,a=r[n],o=r[i];r[n]=o,r[i]=a,s[o.key]=n,s[a.key]=i},Cw}var Tw,lq;function aU(){if(lq)return Tw;lq=1;var t=Sr(),e=sU();Tw=i;var n=t.constant(1);function i(s,a,o,c){return r(s,String(a),o||n,c||function(u){return s.outEdges(u)})}function r(s,a,o,c){var u={},f=new e,d,m,v=function(y){var x=y.v!==d?y.v:y.w,S=u[x],_=o(y),Q=m.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+_);Q<S.distance&&(S.distance=Q,S.predecessor=d,f.decrease(x,Q))};for(s.nodes().forEach(function(y){var x=y===a?0:Number.POSITIVE_INFINITY;u[y]={distance:x},f.add(y,x)});f.size()>0&&(d=f.removeMin(),m=u[d],m.distance!==Number.POSITIVE_INFINITY);)c(d).forEach(v);return u}return Tw}var Qw,cq;function hCe(){if(cq)return Qw;cq=1;var t=aU(),e=Sr();Qw=n;function n(i,r,s){return e.transform(i.nodes(),function(a,o){a[o]=t(i,o,r,s)},{})}return Qw}var Ew,uq;function oU(){if(uq)return Ew;uq=1;var t=Sr();Ew=e;function e(n){var i=0,r=[],s={},a=[];function o(c){var u=s[c]={onStack:!0,lowlink:i,index:i++};if(r.push(c),n.successors(c).forEach(function(m){t.has(s,m)?s[m].onStack&&(u.lowlink=Math.min(u.lowlink,s[m].index)):(o(m),u.lowlink=Math.min(u.lowlink,s[m].lowlink))}),u.lowlink===u.index){var f=[],d;do d=r.pop(),s[d].onStack=!1,f.push(d);while(c!==d);a.push(f)}}return n.nodes().forEach(function(c){t.has(s,c)||o(c)}),a}return Ew}var Pw,hq;function fCe(){if(hq)return Pw;hq=1;var t=Sr(),e=oU();Pw=n;function n(i){return t.filter(e(i),function(r){return r.length>1||r.length===1&&i.hasEdge(r[0],r[0])})}return Pw}var Aw,fq;function dCe(){if(fq)return Aw;fq=1;var t=Sr();Aw=n;var e=t.constant(1);function n(r,s,a){return i(r,s||e,a||function(o){return r.outEdges(o)})}function i(r,s,a){var o={},c=r.nodes();return c.forEach(function(u){o[u]={},o[u][u]={distance:0},c.forEach(function(f){u!==f&&(o[u][f]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(f){var d=f.v===u?f.w:f.v,m=s(f);o[u][d]={distance:m,predecessor:u}})}),c.forEach(function(u){var f=o[u];c.forEach(function(d){var m=o[d];c.forEach(function(v){var y=m[u],x=f[v],S=m[v],_=y.distance+x.distance;_<S.distance&&(S.distance=_,S.predecessor=x.predecessor)})})}),o}return Aw}var Rw,dq;function lU(){if(dq)return Rw;dq=1;var t=Sr();Rw=e,e.CycleException=n;function e(i){var r={},s={},a=[];function o(c){if(t.has(s,c))throw new n;t.has(r,c)||(s[c]=!0,r[c]=!0,t.each(i.predecessors(c),o),delete s[c],a.push(c))}if(t.each(i.sinks(),o),t.size(r)!==i.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Rw}var $w,pq;function pCe(){if(pq)return $w;pq=1;var t=lU();$w=e;function e(n){try{t(n)}catch(i){if(i instanceof t.CycleException)return!1;throw i}return!0}return $w}var Nw,mq;function cU(){if(mq)return Nw;mq=1;var t=Sr();Nw=e;function e(i,r,s){t.isArray(r)||(r=[r]);var a=(i.isDirected()?i.successors:i.neighbors).bind(i),o=[],c={};return t.each(r,function(u){if(!i.hasNode(u))throw new Error("Graph does not have node: "+u);n(i,u,s==="post",c,a,o)}),o}function n(i,r,s,a,o,c){t.has(a,r)||(a[r]=!0,s||c.push(r),t.each(o(r),function(u){n(i,u,s,a,o,c)}),s&&c.push(r))}return Nw}var Mw,gq;function mCe(){if(gq)return Mw;gq=1;var t=cU();Mw=e;function e(n,i){return t(n,i,"post")}return Mw}var jw,Oq;function gCe(){if(Oq)return jw;Oq=1;var t=cU();jw=e;function e(n,i){return t(n,i,"pre")}return jw}var zw,vq;function OCe(){if(vq)return zw;vq=1;var t=Sr(),e=XE(),n=sU();zw=i;function i(r,s){var a=new e,o={},c=new n,u;function f(m){var v=m.v===u?m.w:m.v,y=c.priority(v);if(y!==void 0){var x=s(m);x<y&&(o[v]=u,c.decrease(v,x))}}if(r.nodeCount()===0)return a;t.each(r.nodes(),function(m){c.add(m,Number.POSITIVE_INFINITY),a.setNode(m)}),c.decrease(r.nodes()[0],0);for(var d=!1;c.size()>0;){if(u=c.removeMin(),t.has(o,u))a.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+r);d=!0}r.nodeEdges(u).forEach(f)}return a}return zw}var Dw,yq;function vCe(){return yq||(yq=1,Dw={components:uCe(),dijkstra:aU(),dijkstraAll:hCe(),findCycles:fCe(),floydWarshall:dCe(),isAcyclic:pCe(),postorder:mCe(),preorder:gCe(),prim:OCe(),tarjan:oU(),topsort:lU()}),Dw}var Lw,xq;function yCe(){if(xq)return Lw;xq=1;var t=lCe();return Lw={Graph:t.Graph,json:cCe(),alg:vCe(),version:t.version},Lw}var qw,bq;function Dr(){if(bq)return qw;bq=1;var t;if(typeof TE=="function")try{t=yCe()}catch{}return t||(t=window.graphlib),qw=t,qw}var Bw,_q;function xCe(){if(_q)return Bw;_q=1;var t=NW(),e=1,n=4;function i(r){return t(r,e|n)}return Bw=i,Bw}var Iw,Sq;function q0(){if(Sq)return Iw;Sq=1;var t=ku(),e=da(),n=A0(),i=_r();function r(s,a,o){if(!i(o))return!1;var c=typeof a;return(c=="number"?e(o)&&n(a,o.length):c=="string"&&a in o)?t(o[a],s):!1}return Iw=r,Iw}var Xw,wq;function bCe(){if(wq)return Xw;wq=1;var t=L0(),e=ku(),n=q0(),i=Rl(),r=Object.prototype,s=r.hasOwnProperty,a=t(function(o,c){o=Object(o);var u=-1,f=c.length,d=f>2?c[2]:void 0;for(d&&n(c[0],c[1],d)&&(f=1);++u<f;)for(var m=c[u],v=i(m),y=-1,x=v.length;++y<x;){var S=v[y],_=o[S];(_===void 0||e(_,r[S])&&!s.call(o,S))&&(o[S]=m[S])}return o});return Xw=a,Xw}var Zw,kq;function _Ce(){if(kq)return Zw;kq=1;var t=pa(),e=da(),n=So();function i(r){return function(s,a,o){var c=Object(s);if(!e(s)){var u=t(a,3);s=n(s),a=function(d){return u(c[d],d,c)}}var f=r(s,a,o);return f>-1?c[u?s[f]:f]:void 0}}return Zw=i,Zw}var Vw,Cq;function SCe(){if(Cq)return Vw;Cq=1;var t=/\s/;function e(n){for(var i=n.length;i--&&t.test(n.charAt(i)););return i}return Vw=e,Vw}var Ww,Tq;function wCe(){if(Tq)return Ww;Tq=1;var t=SCe(),e=/^\s+/;function n(i){return i&&i.slice(0,t(i)+1).replace(e,"")}return Ww=n,Ww}var Uw,Qq;function kCe(){if(Qq)return Uw;Qq=1;var t=wCe(),e=_r(),n=Eu(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return i;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=t(u);var d=s.test(u);return d||a.test(u)?o(u.slice(2),d?2:8):r.test(u)?i:+u}return Uw=c,Uw}var Hw,Eq;function uU(){if(Eq)return Hw;Eq=1;var t=kCe(),e=1/0,n=17976931348623157e292;function i(r){if(!r)return r===0?r:0;if(r=t(r),r===e||r===-e){var s=r<0?-1:1;return s*n}return r===r?r:0}return Hw=i,Hw}var Yw,Pq;function CCe(){if(Pq)return Yw;Pq=1;var t=uU();function e(n){var i=t(n),r=i%1;return i===i?r?i-r:i:0}return Yw=e,Yw}var Fw,Aq;function TCe(){if(Aq)return Fw;Aq=1;var t=nU(),e=pa(),n=CCe(),i=Math.max;function r(s,a,o){var c=s==null?0:s.length;if(!c)return-1;var u=o==null?0:n(o);return u<0&&(u=i(c+u,0)),t(s,e(a,3),u)}return Fw=r,Fw}var Gw,Rq;function QCe(){if(Rq)return Gw;Rq=1;var t=_Ce(),e=TCe(),n=t(e);return Gw=n,Gw}var Kw,$q;function hU(){if($q)return Kw;$q=1;var t=IE();function e(n){var i=n==null?0:n.length;return i?t(n,1):[]}return Kw=e,Kw}var Jw,Nq;function ECe(){if(Nq)return Jw;Nq=1;var t=DE(),e=MW(),n=Rl();function i(r,s){return r==null?r:t(r,e(s),n)}return Jw=i,Jw}var ek,Mq;function PCe(){if(Mq)return ek;Mq=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return ek=t,ek}var tk,jq;function ACe(){if(jq)return tk;jq=1;var t=E0(),e=LE(),n=pa();function i(r,s){var a={};return s=n(s,3),e(r,function(o,c,u){t(a,c,s(o,c,u))}),a}return tk=i,tk}var nk,zq;function ZE(){if(zq)return nk;zq=1;var t=Eu();function e(n,i,r){for(var s=-1,a=n.length;++s<a;){var o=n[s],c=i(o);if(c!=null&&(u===void 0?c===c&&!t(c):r(c,u)))var u=c,f=o}return f}return nk=e,nk}var ik,Dq;function RCe(){if(Dq)return ik;Dq=1;function t(e,n){return e>n}return ik=t,ik}var rk,Lq;function $Ce(){if(Lq)return rk;Lq=1;var t=ZE(),e=RCe(),n=$l();function i(r){return r&&r.length?t(r,n,e):void 0}return rk=i,rk}var sk,qq;function fU(){if(qq)return sk;qq=1;var t=E0(),e=ku();function n(i,r,s){(s!==void 0&&!e(i[r],s)||s===void 0&&!(r in i))&&t(i,r,s)}return sk=n,sk}var ak,Bq;function NCe(){if(Bq)return ak;Bq=1;var t=Pl(),e=N0(),n=xs(),i="[object Object]",r=Function.prototype,s=Object.prototype,a=r.toString,o=s.hasOwnProperty,c=a.call(Object);function u(f){if(!n(f)||t(f)!=i)return!1;var d=e(f);if(d===null)return!0;var m=o.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&a.call(m)==c}return ak=u,ak}var ok,Iq;function dU(){if(Iq)return ok;Iq=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return ok=t,ok}var lk,Xq;function MCe(){if(Xq)return lk;Xq=1;var t=jd(),e=Rl();function n(i){return t(i,e(i))}return lk=n,lk}var ck,Zq;function jCe(){if(Zq)return ck;Zq=1;var t=fU(),e=_W(),n=AW(),i=SW(),r=$W(),s=zd(),a=mn(),o=iU(),c=Tu(),u=Md(),f=_r(),d=NCe(),m=Dd(),v=dU(),y=MCe();function x(S,_,Q,k,T,E,C){var P=v(S,Q),L=v(_,Q),B=C.get(L);if(B){t(S,Q,B);return}var N=E?E(P,L,Q+"",S,_,C):void 0,M=N===void 0;if(M){var $=a(L),I=!$&&c(L),j=!$&&!I&&m(L);N=L,$||I||j?a(P)?N=P:o(P)?N=i(P):I?(M=!1,N=e(L,!0)):j?(M=!1,N=n(L,!0)):N=[]:d(L)||s(L)?(N=P,s(P)?N=y(P):(!f(P)||u(P))&&(N=r(L))):M=!1}M&&(C.set(L,N),T(N,L,k,E,C),C.delete(L)),t(S,Q,N)}return ck=x,ck}var uk,Vq;function zCe(){if(Vq)return uk;Vq=1;var t=Q0(),e=fU(),n=DE(),i=jCe(),r=_r(),s=Rl(),a=dU();function o(c,u,f,d,m){c!==u&&n(u,function(v,y){if(m||(m=new t),r(v))i(c,u,y,f,o,d,m);else{var x=d?d(a(c,y),v,y+"",c,u,m):void 0;x===void 0&&(x=v),e(c,y,x)}},s)}return uk=o,uk}var hk,Wq;function DCe(){if(Wq)return hk;Wq=1;var t=L0(),e=q0();function n(i){return t(function(r,s){var a=-1,o=s.length,c=o>1?s[o-1]:void 0,u=o>2?s[2]:void 0;for(c=i.length>3&&typeof c=="function"?(o--,c):void 0,u&&e(s[0],s[1],u)&&(c=o<3?void 0:c,o=1),r=Object(r);++a<o;){var f=s[a];f&&i(r,f,a,c)}return r})}return hk=n,hk}var fk,Uq;function LCe(){if(Uq)return fk;Uq=1;var t=zCe(),e=DCe(),n=e(function(i,r,s){t(i,r,s)});return fk=n,fk}var dk,Hq;function pU(){if(Hq)return dk;Hq=1;function t(e,n){return e<n}return dk=t,dk}var pk,Yq;function qCe(){if(Yq)return pk;Yq=1;var t=ZE(),e=pU(),n=$l();function i(r){return r&&r.length?t(r,n,e):void 0}return pk=i,pk}var mk,Fq;function BCe(){if(Fq)return mk;Fq=1;var t=ZE(),e=pa(),n=pU();function i(r,s){return r&&r.length?t(r,e(s,2),n):void 0}return mk=i,mk}var gk,Gq;function ICe(){if(Gq)return gk;Gq=1;var t=Ir(),e=function(){return t.Date.now()};return gk=e,gk}var Ok,Kq;function XCe(){if(Kq)return Ok;Kq=1;var t=P0(),e=z0(),n=A0(),i=_r(),r=Ld();function s(a,o,c,u){if(!i(a))return a;o=e(o,a);for(var f=-1,d=o.length,m=d-1,v=a;v!=null&&++f<d;){var y=r(o[f]),x=c;if(y==="__proto__"||y==="constructor"||y==="prototype")return a;if(f!=m){var S=v[y];x=u?u(S,y,v):void 0,x===void 0&&(x=i(S)?S:n(o[f+1])?[]:{})}t(v,y,x),v=v[y]}return a}return Ok=s,Ok}var vk,Jq;function ZCe(){if(Jq)return vk;Jq=1;var t=D0(),e=XCe(),n=z0();function i(r,s,a){for(var o=-1,c=s.length,u={};++o<c;){var f=s[o],d=t(r,f);a(d,f)&&e(u,n(f,r),d)}return u}return vk=i,vk}var yk,eB;function VCe(){if(eB)return yk;eB=1;var t=ZCe(),e=WW();function n(i,r){return t(i,r,function(s,a){return e(i,a)})}return yk=n,yk}var xk,tB;function WCe(){if(tB)return xk;tB=1;var t=hU(),e=eU(),n=tU();function i(r){return n(e(r,void 0,t),r+"")}return xk=i,xk}var bk,nB;function UCe(){if(nB)return bk;nB=1;var t=VCe(),e=WCe(),n=e(function(i,r){return i==null?{}:t(i,r)});return bk=n,bk}var _k,iB;function HCe(){if(iB)return _k;iB=1;var t=Math.ceil,e=Math.max;function n(i,r,s,a){for(var o=-1,c=e(t((r-i)/(s||1)),0),u=Array(c);c--;)u[a?c:++o]=i,i+=s;return u}return _k=n,_k}var Sk,rB;function YCe(){if(rB)return Sk;rB=1;var t=HCe(),e=q0(),n=uU();function i(r){return function(s,a,o){return o&&typeof o!="number"&&e(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),t(s,a,o,r)}}return Sk=i,Sk}var wk,sB;function FCe(){if(sB)return wk;sB=1;var t=YCe(),e=t();return wk=e,wk}var kk,aB;function GCe(){if(aB)return kk;aB=1;function t(e,n){var i=e.length;for(e.sort(n);i--;)e[i]=e[i].value;return e}return kk=t,kk}var Ck,oB;function KCe(){if(oB)return Ck;oB=1;var t=Eu();function e(n,i){if(n!==i){var r=n!==void 0,s=n===null,a=n===n,o=t(n),c=i!==void 0,u=i===null,f=i===i,d=t(i);if(!u&&!d&&!o&&n>i||o&&c&&f&&!u&&!d||s&&c&&f||!r&&f||!a)return 1;if(!s&&!o&&!d&&n<i||d&&r&&a&&!s&&!o||u&&r&&a||!c&&a||!f)return-1}return 0}return Ck=e,Ck}var Tk,lB;function JCe(){if(lB)return Tk;lB=1;var t=KCe();function e(n,i,r){for(var s=-1,a=n.criteria,o=i.criteria,c=a.length,u=r.length;++s<c;){var f=t(a[s],o[s]);if(f){if(s>=u)return f;var d=r[s];return f*(d=="desc"?-1:1)}}return n.index-i.index}return Tk=e,Tk}var Qk,cB;function eTe(){if(cB)return Qk;cB=1;var t=j0(),e=D0(),n=pa(),i=GW(),r=GCe(),s=R0(),a=JCe(),o=$l(),c=mn();function u(f,d,m){d.length?d=t(d,function(x){return c(x)?function(S){return e(S,x.length===1?x[0]:x)}:x}):d=[o];var v=-1;d=t(d,s(n));var y=i(f,function(x,S,_){var Q=t(d,function(k){return k(x)});return{criteria:Q,index:++v,value:x}});return r(y,function(x,S){return a(x,S,m)})}return Qk=u,Qk}var Ek,uB;function tTe(){if(uB)return Ek;uB=1;var t=IE(),e=eTe(),n=L0(),i=q0(),r=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&i(s,a[0],a[1])?a=[]:o>2&&i(a[0],a[1],a[2])&&(a=[a[0]]),e(s,t(a,1),[])});return Ek=r,Ek}var Pk,hB;function nTe(){if(hB)return Pk;hB=1;var t=ZW(),e=0;function n(i){var r=++e;return t(i)+r}return Pk=n,Pk}var Ak,fB;function iTe(){if(fB)return Ak;fB=1;function t(e,n,i){for(var r=-1,s=e.length,a=n.length,o={};++r<s;){var c=r<a?n[r]:void 0;i(o,e[r],c)}return o}return Ak=t,Ak}var Rk,dB;function rTe(){if(dB)return Rk;dB=1;var t=P0(),e=iTe();function n(i,r){return e(i||[],r||[],t)}return Rk=n,Rk}var $k,pB;function Xt(){if(pB)return $k;pB=1;var t;if(typeof TE=="function")try{t={cloneDeep:xCe(),constant:zE(),defaults:bCe(),each:zW(),filter:HW(),find:QCe(),flatten:hU(),forEach:jW(),forIn:ECe(),has:YW(),isUndefined:FW(),last:PCe(),map:KW(),mapValues:ACe(),max:$Ce(),merge:LCe(),min:qCe(),minBy:BCe(),now:ICe(),pick:UCe(),range:FCe(),reduce:JW(),sortBy:tTe(),uniqueId:nTe(),values:rU(),zipObject:rTe()}}catch{}return t||(t=window._),$k=t,$k}var Nk,mB;function sTe(){if(mB)return Nk;mB=1,Nk=t;function t(){var i={};i._next=i._prev=i,this._sentinel=i}t.prototype.dequeue=function(){var i=this._sentinel,r=i._prev;if(r!==i)return e(r),r},t.prototype.enqueue=function(i){var r=this._sentinel;i._prev&&i._next&&e(i),i._next=r._next,r._next._prev=i,r._next=i,i._prev=r},t.prototype.toString=function(){for(var i=[],r=this._sentinel,s=r._prev;s!==r;)i.push(JSON.stringify(s,n)),s=s._prev;return"["+i.join(", ")+"]"};function e(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,r){if(i!=="_next"&&i!=="_prev")return r}return Nk}var Mk,gB;function aTe(){if(gB)return Mk;gB=1;var t=Xt(),e=Dr().Graph,n=sTe();Mk=r;var i=t.constant(1);function r(u,f){if(u.nodeCount()<=1)return[];var d=o(u,f||i),m=s(d.graph,d.buckets,d.zeroIdx);return t.flatten(t.map(m,function(v){return u.outEdges(v.v,v.w)}),!0)}function s(u,f,d){for(var m=[],v=f[f.length-1],y=f[0],x;u.nodeCount();){for(;x=y.dequeue();)a(u,f,d,x);for(;x=v.dequeue();)a(u,f,d,x);if(u.nodeCount()){for(var S=f.length-2;S>0;--S)if(x=f[S].dequeue(),x){m=m.concat(a(u,f,d,x,!0));break}}}return m}function a(u,f,d,m,v){var y=v?[]:void 0;return t.forEach(u.inEdges(m.v),function(x){var S=u.edge(x),_=u.node(x.v);v&&y.push({v:x.v,w:x.w}),_.out-=S,c(f,d,_)}),t.forEach(u.outEdges(m.v),function(x){var S=u.edge(x),_=x.w,Q=u.node(_);Q.in-=S,c(f,d,Q)}),u.removeNode(m.v),y}function o(u,f){var d=new e,m=0,v=0;t.forEach(u.nodes(),function(S){d.setNode(S,{v:S,in:0,out:0})}),t.forEach(u.edges(),function(S){var _=d.edge(S.v,S.w)||0,Q=f(S),k=_+Q;d.setEdge(S.v,S.w,k),v=Math.max(v,d.node(S.v).out+=Q),m=Math.max(m,d.node(S.w).in+=Q)});var y=t.range(v+m+3).map(function(){return new n}),x=m+1;return t.forEach(d.nodes(),function(S){c(y,x,d.node(S))}),{graph:d,buckets:y,zeroIdx:x}}function c(u,f,d){d.out?d.in?u[d.out-d.in+f].enqueue(d):u[u.length-1].enqueue(d):u[0].enqueue(d)}return Mk}var jk,OB;function oTe(){if(OB)return jk;OB=1;var t=Xt(),e=aTe();jk={run:n,undo:r};function n(s){var a=s.graph().acyclicer==="greedy"?e(s,o(s)):i(s);t.forEach(a,function(c){var u=s.edge(c);s.removeEdge(c),u.forwardName=c.name,u.reversed=!0,s.setEdge(c.w,c.v,u,t.uniqueId("rev"))});function o(c){return function(u){return c.edge(u).weight}}}function i(s){var a=[],o={},c={};function u(f){t.has(c,f)||(c[f]=!0,o[f]=!0,t.forEach(s.outEdges(f),function(d){t.has(o,d.w)?a.push(d):u(d.w)}),delete o[f])}return t.forEach(s.nodes(),u),a}function r(s){t.forEach(s.edges(),function(a){var o=s.edge(a);if(o.reversed){s.removeEdge(a);var c=o.forwardName;delete o.reversed,delete o.forwardName,s.setEdge(a.w,a.v,o,c)}})}return jk}var zk,vB;function Qi(){if(vB)return zk;vB=1;var t=Xt(),e=Dr().Graph;zk={addDummyNode:n,simplify:i,asNonCompoundGraph:r,successorWeights:s,predecessorWeights:a,intersectRect:o,buildLayerMatrix:c,normalizeRanks:u,removeEmptyRanks:f,addBorderNode:d,maxRank:m,partition:v,time:y,notime:x};function n(S,_,Q,k){var T;do T=t.uniqueId(k);while(S.hasNode(T));return Q.dummy=_,S.setNode(T,Q),T}function i(S){var _=new e().setGraph(S.graph());return t.forEach(S.nodes(),function(Q){_.setNode(Q,S.node(Q))}),t.forEach(S.edges(),function(Q){var k=_.edge(Q.v,Q.w)||{weight:0,minlen:1},T=S.edge(Q);_.setEdge(Q.v,Q.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),_}function r(S){var _=new e({multigraph:S.isMultigraph()}).setGraph(S.graph());return t.forEach(S.nodes(),function(Q){S.children(Q).length||_.setNode(Q,S.node(Q))}),t.forEach(S.edges(),function(Q){_.setEdge(Q,S.edge(Q))}),_}function s(S){var _=t.map(S.nodes(),function(Q){var k={};return t.forEach(S.outEdges(Q),function(T){k[T.w]=(k[T.w]||0)+S.edge(T).weight}),k});return t.zipObject(S.nodes(),_)}function a(S){var _=t.map(S.nodes(),function(Q){var k={};return t.forEach(S.inEdges(Q),function(T){k[T.v]=(k[T.v]||0)+S.edge(T).weight}),k});return t.zipObject(S.nodes(),_)}function o(S,_){var Q=S.x,k=S.y,T=_.x-Q,E=_.y-k,C=S.width/2,P=S.height/2;if(!T&&!E)throw new Error("Not possible to find intersection inside of the rectangle");var L,B;return Math.abs(E)*C>Math.abs(T)*P?(E<0&&(P=-P),L=P*T/E,B=P):(T<0&&(C=-C),L=C,B=C*E/T),{x:Q+L,y:k+B}}function c(S){var _=t.map(t.range(m(S)+1),function(){return[]});return t.forEach(S.nodes(),function(Q){var k=S.node(Q),T=k.rank;t.isUndefined(T)||(_[T][k.order]=Q)}),_}function u(S){var _=t.min(t.map(S.nodes(),function(Q){return S.node(Q).rank}));t.forEach(S.nodes(),function(Q){var k=S.node(Q);t.has(k,"rank")&&(k.rank-=_)})}function f(S){var _=t.min(t.map(S.nodes(),function(E){return S.node(E).rank})),Q=[];t.forEach(S.nodes(),function(E){var C=S.node(E).rank-_;Q[C]||(Q[C]=[]),Q[C].push(E)});var k=0,T=S.graph().nodeRankFactor;t.forEach(Q,function(E,C){t.isUndefined(E)&&C%T!==0?--k:k&&t.forEach(E,function(P){S.node(P).rank+=k})})}function d(S,_,Q,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=Q,T.order=k),n(S,"border",T,_)}function m(S){return t.max(t.map(S.nodes(),function(_){var Q=S.node(_).rank;if(!t.isUndefined(Q))return Q}))}function v(S,_){var Q={lhs:[],rhs:[]};return t.forEach(S,function(k){_(k)?Q.lhs.push(k):Q.rhs.push(k)}),Q}function y(S,_){var Q=t.now();try{return _()}finally{console.log(S+" time: "+(t.now()-Q)+"ms")}}function x(S,_){return _()}return zk}var Dk,yB;function lTe(){if(yB)return Dk;yB=1;var t=Xt(),e=Qi();Dk={run:n,undo:r};function n(s){s.graph().dummyChains=[],t.forEach(s.edges(),function(a){i(s,a)})}function i(s,a){var o=a.v,c=s.node(o).rank,u=a.w,f=s.node(u).rank,d=a.name,m=s.edge(a),v=m.labelRank;if(f!==c+1){s.removeEdge(a);var y,x,S;for(S=0,++c;c<f;++S,++c)m.points=[],x={width:0,height:0,edgeLabel:m,edgeObj:a,rank:c},y=e.addDummyNode(s,"edge",x,"_d"),c===v&&(x.width=m.width,x.height=m.height,x.dummy="edge-label",x.labelpos=m.labelpos),s.setEdge(o,y,{weight:m.weight},d),S===0&&s.graph().dummyChains.push(y),o=y;s.setEdge(o,u,{weight:m.weight},d)}}function r(s){t.forEach(s.graph().dummyChains,function(a){var o=s.node(a),c=o.edgeLabel,u;for(s.setEdge(o.edgeObj,c);o.dummy;)u=s.successors(a)[0],s.removeNode(a),c.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(c.x=o.x,c.y=o.y,c.width=o.width,c.height=o.height),a=u,o=s.node(a)})}return Dk}var Lk,xB;function zO(){if(xB)return Lk;xB=1;var t=Xt();Lk={longestPath:e,slack:n};function e(i){var r={};function s(a){var o=i.node(a);if(t.has(r,a))return o.rank;r[a]=!0;var c=t.min(t.map(i.outEdges(a),function(u){return s(u.w)-i.edge(u).minlen}));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),o.rank=c}t.forEach(i.sources(),s)}function n(i,r){return i.node(r.w).rank-i.node(r.v).rank-i.edge(r).minlen}return Lk}var qk,bB;function mU(){if(bB)return qk;bB=1;var t=Xt(),e=Dr().Graph,n=zO().slack;qk=i;function i(o){var c=new e({directed:!1}),u=o.nodes()[0],f=o.nodeCount();c.setNode(u,{});for(var d,m;r(c,o)<f;)d=s(c,o),m=c.hasNode(d.v)?n(o,d):-n(o,d),a(c,o,m);return c}function r(o,c){function u(f){t.forEach(c.nodeEdges(f),function(d){var m=d.v,v=f===m?d.w:m;!o.hasNode(v)&&!n(c,d)&&(o.setNode(v,{}),o.setEdge(f,v,{}),u(v))})}return t.forEach(o.nodes(),u),o.nodeCount()}function s(o,c){return t.minBy(c.edges(),function(u){if(o.hasNode(u.v)!==o.hasNode(u.w))return n(c,u)})}function a(o,c,u){t.forEach(o.nodes(),function(f){c.node(f).rank+=u})}return qk}var Bk,_B;function cTe(){if(_B)return Bk;_B=1;var t=Xt(),e=mU(),n=zO().slack,i=zO().longestPath,r=Dr().alg.preorder,s=Dr().alg.postorder,a=Qi().simplify;Bk=o,o.initLowLimValues=d,o.initCutValues=c,o.calcCutValue=f,o.leaveEdge=v,o.enterEdge=y,o.exchangeEdges=x;function o(k){k=a(k),i(k);var T=e(k);d(T),c(T,k);for(var E,C;E=v(T);)C=y(T,k,E),x(T,k,E,C)}function c(k,T){var E=s(k,k.nodes());E=E.slice(0,E.length-1),t.forEach(E,function(C){u(k,T,C)})}function u(k,T,E){var C=k.node(E),P=C.parent;k.edge(E,P).cutvalue=f(k,T,E)}function f(k,T,E){var C=k.node(E),P=C.parent,L=!0,B=T.edge(E,P),N=0;return B||(L=!1,B=T.edge(P,E)),N=B.weight,t.forEach(T.nodeEdges(E),function(M){var $=M.v===E,I=$?M.w:M.v;if(I!==P){var j=$===L,D=T.edge(M).weight;if(N+=j?D:-D,_(k,E,I)){var R=k.edge(E,I).cutvalue;N+=j?-R:R}}}),N}function d(k,T){arguments.length<2&&(T=k.nodes()[0]),m(k,{},1,T)}function m(k,T,E,C,P){var L=E,B=k.node(C);return T[C]=!0,t.forEach(k.neighbors(C),function(N){t.has(T,N)||(E=m(k,T,E,N,C))}),B.low=L,B.lim=E++,P?B.parent=P:delete B.parent,E}function v(k){return t.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function y(k,T,E){var C=E.v,P=E.w;T.hasEdge(C,P)||(C=E.w,P=E.v);var L=k.node(C),B=k.node(P),N=L,M=!1;L.lim>B.lim&&(N=B,M=!0);var $=t.filter(T.edges(),function(I){return M===Q(k,k.node(I.v),N)&&M!==Q(k,k.node(I.w),N)});return t.minBy($,function(I){return n(T,I)})}function x(k,T,E,C){var P=E.v,L=E.w;k.removeEdge(P,L),k.setEdge(C.v,C.w,{}),d(k),c(k,T),S(k,T)}function S(k,T){var E=t.find(k.nodes(),function(P){return!T.node(P).parent}),C=r(k,E);C=C.slice(1),t.forEach(C,function(P){var L=k.node(P).parent,B=T.edge(P,L),N=!1;B||(B=T.edge(L,P),N=!0),T.node(P).rank=T.node(L).rank+(N?B.minlen:-B.minlen)})}function _(k,T,E){return k.hasEdge(T,E)}function Q(k,T,E){return E.low<=T.lim&&T.lim<=E.lim}return Bk}var Ik,SB;function uTe(){if(SB)return Ik;SB=1;var t=zO(),e=t.longestPath,n=mU(),i=cTe();Ik=r;function r(c){switch(c.graph().ranker){case"network-simplex":o(c);break;case"tight-tree":a(c);break;case"longest-path":s(c);break;default:o(c)}}var s=e;function a(c){e(c),n(c)}function o(c){i(c)}return Ik}var Xk,wB;function hTe(){if(wB)return Xk;wB=1;var t=Xt();Xk=e;function e(r){var s=i(r);t.forEach(r.graph().dummyChains,function(a){for(var o=r.node(a),c=o.edgeObj,u=n(r,s,c.v,c.w),f=u.path,d=u.lca,m=0,v=f[m],y=!0;a!==c.w;){if(o=r.node(a),y){for(;(v=f[m])!==d&&r.node(v).maxRank<o.rank;)m++;v===d&&(y=!1)}if(!y){for(;m<f.length-1&&r.node(v=f[m+1]).minRank<=o.rank;)m++;v=f[m]}r.setParent(a,v),a=r.successors(a)[0]}})}function n(r,s,a,o){var c=[],u=[],f=Math.min(s[a].low,s[o].low),d=Math.max(s[a].lim,s[o].lim),m,v;m=a;do m=r.parent(m),c.push(m);while(m&&(s[m].low>f||d>s[m].lim));for(v=m,m=o;(m=r.parent(m))!==v;)u.push(m);return{path:c.concat(u.reverse()),lca:v}}function i(r){var s={},a=0;function o(c){var u=a;t.forEach(r.children(c),o),s[c]={low:u,lim:a++}}return t.forEach(r.children(),o),s}return Xk}var Zk,kB;function fTe(){if(kB)return Zk;kB=1;var t=Xt(),e=Qi();Zk={run:n,cleanup:a};function n(o){var c=e.addDummyNode(o,"root",{},"_root"),u=r(o),f=t.max(t.values(u))-1,d=2*f+1;o.graph().nestingRoot=c,t.forEach(o.edges(),function(v){o.edge(v).minlen*=d});var m=s(o)+1;t.forEach(o.children(),function(v){i(o,c,d,m,f,u,v)}),o.graph().nodeRankFactor=d}function i(o,c,u,f,d,m,v){var y=o.children(v);if(!y.length){v!==c&&o.setEdge(c,v,{weight:0,minlen:u});return}var x=e.addBorderNode(o,"_bt"),S=e.addBorderNode(o,"_bb"),_=o.node(v);o.setParent(x,v),_.borderTop=x,o.setParent(S,v),_.borderBottom=S,t.forEach(y,function(Q){i(o,c,u,f,d,m,Q);var k=o.node(Q),T=k.borderTop?k.borderTop:Q,E=k.borderBottom?k.borderBottom:Q,C=k.borderTop?f:2*f,P=T!==E?1:d-m[v]+1;o.setEdge(x,T,{weight:C,minlen:P,nestingEdge:!0}),o.setEdge(E,S,{weight:C,minlen:P,nestingEdge:!0})}),o.parent(v)||o.setEdge(c,x,{weight:0,minlen:d+m[v]})}function r(o){var c={};function u(f,d){var m=o.children(f);m&&m.length&&t.forEach(m,function(v){u(v,d+1)}),c[f]=d}return t.forEach(o.children(),function(f){u(f,1)}),c}function s(o){return t.reduce(o.edges(),function(c,u){return c+o.edge(u).weight},0)}function a(o){var c=o.graph();o.removeNode(c.nestingRoot),delete c.nestingRoot,t.forEach(o.edges(),function(u){var f=o.edge(u);f.nestingEdge&&o.removeEdge(u)})}return Zk}var Vk,CB;function dTe(){if(CB)return Vk;CB=1;var t=Xt(),e=Qi();Vk=n;function n(r){function s(a){var o=r.children(a),c=r.node(a);if(o.length&&t.forEach(o,s),t.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var u=c.minRank,f=c.maxRank+1;u<f;++u)i(r,"borderLeft","_bl",a,c,u),i(r,"borderRight","_br",a,c,u)}}t.forEach(r.children(),s)}function i(r,s,a,o,c,u){var f={width:0,height:0,rank:u,borderType:s},d=c[s][u-1],m=e.addDummyNode(r,"border",f,a);c[s][u]=m,r.setParent(m,o),d&&r.setEdge(d,m,{weight:1})}return Vk}var Wk,TB;function pTe(){if(TB)return Wk;TB=1;var t=Xt();Wk={adjust:e,undo:n};function e(u){var f=u.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&i(u)}function n(u){var f=u.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(u),(f==="lr"||f==="rl")&&(o(u),i(u))}function i(u){t.forEach(u.nodes(),function(f){r(u.node(f))}),t.forEach(u.edges(),function(f){r(u.edge(f))})}function r(u){var f=u.width;u.width=u.height,u.height=f}function s(u){t.forEach(u.nodes(),function(f){a(u.node(f))}),t.forEach(u.edges(),function(f){var d=u.edge(f);t.forEach(d.points,a),t.has(d,"y")&&a(d)})}function a(u){u.y=-u.y}function o(u){t.forEach(u.nodes(),function(f){c(u.node(f))}),t.forEach(u.edges(),function(f){var d=u.edge(f);t.forEach(d.points,c),t.has(d,"x")&&c(d)})}function c(u){var f=u.x;u.x=u.y,u.y=f}return Wk}var Uk,QB;function mTe(){if(QB)return Uk;QB=1;var t=Xt();Uk=e;function e(n){var i={},r=t.filter(n.nodes(),function(u){return!n.children(u).length}),s=t.max(t.map(r,function(u){return n.node(u).rank})),a=t.map(t.range(s+1),function(){return[]});function o(u){if(!t.has(i,u)){i[u]=!0;var f=n.node(u);a[f.rank].push(u),t.forEach(n.successors(u),o)}}var c=t.sortBy(r,function(u){return n.node(u).rank});return t.forEach(c,o),a}return Uk}var Hk,EB;function gTe(){if(EB)return Hk;EB=1;var t=Xt();Hk=e;function e(i,r){for(var s=0,a=1;a<r.length;++a)s+=n(i,r[a-1],r[a]);return s}function n(i,r,s){for(var a=t.zipObject(s,t.map(s,function(m,v){return v})),o=t.flatten(t.map(r,function(m){return t.sortBy(t.map(i.outEdges(m),function(v){return{pos:a[v.w],weight:i.edge(v).weight}}),"pos")}),!0),c=1;c<s.length;)c<<=1;var u=2*c-1;c-=1;var f=t.map(new Array(u),function(){return 0}),d=0;return t.forEach(o.forEach(function(m){var v=m.pos+c;f[v]+=m.weight;for(var y=0;v>0;)v%2&&(y+=f[v+1]),v=v-1>>1,f[v]+=m.weight;d+=m.weight*y})),d}return Hk}var Yk,PB;function OTe(){if(PB)return Yk;PB=1;var t=Xt();Yk=e;function e(n,i){return t.map(i,function(r){var s=n.inEdges(r);if(s.length){var a=t.reduce(s,function(o,c){var u=n.edge(c),f=n.node(c.v);return{sum:o.sum+u.weight*f.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:r}})}return Yk}var Fk,AB;function vTe(){if(AB)return Fk;AB=1;var t=Xt();Fk=e;function e(r,s){var a={};t.forEach(r,function(c,u){var f=a[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:u};t.isUndefined(c.barycenter)||(f.barycenter=c.barycenter,f.weight=c.weight)}),t.forEach(s.edges(),function(c){var u=a[c.v],f=a[c.w];!t.isUndefined(u)&&!t.isUndefined(f)&&(f.indegree++,u.out.push(a[c.w]))});var o=t.filter(a,function(c){return!c.indegree});return n(o)}function n(r){var s=[];function a(u){return function(f){f.merged||(t.isUndefined(f.barycenter)||t.isUndefined(u.barycenter)||f.barycenter>=u.barycenter)&&i(u,f)}}function o(u){return function(f){f.in.push(u),--f.indegree===0&&r.push(f)}}for(;r.length;){var c=r.pop();s.push(c),t.forEach(c.in.reverse(),a(c)),t.forEach(c.out,o(c))}return t.map(t.filter(s,function(u){return!u.merged}),function(u){return t.pick(u,["vs","i","barycenter","weight"])})}function i(r,s){var a=0,o=0;r.weight&&(a+=r.barycenter*r.weight,o+=r.weight),s.weight&&(a+=s.barycenter*s.weight,o+=s.weight),r.vs=s.vs.concat(r.vs),r.barycenter=a/o,r.weight=o,r.i=Math.min(s.i,r.i),s.merged=!0}return Fk}var Gk,RB;function yTe(){if(RB)return Gk;RB=1;var t=Xt(),e=Qi();Gk=n;function n(s,a){var o=e.partition(s,function(x){return t.has(x,"barycenter")}),c=o.lhs,u=t.sortBy(o.rhs,function(x){return-x.i}),f=[],d=0,m=0,v=0;c.sort(r(!!a)),v=i(f,u,v),t.forEach(c,function(x){v+=x.vs.length,f.push(x.vs),d+=x.barycenter*x.weight,m+=x.weight,v=i(f,u,v)});var y={vs:t.flatten(f,!0)};return m&&(y.barycenter=d/m,y.weight=m),y}function i(s,a,o){for(var c;a.length&&(c=t.last(a)).i<=o;)a.pop(),s.push(c.vs),o++;return o}function r(s){return function(a,o){return a.barycenter<o.barycenter?-1:a.barycenter>o.barycenter?1:s?o.i-a.i:a.i-o.i}}return Gk}var Kk,$B;function xTe(){if($B)return Kk;$B=1;var t=Xt(),e=OTe(),n=vTe(),i=yTe();Kk=r;function r(o,c,u,f){var d=o.children(c),m=o.node(c),v=m?m.borderLeft:void 0,y=m?m.borderRight:void 0,x={};v&&(d=t.filter(d,function(E){return E!==v&&E!==y}));var S=e(o,d);t.forEach(S,function(E){if(o.children(E.v).length){var C=r(o,E.v,u,f);x[E.v]=C,t.has(C,"barycenter")&&a(E,C)}});var _=n(S,u);s(_,x);var Q=i(_,f);if(v&&(Q.vs=t.flatten([v,Q.vs,y],!0),o.predecessors(v).length)){var k=o.node(o.predecessors(v)[0]),T=o.node(o.predecessors(y)[0]);t.has(Q,"barycenter")||(Q.barycenter=0,Q.weight=0),Q.barycenter=(Q.barycenter*Q.weight+k.order+T.order)/(Q.weight+2),Q.weight+=2}return Q}function s(o,c){t.forEach(o,function(u){u.vs=t.flatten(u.vs.map(function(f){return c[f]?c[f].vs:f}),!0)})}function a(o,c){t.isUndefined(o.barycenter)?(o.barycenter=c.barycenter,o.weight=c.weight):(o.barycenter=(o.barycenter*o.weight+c.barycenter*c.weight)/(o.weight+c.weight),o.weight+=c.weight)}return Kk}var Jk,NB;function bTe(){if(NB)return Jk;NB=1;var t=Xt(),e=Dr().Graph;Jk=n;function n(r,s,a){var o=i(r),c=new e({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(u){return r.node(u)});return t.forEach(r.nodes(),function(u){var f=r.node(u),d=r.parent(u);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(c.setNode(u),c.setParent(u,d||o),t.forEach(r[a](u),function(m){var v=m.v===u?m.w:m.v,y=c.edge(v,u),x=t.isUndefined(y)?0:y.weight;c.setEdge(v,u,{weight:r.edge(m).weight+x})}),t.has(f,"minRank")&&c.setNode(u,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),c}function i(r){for(var s;r.hasNode(s=t.uniqueId("_root")););return s}return Jk}var e2,MB;function _Te(){if(MB)return e2;MB=1;var t=Xt();e2=e;function e(n,i,r){var s={},a;t.forEach(r,function(o){for(var c=n.parent(o),u,f;c;){if(u=n.parent(c),u?(f=s[u],s[u]=c):(f=a,a=c),f&&f!==c){i.setEdge(f,c);return}c=u}})}return e2}var t2,jB;function STe(){if(jB)return t2;jB=1;var t=Xt(),e=mTe(),n=gTe(),i=xTe(),r=bTe(),s=_Te(),a=Dr().Graph,o=Qi();t2=c;function c(m){var v=o.maxRank(m),y=u(m,t.range(1,v+1),"inEdges"),x=u(m,t.range(v-1,-1,-1),"outEdges"),S=e(m);d(m,S);for(var _=Number.POSITIVE_INFINITY,Q,k=0,T=0;T<4;++k,++T){f(k%2?y:x,k%4>=2),S=o.buildLayerMatrix(m);var E=n(m,S);E<_&&(T=0,Q=t.cloneDeep(S),_=E)}d(m,Q)}function u(m,v,y){return t.map(v,function(x){return r(m,x,y)})}function f(m,v){var y=new a;t.forEach(m,function(x){var S=x.graph().root,_=i(x,S,y,v);t.forEach(_.vs,function(Q,k){x.node(Q).order=k}),s(x,y,_.vs)})}function d(m,v){t.forEach(v,function(y){t.forEach(y,function(x,S){m.node(x).order=S})})}return t2}var n2,zB;function wTe(){if(zB)return n2;zB=1;var t=Xt(),e=Dr().Graph,n=Qi();n2={positionX:y,findType1Conflicts:i,findType2Conflicts:r,addConflict:a,hasConflict:o,verticalAlignment:c,horizontalCompaction:u,alignCoordinates:m,findSmallestWidthAlignment:d,balance:v};function i(_,Q){var k={};function T(E,C){var P=0,L=0,B=E.length,N=t.last(C);return t.forEach(C,function(M,$){var I=s(_,M),j=I?_.node(I).order:B;(I||M===N)&&(t.forEach(C.slice(L,$+1),function(D){t.forEach(_.predecessors(D),function(R){var W=_.node(R),U=W.order;(U<P||j<U)&&!(W.dummy&&_.node(D).dummy)&&a(k,R,D)})}),L=$+1,P=j)}),C}return t.reduce(Q,T),k}function r(_,Q){var k={};function T(C,P,L,B,N){var M;t.forEach(t.range(P,L),function($){M=C[$],_.node(M).dummy&&t.forEach(_.predecessors(M),function(I){var j=_.node(I);j.dummy&&(j.order<B||j.order>N)&&a(k,I,M)})})}function E(C,P){var L=-1,B,N=0;return t.forEach(P,function(M,$){if(_.node(M).dummy==="border"){var I=_.predecessors(M);I.length&&(B=_.node(I[0]).order,T(P,N,$,L,B),N=$,L=B)}T(P,N,P.length,B,C.length)}),P}return t.reduce(Q,E),k}function s(_,Q){if(_.node(Q).dummy)return t.find(_.predecessors(Q),function(k){return _.node(k).dummy})}function a(_,Q,k){if(Q>k){var T=Q;Q=k,k=T}var E=_[Q];E||(_[Q]=E={}),E[k]=!0}function o(_,Q,k){if(Q>k){var T=Q;Q=k,k=T}return t.has(_[Q],k)}function c(_,Q,k,T){var E={},C={},P={};return t.forEach(Q,function(L){t.forEach(L,function(B,N){E[B]=B,C[B]=B,P[B]=N})}),t.forEach(Q,function(L){var B=-1;t.forEach(L,function(N){var M=T(N);if(M.length){M=t.sortBy(M,function(R){return P[R]});for(var $=(M.length-1)/2,I=Math.floor($),j=Math.ceil($);I<=j;++I){var D=M[I];C[N]===N&&B<P[D]&&!o(k,N,D)&&(C[D]=N,C[N]=E[N]=E[D],B=P[D])}}})}),{root:E,align:C}}function u(_,Q,k,T,E){var C={},P=f(_,Q,k,E),L=E?"borderLeft":"borderRight";function B($,I){for(var j=P.nodes(),D=j.pop(),R={};D;)R[D]?$(D):(R[D]=!0,j.push(D),j=j.concat(I(D))),D=j.pop()}function N($){C[$]=P.inEdges($).reduce(function(I,j){return Math.max(I,C[j.v]+P.edge(j))},0)}function M($){var I=P.outEdges($).reduce(function(D,R){return Math.min(D,C[R.w]-P.edge(R))},Number.POSITIVE_INFINITY),j=_.node($);I!==Number.POSITIVE_INFINITY&&j.borderType!==L&&(C[$]=Math.max(C[$],I))}return B(N,P.predecessors.bind(P)),B(M,P.successors.bind(P)),t.forEach(T,function($){C[$]=C[k[$]]}),C}function f(_,Q,k,T){var E=new e,C=_.graph(),P=x(C.nodesep,C.edgesep,T);return t.forEach(Q,function(L){var B;t.forEach(L,function(N){var M=k[N];if(E.setNode(M),B){var $=k[B],I=E.edge($,M);E.setEdge($,M,Math.max(P(_,N,B),I||0))}B=N})}),E}function d(_,Q){return t.minBy(t.values(Q),function(k){var T=Number.NEGATIVE_INFINITY,E=Number.POSITIVE_INFINITY;return t.forIn(k,function(C,P){var L=S(_,P)/2;T=Math.max(C+L,T),E=Math.min(C-L,E)}),T-E})}function m(_,Q){var k=t.values(Q),T=t.min(k),E=t.max(k);t.forEach(["u","d"],function(C){t.forEach(["l","r"],function(P){var L=C+P,B=_[L],N;if(B!==Q){var M=t.values(B);N=P==="l"?T-t.min(M):E-t.max(M),N&&(_[L]=t.mapValues(B,function($){return $+N}))}})})}function v(_,Q){return t.mapValues(_.ul,function(k,T){if(Q)return _[Q.toLowerCase()][T];var E=t.sortBy(t.map(_,T));return(E[1]+E[2])/2})}function y(_){var Q=n.buildLayerMatrix(_),k=t.merge(i(_,Q),r(_,Q)),T={},E;t.forEach(["u","d"],function(P){E=P==="u"?Q:t.values(Q).reverse(),t.forEach(["l","r"],function(L){L==="r"&&(E=t.map(E,function($){return t.values($).reverse()}));var B=(P==="u"?_.predecessors:_.successors).bind(_),N=c(_,E,k,B),M=u(_,E,N.root,N.align,L==="r");L==="r"&&(M=t.mapValues(M,function($){return-$})),T[P+L]=M})});var C=d(_,T);return m(T,C),v(T,_.graph().align)}function x(_,Q,k){return function(T,E,C){var P=T.node(E),L=T.node(C),B=0,N;if(B+=P.width/2,t.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":N=-P.width/2;break;case"r":N=P.width/2;break}if(N&&(B+=k?N:-N),N=0,B+=(P.dummy?Q:_)/2,B+=(L.dummy?Q:_)/2,B+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":N=L.width/2;break;case"r":N=-L.width/2;break}return N&&(B+=k?N:-N),N=0,B}}function S(_,Q){return _.node(Q).width}return n2}var i2,DB;function kTe(){if(DB)return i2;DB=1;var t=Xt(),e=Qi(),n=wTe().positionX;i2=i;function i(s){s=e.asNonCompoundGraph(s),r(s),t.forEach(n(s),function(a,o){s.node(o).x=a})}function r(s){var a=e.buildLayerMatrix(s),o=s.graph().ranksep,c=0;t.forEach(a,function(u){var f=t.max(t.map(u,function(d){return s.node(d).height}));t.forEach(u,function(d){s.node(d).y=c+f/2}),c+=f+o})}return i2}var r2,LB;function CTe(){if(LB)return r2;LB=1;var t=Xt(),e=oTe(),n=lTe(),i=uTe(),r=Qi().normalizeRanks,s=hTe(),a=Qi().removeEmptyRanks,o=fTe(),c=dTe(),u=pTe(),f=STe(),d=kTe(),m=Qi(),v=Dr().Graph;r2=y;function y(H,K){var ee=K&&K.debugTiming?m.time:m.notime;ee("layout",function(){var ie=ee("  buildLayoutGraph",function(){return B(H)});ee("  runLayout",function(){x(ie,ee)}),ee("  updateInputGraph",function(){S(H,ie)})})}function x(H,K){K("    makeSpaceForEdgeLabels",function(){N(H)}),K("    removeSelfEdges",function(){G(H)}),K("    acyclic",function(){e.run(H)}),K("    nestingGraph.run",function(){o.run(H)}),K("    rank",function(){i(m.asNonCompoundGraph(H))}),K("    injectEdgeLabelProxies",function(){M(H)}),K("    removeEmptyRanks",function(){a(H)}),K("    nestingGraph.cleanup",function(){o.cleanup(H)}),K("    normalizeRanks",function(){r(H)}),K("    assignRankMinMax",function(){$(H)}),K("    removeEdgeLabelProxies",function(){I(H)}),K("    normalize.run",function(){n.run(H)}),K("    parentDummyChains",function(){s(H)}),K("    addBorderSegments",function(){c(H)}),K("    order",function(){f(H)}),K("    insertSelfEdges",function(){q(H)}),K("    adjustCoordinateSystem",function(){u.adjust(H)}),K("    position",function(){d(H)}),K("    positionSelfEdges",function(){V(H)}),K("    removeBorderNodes",function(){U(H)}),K("    normalize.undo",function(){n.undo(H)}),K("    fixupEdgeLabelCoords",function(){R(H)}),K("    undoCoordinateSystem",function(){u.undo(H)}),K("    translateGraph",function(){j(H)}),K("    assignNodeIntersects",function(){D(H)}),K("    reversePoints",function(){W(H)}),K("    acyclic.undo",function(){e.undo(H)})}function S(H,K){t.forEach(H.nodes(),function(ee){var ie=H.node(ee),le=K.node(ee);ie&&(ie.x=le.x,ie.y=le.y,K.children(ee).length&&(ie.width=le.width,ie.height=le.height))}),t.forEach(H.edges(),function(ee){var ie=H.edge(ee),le=K.edge(ee);ie.points=le.points,t.has(le,"x")&&(ie.x=le.x,ie.y=le.y)}),H.graph().width=K.graph().width,H.graph().height=K.graph().height}var _=["nodesep","edgesep","ranksep","marginx","marginy"],Q={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],E={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function B(H){var K=new v({multigraph:!0,compound:!0}),ee=z(H.graph());return K.setGraph(t.merge({},Q,F(ee,_),t.pick(ee,k))),t.forEach(H.nodes(),function(ie){var le=z(H.node(ie));K.setNode(ie,t.defaults(F(le,T),E)),K.setParent(ie,H.parent(ie))}),t.forEach(H.edges(),function(ie){var le=z(H.edge(ie));K.setEdge(ie,t.merge({},P,F(le,C),t.pick(le,L)))}),K}function N(H){var K=H.graph();K.ranksep/=2,t.forEach(H.edges(),function(ee){var ie=H.edge(ee);ie.minlen*=2,ie.labelpos.toLowerCase()!=="c"&&(K.rankdir==="TB"||K.rankdir==="BT"?ie.width+=ie.labeloffset:ie.height+=ie.labeloffset)})}function M(H){t.forEach(H.edges(),function(K){var ee=H.edge(K);if(ee.width&&ee.height){var ie=H.node(K.v),le=H.node(K.w),ae={rank:(le.rank-ie.rank)/2+ie.rank,e:K};m.addDummyNode(H,"edge-proxy",ae,"_ep")}})}function $(H){var K=0;t.forEach(H.nodes(),function(ee){var ie=H.node(ee);ie.borderTop&&(ie.minRank=H.node(ie.borderTop).rank,ie.maxRank=H.node(ie.borderBottom).rank,K=t.max(K,ie.maxRank))}),H.graph().maxRank=K}function I(H){t.forEach(H.nodes(),function(K){var ee=H.node(K);ee.dummy==="edge-proxy"&&(H.edge(ee.e).labelRank=ee.rank,H.removeNode(K))})}function j(H){var K=Number.POSITIVE_INFINITY,ee=0,ie=Number.POSITIVE_INFINITY,le=0,ae=H.graph(),_e=ae.marginx||0,ke=ae.marginy||0;function Ee(ge){var $e=ge.x,Ae=ge.y,Ye=ge.width,De=ge.height;K=Math.min(K,$e-Ye/2),ee=Math.max(ee,$e+Ye/2),ie=Math.min(ie,Ae-De/2),le=Math.max(le,Ae+De/2)}t.forEach(H.nodes(),function(ge){Ee(H.node(ge))}),t.forEach(H.edges(),function(ge){var $e=H.edge(ge);t.has($e,"x")&&Ee($e)}),K-=_e,ie-=ke,t.forEach(H.nodes(),function(ge){var $e=H.node(ge);$e.x-=K,$e.y-=ie}),t.forEach(H.edges(),function(ge){var $e=H.edge(ge);t.forEach($e.points,function(Ae){Ae.x-=K,Ae.y-=ie}),t.has($e,"x")&&($e.x-=K),t.has($e,"y")&&($e.y-=ie)}),ae.width=ee-K+_e,ae.height=le-ie+ke}function D(H){t.forEach(H.edges(),function(K){var ee=H.edge(K),ie=H.node(K.v),le=H.node(K.w),ae,_e;ee.points?(ae=ee.points[0],_e=ee.points[ee.points.length-1]):(ee.points=[],ae=le,_e=ie),ee.points.unshift(m.intersectRect(ie,ae)),ee.points.push(m.intersectRect(le,_e))})}function R(H){t.forEach(H.edges(),function(K){var ee=H.edge(K);if(t.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function W(H){t.forEach(H.edges(),function(K){var ee=H.edge(K);ee.reversed&&ee.points.reverse()})}function U(H){t.forEach(H.nodes(),function(K){if(H.children(K).length){var ee=H.node(K),ie=H.node(ee.borderTop),le=H.node(ee.borderBottom),ae=H.node(t.last(ee.borderLeft)),_e=H.node(t.last(ee.borderRight));ee.width=Math.abs(_e.x-ae.x),ee.height=Math.abs(le.y-ie.y),ee.x=ae.x+ee.width/2,ee.y=ie.y+ee.height/2}}),t.forEach(H.nodes(),function(K){H.node(K).dummy==="border"&&H.removeNode(K)})}function G(H){t.forEach(H.edges(),function(K){if(K.v===K.w){var ee=H.node(K.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:K,label:H.edge(K)}),H.removeEdge(K)}})}function q(H){var K=m.buildLayerMatrix(H);t.forEach(K,function(ee){var ie=0;t.forEach(ee,function(le,ae){var _e=H.node(le);_e.order=ae+ie,t.forEach(_e.selfEdges,function(ke){m.addDummyNode(H,"selfedge",{width:ke.label.width,height:ke.label.height,rank:_e.rank,order:ae+ ++ie,e:ke.e,label:ke.label},"_se")}),delete _e.selfEdges})})}function V(H){t.forEach(H.nodes(),function(K){var ee=H.node(K);if(ee.dummy==="selfedge"){var ie=H.node(ee.e.v),le=ie.x+ie.width/2,ae=ie.y,_e=ee.x-le,ke=ie.height/2;H.setEdge(ee.e,ee.label),H.removeNode(K),ee.label.points=[{x:le+2*_e/3,y:ae-ke},{x:le+5*_e/6,y:ae-ke},{x:le+_e,y:ae},{x:le+5*_e/6,y:ae+ke},{x:le+2*_e/3,y:ae+ke}],ee.label.x=ee.x,ee.label.y=ee.y}})}function F(H,K){return t.mapValues(t.pick(H,K),Number)}function z(H){var K={};return t.forEach(H,function(ee,ie){K[ie.toLowerCase()]=ee}),K}return r2}var s2,qB;function TTe(){if(qB)return s2;qB=1;var t=Xt(),e=Qi(),n=Dr().Graph;s2={debugOrdering:i};function i(r){var s=e.buildLayerMatrix(r),a=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),function(o){a.setNode(o,{label:o}),a.setParent(o,"layer"+r.node(o).rank)}),t.forEach(r.edges(),function(o){a.setEdge(o.v,o.w,{},o.name)}),t.forEach(s,function(o,c){var u="layer"+c;a.setNode(u,{rank:"same"}),t.reduce(o,function(f,d){return a.setEdge(f,d,{style:"invis"}),d})}),a}return s2}var a2,BB;function QTe(){return BB||(BB=1,a2="0.8.5"),a2}var o2,IB;function ETe(){return IB||(IB=1,o2={graphlib:Dr(),layout:CTe(),debug:TTe(),util:{time:Qi().time,notime:Qi().notime},version:QTe()}),o2}var PTe=ETe();const gU=sd(PTe),XB={idle:{borderColor:"border-gray-500",bgColor:"bg-gray-500/10",icon:Mg,iconColor:"text-gray-400",label:"Idle",animation:""},working:{borderColor:"border-green-500",bgColor:"bg-green-500/10",icon:oo,iconColor:"text-green-400",label:"Working",animation:"animate-pulse"},blocked:{borderColor:"border-red-500",bgColor:"bg-red-500/10",icon:od,iconColor:"text-red-400",label:"Blocked",animation:""},waiting:{borderColor:"border-orange-500",bgColor:"bg-orange-500/10",icon:ms,iconColor:"text-orange-400",label:"Waiting",animation:""},done:{borderColor:"border-blue-500",bgColor:"bg-blue-500/10",icon:Sf,iconColor:"text-blue-400",label:"Done",animation:""}};function ATe({data:t,selected:e}){const n=t.status||"idle",i=XB[n]||XB.idle,r=i.icon;return g.jsxs("div",{className:`
        px-4 py-3 rounded-lg border-2 min-w-[140px]
        ${i.borderColor} ${i.bgColor} ${i.animation}
        ${e?"ring-2 ring-[var(--accent)] ring-offset-2 ring-offset-[var(--bg-primary)]":""}
        ${n==="waiting"?"border-dashed":""}
        transition-all duration-200
      `,children:[g.jsx(mu,{type:"target",position:je.Top,className:"!bg-[var(--accent)]"}),g.jsx(mu,{type:"source",position:je.Bottom,className:"!bg-[var(--accent)]"}),g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.isLeader?g.jsx(ng,{size:16,className:"text-yellow-500"}):g.jsx($T,{size:16,className:"text-[var(--text-secondary)]"}),g.jsx("span",{className:"font-semibold text-sm",children:t.label})]}),g.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[g.jsx(r,{size:14,className:i.iconColor}),g.jsx("span",{className:i.iconColor,children:i.label})]}),t.task&&g.jsx("div",{className:"mt-2 text-xs text-[var(--text-secondary)] truncate max-w-[120px]",title:t.task,children:t.task}),t.domain&&g.jsx("div",{className:"mt-1 text-[10px] text-[var(--text-secondary)] opacity-60 truncate",children:t.domain})]})}const RTe=X.memo(ATe),$Te={agent:RTe},Ec=new gU.graphlib.Graph;Ec.setDefaultEdgeLabel(()=>({}));const ZB=160,VB=100;function NTe(t,e,n="TB"){const i=n==="LR";return Ec.setGraph({rankdir:n,nodesep:50,ranksep:80}),t.forEach(s=>{Ec.setNode(s.id,{width:ZB,height:VB})}),e.forEach(s=>{Ec.setEdge(s.source,s.target)}),gU.layout(Ec),{nodes:t.map(s=>{const a=Ec.node(s.id);return{...s,position:{x:a.x-ZB/2,y:a.y-VB/2},targetPosition:i?"left":"top",sourcePosition:i?"right":"bottom"}}),edges:e}}function MTe(t,e){const n=[],i=[],r=new Set;e.forEach(a=>{r.add(a.name);const o=t?.agents?.[a.name],c={label:a.name,status:o?.status||"idle",task:o?.task||void 0,isLeader:a.is_leader,domain:a.domain,blockers:o?.blockers||[]};n.push({id:a.name,type:"agent",position:{x:0,y:0},data:c})}),t?.agents&&Object.entries(t.agents).forEach(([a,o])=>{if(!r.has(a)){r.add(a);const c={label:a,status:o.status||"idle",task:o.task||void 0,isLeader:a==="leader",blockers:o.blockers||[]};n.push({id:a,type:"agent",position:{x:0,y:0},data:c})}}),t?.agents&&Object.entries(t.agents).forEach(([a,o])=>{o.blockers&&o.blockers.length>0&&o.blockers.forEach(c=>{const u=c.match(/(?:waiting for |depends on )?(\w+)/i);if(u){const f=u[1].toLowerCase();r.has(f)&&f!==a&&i.push({id:`${f}-to-${a}`,source:f,target:a,type:"smoothstep",animated:!0,style:{stroke:"#f97316",strokeWidth:2},markerEnd:{type:td.ArrowClosed,color:"#f97316"},label:"waiting",labelStyle:{fill:"#f97316",fontSize:10},labelBgStyle:{fill:"var(--bg-tertiary)"}})}})});const s=n.find(a=>a.data.isLeader);return s&&n.forEach(a=>{!a.data.isLeader&&a.id!==s.id&&(i.some(u=>u.source===s.id&&u.target===a.id||u.source===a.id&&u.target===s.id)||i.push({id:`${s.id}-to-${a.id}`,source:s.id,target:a.id,type:"smoothstep",style:{stroke:"var(--border)",strokeWidth:1,strokeDasharray:"5 5"}}))}),NTe(n,i)}function jTe({onAgentSelect:t,selectedAgent:e}){const{teamState:n,fetchTeamState:i,removeTeamAgent:r}=Ou(),{activeProject:s,agents:a}=Ei(),o=wd(),[c,u,f]=Lwe([]),[d,m,v]=qwe([]),[y,x]=X.useState(null),S=X.useRef(null);X.useEffect(()=>{const L=B=>{S.current&&!S.current.contains(B.target)&&x(null)};if(y)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[y]),X.useEffect(()=>{s?.id&&i(s.id)},[s?.id,i]),X.useEffect(()=>{const{nodes:L,edges:B}=MTe(n,a.map(N=>({name:N.name,domain:N.domain,is_leader:N.is_leader})));u(L),m(B)},[n,a,u,m]);const _=X.useCallback((L,B)=>{t?.(B.id===e?null:B.id)},[t,e]),Q=X.useCallback(L=>!a.some(B=>B.name===L),[a]),k=X.useCallback((L,B)=>{L.preventDefault();const N=B.id;x({x:L.clientX,y:L.clientY,agentName:N,isStale:Q(N)})},[Q]),T=X.useCallback(async()=>{if(!(!y||!s?.id))try{await r(s.id,y.agentName),x(null)}catch(L){console.error("Failed to remove agent:",L.message)}},[y,s?.id,r]),E=X.useCallback(()=>{s?.id&&i(s.id)},[s?.id,i]),C=n?.stage?.toUpperCase()||"INIT",P=n?.mode||"scheduled";return g.jsxs("div",{className:"h-full w-full relative",children:[g.jsxs(Dwe,{nodes:c,edges:d,onNodesChange:f,onEdgesChange:v,onNodeClick:_,onNodeContextMenu:k,nodeTypes:$Te,fitView:!0,fitViewOptions:{padding:o?.1:.2},minZoom:.3,maxZoom:2,defaultEdgeOptions:{type:"smoothstep"},panOnDrag:!0,zoomOnPinch:!0,zoomOnScroll:!o,children:[g.jsx(Vwe,{color:"var(--border)",gap:20}),g.jsx(Kwe,{className:"!bg-[var(--bg-tertiary)] !border-[var(--border)] !rounded",showZoom:!o,showFitView:!0,showInteractive:!1}),!o&&g.jsx(hke,{className:"!bg-[var(--bg-tertiary)] !border-[var(--border)]",nodeColor:L=>{switch(L.data?.status){case"working":return"#22c55e";case"blocked":return"#ef4444";case"waiting":return"#f97316";case"done":return"#3b82f6";default:return"#6b7280"}}}),g.jsxs(pu,{position:"top-left",className:`bg-[var(--bg-tertiary)] rounded-lg border border-[var(--border)] ${o?"p-2":"p-3"}`,children:[g.jsxs("div",{className:`flex items-center gap-2 ${o?"text-xs":"text-sm gap-4"}`,children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:o?"":"Stage: "}),g.jsx("span",{className:"font-semibold text-[var(--accent)]",children:C})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:o?"":"Mode: "}),g.jsx("span",{className:"font-medium",children:P})]}),g.jsx("button",{onClick:E,className:"p-1 hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Refresh team state",children:g.jsx(Ti,{size:o?12:14})})]}),!o&&n?.sprint?.name&&g.jsxs("div",{className:"mt-2 text-xs text-[var(--text-secondary)]",children:["Sprint: ",n.sprint.name]})]}),g.jsx(pu,{position:"bottom-left",className:`bg-[var(--bg-tertiary)] rounded-lg border border-[var(--border)] ${o?"p-1.5":"p-2"}`,children:g.jsxs("div",{className:`flex flex-wrap gap-2 ${o?"text-[10px]":"text-xs gap-3"}`,children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:`${o?"w-2 h-2":"w-3 h-3"} rounded-full bg-gray-500`}),g.jsx("span",{children:"Idle"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:`${o?"w-2 h-2":"w-3 h-3"} rounded-full bg-green-500`}),g.jsx("span",{children:"Working"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:`${o?"w-2 h-2":"w-3 h-3"} rounded-full bg-orange-500`}),g.jsx("span",{children:"Waiting"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:`${o?"w-2 h-2":"w-3 h-3"} rounded-full bg-red-500`}),g.jsx("span",{children:"Blocked"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:`${o?"w-2 h-2":"w-3 h-3"} rounded-full bg-blue-500`}),g.jsx("span",{children:"Done"})]})]})})]}),y&&g.jsxs("div",{ref:S,className:"fixed z-50 bg-[var(--bg-secondary)] border border-[var(--border)] rounded-lg shadow-xl py-1 min-w-[180px]",style:{left:y.x,top:y.y},children:[g.jsx("div",{className:"px-3 py-2 text-sm font-medium border-b border-[var(--border)]",children:y.agentName}),y.isStale?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"px-3 py-2 text-xs text-yellow-500 flex items-center gap-2",children:[g.jsx(h2,{size:12}),"Not in database (stale entry)"]}),g.jsxs("button",{onClick:T,className:"w-full px-3 py-2 text-left text-sm flex items-center gap-2 text-red-400 hover:bg-red-900/20 transition-colors",children:[g.jsx(Ji,{size:14}),"Remove from team-state"]})]}):g.jsx("div",{className:"px-3 py-2 text-xs text-[var(--text-secondary)]",children:"Agent exists in database"})]})]})}const zTe=cd((t,e)=>({tasks:[],stats:null,schedulerStatus:null,loading:!1,error:null,fetchTasks:async(n,i)=>{t({loading:!0,error:null});try{const r=i?`/api/projects/${n}/tasks?status=${i}`:`/api/projects/${n}/tasks`,s=await fetch(r);if(!s.ok)throw new Error("Failed to fetch tasks");const a=await s.json();t({tasks:a,loading:!1})}catch(r){t({error:r.message,loading:!1})}},fetchStats:async n=>{try{const i=await fetch(`/api/projects/${n}/queue/stats`);if(!i.ok)throw new Error("Failed to fetch stats");const r=await i.json();t({stats:r})}catch(i){console.error("Failed to fetch queue stats:",i)}},fetchSchedulerStatus:async()=>{try{const n=await fetch("/api/scheduler/status");if(!n.ok)throw new Error("Failed to fetch scheduler status");const i=await n.json();t({schedulerStatus:i})}catch(n){console.error("Failed to fetch scheduler status:",n)}},createTask:async(n,i)=>{const r=await fetch(`/api/projects/${n}/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!r.ok){const a=await r.json();throw new Error(a.detail||"Failed to create task")}const s=await r.json();return t(a=>({tasks:[s,...a.tasks]})),e().fetchStats(n),s},updateTask:async(n,i,r)=>{const s=await fetch(`/api/projects/${n}/tasks/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error("Failed to update task");const a=await s.json();t(o=>({tasks:o.tasks.map(c=>c.id===i?a:c)})),e().fetchStats(n)},deleteTask:async(n,i)=>{if(!(await fetch(`/api/projects/${n}/tasks/${i}`,{method:"DELETE"})).ok)throw new Error("Failed to delete task");t(s=>({tasks:s.tasks.filter(a=>a.id!==i)})),e().fetchStats(n)},retryTask:async(n,i)=>{if(!(await fetch(`/api/projects/${n}/tasks/${i}/retry`,{method:"POST"})).ok)throw new Error("Failed to retry task");e().fetchTasks(n),e().fetchStats(n)},cancelTask:async(n,i)=>{if(!(await fetch(`/api/projects/${n}/tasks/${i}/cancel`,{method:"POST"})).ok)throw new Error("Failed to cancel task");e().fetchTasks(n),e().fetchStats(n)},startScheduler:async n=>{if(!(await fetch("/api/scheduler/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:n})})).ok)throw new Error("Failed to start scheduler");e().fetchSchedulerStatus()},stopScheduler:async()=>{if(!(await fetch("/api/scheduler/stop",{method:"POST"})).ok)throw new Error("Failed to stop scheduler");e().fetchSchedulerStatus()}}));function DTe({onTaskCreated:t,sprintId:e}){const{activeProject:n}=Ei(),[i,r]=X.useState([]),[s,a]=X.useState(!0),[o,c]=X.useState(!0),[u,f]=X.useState(!1),[d,m]=X.useState(null),[v,y]=X.useState(null),x=n?.id,S=async()=>{if(x){a(!0);try{const E=await fetch(`/api/projects/${x}/templates`);E.ok&&r(await E.json())}catch(E){console.error("Failed to fetch templates:",E)}finally{a(!1)}}};X.useEffect(()=>{S()},[x]);const _=async E=>{if(x){y(E);try{(await fetch(`/api/projects/${x}/templates/${E}/create-task`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sprint_id:e||null})})).ok&&t?.()}catch(C){console.error("Failed to create task from template:",C)}finally{y(null)}}},Q=async E=>{if(x&&confirm("Delete this template?"))try{await fetch(`/api/projects/${x}/templates/${E}`,{method:"DELETE"}),S()}catch(C){console.error("Failed to delete template:",C)}},k=E=>{switch(E){case 3:return"text-red-400";case 2:return"text-orange-400";case 1:return"text-yellow-400";default:return"text-gray-400"}},T=E=>{switch(E){case 3:return"Urgent";case 2:return"High";case 1:return"Normal";default:return"Low"}};return g.jsxs("div",{className:"border-b border-[var(--border)]",children:[g.jsxs("button",{onClick:()=>c(!o),className:"w-full flex items-center justify-between p-3 hover:bg-[var(--bg-tertiary)] transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[o?g.jsx(gu,{size:16}):g.jsx(Cl,{size:16}),g.jsx(CT,{size:16,className:"text-purple-400"}),g.jsx("span",{className:"font-medium text-sm",children:"Task Templates"}),g.jsxs("span",{className:"text-xs text-[var(--text-secondary)]",children:["(",i.length,")"]})]}),g.jsx("button",{onClick:E=>{E.stopPropagation(),f(!0)},className:"p-1 hover:bg-[var(--bg-primary)] rounded",title:"Create Template",children:g.jsx(vo,{size:16})})]}),o&&g.jsx("div",{className:"px-3 pb-3 space-y-2",children:s?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-xs py-2",children:"Loading templates..."}):i.length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-xs py-4",children:"No templates. Create one to quickly add common tasks."}):i.map(E=>g.jsx("div",{className:"bg-[var(--bg-tertiary)] rounded p-2 group",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-medium text-sm truncate",children:E.name}),g.jsx("span",{className:`text-xs ${k(E.priority)}`,children:T(E.priority)})]}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)] truncate mt-0.5",children:E.title})]}),g.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>_(E.id),disabled:v===E.id,className:"p-1 hover:bg-green-900/30 rounded text-green-400",title:"Create task from template",children:v===E.id?g.jsx("span",{className:"animate-spin",children:"..."}):g.jsx(oo,{size:14})}),g.jsx("button",{onClick:()=>m(E),className:"p-1 hover:bg-blue-900/30 rounded text-blue-400",title:"Edit template",children:g.jsx(_G,{size:14})}),g.jsx("button",{onClick:()=>Q(E.id),className:"p-1 hover:bg-red-900/30 rounded text-red-400",title:"Delete template",children:g.jsx(Ji,{size:14})})]})]})},E.id))}),(u||d)&&g.jsx(LTe,{projectId:x,template:d,onClose:()=>{f(!1),m(null)},onSaved:()=>{f(!1),m(null),S()}})]})}function LTe({projectId:t,template:e,onClose:n,onSaved:i}){const[r,s]=X.useState(e?.name||""),[a,o]=X.useState(e?.title||""),[c,u]=X.useState(e?.description||""),[f,d]=X.useState(e?.priority||1),[m,v]=X.useState(!1),y=async()=>{if(!(!r.trim()||!a.trim())){v(!0);try{const x=e?`/api/projects/${t}/templates/${e.id}`:`/api/projects/${t}/templates`;(await fetch(x,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.trim(),title:a.trim(),description:c.trim()||null,priority:f})})).ok&&i()}catch(x){console.error("Failed to save template:",x)}finally{v(!1)}}};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg p-4 w-96 max-w-[90vw]",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"font-semibold",children:e?"Edit Template":"Create Template"}),g.jsx("button",{onClick:n,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded",children:g.jsx(li,{size:16})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-[var(--text-secondary)] mb-1",children:"Template Name"}),g.jsx("input",{type:"text",value:r,onChange:x=>s(x.target.value),placeholder:"e.g., Bug Fix, Feature Request",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-[var(--text-secondary)] mb-1",children:"Task Title"}),g.jsx("input",{type:"text",value:a,onChange:x=>o(x.target.value),placeholder:"e.g., Fix bug in...",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-[var(--text-secondary)] mb-1",children:"Description (optional)"}),g.jsx("textarea",{value:c,onChange:x=>u(x.target.value),placeholder:"Additional details...",rows:3,className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm resize-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-[var(--text-secondary)] mb-1",children:"Priority"}),g.jsxs("select",{value:f,onChange:x=>d(Number(x.target.value)),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm",children:[g.jsx("option",{value:0,children:"Low"}),g.jsx("option",{value:1,children:"Normal"}),g.jsx("option",{value:2,children:"High"}),g.jsx("option",{value:3,children:"Urgent"})]})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{onClick:n,className:"px-3 py-1.5 text-sm hover:bg-[var(--bg-tertiary)] rounded",children:"Cancel"}),g.jsx("button",{onClick:y,disabled:m||!r.trim()||!a.trim(),className:"px-3 py-1.5 text-sm bg-[var(--accent)] hover:bg-blue-600 rounded disabled:opacity-50",children:m?"Saving...":e?"Update":"Create"})]})]})})}const WB={0:{label:"Low",color:"text-gray-400"},1:{label:"Normal",color:"text-blue-400"},2:{label:"High",color:"text-orange-400"},3:{label:"Urgent",color:"text-red-400"}},UB={pending:{icon:g.jsx(ms,{size:14}),color:"text-gray-400",bg:"bg-gray-500/20"},blocked:{icon:g.jsx(eG,{size:14}),color:"text-orange-400",bg:"bg-orange-500/20"},assigned:{icon:g.jsx(tF,{size:14}),color:"text-blue-400",bg:"bg-blue-500/20"},running:{icon:g.jsx(PT,{size:14,className:"animate-spin"}),color:"text-green-400",bg:"bg-green-500/20"},completed:{icon:g.jsx(c2,{size:14}),color:"text-green-400",bg:"bg-green-500/20"},failed:{icon:g.jsx(od,{size:14}),color:"text-red-400",bg:"bg-red-500/20"}};function qTe({compact:t=!1}){const{activeProject:e,agents:n}=Ei(),{tasks:i,stats:r,schedulerStatus:s,loading:a,fetchTasks:o,fetchStats:c,fetchSchedulerStatus:u,createTask:f,deleteTask:d,retryTask:m,cancelTask:v,startScheduler:y,stopScheduler:x}=zTe(),[S,_]=X.useState(!1),[Q,k]=X.useState(new Set),[T,E]=X.useState("all"),[C,P]=X.useState(new Set),[L,B]=X.useState(null);X.useEffect(()=>{e?.id&&(o(e.id),c(e.id),u())},[e?.id]),X.useEffect(()=>{if(!e?.id)return;const z=setInterval(()=>{o(e.id),c(e.id),u()},1e4);return()=>clearInterval(z)},[e?.id]);const N=()=>{e?.id&&(o(e.id),c(e.id),u())},M=async()=>{if(e?.id)try{s?.is_running?await x():await y(e.id)}catch(z){console.error("Failed to toggle scheduler:",z)}},$=z=>{k(H=>{const K=new Set(H);return K.has(z)?K.delete(z):K.add(z),K})},I=z=>{P(H=>{const K=new Set(H);return K.has(z)?K.delete(z):K.add(z),K})},j=()=>{P(new Set(V.map(z=>z.id)))},D=()=>{P(new Set)},R=async()=>{if(!(!e?.id||C.size===0)){for(const z of C)await d(e.id,z);P(new Set)}},W=async z=>{if(!(!e?.id||C.size===0)){for(const H of C){const K=i.find(ee=>ee.id===H);if(K){const ee=Math.max(0,Math.min(3,K.priority+z));ee!==K.priority&&console.log(`Would update ${H} priority to ${ee}`)}}N()}},U=z=>{B(z)},G=(z,H)=>{z.preventDefault()},q=async z=>{if(!L||L===z||!e?.id){B(null);return}const H=i.find(ee=>ee.id===L),K=i.find(ee=>ee.id===z);H&&K&&console.log(`Would swap ${L} with ${z}`),B(null),N()},V=T==="all"?i:i.filter(z=>z.status===T),F={running:V.filter(z=>z.status==="running"),assigned:V.filter(z=>z.status==="assigned"),pending:V.filter(z=>z.status==="pending"),blocked:V.filter(z=>z.status==="blocked"),completed:V.filter(z=>z.status==="completed"),failed:V.filter(z=>z.status==="failed")};return e?g.jsxs("div",{className:`flex flex-col h-full overflow-hidden ${t?"":"p-4"}`,children:[g.jsxs("div",{className:`flex items-center justify-between ${t?"p-3":"mb-4"} border-b border-[var(--border)]`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h3",{className:"text-sm font-semibold",children:"Task Queue"}),r&&g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsxs("span",{className:"px-1.5 py-0.5 rounded bg-gray-500/20 text-gray-400",children:[r.pending," pending"]}),g.jsxs("span",{className:"px-1.5 py-0.5 rounded bg-green-500/20 text-green-400",children:[r.running," running"]}),r.failed>0&&g.jsxs("span",{className:"px-1.5 py-0.5 rounded bg-red-500/20 text-red-400",children:[r.failed," failed"]})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:M,className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium transition-colors ${s?.is_running?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-gray-500/20 text-gray-400 hover:bg-gray-500/30"}`,title:s?.is_running?"Stop Scheduler":"Start Scheduler",children:s?.is_running?g.jsxs(g.Fragment,{children:[g.jsx(jg,{size:12}),"Stop"]}):g.jsxs(g.Fragment,{children:[g.jsx(oo,{size:12}),"Start"]})}),g.jsx("button",{onClick:N,className:"p-1.5 hover:bg-[var(--bg-tertiary)] rounded transition-colors",title:"Refresh",children:g.jsx(Ti,{size:14,className:a?"animate-spin":""})}),g.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-1 px-2 py-1 bg-[var(--accent)] hover:opacity-90 rounded text-xs font-medium transition-opacity",children:[g.jsx(vo,{size:12}),"Add"]})]})]}),C.size>0&&g.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-[var(--accent)]/20 border-b border-[var(--border)]",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-xs font-medium",children:[C.size," selected"]}),g.jsx("button",{onClick:D,className:"text-xs text-[var(--text-secondary)] hover:text-white",children:"Clear"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>W(1),className:"flex items-center gap-1 px-2 py-1 text-xs bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Increase priority",children:[g.jsx(c6,{size:12}),"Priority"]}),g.jsxs("button",{onClick:()=>W(-1),className:"flex items-center gap-1 px-2 py-1 text-xs bg-[var(--bg-tertiary)] hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Decrease priority",children:[g.jsx(o6,{size:12}),"Priority"]}),g.jsxs("button",{onClick:R,className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded transition-colors",children:[g.jsx(Ji,{size:12}),"Delete"]})]})]}),!t&&g.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3 px-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:C.size===V.length?D:j,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded transition-colors",title:C.size===V.length?"Deselect all":"Select all",children:C.size===V.length&&V.length>0?g.jsx(b6,{size:14,className:"text-[var(--accent)]"}):g.jsx(jg,{size:14,className:"text-[var(--text-secondary)]"})}),g.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:"Filter:"}),g.jsxs("select",{value:T,onChange:z=>E(z.target.value),className:"px-2 py-1 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-xs",children:[g.jsx("option",{value:"all",children:"All"}),g.jsx("option",{value:"pending",children:"Pending"}),g.jsx("option",{value:"running",children:"Running"}),g.jsx("option",{value:"blocked",children:"Blocked"}),g.jsx("option",{value:"completed",children:"Completed"}),g.jsx("option",{value:"failed",children:"Failed"})]})]}),g.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:"Drag tasks to reorder"})]}),!t&&g.jsx(DTe,{onTaskCreated:N}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:a&&i.length===0?g.jsx("div",{className:"flex items-center justify-center h-32 text-[var(--text-secondary)]",children:g.jsx(PT,{size:20,className:"animate-spin"})}):V.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-[var(--text-secondary)]",children:[g.jsx(ms,{size:24,className:"mb-2 opacity-50"}),g.jsx("span",{className:"text-sm",children:"No tasks in queue"})]}):g.jsx("div",{className:"space-y-1",children:[...F.running,...F.assigned,...F.pending,...F.blocked,...F.failed,...F.completed].map(z=>g.jsx(BTe,{task:z,expanded:Q.has(z.id),selected:C.has(z.id),isDragging:L===z.id,onToggle:()=>$(z.id),onSelect:()=>I(z.id),onDelete:()=>e&&d(e.id,z.id),onRetry:()=>e&&m(e.id,z.id),onCancel:()=>e&&v(e.id,z.id),onDragStart:()=>U(z.id),onDragOver:H=>G(H,z.id),onDrop:()=>q(z.id),agents:n,compact:t},z.id))})}),S&&e&&g.jsx(ITe,{agents:n,tasks:i,onClose:()=>_(!1),onCreate:async z=>{await f(e.id,z),_(!1)}})]}):g.jsx("div",{className:"p-4 text-center text-[var(--text-secondary)]",children:"Select a project to view tasks"})}function BTe({task:t,expanded:e,selected:n,isDragging:i,onToggle:r,onSelect:s,onDelete:a,onRetry:o,onCancel:c,onDragStart:u,onDragOver:f,onDrop:d,agents:m,compact:v}){const y=UB[t.status]||UB.pending,x=WB[t.priority]||WB[1],S=m.find(_=>_.id===t.agent_id);return g.jsxs("div",{className:`border border-[var(--border)] rounded ${y.bg} ${n?"ring-2 ring-[var(--accent)]":""} ${i?"opacity-50":""}`,draggable:!0,onDragStart:u,onDragOver:f,onDrop:d,children:[g.jsxs("div",{className:`flex items-center gap-2 ${v?"p-2":"p-3"} cursor-pointer hover:bg-[var(--bg-tertiary)] transition-colors`,children:[g.jsx("div",{className:"cursor-grab text-[var(--text-secondary)] hover:text-white",onMouseDown:_=>_.stopPropagation(),children:g.jsx(XF,{size:14})}),g.jsx("button",{onClick:_=>{_.stopPropagation(),s()},className:"text-[var(--text-secondary)] hover:text-white",children:n?g.jsx(b6,{size:14,className:"text-[var(--accent)]"}):g.jsx(jg,{size:14})}),g.jsx("button",{className:"text-[var(--text-secondary)]",onClick:r,children:e?g.jsx(gu,{size:14}):g.jsx(Cl,{size:14})}),g.jsx("span",{className:y.color,children:y.icon}),g.jsxs("div",{className:"flex-1 min-w-0",onClick:r,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${x.color} bg-[var(--bg-tertiary)]`,children:["P",t.priority]}),g.jsx("span",{className:"text-sm font-medium truncate",children:t.title})]}),!v&&t.description&&g.jsx("p",{className:"text-xs text-[var(--text-secondary)] truncate mt-0.5",children:t.description})]}),S&&g.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-[var(--bg-tertiary)] text-[var(--text-secondary)]",children:S.name}),g.jsx("span",{className:`text-xs ${y.color}`,children:t.status})]}),e&&g.jsxs("div",{className:"px-3 pb-3 pt-0 border-t border-[var(--border)] bg-[var(--bg-tertiary)]/50",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mt-2",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Created:"})," ",new Date(t.created_at).toLocaleString()]}),t.started_at&&g.jsxs("div",{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Started:"})," ",new Date(t.started_at).toLocaleString()]}),t.completed_at&&g.jsxs("div",{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Completed:"})," ",new Date(t.completed_at).toLocaleString()]}),t.retry_count>0&&g.jsxs("div",{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Retries:"})," ",t.retry_count,"/",t.max_retries]}),t.depends_on.length>0&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Depends on:"})," ",t.depends_on.join(", ")]}),t.error&&g.jsxs("div",{className:"col-span-2 text-red-400",children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Error:"})," ",t.error]})]}),t.status==="running"&&t.started_at&&g.jsx("div",{className:"mt-3 p-2 bg-green-900/20 rounded border border-green-800/50",children:g.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-300",children:[g.jsx(PT,{size:12,className:"animate-spin"}),g.jsx("span",{children:"In progress..."}),g.jsxs("span",{className:"text-[var(--text-secondary)]",children:["(",Math.round((Date.now()-new Date(t.started_at).getTime())/1e3),"s)"]})]})}),t.result&&g.jsx(XTe,{result:t.result}),g.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[t.status==="failed"&&g.jsxs("button",{onClick:_=>{_.stopPropagation(),o()},className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 rounded transition-colors",children:[g.jsx(y6,{size:12}),"Retry"]}),t.status==="running"&&g.jsxs("button",{onClick:_=>{_.stopPropagation(),c()},className:"flex items-center gap-1 px-2 py-1 text-xs bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 rounded transition-colors",children:[g.jsx($g,{size:12}),"Cancel"]}),!["running","assigned"].includes(t.status)&&g.jsxs("button",{onClick:_=>{_.stopPropagation(),a()},className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded transition-colors",children:[g.jsx(Ji,{size:12}),"Delete"]})]})]})]})}function ITe({agents:t,tasks:e,onClose:n,onCreate:i}){const[r,s]=X.useState(""),[a,o]=X.useState(""),[c,u]=X.useState(1),[f,d]=X.useState(""),[m,v]=X.useState([]),[y,x]=X.useState(!1),[S,_]=X.useState(""),Q=async T=>{if(T.preventDefault(),!r.trim()){_("Title is required");return}x(!0),_("");try{await i({title:r.trim(),description:a.trim()||void 0,priority:c,agent_id:f||void 0,depends_on:m})}catch(E){_(E.message||"Failed to create task"),x(!1)}},k=e.filter(T=>!["completed","failed"].includes(T.status));return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Add Task"}),g.jsx("button",{onClick:n,className:"text-[var(--text-secondary)] hover:text-white text-xl",children:""})]}),g.jsxs("form",{onSubmit:Q,className:"p-4 space-y-4",children:[S&&g.jsx("div",{className:"p-3 bg-red-900/30 border border-red-800 rounded text-red-200 text-sm",children:S}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title *"}),g.jsx("input",{type:"text",value:r,onChange:T=>s(T.target.value),placeholder:"e.g., Implement user authentication",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)]",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),g.jsx("textarea",{value:a,onChange:T=>o(T.target.value),placeholder:"Detailed task description...",rows:3,className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)] resize-none"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),g.jsxs("select",{value:c,onChange:T=>u(parseInt(T.target.value)),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded",children:[g.jsx("option",{value:0,children:"Low"}),g.jsx("option",{value:1,children:"Normal"}),g.jsx("option",{value:2,children:"High"}),g.jsx("option",{value:3,children:"Urgent"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Assign to"}),g.jsxs("select",{value:f,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded",children:[g.jsx("option",{value:"",children:"Auto-assign"}),t.map(T=>g.jsx("option",{value:T.id,children:T.name},T.id))]})]})]}),k.length>0&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Depends On"}),g.jsx("div",{className:"max-h-32 overflow-y-auto border border-[var(--border)] rounded p-2 space-y-1",children:k.map(T=>g.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-[var(--bg-tertiary)] p-1 rounded",children:[g.jsx("input",{type:"checkbox",checked:m.includes(T.id),onChange:E=>{E.target.checked?v([...m,T.id]):v(m.filter(C=>C!==T.id))},className:"rounded"}),g.jsx("span",{className:"truncate",children:T.title})]},T.id))})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[g.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:y||!r.trim(),className:"px-4 py-2 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium disabled:opacity-50 transition-opacity",children:y?"Creating...":"Create Task"})]})]})]})})}function XTe({result:t}){const{loadSession:e}=Qd(),n=t;if(n.output&&!n.summary&&!n.session_id)return g.jsxs("div",{className:"mt-3 p-2 bg-[var(--bg-primary)] rounded border border-[var(--border)]",children:[g.jsx("div",{className:"text-xs text-[var(--text-secondary)] mb-1",children:"Output:"}),g.jsx("pre",{className:"text-xs text-green-300 whitespace-pre-wrap break-words max-h-40 overflow-y-auto",children:n.output})]});const i=()=>{n.session_id&&e(n.session_id)};return g.jsxs("div",{className:"mt-3 space-y-2",children:[n.summary&&g.jsxs("div",{className:"p-2 bg-[var(--bg-primary)] rounded border border-[var(--border)]",children:[g.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mb-1 flex items-center gap-1",children:[g.jsx(CT,{size:10}),"Summary"]}),g.jsx("div",{className:"text-xs text-[var(--text-primary)] whitespace-pre-wrap",children:n.summary})]}),n.files_changed&&n.files_changed.length>0&&g.jsxs("div",{className:"p-2 bg-[var(--bg-primary)] rounded border border-[var(--border)]",children:[g.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mb-1",children:["Files changed (",n.files_changed.length,")"]}),g.jsx("div",{className:"text-xs font-mono text-blue-300 max-h-24 overflow-y-auto",children:n.files_changed.map((r,s)=>g.jsx("div",{className:"truncate",children:r},s))})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[n.duration_ms&&g.jsxs("span",{className:"text-[var(--text-secondary)]",children:[g.jsx(ms,{size:10,className:"inline mr-1"}),Math.round(n.duration_ms/1e3),"s"]}),n.num_turns&&g.jsxs("span",{className:"text-[var(--text-secondary)]",children:[n.num_turns," turns"]}),n.cost_usd&&g.jsxs("span",{className:"text-green-400",children:[g.jsx(ld,{size:10,className:"inline"}),n.cost_usd.toFixed(2)]}),n.session_id&&g.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-[var(--accent)] hover:underline",children:[g.jsx(bF,{size:10}),"View session"]})]}),n.needs&&n.needs.length>0&&g.jsxs("div",{className:"text-xs text-orange-400",children:["Needs: ",n.needs.join(", ")]})]})}function ZTe(){const[t,e]=X.useState(null),[n,i]=X.useState(null),[r,s]=X.useState(!0),[a,o]=X.useState(30),c=wd(),u=async()=>{s(!0);try{const[C,P]=await Promise.all([fetch(`/api/usage/accurate?days=${a}`),fetch("/api/usage/realtime")]);if(C.ok){const L=await C.json();e(L)}if(P.ok){const L=await P.json();i(L)}}catch(C){console.error("Failed to fetch usage:",C)}finally{s(!1)}};if(X.useEffect(()=>{u()},[a]),X.useEffect(()=>{const C=setInterval(async()=>{try{const P=await fetch("/api/usage/realtime");if(P.ok){const L=await P.json();i(L)}}catch{}},3e4);return()=>clearInterval(C)},[]),r&&!t)return g.jsx("div",{className:"flex items-center justify-center h-64",children:g.jsx(Ti,{className:"w-6 h-6 animate-spin text-[var(--text-secondary)]"})});if(!t)return g.jsx("div",{className:"text-center text-[var(--text-secondary)] py-8",children:"No usage data available"});const f=new Date().toISOString().split("T")[0],d=t.daily_activity.length,m=d>0?Math.round(t.daily_activity.reduce((C,P)=>C+P.message_count,0)/d):0,v=d>0?Math.round(t.daily_activity.reduce((C,P)=>C+P.tool_call_count,0)/d):0,y=t.models.reduce((C,P)=>C+P.input_tokens,0),x=t.models.reduce((C,P)=>C+P.output_tokens,0),S=t.models.reduce((C,P)=>C+P.cache_read_tokens,0),_=t.models.reduce((C,P)=>C+P.cache_creation_tokens,0),Q=C=>C.includes("opus-4-5")?"Opus 4.5":C.includes("sonnet-4-5")?"Sonnet 4.5":C.includes("opus-4-1")?"Opus 4.1":C.split("-").slice(1,3).join(" "),k=C=>C>=1e9?`${(C/1e9).toFixed(1)}B`:C>=1e6?`${(C/1e6).toFixed(1)}M`:C>=1e3?`${(C/1e3).toFixed(1)}K`:C.toString(),T=C=>C>=1e3?`$${(C/1e3).toFixed(2)}K`:`$${C.toFixed(2)}`,E=C=>C.includes("opus")?"text-purple-400":C.includes("sonnet")?"text-blue-400":"text-gray-400";return g.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-full",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[g.jsx(RT,{size:20,className:"text-[var(--accent)]"}),"Usage Analytics"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("select",{value:a,onChange:C=>o(Number(C.target.value)),className:"text-xs bg-[var(--bg-tertiary)] border border-[var(--border)] rounded px-2 py-1",children:[g.jsx("option",{value:7,children:"Last 7 days"}),g.jsx("option",{value:14,children:"Last 14 days"}),g.jsx("option",{value:30,children:"Last 30 days"}),g.jsx("option",{value:90,children:"Last 90 days"})]}),g.jsx("button",{onClick:u,className:"p-1.5 hover:bg-[var(--bg-tertiary)] rounded transition-colors",title:"Refresh",children:g.jsx(Ti,{size:14,className:r?"animate-spin":""})})]})]}),n&&g.jsx(VTe,{data:n}),g.jsxs("div",{className:`grid gap-3 ${c?"grid-cols-2":"grid-cols-2 md:grid-cols-4"}`,children:[g.jsx(Jm,{icon:g.jsx(ld,{size:18}),label:"Total Est. Cost",value:T(t.total_estimated_cost_usd),subtext:`last ${a} days`,color:"text-green-400"}),g.jsx(Jm,{icon:g.jsx(fl,{size:18}),label:"Messages",value:k(t.total_messages),subtext:`${t.total_sessions} sessions`,color:"text-blue-400"}),g.jsx(Jm,{icon:g.jsx(Hc,{size:18}),label:"Avg/Day",value:k(m),subtext:`${k(v)} tools`,color:"text-yellow-400"}),g.jsx(Jm,{icon:g.jsx(ms,{size:18}),label:"First Session",value:t.first_session_date?new Date(t.first_session_date).toLocaleDateString():"N/A",subtext:"",color:"text-purple-400"})]}),g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[g.jsx(gF,{size:16}),"Cost by Model",g.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-green-500/20 text-green-400 rounded",children:"ACCURATE"})]}),g.jsx("div",{className:"space-y-3",children:t.models.map(C=>{const P=t.total_estimated_cost_usd>0?C.estimated_cost_usd/t.total_estimated_cost_usd*100:0;return g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsx("span",{className:`font-medium ${E(C.model_id)}`,children:Q(C.model_id)}),g.jsx("span",{className:"text-green-400",children:T(C.estimated_cost_usd)})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"flex-1 h-2 bg-[var(--bg-secondary)] rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full ${C.model_id.includes("opus")?"bg-purple-500":"bg-blue-500"} rounded-full`,style:{width:`${P}%`}})}),g.jsxs("span",{className:"text-xs text-[var(--text-secondary)] w-12 text-right",children:[P.toFixed(1),"%"]})]}),g.jsxs("div",{className:"flex gap-4 text-xs text-[var(--text-secondary)]",children:[g.jsxs("span",{children:["In: ",k(C.input_tokens)]}),g.jsxs("span",{children:["Out: ",k(C.output_tokens)]}),g.jsxs("span",{children:["Cache: ",k(C.cache_read_tokens)]})]})]},C.model_id)})})]}),g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:["Daily Activity",g.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-green-500/20 text-green-400 rounded",children:"ACCURATE"})]}),g.jsx("div",{className:"space-y-2",children:t.daily_activity.slice(0,14).map(C=>{const P=Math.max(...t.daily_activity.map(N=>N.message_count)),L=P>0?C.message_count/P*100:0,B=C.date===f;return g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsx("span",{className:`w-20 ${B?"text-green-400 font-medium":"text-[var(--text-secondary)]"}`,children:B?"Today":new Date(C.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),g.jsx("div",{className:"flex-1 h-4 bg-[var(--bg-secondary)] rounded overflow-hidden",children:g.jsx("div",{className:`h-full rounded ${B?"bg-green-500":"bg-[var(--accent)]"}`,style:{width:`${L}%`}})}),g.jsx("span",{className:`w-16 text-right ${B?"text-green-400":"text-[var(--text-secondary)]"}`,children:k(C.message_count)}),g.jsxs("span",{className:"w-12 text-right text-[var(--text-secondary)]",children:[C.session_count," sess"]})]},C.date)})})]}),g.jsxs("div",{className:`grid gap-3 text-xs ${c?"grid-cols-1":"grid-cols-2"}`,children:[g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3",children:[g.jsx("div",{className:"text-[var(--text-secondary)] mb-1",children:"Total Input Tokens"}),g.jsx("div",{className:"text-lg font-medium",children:k(y)})]}),g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3",children:[g.jsx("div",{className:"text-[var(--text-secondary)] mb-1",children:"Total Output Tokens"}),g.jsx("div",{className:"text-lg font-medium",children:k(x)})]}),g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3",children:[g.jsx("div",{className:"text-[var(--text-secondary)] mb-1",children:"Cache Read Tokens"}),g.jsx("div",{className:"text-lg font-medium text-green-400",children:k(S)})]}),g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3",children:[g.jsx("div",{className:"text-[var(--text-secondary)] mb-1",children:"Cache Creation Tokens"}),g.jsx("div",{className:"text-lg font-medium text-yellow-400",children:k(_)})]})]})]})}function Jm({icon:t,label:e,value:n,subtext:i,color:r}){return g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3",children:[g.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)] text-xs mb-1",children:[g.jsx("span",{className:r,children:t}),e]}),g.jsx("div",{className:`text-xl font-bold ${r}`,children:n}),i&&g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:i})]})}function VTe({data:t}){const e=r=>r>=1e3?`${(r/1e3).toFixed(1)}k`:r.toString(),n=r=>r>=1e6?`${(r/1e6).toFixed(1)}M`:e(r),i=t.today;return g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[g.jsx(Hc,{size:16,className:"text-yellow-400"}),"Today's Usage",g.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-green-500/20 text-green-400 rounded",children:"LIVE"})]}),g.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),g.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e(i.messages)}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"Messages"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e(i.tool_calls)}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"Tool Calls"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-2xl font-bold text-green-400",children:n(i.total_tokens)}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"Tokens"})]}),g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["$",i.estimated_cost_usd.toFixed(2)]}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"Est. Cost"})]})]}),g.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-[var(--text-secondary)]",children:[g.jsxs("span",{children:[i.sessions," active session",i.sessions!==1?"s":""]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsxs("span",{children:["In: ",e(i.input_tokens)]}),g.jsxs("span",{children:["Out: ",e(i.output_tokens)]}),g.jsxs("span",{className:"text-green-400",children:["Cache: ",n(i.cache_read_tokens)]})]})]})]})}function WTe({sprintId:t}){const{activeProject:e}=Ei(),[n,i]=X.useState([]),[r,s]=X.useState([]),[a,o]=X.useState(!0),c=async()=>{if(e){o(!0);try{const u=await fetch(`/api/projects/${e.id}/velocity`);if(u.ok&&s(await u.json()),t){const f=await fetch(`/api/projects/${e.id}/sprints/${t}/burndown`);f.ok&&i(await f.json())}else i([])}catch(u){console.error("Failed to fetch chart data:",u)}finally{o(!1)}}};return X.useEffect(()=>{c()},[e?.id,t]),a?g.jsx("div",{className:"flex items-center justify-center h-64",children:g.jsx(Ti,{className:"w-6 h-6 animate-spin text-[var(--text-secondary)]"})}):g.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-full",children:[t&&n.length>0?g.jsx(UTe,{data:n}):t?g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2 mb-2",children:[g.jsx(u2,{size:16,className:"text-blue-400"}),"Burndown Chart"]}),g.jsx("div",{className:"text-center text-[var(--text-secondary)] py-8",children:"No tasks in this sprint yet"})]}):g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2 mb-2",children:[g.jsx(u2,{size:16,className:"text-blue-400"}),"Burndown Chart"]}),g.jsxs("div",{className:"text-center text-[var(--text-secondary)] py-8",children:[g.jsx(ET,{size:24,className:"mx-auto mb-2 opacity-50"}),"Select a sprint to view burndown"]})]}),g.jsx(HTe,{data:r})]})}function UTe({data:t}){if(t.length===0)return null;const e=Math.max(...t.map(d=>Math.max(d.remaining,d.ideal))),n=400,i=200,r={top:20,right:20,bottom:30,left:40},s=n-r.left-r.right,a=i-r.top-r.bottom,o=d=>r.left+d/Math.max(1,t.length-1)*s,c=d=>r.top+a-d/Math.max(1,e)*a,u=t.map((d,m)=>`${m===0?"M":"L"} ${o(m)} ${c(d.ideal)}`).join(" "),f=t.map((d,m)=>`${m===0?"M":"L"} ${o(m)} ${c(d.remaining)}`).join(" ");return g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2 mb-3",children:[g.jsx(u2,{size:16,className:"text-blue-400"}),"Burndown Chart"]}),g.jsxs("svg",{viewBox:`0 0 ${n} ${i}`,className:"w-full h-auto",children:[[0,.25,.5,.75,1].map(d=>g.jsx("line",{x1:r.left,y1:c(e*d),x2:n-r.right,y2:c(e*d),stroke:"var(--border)",strokeDasharray:"2,2"},d)),g.jsx("path",{d:u,fill:"none",stroke:"var(--text-secondary)",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.5"}),g.jsx("path",{d:f,fill:"none",stroke:"#3b82f6",strokeWidth:"2"}),t.map((d,m)=>g.jsx("circle",{cx:o(m),cy:c(d.remaining),r:"3",fill:"#3b82f6"},m)),g.jsx("text",{x:r.left-5,y:c(e),textAnchor:"end",fill:"var(--text-secondary)",fontSize:"10",children:e}),g.jsx("text",{x:r.left-5,y:c(0),textAnchor:"end",fill:"var(--text-secondary)",fontSize:"10",children:"0"}),g.jsx("text",{x:o(0),y:i-8,textAnchor:"start",fill:"var(--text-secondary)",fontSize:"10",children:HB(t[0].date)}),g.jsx("text",{x:o(t.length-1),y:i-8,textAnchor:"end",fill:"var(--text-secondary)",fontSize:"10",children:HB(t[t.length-1].date)})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-[var(--text-secondary)]",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-4 h-0.5 bg-blue-500"}),g.jsx("span",{children:"Remaining"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-4 h-0.5 bg-[var(--text-secondary)] opacity-50",style:{borderStyle:"dashed"}}),g.jsx("span",{children:"Ideal"})]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-xs",children:[g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded p-2 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-blue-400",children:t[0]?.remaining||0}),g.jsx("div",{className:"text-[var(--text-secondary)]",children:"Started"})]}),g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded p-2 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-green-400",children:t[t.length-1]?.completed||0}),g.jsx("div",{className:"text-[var(--text-secondary)]",children:"Completed"})]}),g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded p-2 text-center",children:[g.jsx("div",{className:"text-lg font-bold text-yellow-400",children:t[t.length-1]?.remaining||0}),g.jsx("div",{className:"text-[var(--text-secondary)]",children:"Remaining"})]})]})]})}function HTe({data:t}){if(t.length===0)return g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2 mb-2",children:[g.jsx(Hc,{size:16,className:"text-yellow-400"}),"Velocity Chart"]}),g.jsxs("div",{className:"text-center text-[var(--text-secondary)] py-8",children:[g.jsx(ET,{size:24,className:"mx-auto mb-2 opacity-50"}),"No completed sprints yet"]})]});const e=Math.max(...t.map(v=>v.velocity),1),n=t.length>0?Math.round(t.reduce((v,y)=>v+y.velocity,0)/t.length):0,i=400,r=180,s={top:20,right:20,bottom:40,left:40},a=i-s.left-s.right,o=r-s.top-s.bottom,c=Math.min(40,a/t.length*.7),u=(a-c*t.length)/(t.length+1),f=v=>s.left+u+v*(c+u),d=v=>s.top+o-v/e*o,m=v=>v/e*o;return g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-4",children:[g.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2 mb-3",children:[g.jsx(Hc,{size:16,className:"text-yellow-400"}),"Velocity Chart",g.jsxs("span",{className:"text-xs text-[var(--text-secondary)] font-normal ml-2",children:["Avg: ",n," tasks/sprint"]})]}),g.jsxs("svg",{viewBox:`0 0 ${i} ${r}`,className:"w-full h-auto",children:[[0,.5,1].map(v=>g.jsx("line",{x1:s.left,y1:d(e*v),x2:i-s.right,y2:d(e*v),stroke:"var(--border)",strokeDasharray:"2,2"},v)),g.jsx("line",{x1:s.left,y1:d(n),x2:i-s.right,y2:d(n),stroke:"#eab308",strokeWidth:"1",strokeDasharray:"5,3"}),t.map((v,y)=>g.jsxs("g",{children:[g.jsx("rect",{x:f(y),y:d(v.total_tasks),width:c,height:m(v.total_tasks),fill:"var(--bg-secondary)",rx:"2"}),g.jsx("rect",{x:f(y),y:d(v.velocity),width:c,height:m(v.velocity),fill:v.status==="active"?"#3b82f6":"#22c55e",rx:"2"}),g.jsx("text",{x:f(y)+c/2,y:d(v.velocity)-5,textAnchor:"middle",fill:"var(--text-primary)",fontSize:"10",fontWeight:"bold",children:v.velocity}),g.jsx("text",{x:f(y)+c/2,y:r-10,textAnchor:"middle",fill:"var(--text-secondary)",fontSize:"9",transform:`rotate(-20, ${f(y)+c/2}, ${r-10})`,children:v.sprint_name.length>10?v.sprint_name.slice(0,10)+"...":v.sprint_name})]},v.sprint_id)),g.jsx("text",{x:s.left-5,y:d(e),textAnchor:"end",fill:"var(--text-secondary)",fontSize:"10",children:e}),g.jsx("text",{x:s.left-5,y:d(0),textAnchor:"end",fill:"var(--text-secondary)",fontSize:"10",children:"0"})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-[var(--text-secondary)]",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),g.jsx("span",{children:"Completed"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),g.jsx("span",{children:"Active"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("div",{className:"w-3 h-3 bg-[var(--bg-secondary)] rounded"}),g.jsx("span",{children:"Total Tasks"})]})]})]})}function HB(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function YTe(){const{activeProject:t}=Ei(),[e,n]=X.useState([]),[i,r]=X.useState(null),[s,a]=X.useState(null),[o,c]=X.useState([]),[u,f]=X.useState([]),[d,m]=X.useState(!1),[v,y]=X.useState(!0),[x,S]=X.useState("tasks"),_=t?.id;X.useEffect(()=>{_&&(Q(),E())},[_]),X.useEffect(()=>{i&&(k(i.id),T(i.id))},[i]);const Q=async()=>{if(_){y(!0);try{const $=await fetch(`/api/projects/${_}/sprints`);if($.ok){const I=await $.json();n(I);const j=I.find(D=>D.status==="active");r(j||I[0]||null)}}catch($){console.error("Failed to fetch sprints:",$)}finally{y(!1)}}},k=async $=>{if(_)try{const I=await fetch(`/api/projects/${_}/sprints/${$}/stats`);if(I.ok){const j=await I.json();a(j)}}catch(I){console.error("Failed to fetch sprint stats:",I)}},T=async $=>{if(_)try{const I=await fetch(`/api/projects/${_}/tasks?sprint_id=${$}`);if(I.ok){const j=await I.json();c(j)}}catch(I){console.error("Failed to fetch sprint tasks:",I)}},E=async()=>{if(_)try{const $=await fetch(`/api/projects/${_}/tasks?sprint_id=`);if($.ok){const I=await $.json();f(I.filter(j=>!j.sprint_id))}}catch($){console.error("Failed to fetch backlog:",$)}},C=async $=>{if(_)try{(await fetch(`/api/projects/${_}/sprints/${$}/start`,{method:"POST"})).ok&&Q()}catch(I){console.error("Failed to start sprint:",I)}},P=async $=>{if(_)try{(await fetch(`/api/projects/${_}/sprints/${$}/complete`,{method:"POST"})).ok&&Q()}catch(I){console.error("Failed to complete sprint:",I)}},L=async $=>{if(_&&confirm("Delete this sprint? Tasks will move to backlog."))try{(await fetch(`/api/projects/${_}/sprints/${$}`,{method:"DELETE"})).ok&&(r(null),Q(),E())}catch(I){console.error("Failed to delete sprint:",I)}},B=async($,I)=>{if(_)try{(await fetch(`/api/projects/${_}/tasks/${$}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sprint_id:I})})).ok&&(E(),i&&(T(i.id),k(i.id)))}catch(j){console.error("Failed to move task:",j)}},N=$=>{switch($){case"active":return"text-green-400 bg-green-900/30";case"completed":return"text-blue-400 bg-blue-900/30";case"cancelled":return"text-red-400 bg-red-900/30";default:return"text-yellow-400 bg-yellow-900/30"}},M=$=>{switch($){case"active":return g.jsx(oo,{size:12});case"completed":return g.jsx(Sf,{size:12});default:return g.jsx(ms,{size:12})}};return v&&e.length===0?g.jsx("div",{className:"flex items-center justify-center h-64 text-[var(--text-secondary)]",children:"Loading sprints..."}):g.jsxs("div",{className:"flex h-full overflow-hidden",children:[g.jsxs("div",{className:"w-64 border-r border-[var(--border)] flex flex-col",children:[g.jsxs("div",{className:"p-3 border-b border-[var(--border)] flex items-center justify-between",children:[g.jsx("h3",{className:"font-medium text-sm",children:"Sprints"}),g.jsx("button",{onClick:()=>m(!0),className:"p-1 hover:bg-[var(--bg-tertiary)] rounded",title:"Create Sprint",children:g.jsx(vo,{size:16})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:e.length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-sm py-4",children:"No sprints yet"}):e.map($=>g.jsxs("button",{onClick:()=>r($),className:`w-full text-left p-2 rounded transition-colors ${i?.id===$.id?"bg-[var(--accent)] text-white":"hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 ${N($.status)}`,children:[M($.status),$.status]})}),g.jsx("div",{className:"font-medium mt-1 truncate",children:$.name}),$.end_date&&g.jsxs("div",{className:"text-xs text-[var(--text-secondary)] mt-0.5",children:["Ends: ",new Date($.end_date).toLocaleDateString()]})]},$.id))})]}),g.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:i?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"p-4 border-b border-[var(--border)]",children:[g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("h2",{className:"text-lg font-semibold",children:i.name}),g.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${N(i.status)}`,children:i.status})]}),i.goal&&g.jsxs("p",{className:"text-sm text-[var(--text-secondary)] mt-1 flex items-center gap-1",children:[g.jsx(_6,{size:14}),i.goal]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[i.status==="planning"&&g.jsxs("button",{onClick:()=>C(i.id),className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 rounded text-sm flex items-center gap-1",children:[g.jsx(oo,{size:14}),"Start Sprint"]}),i.status==="active"&&g.jsxs("button",{onClick:()=>P(i.id),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded text-sm flex items-center gap-1",children:[g.jsx(Sf,{size:14}),"Complete"]}),g.jsx("button",{onClick:()=>L(i.id),className:"p-1.5 hover:bg-red-900/30 rounded text-red-400",title:"Delete Sprint",children:g.jsx(Ji,{size:16})})]})]}),s&&s.total>0&&g.jsxs("div",{className:"mt-4",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"Progress"}),g.jsxs("span",{className:"text-green-400",children:[s.completion_percent,"%"]})]}),g.jsx("div",{className:"h-2 bg-[var(--bg-tertiary)] rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all",style:{width:`${s.completion_percent}%`}})}),g.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-[var(--text-secondary)]",children:[g.jsxs("span",{children:[s.completed," completed"]}),g.jsxs("span",{children:[s.running," running"]}),g.jsxs("span",{children:[s.pending+s.blocked," remaining"]})]})]}),g.jsxs("div",{className:"flex gap-1 mt-4",children:[g.jsxs("button",{onClick:()=>S("tasks"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium transition-colors ${x==="tasks"?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsx(sG,{size:14}),"Tasks"]}),g.jsxs("button",{onClick:()=>S("charts"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded text-sm font-medium transition-colors ${x==="charts"?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)]"}`,children:[g.jsx(UY,{size:14}),"Charts"]})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:x==="tasks"?g.jsxs("div",{className:"p-4",children:[g.jsxs("h3",{className:"font-medium text-sm mb-2",children:["Sprint Tasks (",o.length,")"]}),o.length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-sm py-8 bg-[var(--bg-tertiary)] rounded",children:"No tasks in this sprint. Drag tasks from backlog or create new ones."}):g.jsx("div",{className:"space-y-1",children:o.map($=>g.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-tertiary)] rounded hover:bg-[var(--bg-secondary)] transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${$.status==="completed"?"bg-green-500":$.status==="running"?"bg-blue-500":$.status==="failed"?"bg-red-500":"bg-gray-500"}`}),g.jsx("span",{className:"text-sm",children:$.title})]}),g.jsx("button",{onClick:()=>B($.id,null),className:"text-xs text-[var(--text-secondary)] hover:text-white px-2 py-1 rounded hover:bg-[var(--bg-primary)]",children:"Remove"})]},$.id))})]}):g.jsx(WTe,{sprintId:i.id})})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center text-[var(--text-secondary)]",children:"Select a sprint or create a new one"})}),g.jsxs("div",{className:"w-64 border-l border-[var(--border)] flex flex-col",children:[g.jsx("div",{className:"p-3 border-b border-[var(--border)]",children:g.jsxs("h3",{className:"font-medium text-sm",children:["Backlog (",u.length,")"]})}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:u.length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-xs py-4",children:"No tasks in backlog"}):u.map($=>g.jsx("div",{className:"p-2 bg-[var(--bg-tertiary)] rounded text-sm hover:bg-[var(--bg-secondary)] transition-colors",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"truncate flex-1",children:$.title}),i&&g.jsx("button",{onClick:()=>B($.id,i.id),className:"ml-2 p-1 hover:bg-[var(--accent)] rounded",title:"Add to sprint",children:g.jsx(Cl,{size:14})})]})},$.id))})]}),d&&g.jsx(FTe,{projectId:_,onClose:()=>m(!1),onCreated:()=>{m(!1),Q()}})]})}function FTe({projectId:t,onClose:e,onCreated:n}){const[i,r]=X.useState(""),[s,a]=X.useState(""),[o,c]=X.useState(""),[u,f]=X.useState(!1),d=async()=>{if(i.trim()){f(!0);try{(await fetch(`/api/projects/${t}/sprints`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.trim(),goal:s.trim()||null,end_date:o||null})})).ok&&n()}catch(m){console.error("Failed to create sprint:",m)}finally{f(!1)}}};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-96 p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"font-semibold",children:"Create Sprint"}),g.jsx("button",{onClick:e,className:"p-1 hover:bg-[var(--bg-tertiary)] rounded",children:g.jsx(li,{size:16})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-[var(--text-secondary)] mb-1",children:"Name *"}),g.jsx("input",{type:"text",value:i,onChange:m=>r(m.target.value),placeholder:"Sprint 1",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)]",autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-[var(--text-secondary)] mb-1",children:"Goal"}),g.jsx("input",{type:"text",value:s,onChange:m=>a(m.target.value),placeholder:"Complete user authentication",className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)]"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-[var(--text-secondary)] mb-1",children:"End Date"}),g.jsx("input",{type:"date",value:o,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded focus:outline-none focus:border-[var(--accent)]"})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[g.jsx("button",{onClick:e,className:"px-3 py-1.5 text-sm hover:bg-[var(--bg-tertiary)] rounded",children:"Cancel"}),g.jsx("button",{onClick:d,disabled:!i.trim()||u,className:"px-3 py-1.5 text-sm bg-[var(--accent)] rounded disabled:opacity-50",children:u?"Creating...":"Create"})]})]})})}function GTe(){const{activeProject:t}=Ei(),[e,n]=X.useState([]),[i,r]=X.useState(!0),[s,a]=X.useState(null),[o,c]=X.useState({}),u=t?.id,f=async()=>{if(u){r(!0);try{const T=await fetch(`/api/projects/${u}/performance`);T.ok&&n(await T.json())}catch(T){console.error("Failed to fetch metrics:",T)}finally{r(!1)}}},d=async T=>{if(!(!u||o[T]))try{const E=await fetch(`/api/projects/${u}/agents/${T}/history`);if(E.ok){const C=await E.json();c(P=>({...P,[T]:C}))}}catch(E){console.error("Failed to fetch agent history:",E)}};X.useEffect(()=>{f()},[u]);const m=T=>{s===T?a(null):(a(T),d(T))},v=T=>{switch(T){case"active":return"text-green-400";case"inactive":return"text-gray-400";default:return"text-yellow-400"}},y=T=>{switch(T){case"completed":return g.jsx(c2,{size:12,className:"text-green-400"});case"failed":return g.jsx($g,{size:12,className:"text-red-400"});case"running":return g.jsx(ms,{size:12,className:"text-blue-400 animate-pulse"});default:return g.jsx(ms,{size:12,className:"text-gray-400"})}},x=T=>{if(T<1)return"<1m";if(T<60)return`${Math.round(T)}m`;const E=Math.floor(T/60),C=Math.round(T%60);return`${E}h ${C}m`};if(i&&e.length===0)return g.jsx("div",{className:"flex items-center justify-center h-64",children:g.jsx(Ti,{className:"w-6 h-6 animate-spin text-[var(--text-secondary)]"})});const S=e.reduce((T,E)=>T+E.completed_tasks,0),_=e.reduce((T,E)=>T+E.failed_tasks,0),Q=e.reduce((T,E)=>T+E.total_tasks,0),k=Q>0?S/Q*100:0;return g.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto max-h-full",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[g.jsx(u6,{size:20,className:"text-[var(--accent)]"}),"Agent Performance"]}),g.jsx("button",{onClick:f,className:"p-1.5 hover:bg-[var(--bg-tertiary)] rounded transition-colors",title:"Refresh",children:g.jsx(Ti,{size:14,className:i?"animate-spin":""})})]}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[g.jsx(eg,{icon:g.jsx($T,{size:18}),label:"Agents",value:e.length.toString(),subtext:`${e.filter(T=>T.status==="active").length} active`,color:"text-blue-400"}),g.jsx(eg,{icon:g.jsx(c2,{size:18}),label:"Completed",value:S.toString(),subtext:`${Q} total`,color:"text-green-400"}),g.jsx(eg,{icon:g.jsx($g,{size:18}),label:"Failed",value:_.toString(),subtext:Q>0?`${(_/Q*100).toFixed(1)}%`:"0%",color:"text-red-400"}),g.jsx(eg,{icon:g.jsx(RT,{size:18}),label:"Success Rate",value:`${k.toFixed(1)}%`,subtext:"overall",color:"text-purple-400"})]}),g.jsx("div",{className:"space-y-2",children:e.length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] py-8",children:"No agents found. Add agents to track performance."}):e.map(T=>g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg overflow-hidden",children:[g.jsxs("button",{onClick:()=>m(T.agent_id),className:"w-full p-3 flex items-center justify-between hover:bg-[var(--bg-secondary)] transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[s===T.agent_id?g.jsx(gu,{size:16}):g.jsx(Cl,{size:16}),g.jsxs("div",{className:"text-left",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-medium",children:T.agent_name}),g.jsx("span",{className:`text-xs ${v(T.status)}`,children:T.status})]}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:T.domain})]})]}),g.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:T.success_rate>=80?"text-green-400":T.success_rate>=50?"text-yellow-400":"text-red-400",children:[T.success_rate,"%"]}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"success"})]}),g.jsxs("div",{className:"text-right w-16",children:[g.jsxs("div",{children:[T.completed_tasks,"/",T.total_tasks]}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"tasks"})]}),g.jsxs("div",{className:"text-right w-16",children:[g.jsx("div",{children:x(T.avg_duration_minutes)}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:"avg"})]})]})]}),g.jsx("div",{className:"px-3 pb-3",children:g.jsx("div",{className:"h-1.5 bg-[var(--bg-secondary)] rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all ${T.success_rate>=80?"bg-green-500":T.success_rate>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${T.success_rate}%`}})})}),s===T.agent_id&&g.jsxs("div",{className:"border-t border-[var(--border)] p-3",children:[g.jsx("h4",{className:"text-xs font-medium text-[var(--text-secondary)] mb-2",children:"Recent Tasks"}),o[T.agent_id]?o[T.agent_id].length===0?g.jsx("div",{className:"text-center text-[var(--text-secondary)] text-xs py-2",children:"No tasks found"}):g.jsx("div",{className:"space-y-1",children:o[T.agent_id].slice(0,10).map(E=>g.jsxs("div",{className:"flex items-center gap-2 text-xs p-1.5 bg-[var(--bg-secondary)] rounded",children:[y(E.status),g.jsx("span",{className:"flex-1 truncate",children:E.title}),E.completed_at&&g.jsx("span",{className:"text-[var(--text-secondary)]",children:new Date(E.completed_at).toLocaleDateString()})]},E.id))}):g.jsx("div",{className:"text-center py-2",children:g.jsx(Ti,{size:14,className:"animate-spin mx-auto text-[var(--text-secondary)]"})})]})]},T.agent_id))})]})}function eg({icon:t,label:e,value:n,subtext:i,color:r}){return g.jsxs("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3",children:[g.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)] text-xs mb-1",children:[g.jsx("span",{className:r,children:t}),e]}),g.jsx("div",{className:`text-xl font-bold ${r}`,children:n}),i&&g.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:i})]})}function KTe(){const{currentRunningAgent:t,agentStates:e}=Ou(),[n,i]=X.useState(0),r=t?e[t]:null;X.useEffect(()=>{if(!r||r.state!=="running"){i(0);return}const a=Date.now()-(r.elapsed||0),o=setInterval(()=>{i(Math.floor((Date.now()-a)/1e3))},1e3);return()=>clearInterval(o)},[r]);const s=a=>{const o=Math.floor(a/60),c=a%60;return`${o}:${c.toString().padStart(2,"0")}`};return!r||r.state!=="running"?g.jsx("div",{className:"px-4 py-3 bg-[var(--bg-tertiary)] border-b border-[var(--border)]",children:g.jsxs("div",{className:"flex items-center gap-2 text-[var(--text-secondary)]",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),g.jsx("span",{className:"text-sm",children:"All agents idle"})]})}):g.jsx("div",{className:"px-4 py-3 bg-green-900/20 border-b border-green-800/50",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(oo,{size:16,className:"text-green-500"}),g.jsx("span",{className:"font-medium text-green-400",children:t})]}),r.current_task&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-[var(--text-secondary)]",children:"|"}),g.jsx("span",{className:"text-sm text-[var(--text-secondary)] truncate max-w-[300px]",children:r.current_task})]})]}),g.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-[var(--text-secondary)]",children:[g.jsx(ms,{size:14}),g.jsx("span",{children:s(n)})]})]})})}const JTe={state:{icon:h6,color:"text-blue-400",bgColor:"bg-blue-900/20"},result:{icon:Sf,color:"text-green-400",bgColor:"bg-green-900/20"},output:{icon:fl,color:"text-gray-400",bgColor:"bg-gray-900/20"},error:{icon:od,color:"text-red-400",bgColor:"bg-red-900/20"}};function YB(){const{activityFeed:t}=Ou(),e=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return t.length===0?g.jsx("div",{className:"flex-1 flex items-center justify-center text-[var(--text-secondary)]",children:g.jsx("p",{className:"text-sm",children:"No activity yet"})}):g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[g.jsx("div",{className:"px-4 py-2 border-b border-[var(--border)] sticky top-0 bg-[var(--bg-primary)]",children:g.jsx("h3",{className:"text-sm font-medium text-[var(--text-secondary)]",children:"Activity Feed"})}),g.jsx("div",{className:"divide-y divide-[var(--border)]",children:t.map(n=>g.jsx(eQe,{item:n,formatTime:e},n.id))})]})}function eQe({item:t,formatTime:e}){const n=JTe[t.type],i=n.icon;return g.jsx("div",{className:`px-4 py-2 ${n.bgColor} hover:bg-[var(--bg-secondary)] transition-colors`,children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(i,{size:14,className:`mt-0.5 flex-shrink-0 ${n.color}`}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[g.jsx("span",{className:"text-xs font-medium",children:t.agent}),g.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:e(t.timestamp)})]}),g.jsx("p",{className:"text-sm text-[var(--text-secondary)] truncate",children:t.content})]})]})})}function tQe({agentName:t,onSelectSession:e}){const[n,i]=X.useState([]),[r,s]=X.useState(!1),[a,o]=X.useState(""),[c,u]=X.useState("date"),[f,d]=X.useState("desc"),[m,v]=X.useState(!1),[y,x]=X.useState("all"),{setAgent:S,clearMessages:_}=Qd();X.useEffect(()=>{if(!t){i([]);return}(async()=>{s(!0);try{const B=await(await fetch(`/api/sessions/${t}`)).json();i(B)}catch{i([])}finally{s(!1)}})()},[t]);const Q=()=>{t&&(S(t),_())},k=P=>{if(!P)return"Never";const L=Math.floor((Date.now()-P*1e3)/1e3);if(L<60)return`${L}s ago`;const B=Math.floor(L/60);if(B<60)return`${B}m ago`;const N=Math.floor(B/60);return N<24?`${N}h ago`:`${Math.floor(N/24)}d ago`},T=X.useMemo(()=>{let P=[...n];if(a.trim()){const L=a.toLowerCase();P=P.filter(B=>B.session_id.toLowerCase().includes(L)||B.last_message_preview?.toLowerCase().includes(L))}if(y!=="all"){const L=Date.now(),N={today:L-1440*60*1e3,week:L-10080*60*1e3,month:L-720*60*60*1e3}[y];P=P.filter(M=>M.last_timestamp&&M.last_timestamp*1e3>N)}return P.sort((L,B)=>{let N=0;switch(c){case"date":N=(L.last_timestamp||0)-(B.last_timestamp||0);break;case"messages":N=L.message_count-B.message_count;break;case"cost":N=L.cost_usd-B.cost_usd;break}return f==="desc"?-N:N}),P},[n,a,y,c,f]),E=()=>{o(""),x("all"),u("date"),d("desc")},C=a||y!=="all"||c!=="date"||f!=="desc";return t?g.jsxs("div",{className:"border-t border-[var(--border)]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-[var(--border)] flex items-center justify-between",children:[g.jsxs("h3",{className:"text-sm font-medium text-[var(--text-secondary)]",children:["Sessions - ",t]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>v(!m),className:`p-1.5 rounded transition-colors ${m||C?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)]"}`,title:"Filters",children:g.jsx(zG,{size:14})}),g.jsxs("button",{onClick:Q,className:"flex items-center gap-1 px-2 py-1 text-xs bg-[var(--accent)] hover:opacity-90 rounded transition-opacity",children:[g.jsx(vo,{size:12}),"New Chat"]})]})]}),m&&g.jsxs("div",{className:"px-4 py-2 bg-[var(--bg-secondary)] border-b border-[var(--border)] space-y-2",children:[g.jsxs("div",{className:"relative",children:[g.jsx(PG,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-[var(--text-secondary)]"}),g.jsx("input",{type:"text",value:a,onChange:P=>o(P.target.value),placeholder:"Search sessions...",className:"w-full pl-8 pr-3 py-1.5 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-xs focus:outline-none focus:border-[var(--accent)]"}),a&&g.jsx("button",{onClick:()=>o(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-[var(--text-secondary)] hover:text-white",children:g.jsx(li,{size:12})})]}),g.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[g.jsxs("select",{value:y,onChange:P=>x(P.target.value),className:"px-2 py-1 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-xs",children:[g.jsx("option",{value:"all",children:"All time"}),g.jsx("option",{value:"today",children:"Today"}),g.jsx("option",{value:"week",children:"This week"}),g.jsx("option",{value:"month",children:"This month"})]}),g.jsxs("select",{value:c,onChange:P=>u(P.target.value),className:"px-2 py-1 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-xs",children:[g.jsx("option",{value:"date",children:"Sort by Date"}),g.jsx("option",{value:"messages",children:"Sort by Messages"}),g.jsx("option",{value:"cost",children:"Sort by Cost"})]}),g.jsx("button",{onClick:()=>d(f==="desc"?"asc":"desc"),className:"px-2 py-1 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-xs hover:bg-[var(--bg-secondary)] transition-colors",children:f==="desc"?" Desc":" Asc"}),C&&g.jsx("button",{onClick:E,className:"px-2 py-1 text-xs text-[var(--text-secondary)] hover:text-white",children:"Clear"})]}),g.jsxs("div",{className:"text-xs text-[var(--text-secondary)]",children:[T.length," of ",n.length," sessions"]})]}),g.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:r?g.jsx("div",{className:"p-4 text-center text-[var(--text-secondary)]",children:g.jsx("p",{className:"text-sm",children:"Loading sessions..."})}):T.length===0?g.jsxs("div",{className:"p-4 text-center text-[var(--text-secondary)]",children:[g.jsx("p",{className:"text-sm",children:n.length===0?"No sessions yet":"No matching sessions"}),C&&g.jsx("button",{onClick:E,className:"text-xs text-[var(--accent)] hover:underline mt-1",children:"Clear filters"})]}):g.jsx("div",{className:"divide-y divide-[var(--border)]",children:T.slice(0,20).map(P=>g.jsxs("button",{onClick:()=>e(P.session_id),className:"w-full px-4 py-3 text-left hover:bg-[var(--bg-secondary)] transition-colors",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsxs("span",{className:"text-xs font-mono text-[var(--text-secondary)]",children:[P.session_id.slice(0,8),"..."]}),g.jsx("span",{className:"text-xs text-[var(--text-secondary)]",children:k(P.last_timestamp)})]}),g.jsx("p",{className:"text-sm truncate text-[var(--text-secondary)] mb-2",children:P.last_message_preview||"No messages"}),g.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-secondary)]",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(fl,{size:10}),P.message_count]}),P.cost_usd>0&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(ld,{size:10}),P.cost_usd.toFixed(4)]})]})]},P.session_id))})})]}):g.jsx("div",{className:"p-4 text-center text-[var(--text-secondary)]",children:g.jsx("p",{className:"text-sm",children:"Select an agent to view sessions"})})}const nQe=[{mode:"grid",icon:KF,label:"Grid"},{mode:"network",icon:pG,label:"Network"},{mode:"queue",icon:iG,label:"Queue"},{mode:"sprints",icon:_6,label:"Sprints"},{mode:"performance",icon:u6,label:"Perf"},{mode:"usage",icon:RT,label:"Usage"}];function FB(){const[t,e]=X.useState("grid"),[n,i]=X.useState(null),{loadSession:r,setAgent:s}=Qd(),a=wd(),o=u=>{i(u===n?null:u),u&&s(u)},c=async u=>{await r(u)};return g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-[var(--bg-primary)]",children:[g.jsxs("div",{className:`flex items-center justify-between border-b border-[var(--border)] ${a?"flex-col":""}`,children:[g.jsx(KTe,{}),g.jsx("div",{className:`flex items-center gap-1 px-2 py-2 ${a?"w-full overflow-x-auto hide-scrollbar":""}`,children:nQe.map(({mode:u,icon:f,label:d})=>g.jsxs("button",{onClick:()=>e(u),className:`flex items-center gap-1.5 px-2 sm:px-3 py-1.5 rounded text-xs sm:text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0 ${t===u?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)]"}`,title:d,children:[g.jsx(f,{size:a?16:14}),!a&&d]},u))})]}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t==="grid"&&g.jsxs(g.Fragment,{children:[g.jsx(aye,{onAgentSelect:o,selectedAgent:n}),g.jsx(YB,{}),g.jsx(tQe,{agentName:n,onSelectSession:c})]}),t==="network"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex-1 min-h-[300px]",children:g.jsx(jTe,{onAgentSelect:o,selectedAgent:n})}),g.jsx("div",{className:"h-[150px] border-t border-[var(--border)]",children:g.jsx(YB,{})})]}),t==="queue"&&g.jsx(qTe,{}),t==="sprints"&&g.jsx(YTe,{}),t==="performance"&&g.jsx(GTe,{}),t==="usage"&&g.jsx(ZTe,{})]})]})}function iQe({activeTab:t,onTabChange:e}){const n=[{id:"files",label:"Files",icon:g.jsx(LF,{size:20})},{id:"editor",label:"Editor",icon:g.jsx(dF,{size:20})},{id:"monitor",label:"Monitor",icon:g.jsx(zY,{size:20})},{id:"chat",label:"Chat",icon:g.jsx(fl,{size:20})}];return g.jsx("nav",{className:"fixed bottom-0 left-0 right-0 h-14 bg-[var(--bg-secondary)] border-t border-[var(--border)] flex items-center justify-around z-50",children:n.map(i=>g.jsxs("button",{onClick:()=>e(i.id),className:`
            flex flex-col items-center justify-center gap-0.5 flex-1 h-full
            transition-colors
            ${t===i.id?"text-[var(--accent)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}
          `,children:[i.icon,g.jsx("span",{className:"text-xs",children:i.label})]},i.id))})}function GB({onClose:t}){const{activeProject:e}=Ei(),[n,i]=X.useState(null),[r,s]=X.useState(!0),[a,o]=X.useState(null),[c,u]=X.useState(""),f=async()=>{if(e){s(!0),u("");try{const y=await fetch(`/api/projects/${e.id}/skills`);if(!y.ok)throw new Error("Failed to load skills");const x=await y.json();i(x)}catch(y){u(y.message)}finally{s(!1)}}};X.useEffect(()=>{f()},[e?.id]);const d=async y=>{if(e){o(y);try{const x=await fetch(`/api/projects/${e.id}/skills/${y}`,{method:"POST"});if(!x.ok){const S=await x.json();throw new Error(S.detail||"Failed to install")}await f()}catch(x){u(x.message)}finally{o(null)}}},m=async y=>{if(e){o(y);try{const x=await fetch(`/api/projects/${e.id}/skills/${y}`,{method:"DELETE"});if(!x.ok){const S=await x.json();throw new Error(S.detail||"Failed to uninstall")}await f()}catch(x){u(x.message)}finally{o(null)}}},v=new Set(n?.installed.map(y=>y.id)||[]);return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[600px] max-w-[95vw] max-h-[80vh] flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border)]",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ig,{size:20,className:"text-[var(--accent)]"}),g.jsx("h2",{className:"text-lg font-semibold",children:"Skills"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:f,className:"p-2 hover:bg-[var(--bg-tertiary)] rounded transition-colors",title:"Refresh",children:g.jsx(Ti,{size:16,className:r?"animate-spin":""})}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-[var(--bg-tertiary)] rounded transition-colors",children:g.jsx(li,{size:20})})]})]}),c&&g.jsx("div",{className:"px-4 py-2 bg-red-900/30 text-red-200 text-sm",children:c}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r?g.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"Loading skills..."}):n?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("h3",{className:"text-sm font-medium text-[var(--text-secondary)] mb-3 flex items-center gap-2",children:[g.jsx(_f,{size:14}),"Installed (",n.installed.length,")"]}),n.installed.length===0?g.jsx("div",{className:"text-sm text-[var(--text-secondary)] italic",children:"No skills installed"}):g.jsx("div",{className:"space-y-2",children:n.installed.map(y=>g.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[var(--bg-tertiary)] rounded-lg",children:[g.jsx(ig,{size:18,className:"text-green-500 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"font-medium",children:y.name}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)] truncate",children:y.description})]}),g.jsx("button",{onClick:()=>m(y.id),disabled:a===y.id,className:"p-2 hover:bg-red-900/30 text-red-400 rounded transition-colors disabled:opacity-50",title:"Uninstall",children:a===y.id?g.jsx(Ti,{size:16,className:"animate-spin"}):g.jsx(Ji,{size:16})})]},y.id))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-sm font-medium text-[var(--text-secondary)] mb-3 flex items-center gap-2",children:[g.jsx(D$,{size:14}),"Available"]}),g.jsx("div",{className:"space-y-2",children:n.available.filter(y=>!v.has(y.id)).length===0?g.jsx("div",{className:"text-sm text-[var(--text-secondary)] italic",children:"All skills are installed"}):n.available.filter(y=>!v.has(y.id)).map(y=>g.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[var(--bg-tertiary)] rounded-lg",children:[g.jsx(ig,{size:18,className:"text-[var(--text-secondary)] flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"font-medium",children:y.name}),g.jsx("div",{className:"text-xs text-[var(--text-secondary)] truncate",children:y.description})]}),g.jsx("button",{onClick:()=>d(y.id),disabled:a===y.id,className:"flex items-center gap-1 px-3 py-1.5 bg-[var(--accent)] hover:opacity-90 rounded text-sm font-medium disabled:opacity-50 transition-opacity",children:a===y.id?g.jsx(Ti,{size:14,className:"animate-spin"}):g.jsxs(g.Fragment,{children:[g.jsx(D$,{size:14}),"Install"]})})]},y.id))})]})]}):g.jsx("div",{className:"text-center py-8 text-[var(--text-secondary)]",children:"No skills data"})}),g.jsxs("div",{className:"p-4 border-t border-[var(--border)] text-xs text-[var(--text-secondary)]",children:["Skills are installed to ",g.jsx("code",{className:"bg-[var(--bg-tertiary)] px-1 rounded",children:".claude/skills/"})," in your project"]})]})})}const tg="cc-ide-view",l2="cc-ide-project",KB="cc-ide-tab",JB="cc-ide-sidebar",e6="cc-ide-sidebar-width",t6="cc-ide-chat-width",n6="cc-ide-terminal",i6="cc-ide-terminal-height";function rQe(){const[t,e]=X.useState(()=>{const ae=localStorage.getItem(tg);return ae==="ide"||ae==="dashboard"?ae:"dashboard"}),[n,i]=X.useState(()=>{const ae=localStorage.getItem(KB);return ae==="monitor"||ae==="editor"?ae:"editor"}),[r,s]=X.useState("monitor"),[a,o]=X.useState(!1),[c,u]=X.useState(!1),[f,d]=X.useState(!1),[m,v]=X.useState(()=>localStorage.getItem(JB)!=="false"),[y,x]=X.useState(()=>{const ae=localStorage.getItem(e6);return ae?parseInt(ae):220}),[S,_]=X.useState(()=>{const ae=localStorage.getItem(t6);return ae?parseInt(ae):340}),[Q,k]=X.useState(()=>localStorage.getItem(n6)==="true"),[T,E]=X.useState(()=>{const ae=localStorage.getItem(i6);return ae?parseInt(ae):200}),C=X.useRef(null),P=X.useRef(null),[L,B]=X.useState(null),N=wd(),{fetchProjects:M,fetchSettings:$,activeProject:I,selectProject:j}=Ei(),{fetchFileTree:D}=qO(),{connect:R,disconnect:W}=Ou(),{activeSession:U,restoreSession:G,isStreaming:q}=Qd();X.useEffect(()=>((async()=>{await M(),await $();const _e=localStorage.getItem(l2);if(localStorage.getItem(tg)==="ide"&&_e)try{await j(_e)}catch{e("dashboard"),localStorage.removeItem(l2),localStorage.setItem(tg,"dashboard")}d(!0)})(),R(),()=>W()),[]),X.useEffect(()=>{localStorage.setItem(tg,t)},[t]),X.useEffect(()=>{localStorage.setItem(KB,n)},[n]),X.useEffect(()=>{localStorage.setItem(JB,m.toString())},[m]),X.useEffect(()=>{localStorage.setItem(e6,y.toString())},[y]),X.useEffect(()=>{localStorage.setItem(t6,S.toString())},[S]),X.useEffect(()=>{localStorage.setItem(n6,Q.toString())},[Q]),X.useEffect(()=>{localStorage.setItem(i6,T.toString())},[T]),X.useEffect(()=>{I&&(localStorage.setItem(l2,I.id),D(I.root_path))},[I]),X.useEffect(()=>{const ae=_e=>{_e.detail.sessionId===U&&!q&&G()};return window.addEventListener("session-file-updated",ae),()=>{window.removeEventListener("session-file-updated",ae)}},[U,G,q]);const V=X.useCallback(ae=>{ae.preventDefault(),C.current={startX:ae.clientX,startWidth:y},B("sidebar")},[y]),F=X.useCallback(ae=>{if(!C.current)return;const _e=ae.clientX-C.current.startX,ke=Math.max(150,Math.min(500,C.current.startWidth+_e));x(ke)},[]),z=X.useCallback(()=>{C.current=null,B(null)},[]),H=X.useCallback(ae=>{ae.preventDefault(),P.current={startX:ae.clientX,startWidth:S},B("chat")},[S]),K=X.useCallback(ae=>{if(!P.current)return;const _e=P.current.startX-ae.clientX,ke=Math.max(250,Math.min(600,P.current.startWidth+_e));_(ke)},[]),ee=X.useCallback(()=>{P.current=null,B(null)},[]);X.useEffect(()=>{if(L==="sidebar")return document.addEventListener("mousemove",F),document.addEventListener("mouseup",z),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",z)};if(L==="chat")return document.addEventListener("mousemove",K),document.addEventListener("mouseup",ee),()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",ee)}},[L,F,z,K,ee]);const ie=async ae=>{await j(ae),e("ide")},le=()=>{e("dashboard")};return!f&&t==="ide"?g.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-[var(--bg-primary)]",children:g.jsx("div",{className:"text-[var(--text-secondary)]",children:"Loading..."})}):t==="dashboard"?g.jsx(tye,{onEnterProject:ie}):N?g.jsxs("div",{className:"fixed inset-0 flex flex-col overflow-hidden",children:[g.jsx(X$,{onSettingsClick:()=>o(!0),onSkillsClick:()=>u(!0),onBackClick:le,activeTab:n,onTabChange:i,isMobile:!0}),g.jsxs("div",{className:"flex-1 min-h-0 overflow-hidden",style:{paddingBottom:"56px"},children:[r==="files"&&g.jsx(Z$,{width:"100%",onFileOpen:()=>s("editor")}),r==="editor"&&g.jsx("div",{className:"h-full w-full overflow-hidden",children:g.jsx(EM,{})}),r==="monitor"&&g.jsx("div",{className:"h-full w-full overflow-hidden",children:g.jsx(FB,{})}),r==="chat"&&g.jsx(g3,{width:"100%"})]}),g.jsx(iQe,{activeTab:r,onTabChange:s}),a&&g.jsx(r6,{onClose:()=>o(!1)}),c&&g.jsx(GB,{onClose:()=>u(!1)})]}):g.jsxs("div",{className:`h-screen w-screen flex flex-col overflow-hidden ${L?"select-none":""}`,children:[g.jsx(X$,{onSettingsClick:()=>o(!0),onSkillsClick:()=>u(!0),onBackClick:le,activeTab:n,onTabChange:i,isMobile:!1}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n==="editor"?g.jsxs(g.Fragment,{children:[!m&&g.jsx("button",{onClick:()=>v(!0),className:"h-full w-8 flex items-center justify-center bg-[var(--bg-secondary)] border-r border-[var(--border)] hover:bg-[var(--bg-tertiary)] transition-colors",title:"Show sidebar",children:g.jsx(yG,{size:16,className:"text-[var(--text-secondary)]"})}),m&&g.jsxs("div",{className:"flex h-full",style:{width:y},children:[g.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[g.jsx("div",{className:"flex-1 overflow-hidden",children:g.jsx(Z$,{width:"100%"})}),g.jsx("button",{onClick:()=>v(!1),className:"h-6 flex items-center justify-center bg-[var(--bg-secondary)] border-r border-t border-[var(--border)] hover:bg-[var(--bg-tertiary)] transition-colors flex-shrink-0",title:"Hide sidebar",children:g.jsx(OG,{size:14,className:"text-[var(--text-secondary)]"})})]}),g.jsx("div",{className:"w-1 cursor-col-resize hover:bg-[var(--accent)] transition-colors flex-shrink-0",onMouseDown:V,style:{backgroundColor:L==="sidebar"?"var(--accent)":void 0}})]}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsx(EM,{}),Q&&g.jsx(Ode,{height:T,onClose:()=>k(!1),onHeightChange:E})]})]}):g.jsx(FB,{}),g.jsx("div",{className:"w-1 cursor-col-resize hover:bg-[var(--accent)] transition-colors flex-shrink-0",onMouseDown:H,style:{backgroundColor:L==="chat"?"var(--accent)":void 0}}),g.jsx(g3,{width:S})]}),n==="editor"&&g.jsx("div",{className:"h-6 flex items-center px-2 bg-[var(--bg-secondary)] border-t border-[var(--border)]",children:g.jsxs("button",{onClick:()=>k(!Q),className:`flex items-center gap-1 px-2 py-0.5 text-xs rounded transition-colors ${Q?"bg-[var(--accent)] text-white":"text-[var(--text-secondary)] hover:text-white hover:bg-[var(--bg-tertiary)]"}`,title:Q?"Hide terminal":"Show terminal",children:[g.jsx(IG,{size:12}),g.jsx("span",{children:"Terminal"})]})}),a&&g.jsx(r6,{onClose:()=>o(!1)}),c&&g.jsx(GB,{onClose:()=>u(!1)})]})}function r6({onClose:t}){const{settings:e,updateSettings:n}=Ei();return e?g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-lg w-[400px]",children:[g.jsxs("div",{className:"p-4 border-b border-[var(--border)] flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Settings"}),g.jsx("button",{onClick:t,className:"text-[var(--text-secondary)] hover:text-white",children:""})]}),g.jsxs("div",{className:"p-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Theme"}),g.jsxs("select",{value:e.theme,onChange:i=>n({theme:i.target.value}),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm",children:[g.jsx("option",{value:"dark",children:"Dark"}),g.jsx("option",{value:"light",children:"Light"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Editor Font Size"}),g.jsx("input",{type:"number",value:e.editor_font_size,onChange:i=>n({editor_font_size:parseInt(i.target.value)}),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tab Size"}),g.jsx("input",{type:"number",value:e.editor_tab_size,onChange:i=>n({editor_tab_size:parseInt(i.target.value)}),className:"w-full px-3 py-2 bg-[var(--bg-tertiary)] border border-[var(--border)] rounded text-sm"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",id:"autoSave",checked:e.auto_save,onChange:i=>n({auto_save:i.target.checked}),className:"rounded"}),g.jsx("label",{htmlFor:"autoSave",className:"text-sm",children:"Auto-save files"})]})]}),g.jsx("div",{className:"p-4 border-t border-[var(--border)]",children:g.jsx("button",{onClick:t,className:"w-full py-2 bg-[var(--accent)] rounded text-sm font-medium",children:"Close"})})]})}):null}PY.createRoot(document.getElementById("root")).render(g.jsx(X.StrictMode,{children:g.jsx(rQe,{})}));
